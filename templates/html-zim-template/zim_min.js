// ZIM NFT - Interactive Media framework at https://zimjs.com - code creativity!
// See https://zimjs.com/distill to minify only the functions in your app
// See https://zimjs.com/crystal to load multiple scripts with one script call
// (c) 2021 ZIM - free to use - donations welcome! https://zimjs.com/donate

"undefined"==typeof window&&(window={});var zon,zns,zimDefaultFrame=window.zimDefaultFrame,zdf=window.zdf,createjs=window.createjs,OPTIMIZE=window.OPTIMIZE,ACTIONEVENT=window.ACTIONEVENT,KEYFOCUS=window.KEYFOCUS,TIMECHECK=window.TIMECHECK,TIME=window.TIME,STYLE=window.STYLE,MOBILE=window.MOBILE,LOCALSTORAGE=window.LOCALSTORAGE,GET=window.GET,POST=window.POST,SOCKET=window.SOCKET,FIT=window.FIT,FILL=window.FILL,FULL=window.FULL,zimContactListener=window.zimContactListener,zimDefaultPhysics=window.zimDefaultPhysics,b2ContactListener=window.b2ContactListener,b2Vec2=window.b2Vec2;void 0===zon&&(zon=!0),void 0===zns&&(zns=!1);var zog=zon?console.log.bind(console):function(){},zogStyle=" border:thin solid black; color: black",zogg=zon?console.log.bind(console,"%c Z ","background: #acd241;"+zogStyle):function(){},zogp=zon?console.log.bind(console,"%c Z ","background: #e472c4;"+zogStyle):function(){},zogb=zon?console.log.bind(console,"%c Z ","background: #50c4b7;"+zogStyle):function(){},zogr=zon?console.log.bind(console,"%c Z ","background: #fb4758;"+zogStyle):function(){},zogy=zon?console.log.bind(console,"%c Z ","background: #ebcb35;"+zogStyle):function(){},zogo=zon?console.log.bind(console,"%c Z ","background: #f58e25;"+zogStyle):function(){},zogl=zon?console.log.bind(console,"%c Z ","background: #eeeeee;"+zogStyle):function(){},zogd=zon?console.log.bind(console,"%c Z ","background: #444444; border:thin solid black; color: white"):function(){};function zid(e){return z_d("1"),document.getElementById(e)}function zss(e){if(z_d("2"),document.getElementById(e))return document.getElementById(e).style;zon&&zogy("zss(): id not found")}function zgo(e,t,o,n,r,i){if(z_d("3"),!(zot(t)&&""!=t||"_self"==t)){var a="";return o&&(a+="width="+o+","),n&&(a+="height="+n+","),r&&(a+="fullscreen=yes,"),i&&(a+="modal=yes,alwaysRaised=yes"),window.open(e,t,a)}window.location.href=e}function zum(e){if(z_d("4"),!zot(e))return Number(String(e).replace(/[^\d\.\-]/g,""))}function zot(e){return null==e}function zop(e){z_d("5"),zot(e)||(e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0))}function zil(){z_d("6");function e(e){(e=e||event).keyCode&&32<=e.keyCode&&e.keyCode<=40&&e.preventDefault()}function t(e){(e=e||event).preventDefault()}var o=t;return window.addEventListener("keydown",e,{passive:!1}),window.addEventListener("wheel",t,{passive:!1}),window.addEventListener("DOMMouseScroll",o,{passive:!1}),[e,t,o]}function zet(r){return z_d("6.1"),new function(){var a=this;this.on=function(e,t){if(!(zot(r)||zot(e)||zot(t)))for(var o=a.tags,n=0;n<o.length;n++)o[n].addEventListener(e,t)},this.off=function(e,t){if(!(zot(r)||zot(e)||zot(t)))for(var o=a.tags,n=0;n<o.length;n++)o[n].removeEventListener(e,t)},Object.defineProperty(a,"tags",{get:function(){return zot(r)?[]:"string"==typeof r||r instanceof String?document.querySelectorAll(r):"string"==typeof r.innerHTML?[r]:[]},set:function(){}}),this.css=function(e,t){for(var o=a.tags,n=0;n<o.length;n++)if(1==arguments.length&&e.constructor==={}.constructor)for(var r in e)o[n].style[r]=e[r];else{if(1==arguments.length)return a.tags[0].style[e];o[n].style[e]=t}},this.prop=function(e,t){if(!zot(e)){for(var o=a.tags,n=[],r=0;r<o.length;r++)if(zot(t))if(e.constructor==={}.constructor)for(var i in e)o[r][i]=e[i];else n.push(o[r][e]);else o[r][e]=t;return zot(t)?n:void 0}}}}function isDUO(e){return 1==e.length&&null!=e[0]&&e[0].constructor==={}.constructor}function zob(e,t,o,n){var r=zim&&(zim.ZIMONON||ZIMONON);if(isDUO(t)){z_d("7");for(var i,a=t[0],l=(zot(o)?e.toString().split(/\n/,1)[0].match(/\((.*)\)/)[1]:o).replace(/\s+/g,"").split(","),s=[],c=0;c<l.length;c++)i=l[c].split("=")[0],l[c]=i,s.push(a[i]);for(c in a)l.indexOf(c)<0&&zon&&zogy(e,"bad argument "+c);return!(o=e.prototype.isPrototypeOf(n)?new(e.bind.apply(e,[null].concat(s))):e.apply(null,s))||(r&&!o.arguments&&(o.arguments=[a]),o)}r&&n&&t&&zot(n.arguments)&&(n.arguments=Array.prototype.slice.call(t))}function zik(e){if(z_d("7.5"),z_d("17.6"),!zot(e))return zim.Pick.choose(e)}var ignore,zta=console.table&&zon?console.table.bind(console):function(){},zor=function(){for(var e=0;e<arguments.length;e++)if(!zot(arguments[e]))return arguments[e]};function z_d(e){zim&&(zim.DISTILL||window.DISTILL)&&zim.distillery.push(e)}function zimify(n,e){if(z_d("83.3"),n&&n.noDrag)return n;var t,o={drag:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f){return isDUO(arguments)?(e.obj=this,zim.drag(e)):zim.drag(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f)},noDrag:function(e){return zim.noDrag(this,e)},mouse:function(){return zim.mouse(this)},noMouse:function(){return zim.noMouse(this)},effect:function(e,t,o,n,r){return zim.effect(this,e,t,o,n,r)},noEffect:function(e,t){return zim.noEffect(this,e,t)},updateEffects:function(e){return zim.updateEffects(this,e)},wire:function(e,t,o,n,r,i,a){return isDUO(arguments)?(e.source=this,zim.wire(e)):zim.wire(this,e,t,o,n,r,i,a)},noWire:function(e,t,o){return isDUO(arguments)?(e.source=this,zim.noWire(e)):zim.noWire(this,e,t,o)},wired:function(e,t,o,n,r,i,a){return isDUO(arguments)?(e.target=this,zim.wired(e)):zim.wired(this,e,t,o,n,r,i,a)},noWired:function(e,t,o){return isDUO(arguments)?(e.target=this,zim.noWired(e)):zim.noWired(this,e,t,o)},bind:function(e,t,o,n,r){return isDUO(arguments)?(e.obj=this,zim.bind(e)):zim.bind(this,e,t,o,n,r)},noBind:function(e,t,o,n){return isDUO(arguments)?(e.obj=this,zim.noBind(e)):zim.noBind(this,e,t,o,n)},dragBoundary:function(e){return zim.dragBoundary(this,e)},dragRect:function(e){return zim.dragBoundary(this,e)},transform:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P){return isDUO(arguments)?(e.obj=this,zim.transform(e)):zim.transform(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P)},setSwipe:function(e){return zim.setSwipe(this,e)},gesture:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p){return isDUO(arguments)?(e.obj=this,zim.gesture(e)):zim.gesture(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p)},noGesture:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.noGesture(e)):zim.noGesture(this,e,t,o)},gestureBoundary:function(e,t){return zim.gestureBoundary(this,e,t)},gestureRect:function(e,t){return zim.gestureBoundary(this,e,t)},addPhysics:function(e,t,o,n,r,i,a,l,s,c,u){return isDUO(arguments)?(e.obj=this,zim.addPhysics(e)):zim.addPhysics(this,e,t,o,n,r,i,a,l,s,c,u)},removePhysics:function(){return zim.removePhysics(this)},hitTestPoint:function(e,t,o){return zim.hitTestPoint(this,e,t,o)},hitTestReg:function(e,t){return zim.hitTestReg(this,e,t)},hitTestRect:function(e,t,o){return zim.hitTestRect(this,e,t,o)},hitTestCircle:function(e,t,o){return zim.hitTestCircle(this,e,t,o)},hitTestCircleRect:function(e,t){return zim.hitTestCircleRect(this,e,t)},hitTestCircles:function(e,t){return zim.hitTestCircles(this,e,t)},hitTestBounds:function(e,t,o){return zim.hitTestBounds(this,e,t,o)},boundsToGlobal:function(e,t,o,n){return zim.boundsToGlobal(this,e,t,o,n)},resetBounds:function(e,t,o,n){return zim.resetBounds(this,e,t,o,n)},hitTestPath:function(e,t,o){return zim.hitTestPath(this,e,t,o)},hitTestGrid:function(e,t,o,n,r,i,a,l,s,c,u,d){return zim.hitTestGrid(this,e,t,o,n,r,i,a,l,s,c,u,d)},animate:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L,_,Y,D,X,R,W,F,H,V,N,G,q,U,Q,Z,K){return e&&(e.props||e.obj)&&isDUO(arguments)?(e.target=this,zim.animate(e)):zim.animate(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L,_,Y,D,X,R,W,F,H,V,N,G,q,U,Q,Z,K)},pauseAnimate:function(){return this},stopAnimate:function(){return this},wiggle:function(e,t,o,n,r,i,a,l,s,c,u,d,h,g){return isDUO(arguments)?(e.target=this,zim.wiggle(e)):zim.wiggle(this,e,t,o,n,r,i,a,l,s,c,u,d,h,g)},loop:function(e,t,o,n,r){return zim.loop(this,e,t,o,n,r)},copyMatrix:function(e){return zim.copyMatrix(this,e)},duplicate:function(e){return zim.duplicate(this,e)},cur:function(e){return zim.cur(this,e)},sha:function(e,t,o,n){return zim.sha(this,e,t,o,n)},pos:function(e,t,o,n,r,i,a,l,s,c){return isDUO(arguments)?(e.obj=this,zim.pos(e)):zim.pos(this,e,t,o,n,r,i,a,l,s,c)},loc:function(e,t,o,n,r,i,a){return isDUO(arguments)?(e.obj=this,zim.loc(e)):zim.loc(this,e,t,o,n,r,i,a)},mov:function(e,t){return isDUO(arguments)?(e.obj=this,zim.mov(e)):zim.mov(this,e,t)},top:function(){return zim.top(this)},bot:function(){return zim.bot(this)},ord:function(e){return zim.ord(this,e)},dep:function(e){return zim.dep(this,e)},nam:function(e){return zim.nam(this,e)},alp:function(e){return zim.alp(this,e)},vis:function(e){return zim.vis(this,e)},ble:function(e){return zim.ble(this,e)},hov:function(e,t){return zim.hov(this,e,t)},rot:function(e,t,o){return zim.rot(this,e,t,o)},siz:function(e,t,o){return zim.siz(this,e,t,o)},ske:function(e,t){return zim.ske(this,e,t)},reg:function(e,t,o){return zim.reg(this,e,t,o)},sca:function(e,t){return zim.sca(this,e,t)},scaleTo:function(e,t,o,n,r){return isDUO(arguments)?(e.obj=this,zim.scaleTo(e)):zim.scaleTo(this,e,t,o,n,r)},fit:function(e,t,o,n,r){return isDUO(arguments)?(e.obj=this,zim.fit(e)):zim.fit(this,e,t,o,n,r)},outline:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.outline(e)):zim.outline(this,e,t,o)},addTo:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.addTo(e)):zim.addTo(this,e,t,o)},removeFrom:function(e){return zim.removeFrom(this,e)},added:function(e,t,o){return zim.added(this,e,t,o)},movement:function(e,t){return zim.movement(this,e,t)},noMovement:function(){return zim.noMovement(this)},tap:function(e,t,o,n,r,i,a,l,s){return isDUO(arguments)?(e.obj=this,zim.tap(e)):zim.tap(this,e,t,o,n,r,i,a,l,s)},noTap:function(){return zim.noTap(this)},hold:function(e,t,o,n){return zim.hold(this,e,t,o,n)},noHold:function(){return zim.noHold(this)},change:function(e,t){return zim.change(this,e,t)},noChange:function(){return zim.noChange(this)},centerReg:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.centerReg(e)):zim.centerReg(this,e,t,o)},center:function(e,t,o){return isDUO(arguments)?(e.obj=this,zim.center(e)):zim.center(this,e,t,o)},place:function(e){return zim.place(this,e)},placeReg:function(e){return zim.placeReg(this,e)},expand:function(e,t,o,n){return isDUO(arguments)?(e.obj=this,zim.expand(e)):zim.expand(this,e,t,o,n)},setMask:function(e,t){return zim.setMask(this,e,t)},cloneProps:function(e){return e.type=this.type,e.group=this.group,e.style=this.style,e.alpha=this.alpha,e.rotation=this.rotation,e.mouseEnabled=this.mouseEnabled,e.mouseChildren=this.mouseChildren,e.tickEnabled=this.tickEnabled,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.skewX=this.skewX,e.skewY=this.skewY,e.name&&(e.name=this.name),e.regX=this.regX*e.width/(this.width||1),e.regY=this.regY*e.height/(this.height||1),e.visible=this.visible,e.shadow=this.shadow,this.type&&"Shape"!=this.type||zim.copyMatrix(e,this),e.compositeOperation=this.compositeOperation,e.snapToPixel=this.snapToPixel,e.filters=null==this.filters?null:this.filters.slice(0),e.mask=this.mask,e.hitArea=this.hitArea,this.type&&"Shape"!=this.type&&"Blob"!=this.type&&"Squiggle"!=this.type||!this._bounds||e.setBounds(this._bounds.x,this._bounds.y,this._bounds.width,this._bounds.height),e},cloneChildren:function(e,t){e.children.length&&e.removeAllChildren();for(var o=e.children,n=0,r=this.children.length;n<r;n++){var i=this.children[n].clone(t);i.parent=e,o.push(i)}return e}};if(!zot(e)){var r,e=[];for(r in o)e.push(r);return e}for(t in o)o.hasOwnProperty(t)&&(n[t]=o[t]);return zim&&(n.cjsLocalToGlobal=n.localToGlobal,n.cjsGlobalToLocal=n.globalToLocal,n.cjsLocalToLocal=n.localToLocal,n.localToGlobal=function(e,t){return zim.localToGlobal(e,t,n,n.cjsLocalToGlobal)},n.globalToLocal=function(e,t){return zim.globalToLocal(e,t,n,n.cjsGlobalToLocal)},n.localToLocal=function(e,t,o){return zim.localToLocal(e,t,o,n)},n.hueBatch||zim.displayBase(n)),n}function zimplify(e){z_d("83.35"),document.Window=Window,document.Blob=Blob,ignore="ignore",zot(e)&&(e=[]),Array.isArray(e)||(e=[e]);var t,o=zimify(null,!0),n=["loop","stopAnimate","pauseAnimate","animate","wiggle","wire","wired"];for(t in zim)(-1==o.indexOf(t)||0<=n.indexOf(t))&&-1==e.indexOf(t)&&(window[t]=zim[t])}(zim=function(To){function Ao(e,t,o,n,r){To.timeCheck||(z_d("9.99"),To.timeCheck=!0);var i=zot(TIME)?zot(To.TIME)?"seconds":To.TIME:TIME;return i&&i.toLowerCase&&(i=i.toLowerCase()),"milliseconds"!=i&&"ms"!=i&&(i="seconds"),t&&t.toLowerCase&&(t=t.toLowerCase()),"ms"!=t&&"milliseconds"!=t&&"seconds"!=t&&"s"!=t||(i=t),zot(e)?i.charAt(0):("ms"==i&&(i="milliseconds"),"s"==i&&(i="seconds"),i=i.charAt(0),r||Po(e,i,o,n),i)}function Po(e,t,o,n){zot(o)&&(o=10),zot(n)&&(n=9),(To.TIMECHECK||TIMECHECK)&&("m"!=t&&o<e||"m"==t&&e<n)&&zon&&zogy("TIME - warning: time is in "+("m"==t?"milliseconds":"seconds")+" ("+e+")")}if(To.chop=function(o,e,t,n,r){if(z_d("7.8"),!zot(o)){zot(e)&&(e=3),zot(t)&&(t=3),zot(n)&&(n=!0),zot(r)&&(r=0);var i=o.width/e,a=o.height/t,l=r,s=[];return To.loop(t,function(t){To.loop(e,function(e){e=new To.Bitmap(o,i+2*l,a+2*l,e*i-l,t*a-l);0!=r&&(e.setBounds(l,l,i,a),e.regX=l,e.regY=l),s.push(e)})}),n?new To.Tile(s,e,t,0,0,!0):s}},To.shuffle=function(e){if(z_d("8"),!zot(e)){var t,o,n=e.length;if(0==n)return e;for(;--n;)t=Math.floor(Math.random()*(n+1)),o=e[n],e[n]=e[t],e[t]=o;return e}},To.rand=function(e,t,o,n){return z_d("9"),zot(e)&&zot(t)?Math.random():((zot(e)||isNaN(e))&&(e=0),(zot(t)||isNaN(t))&&(t=0),e%1==0&&t%1==0||(o=!1),zot(o)&&(o=!0),n&&.5<Math.random()&&(e*=-1,t*=-1),o&&(t<e?e++:e<t&&t++),0==e&&0==t?0:(t=0==t?Math.random()*e:Math.min(e,t)+Math.random()*(Math.max(e,t)-Math.min(e,t)),o?Math.floor(t):t))},To.series=function(){var r,t;if(z_d("13.61"),0==arguments.length)return function(){};1==arguments.length&&Array.isArray(arguments[0])?r=arguments[0]:1==arguments.length&&arguments[0].constructor=={}.constructor?(zot((t=arguments[0]).min)&&(t.min=0),zot(t.max)&&(t.max=1),zot(t.step)&&(t.step=1),r=[],To.loop(Math.floor(Math.abs(t.max-t.min)+t.step),function(e){r.push(e+t.min)},null,t.step),t=null):r=Array.prototype.slice.call(arguments);function o(e,t){if(c&&u%c!=0)return u++,i;u++;var o=r.length,n=r[(10*o+a)%o];return d?0<l&&o<=a+l*s?(l=-1,a=o-1-(a+s-(o-1))):l<0&&a+l*s<0?(l=1,a=s-a):a+=l*s:h?0<l&&o<=a+l*s?a=o-1:l<0&&a+l*s<0?a=0:a+=l*s:a+=l*s,i=n,!To.isPick(n)||n.noPick&&t?n:To.Pick.choose(n)}var i,a=0,l=1,s=1,c=0,u=0,d=!1,h=!1;return o.array=r,o.type="series",Object.defineProperty(o,"index",{get:function(){var e=r.length;return(10*e+a)%e},set:function(e){a=e}}),o.jump=function(e){return a=e,o},o.reverse=function(e){return zot(e)&&(e=!0),l=e?-1:1,a=r.length-1,o},o.bounce=function(e){zot(e)&&(e=!0);var t=r.length;return a=(10*t+a)%t,d=e,o},o.step=function(e){return zot(e)&&(e=1),s=Math.floor(e),o},o.every=function(e){return zot(e)&&(e=1),c=Math.abs(e),u=0,o},o.constrain=function(e){return zot(e)&&(e=!0),h=e,o},o},To.makeSeries=function(e){if(z_d("13.6"),zot(e))return function(){};function t(){return e[o++%e.length]}var o=0;return t.array=e,t},To.loop=function(e,t,o,n,r,i){var a;if(a=zob(To.loop,arguments,"obj, call, reverse, step, start, end"))return a;if(z_d("9.5"),!zot(e)&&!zot(t)){zot(o)&&(o=!1),(zot(n)||n<=0)&&(n=1);var l="number"==typeof e?"number":e.constructor===Array?"array":e.constructor==={}.constructor?"object":"string"==typeof e?"string":e instanceof NodeList?"nodelist":e instanceof HTMLCollection?"htmlcollection":"invalid";if("invalid"!=l){if("number"==l||"string"==l||"array"==l||"nodelist"==l||"htmlcollection"==l){if(0==(c=g((u="number"==l?e:e.length)-1)))return!0;if(o){for(var s=r;i<=s;s-=n)if(void 0!==(h="number"==l?t(s,c,r,i,e):t("array"==l||"string"==l?e[s]:e.item(s),s,c,r,i,e)))return h}else for(s=r;s<=i;s+=n)if(void 0!==(h="number"==l?t(s,c,r,i,e):t("array"==l||"string"==l?e[s]:e.item(s),s,c,r,i,e)))return h;return!0}if("object"==l){var c,u=0,d=[];for(s in e)u++,d.push(s);if(0!=(c=g(u-1))){if(o){for(s=r;i<=s;s-=n)if(void 0!==(h=t(d[s],e[d[s]],s,c,r,i,e)))return h}else for(var h,s=r;s<=i;s+=n)if(void 0!==(h=t(d[s],e[d[s]],s,c,r,i,e)))return h;return!0}}}}function g(e){return zot(r)&&(r=o?e:0),zot(i)&&(i=o?0:e),o&&r<i||!o&&i<r||(r<0&&i)<0||e<r&&e<i?0:(r=Math.max(0,Math.min(r,e)),i=Math.max(0,Math.min(i,e)),Math.floor((o?r-i:i-r)/n)+1)}},To.timeout=function(t,o,e,n){var r;if(r=zob(To.timeout,arguments,"time, call, pauseOnBlur, timeUnit",this))return r;if(z_d("9.7"),!zot(o)&&"function"==typeof o){var i=Ao(t,n);zot(t)&&(t="s"==i?1:1e3),t=To.Pick.choose(t);var a={startTime:Date.now(),time:0,paused:!1,done:!1,timeUnit:n};e&&(zot(To.blurCheck)&&To.setBlurDetect(),To.pauseOnBlur.push(a));var l=a.startTime;return a.pause=function(e,t,o){zot(e)&&(e=!0),e?cancelAnimationFrame(a.rid):(t?l=0:o?(l=Date.now(),a.time=0):l=Date.now(),s()),a.paused=e},a.clear=function(){for(var e in a&&cancelAnimationFrame(a.rid),a)delete a[e];a.pause=function(){},a.clear=function(){}},s(),a}function s(){var e=Date.now();if(a.time+=(e-l)/("s"==i?1e3:1),l=e,a.time>=t)return a.done=!0,o(a),void a.clear();a.rid=requestAnimationFrame(s)}},To.interval=function(e,n,t,o,r,i){var a;if(a=zob(To.interval,arguments,"time, call, total, immediate, pauseOnBlur, timeUnit",this))return a;if(z_d("9.8"),!zot(n)&&"function"==typeof n){var l=Ao(e,i);if(zot(e)&&(e="s"==l?1:1e3),zot(o)&&(o=!1),zot(t)||!(isNaN(t)||t<=0)){zot(t)&&(t=-1);var s,c={count:0,total:t,paused:!1,time:e,active:!0,timeUnit:i};return r&&(zot(To.blurCheck)&&To.setBlurDetect(),To.pauseOnBlur.push(c)),o&&setTimeout(function(){n(c),d()},10),c.pause=function(e,t,o){zot(e)&&(e=!0),e?(clearTimeout(s),clearTimeout(c.id),cancelAnimationFrame(c.rid),c.pauseTimeLeft=c.interval-(Date.now()-c.startTime)/("s"==l?1e3:1)):(c.paused||c.pause(!0),s=setTimeout(function(){c.count++,n(c),u(),d()},t?0:(o?c.interval:c.pauseTimeLeft)*("s"==l?1e3:1)),c.pauseTimeLeft=null),c.paused=e},c.clear=function(){c.active=!1,clearTimeout(s),cancelAnimationFrame(c.rid),clearTimeout(c.id);var e,t=c.count;for(e in c)delete c[e];c.active=!1,c.count=t,c.pause=function(){},c.clear=function(){}},u(),c}}function u(){c.startTime=Date.now(),c.interval=To.Pick.choose(c.time),c.id=setTimeout(function(){c.paused||c.active&&(c.count++,n(c),u(),d())},c.interval*("s"==l?1e3:1))}function d(){-1!=t&&c.count>=(o?c.total-1:c.total)&&c.clear()}},To.async=function(e,t,o,n,r){var i,a,l,s,c,u;z_d("29"),zot(e)||(i=document.createElement("script"),a=Ao(n),zot(n)&&(n="s"==a?2:2e3),t?(l=o||t.toString().split(/\n/,1)[0].match(/^function\s?([^\s(]*)/)[1],To.asyncList||(To.asyncList={}),To.asyncList[l]||(To.asyncList[l]=[]),To.asyncList[l].push(t),To.async[l]=(s=i,c=!1,u=setTimeout(function(){c=r,"function"==typeof t&&t("asyncError",r?"cancelled":"timeout")},n*("s"==a?1e3:1)),function(e){clearTimeout(u),To.asyncList[l]&&(t=To.asyncList[l].shift()),"function"!=typeof t||c||t(e),s&&s.parentNode.removeChild(s),s=null})):(To.async.z_s&&To.async.z_s.parentNode&&To.async.z_s.parentNode.removeChild(To.async.z_s),To.async.z_s=i),e.match(/\?/)||(e+="?"),i.setAttribute("src",e+"&r="+Math.random()),document.getElementsByTagName("head")[0].appendChild(i))},To.couple=function(e){if(z_d("29.2"),!To.isJSON(e))return e;var t,o=JSON.parse(e),n={};for(t in o){var r,i=o[t];for(r in i)n[t+"_"+r]=i[r]}return JSON.stringify(n)},To.decouple=function(e){if(z_d("29.3"),!To.isJSON(e))return e;var t,o=JSON.parse(e),n={};for(t in o){var r=t.split("_",2);if(2!=r.length)return e;n[r[0]]||(n[r[0]]={}),n[r[0]][r[1]]=o[t]}return JSON.stringify(n)},To.convertColor=function(e,t,o){if(To.convertColorCheck||(z_d("27.5"),To.convertColorCheck=!0),zot(t)&&(t="hex"),!zot(e)){e=zik(e);var n,r,i=["black","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],a=["000000","f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"];if("zim"==t.toLowerCase())return To.colorsHex.indexOf(e)<0?e:To.colors[To.colorsHex.indexOf(e)];if(n=e.match(/rgba\((.*)\)/)){if(!zot(o))return(r=e.split(","))[3]=o+")",r.join(",");e="rgb("+n[1]+")"}if(zot(o),n=e.match(/rgb\((.*)\)/)){if("rgba"==t)return(r=e.split(")"))[0]+","+o+r[1];if("hex"==t)return"#"+(i=u(n[1]))[0]+i[1]+i[2];if("hexNumber"==t){i=u(n[1]);return parseInt(i[0]+i[1]+i[2],16)}if("string"!=t)return e;var l,e=u(n[1]).join("").toLowerCase();return-1==(l=a.indexOf(e))?"#"+e:i[l]}if("rgb"==t||"rgba"==t){function s(e){return/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)?(3==(e=e.substring(1).split("")).length&&(e=[e[0],e[0],e[1],e[1],e[2],e[2]]),e="0x"+e.join(""),"rgb"==t?"rgb("+[e>>16&255,e>>8&255,255&e]+")":"rgba("+[e>>16&255,e>>8&255,255&e].join(",")+","+o+")"):"rgb"==t?"rgb(0,0,0)":"rgba(0,0,0,1)"}return"#"==e.charAt(0)?s(e):s(To.convertColor(e))}if("hex"==t){if("#"==e.charAt(0))return e}else if("hexNumber"==t){if("#"==e.charAt(0))return parseInt(e.replace(/^#/,""),16)}else"#"==e.charAt(0)&&3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));return"string"!=t?"hexNumber"==t?parseInt(a[-1!=i.indexOf(e.toLowerCase())?i.indexOf(e):0],16):"#"+a[-1!=i.indexOf(e.toLowerCase())?i.indexOf(e):0]:-1==(l=a.indexOf(e))?"#"+e:i[l]}function c(e){e=Number(e).toString(16);return e.length<2&&(e="0"+e),e}function u(e){e=e.split(",");return[c(e[0]),c(e[1]),c(e[2])]}},To.colorRange=function(e,t,o){To.colorRangeCheck||(z_d("27.6"),To.colorRangeCheck=!0),zot(o)&&(o=.5),o=Math.max(0,Math.min(1,o)),zot(e)&&(e="white"),zot(t)&&(t="black");for(var n,r=To.convertColor(e,"rgb"),i=To.convertColor(t,"rgb"),e=r.substring(4,r.length-1).split(","),t=i.substring(4,i.length-1).split(","),a="#",l=0;l<e.length;l++)n=t[l]-e[l],(n=Math.floor(parseInt(e[l],10)+n*o).toString(16)).length<2&&(n="0"+n),a+=n;return a},To.lighten=function(e,t){return To.lightenCheck||(z_d("27.65"),To.lightenCheck=!0),zot(t)&&(t=.5),0<=t?To.colorRange(String(e),"#FFFFFF",t):To.colorRange(String(e),"#000000",-t)},To.darken=function(e,t){return zot(t)&&(t=.5),To.darkenCheck||(z_d("27.66"),To.darkenCheck=!0),0<=t?To.colorRange(String(e),"#000000",t):To.colorRange(String(e),"#ffffff",-t)},To.toColor=function(e,t,o){return To.toColorCheck||(z_d("27.67"),To.toColorCheck=!0),zot(o)&&(o=.5),To.colorRange(String(e),t,o)},To.toAlpha=function(e,t){return To.toAlphaCheck||(z_d("27.68"),To.toAlphaCheck=!0),zot(t)&&(t=.5),To.convertColor(String(e),"rgba",t)},To.zimEase=function(e,t,o,n,r){z_d("27.69");var i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T=!1;return zot(r)&&(r=!0),e?(Array.isArray(e[1])&&(T=!0,points2=e[1],e=e[0],i=points2[0],a=points2[1],l=points2[2],s=points2[3],g=1-(h=5*(s+0)-20*(l+i)+30*a)-(d=10*+l+30*(i-a))-(u=10*+a-4*(c=5*+i))-c),p=e[0],f=e[1],m=e[2],z=e[3],y=1-(b=5*(z+0)-20*(m+p)+30*f)-(v=10*+m+30*(p-f))-(w=10*+f-4*(C=5*+p))-C):t?(y=t[0],b=t[1],v=t[2],w=t[3],p=(C=t[4])/5,f=(w+4*C)/10,m=(v+6*C+3*w)/10,z=(b+4*C+3*w+2*v)/5):(w=v=b=y=0,C=1),o?k={reverse:x=function(){return To.zimEase(null,[y,b,v,w,C],!0)},points:[p,f,m,z],polynomials:[y,b,v,w,C],noPick:function(e){if(r){if(e<.025)return 0;if(.975<e)return 1}if(e<.5){var t=100*(e*=2),o=(t/=100)*t;return(y*(n=o*t)*o+b*o*o+v*n+w*o+C*t)/2}var n,t=100*(e=1-2*(e-.5)),o=(t/=100)*t;return 1-(y*(n=o*t)*o+b*o*o+v*n+w*o+C*t)/2}}:T?k={reverse:x=function(){return zon&&zogy("zimEase - multi array points cannot be reversed"),To.zimEase(null,[y,b,v,w,C])},points:[[p,f,m,z],[i,a,l,s]],polynomials:[[y,b,v,w,C],[g,h,d,u,c]],noPick:function(e){if(r){if(e<.025)return 0;if(.975<e)return 1}if(e<.5){var t=100*(e*=2),o=(t/=100)*t;return(y*(n=o*t)*o+b*o*o+v*n+w*o+C*t)/2}var n,t=100*(e=2*(e-.5)),o=(t/=100)*t;return.5+(g*(n=o*t)*o+h*o*o+d*n+u*o+c*t)/2}}:(k={reverse:x=function(){return To.zimEase(null,[y,b,v,w,C],null,!0)},points:[p,f,m,z],polynomials:[y,b,v,w,C]}).noPick=n?function(e){if(r){if(e<.025)return 0;if(.975<e)return 1}var t=100-100*e,o=(t/=100)*t,e=o*t;return 1-(y*e*o+b*o*o+v*e+w*o+C*t)}:function(e){if(r){if(e<.025)return 0;if(.975<e)return 1}var t=100*e,o=(t/=100)*t,e=o*t;return y*e*o+b*o*o+v*e+w*o+C*t},k.noPick.reverse=x,k},To.pointAlongCurve=function(e,t,o,n){if(z_d("27.7"),e&&e[0]&&e[1]&&e[2]&&e[3]){zot(n)&&(n=!1);var r,i=new To.Bezier(e[0],e[1],e[2],e[3]);if(e=n?(r=i.mx(t),i.my(t)):(r=i.x(t),i.y(t)),o){var a,l,s,o=t-.05,t=t+.05;return o<0&&(o=0),1<t&&(t=1),t=n?(a=i.mx(o),l=i.my(o),s=i.mx(t),i.my(t)):(a=i.x(o),l=i.y(o),s=i.x(t),i.y(t)),{x:r,y:e,angle:To.angle(a,l,s,t)}}return{x:r,y:e}}},To.distanceAlongCurve=function(e){return z_d("27.8"),(To.dist(e[0],e[3])+(To.dist(e[0],e[1])+To.dist(e[1],e[2])+To.dist(e[2],e[3])))/2},To.closestPointAlongCurve=function(i,e,o,t,n){z_d("27.9");var a,l=1e7,s=0,c=0;return zot(o)&&(o=10),To.loop(e,function(e,n,t){var r=new To.Bezier(e[0],e[1],e[2],e[3]);To.loop(o,function(e,t){var o={x:r.x(e/t),y:r.y(e/t)},t=To.dist(i,o);t<l&&(l=t,a=o,s=n,c=e)})}),n?(s*o+c)/(e.length*o)*100:t?a:s},To.transformPoints=function(e,t,o,n,r){if(z_d("27.95"),!zot(e)&&Array.isArray(e)){zot(n)&&(n=0),zot(r)&&(r=0);var e=To.copy(e),i=n,a=r;"rotation"==t&&(0!=n&&(e=To.transformPoints(e,"x",-i)),0!=r&&(e=To.transformPoints(e,"y",-a)));for(var l=0;l<e.length;l++){var s,c,u,d=e[l];Array.isArray(d)&&("x"==t?d[0]+=o:"y"==t?d[1]+=o:"scaleX"==t?(d[0]=(d[0]-n)*o+n,d[4]=d[4]*o,d[6]=d[6]*o):"scaleY"==t?(d[1]=(d[1]-r)*o+r,d[5]=d[5]*o,d[7]=d[7]*o):"scale"==t?(d[0]=(d[0]-n)*o+n,d[4]=d[4]*o,d[6]=d[6]*o,d[1]=(d[1]-r)*o+r,d[5]=d[5]*o,d[7]=d[7]*o):"rotation"==t&&(s=o*Math.PI/180,c=d[0],u=d[1],d[0]=c*Math.cos(s)-u*Math.sin(s),d[1]=u*Math.cos(s)+c*Math.sin(s),c=d[4],u=d[5],d[4]=c*Math.cos(s)-u*Math.sin(s),d[5]=u*Math.cos(s)+c*Math.sin(s),c=d[6],u=d[7],d[6]=c*Math.cos(s)-u*Math.sin(s),d[7]=u*Math.cos(s)+c*Math.sin(s)))}return"rotation"==t&&(0!=n&&(e=To.transformPoints(e,"x",i)),0!=r&&(e=To.transformPoints(e,"y",a))),e}},To.trimPointEnds=function(e){z_d("27.97"),e[0][4]=0,e[0][5]=0,e[0][8]="free",e[e.length-1][6]=0,e[e.length-1][7]=0,e[e.length-1][8]="free"},To.reversePoints=function(e){return z_d("27.975"),e.reverse(),loop(e,e=>{var t=e[6];e[6]=e[4],e[4]=t;t=e[7];e[7]=e[5],e[5]=t}),e},To.appendPoints=function(e,t,o){return z_d("27.98"),zot(e)&&zot(t)?[]:zot(e)?t:zot(t)?e:(e[e.length-1][6]=t[0][6],e[e.length-1][7]=t[0][7],o&&(e[e.length-1][8]=o),t.shift(),e=e.concat(t))},To.prependPoints=function(e,t,o){return z_d("27.985"),zot(e)&&zot(t)?[]:zot(e)?t:(zot(t)||(t[t.length-1][6]=e[0][6],t[t.length-1][7]=e[0][7],o&&(e[e.length-1][8]=o),e.shift(),e=t.concat(e),zog(e)),e)},To.splitPoints=function(e,t,o){if(z_d("27.99"),!(zot(e)||(zot(t)&&(t=Math.floor(e.length/2)),t<0||t>e.length-1))){zot(o)&&(o=!0);var n=To.copy(e.slice(0,t+1)),t=To.copy(e.slice(t));return o&&(To.trimPointEnds(n),To.trimPointEnds(t)),[n,t]}},To.makeID=function(e,t,o){z_d("13.5"),zot(e)&&(e="mixed"),zot(t)&&(t=5),zot(o)&&(o="uppercase");for(var n,r,i=[2,3,4,5,6,7,8,9],a="abcdefghjkmnpqrstuvwxyz".split(""),l=e.constructor===Array?e:"numbers"==e?i:"letters"==e?a:i.concat(a),s="",c=0;c<t;c++)n=l[Math.floor(Math.random()*l.length)],r=Math.random(),"uppercase"==o||"mixed"==o&&.5<r?n.toUpperCase&&(n=n.toUpperCase()):n.toLowerCase&&(n=n.toLowerCase()),s+=String(n);return s},To.swapProperties=function(e,t,o){if(z_d("17.1"),zot(t)||zot(o)||zot(t[e])||zot(o[e]))return!1;var n=o[e];return o[e]=t[e],t[e]=n,!0},To.mobile=function(e){return z_d("28"),void 0!==MOBILE&&"default"!=MOBILE?MOBILE:zot(To.MOBILE)||"default"==To.MOBILE?(zot(e)&&(e=!0),/ip(hone|od|ad)/i.test(navigator.userAgent)?"ios":/android|nexus/i.test(navigator.userAgent)?"android":/blackberry/i.test(navigator.userAgent)?"blackberry":/nokia|phone|mobile/i.test(navigator.userAgent)?"windows":/opera mini|webos/i.test(navigator.userAgent)?"other":!(!e||void 0===window.orientation)&&(!/safari/i.test(navigator.userAgent)||"ios")):To.MOBILE},To.vee=function(e){return z_d("28.5"),!zot(e)&&("Pick"==e.type||Array.isArray(e)||e.constructor=={}.constructor&&(!zot(e.max)||!zot(e.noPick))||"function"==typeof e)},To.extend=function(e,t,o,n,r){var i;if(i=zob(To.extend,arguments,"subclass, superclass, override, prefix, prototype"))return i;if(!zot(e)&&!zot(t)){zot(n)&&(n="super"),zot(o)&&(o=[]),Array.isArray(o)||(o=[o]),zot(r)&&(r=!0);var a,l={};for(a in e.prototype)Object.defineProperty(l,a,Object.getOwnPropertyDescriptor(e.prototype,a));for(a in h.prototype=t.prototype,e.prototype=new h,l)Object.defineProperty(e.prototype,a,Object.getOwnPropertyDescriptor(l,a));var s,c=e.prototype,u=Object.getPrototypeOf&&Object.getPrototypeOf(c)||c.__proto__;if(u){c[(n+="_")+"constructor"]=u.constructor;for(var d=0;d<o.length;d++)"function"==typeof u[s=o[d]]&&(c[n+s]=u[s]);if(r)for(s in u)c.hasOwnProperty(s)&&"function"==typeof u[s]&&(c[n+s]=u[s])}return e}function h(){this.constructor=e}zon&&e!=To.StageGL&&zog("zim.extend() - please supply a class and its superclass")},To.copy=function(e,t,o){if(To.copyCheck||(z_d("10"),To.copyCheck=!0),zot(t)&&(t=!1),zot(o)&&(o=!0),null==e||!(e instanceof Array||e.constructor=={}.constructor))return t&&null!=e&&e.clone&&e.type&&("Container"!=e.type&&"Stage"!=e.type&&"StageGL"!=e.type||o)?e.clone():e;if(e instanceof Array){for(var n=[],r=0;r<e.length;r++)n[r]=To.copy(e[r],t,o);return n}if(e.constructor=={}.constructor){var i,a={};for(i in e){var l=To.copy(e[i],t,o);e.hasOwnProperty(i)&&(a[i]=l)}return a}},To.merge=function(){To.mergeCheck||(z_d("12"),To.mergeCheck=!0);for(var e,t={},o=0;o<arguments.length;o++)for(e in arguments[o])arguments[o].hasOwnProperty(e)&&(t[e]=arguments[o][e]);return t},To.arraysEqual=function(e,t,o){if(z_d("11"),zot(e)||zot(t))return!1;if(zot(o)&&(o=!0),e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!To.arraysEqual(e[n],t[n],o))return!1}else{if(o&&e[n]!=t[n])return!1;if(!o)return To.arraysEqual(e.sort(),t.sort(),!0)}return!0},To.isEmpty=function(e){if(To.zimEmptyCheck||(z_d("11.5"),To.zimEmptyCheck=!0),!zot(e)){var t,o=0;for(t in e){o++;break}return 0==o}},To.isJSON=function(e){if(z_d("11.6"),"string"!=typeof e)return!1;try{return JSON.parse(e),!0}catch(e){return!1}},To.isPick=function(e){if(To.zimPickCheck||(z_d("11.7"),To.zimPickCheck=!0),!zot(e))return Array.isArray(e)||e.constructor=={}.constructor&&(null!=e.min&&null!=e.max||e.noPick)||e.constructor===Function&&(null!=e.array||null!=e())},To.zut=function(e){if(zot(e)||"object"==typeof e)return!0},To.decimals=function(e,t,o,n,r,i,a){if(To.zimDecimalCheck||(z_d("13"),To.zimDecimalCheck=!0),zot(e))return 0;zot(t)&&(t=1),zot(o)&&(o=0),zot(n)&&(n=1),zot(r)&&(r=!0),zot(i)&&(i=!1);var l=Math.round(e*Math.pow(10,t))/Math.pow(10,t);i&&(s=l-Math.floor(l),l=To.decimals(Math.floor(l)+60*s/100,2));var s=To.sign(l);if(0<o){var c=String(l).indexOf("."),u=String(l).length;c<0&&(c=u++,l+=".");for(var d=0;d<o-(u-c-1);d++)l+="0"}if(1<n){-1==s&&(l=l.substr(1,l.length-1));for(var c=String(l).indexOf("."),u=String(l).length,h=c<0?u:c,d=0;d<n-h;d++)l="0"+l;-1==s&&(l="-"+l)}return 0==n&&(l=l.toString().replace(/^0\./,".")),0<o+n&&!r&&0==Number(l)&&(l=0),i&&(l=String(l).replace(".",":")),To.zut(a)?l:null},To.countDecimals=function(e){return To.zimCountDecimalsCheck||(z_d("13.05"),To.zimCountDecimalsCheck=!0),e%1?e.toString().split(".")[1].length:0},To.sign=function(e){return To.zimSignCheck||(z_d("13.1"),To.zimSignCheck=!0),e?e<0?-1:1:0},To.constrain=function(e,t,o,n){if(z_d("13.2"),!zot(e))return zot(t)&&(t=0),zot(o)&&(o=Number.MAX_VALUE),o<t&&(t=o=t),zot(n)&&(n=!1),n&&e<0?Math.max(-o,Math.min(e,-t)):Math.max(t,Math.min(e,o))},To.dist=function(e,t,o,n){if(To.zimDistCheck||(z_d("13.3"),To.zimDistCheck=!0),!zot(e)&&!zot(t))return zot(e.x)||zot(t.x)?(zot(o)&&(o=0),zot(n)&&(n=0)):(n=t.y,o=t.x,t=e.y,e=e.x),Math.sqrt(Math.pow(o-e,2)+Math.pow(n-t,2))},To.rectIntersect=function(e,t,o){return To.zimRectIntersectCheck||(z_d("13.32"),To.zimRectIntersectCheck=!0),zot(o)&&(o=0),!(e.x>=t.x+t.width+o||e.x+e.width+o<=t.x||e.y>=t.y+t.height+o||e.y+e.height+o<=t.y)},To.boundsAroundPoints=function(e){To.zimBoundsAroundPointsCheck||(z_d("13.34"),To.zimBoundsAroundPointsCheck=!0);for(var t=1e4,o=1e4,n=-1e4,r=-1e4,i=0;i<e.length;i++){var a=e[i];a.x<t&&(t=a.x),a.x>n&&(n=a.x),a.y<o&&(o=a.y),a.y>r&&(r=a.y)}return{x:t,y:o,width:n-t,height:r-o}},To.angle=function(e,t,o,n){if(To.angleCheck||(z_d("13.4"),To.angleCheck=!0),!zot(e)&&!zot(t))return zot(o)&&(o=e,e=0),zot(n)&&(n=t,t=0),(180*Math.atan2(n-t,o-e)/Math.PI+360)%360},To.TAU=2*Math.PI,To.DEG=180/Math.PI,To.RAD=Math.PI/180,To.smoothStep=function(e,t,o){z_d("13.7");t=To.constrain((e-t)/(o-t),0,1);return t*t*t*(t*(6*t-15)+10)},To.Ajax=function(i,e,a,t){z_d("13.8");var c=new XMLHttpRequest;this.master=i,this.couple=e,this.lock=a,this.unique=t;var u=this;this.get=function(e,t){var o=zot(u.master)?"":"&master="+encodeURI(i),n=zot(u.lock)?"":"&lock="+encodeURI(a),r=u.unique?"&unique=true":"";c.open("GET",e+o+n+r,!0),c.onload=function(){200==c.status?t(To.isJSON(c.responseText)?JSON.parse(c.responseText):c.responseText):t(null,"Error: "+c.status)},c.send()},this.post=function(e,t,o,n,r){var i,a,l,s;if(s=zob(u.post,arguments,"url, data, command, extra, callback"))return s;zot(e)||(c.open("POST",e,!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.onload=function(){var e=c.responseText;To.isJSON(e)&&(u.couple&&(e=To.decouple(e)),e=JSON.parse(e)),r(e)},To.isJSON(t)||(t=JSON.stringify(t)),u.couple&&(t=To.couple(t)),i=zot(u.master)?"":"&master="+encodeURIComponent(u.master),a=zot(u.lock)?"":"&lock="+encodeURIComponent(u.lock),l=zot(o)?"":"&command="+encodeURIComponent(o),s=zot(n)?"":"&extra="+encodeURIComponent(n),c.send("data="+encodeURIComponent(t)+i+a+l+s))},this.put=function(e,t,o){c.open("PUT",e,!0),c.setRequestHeader("Content-type","application/json"),c.onload=function(){o(To.isJSON(c.responseText)?JSON.parse(c.responseText):u.http.responseText)},c.send(JSON.stringify(t))}},To.Noise=function(e){"use strict";z_d("13.9"),zot(e)&&(e=1e6*Math.random());var t=e;this.seed=e;var B=this,S={};function o(e){var t=new Uint32Array(1);return t[0]=1664525*e[0]+1013904223,t}function n(e,t,o){this.dx=-t-e*S.SQUISH_2D,this.dy=-o-e*S.SQUISH_2D,this.xsb=t,this.ysb=o}function r(e,t,o,n){this.dx=-t-e*S.SQUISH_3D,this.dy=-o-e*S.SQUISH_3D,this.dz=-n-e*S.SQUISH_3D,this.xsb=t,this.ysb=o,this.zsb=n}function i(e,t,o,n,r){this.dx=-t-e*S.SQUISH_4D,this.dy=-o-e*S.SQUISH_4D,this.dz=-n-e*S.SQUISH_4D,this.dw=-r-e*S.SQUISH_4D,this.xsb=t,this.ysb=o,this.zsb=n,this.wsb=r}S.NORM_2D=1/47,S.NORM_3D=1/103,S.NORM_4D=1/30,S.SQUISH_2D=(Math.sqrt(3)-1)/2,S.SQUISH_3D=(Math.sqrt(4)-1)/3,S.SQUISH_4D=(Math.sqrt(5)-1)/4,S.STRETCH_2D=(1/Math.sqrt(3)-1)/2,S.STRETCH_3D=(1/Math.sqrt(4)-1)/3,S.STRETCH_4D=(1/Math.sqrt(5)-1)/4,S.base2D=[[1,1,0,1,0,1,0,0,0],[1,1,0,1,0,1,2,1,1]],S.base3D=[[0,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1],[2,1,1,0,2,1,0,1,2,0,1,1,3,1,1,1],[1,1,0,0,1,0,1,0,1,0,0,1,2,1,1,0,2,1,0,1,2,0,1,1]],S.base4D=[[0,0,0,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,4,1,1,1,1],[1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1],[3,1,1,1,0,3,1,1,0,1,3,1,0,1,1,3,0,1,1,1,2,1,1,0,0,2,1,0,1,0,2,1,0,0,1,2,0,1,1,0,2,0,1,0,1,2,0,0,1,1]],S.gradients2D=[5,2,2,5,-5,2,-2,5,5,-2,2,-5,-5,-2,-2,-5],S.gradients3D=[-11,4,4,-4,11,4,-4,4,11,11,4,4,4,11,4,4,4,11,-11,-4,4,-4,-11,4,-4,-4,11,11,-4,4,4,-11,4,4,-4,11,-11,4,-4,-4,11,-4,-4,4,-11,11,4,-4,4,11,-4,4,4,-11,-11,-4,-4,-4,-11,-4,-4,-4,-11,11,-4,-4,4,-11,-4,4,-4,-11],S.gradients4D=[3,1,1,1,1,3,1,1,1,1,3,1,1,1,1,3,-3,1,1,1,-1,3,1,1,-1,1,3,1,-1,1,1,3,3,-1,1,1,1,-3,1,1,1,-1,3,1,1,-1,1,3,-3,-1,1,1,-1,-3,1,1,-1,-1,3,1,-1,-1,1,3,3,1,-1,1,1,3,-1,1,1,1,-3,1,1,1,-1,3,-3,1,-1,1,-1,3,-1,1,-1,1,-3,1,-1,1,-1,3,3,-1,-1,1,1,-3,-1,1,1,-1,-3,1,1,-1,-1,3,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,3,1,1,-1,1,3,1,-1,1,1,3,-1,1,1,1,-3,-3,1,1,-1,-1,3,1,-1,-1,1,3,-1,-1,1,1,-3,3,-1,1,-1,1,-3,1,-1,1,-1,3,-1,1,-1,1,-3,-3,-1,1,-1,-1,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,3,1,-1,-1,1,3,-1,-1,1,1,-3,-1,1,1,-1,-3,-3,1,-1,-1,-1,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,3,-1,-1,-1,1,-3,-1,-1,1,-1,-3,-1,1,-1,-1,-3,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3,-1,-1,-1,-1,-3],S.lookupPairs2D=[0,1,1,0,4,1,17,0,20,2,21,2,22,5,23,5,26,4,39,3,42,4,43,3],S.lookupPairs3D=[0,2,1,1,2,2,5,1,6,0,7,0,32,2,34,2,129,1,133,1,160,5,161,5,518,0,519,0,546,4,550,4,645,3,647,3,672,5,673,5,674,4,677,3,678,4,679,3,680,13,681,13,682,12,685,14,686,12,687,14,712,20,714,18,809,21,813,23,840,20,841,21,1198,19,1199,22,1226,18,1230,19,1325,23,1327,22,1352,15,1353,17,1354,15,1357,17,1358,16,1359,16,1360,11,1361,10,1362,11,1365,10,1366,9,1367,9,1392,11,1394,11,1489,10,1493,10,1520,8,1521,8,1878,9,1879,9,1906,7,1910,7,2005,6,2007,6,2032,8,2033,8,2034,7,2037,6,2038,7,2039,6],S.lookupPairs4D=[0,3,1,2,2,3,5,2,6,1,7,1,8,3,9,2,10,3,13,2,16,3,18,3,22,1,23,1,24,3,26,3,33,2,37,2,38,1,39,1,41,2,45,2,54,1,55,1,56,0,57,0,58,0,59,0,60,0,61,0,62,0,63,0,256,3,258,3,264,3,266,3,272,3,274,3,280,3,282,3,2049,2,2053,2,2057,2,2061,2,2081,2,2085,2,2089,2,2093,2,2304,9,2305,9,2312,9,2313,9,16390,1,16391,1,16406,1,16407,1,16422,1,16423,1,16438,1,16439,1,16642,8,16646,8,16658,8,16662,8,18437,6,18439,6,18469,6,18471,6,18688,9,18689,9,18690,8,18693,6,18694,8,18695,6,18696,9,18697,9,18706,8,18710,8,18725,6,18727,6,131128,0,131129,0,131130,0,131131,0,131132,0,131133,0,131134,0,131135,0,131352,7,131354,7,131384,7,131386,7,133161,5,133165,5,133177,5,133181,5,133376,9,133377,9,133384,9,133385,9,133400,7,133402,7,133417,5,133421,5,133432,7,133433,5,133434,7,133437,5,147510,4,147511,4,147518,4,147519,4,147714,8,147718,8,147730,8,147734,8,147736,7,147738,7,147766,4,147767,4,147768,7,147770,7,147774,4,147775,4,149509,6,149511,6,149541,6,149543,6,149545,5,149549,5,149558,4,149559,4,149561,5,149565,5,149566,4,149567,4,149760,9,149761,9,149762,8,149765,6,149766,8,149767,6,149768,9,149769,9,149778,8,149782,8,149784,7,149786,7,149797,6,149799,6,149801,5,149805,5,149814,4,149815,4,149816,7,149817,5,149818,7,149821,5,149822,4,149823,4,149824,37,149825,37,149826,36,149829,34,149830,36,149831,34,149832,37,149833,37,149842,36,149846,36,149848,35,149850,35,149861,34,149863,34,149865,33,149869,33,149878,32,149879,32,149880,35,149881,33,149882,35,149885,33,149886,32,149887,32,150080,49,150082,48,150088,49,150098,48,150104,47,150106,47,151873,46,151877,45,151881,46,151909,45,151913,44,151917,44,152128,49,152129,46,152136,49,152137,46,166214,43,166215,42,166230,43,166247,42,166262,41,166263,41,166466,48,166470,43,166482,48,166486,43,168261,45,168263,42,168293,45,168295,42,168512,31,168513,28,168514,31,168517,28,168518,25,168519,25,280952,40,280953,39,280954,40,280957,39,280958,38,280959,38,281176,47,281178,47,281208,40,281210,40,282985,44,282989,44,283001,39,283005,39,283208,30,283209,27,283224,30,283241,27,283256,22,283257,22,297334,41,297335,41,297342,38,297343,38,297554,29,297558,24,297562,29,297590,24,297594,21,297598,21,299365,26,299367,23,299373,26,299383,23,299389,20,299391,20,299584,31,299585,28,299586,31,299589,28,299590,25,299591,25,299592,30,299593,27,299602,29,299606,24,299608,30,299610,29,299621,26,299623,23,299625,27,299629,26,299638,24,299639,23,299640,22,299641,22,299642,21,299645,20,299646,21,299647,20,299648,61,299649,60,299650,61,299653,60,299654,59,299655,59,299656,58,299657,57,299666,55,299670,54,299672,58,299674,55,299685,52,299687,51,299689,57,299693,52,299702,54,299703,51,299704,56,299705,56,299706,53,299709,50,299710,53,299711,50,299904,61,299906,61,299912,58,299922,55,299928,58,299930,55,301697,60,301701,60,301705,57,301733,52,301737,57,301741,52,301952,79,301953,79,301960,76,301961,76,316038,59,316039,59,316054,54,316071,51,316086,54,316087,51,316290,78,316294,78,316306,73,316310,73,318085,77,318087,77,318117,70,318119,70,318336,79,318337,79,318338,78,318341,77,318342,78,318343,77,430776,56,430777,56,430778,53,430781,50,430782,53,430783,50,431e3,75,431002,72,431032,75,431034,72,432809,74,432813,69,432825,74,432829,69,433032,76,433033,76,433048,75,433065,74,433080,75,433081,74,447158,71,447159,68,447166,71,447167,68,447378,73,447382,73,447386,72,447414,71,447418,72,447422,71,449189,70,449191,70,449197,69,449207,68,449213,69,449215,68,449408,67,449409,67,449410,66,449413,64,449414,66,449415,64,449416,67,449417,67,449426,66,449430,66,449432,65,449434,65,449445,64,449447,64,449449,63,449453,63,449462,62,449463,62,449464,65,449465,63,449466,65,449469,63,449470,62,449471,62,449472,19,449473,19,449474,18,449477,16,449478,18,449479,16,449480,19,449481,19,449490,18,449494,18,449496,17,449498,17,449509,16,449511,16,449513,15,449517,15,449526,14,449527,14,449528,17,449529,15,449530,17,449533,15,449534,14,449535,14,449728,19,449729,19,449730,18,449734,18,449736,19,449737,19,449746,18,449750,18,449752,17,449754,17,449784,17,449786,17,451520,19,451521,19,451525,16,451527,16,451528,19,451529,19,451557,16,451559,16,451561,15,451565,15,451577,15,451581,15,451776,19,451777,19,451784,19,451785,19,465858,18,465861,16,465862,18,465863,16,465874,18,465878,18,465893,16,465895,16,465910,14,465911,14,465918,14,465919,14,466114,18,466118,18,466130,18,466134,18,467909,16,467911,16,467941,16,467943,16,468160,13,468161,13,468162,13,468163,13,468164,13,468165,13,468166,13,468167,13,580568,17,580570,17,580585,15,580589,15,580598,14,580599,14,580600,17,580601,15,580602,17,580605,15,580606,14,580607,14,580824,17,580826,17,580856,17,580858,17,582633,15,582637,15,582649,15,582653,15,582856,12,582857,12,582872,12,582873,12,582888,12,582889,12,582904,12,582905,12,596982,14,596983,14,596990,14,596991,14,597202,11,597206,11,597210,11,597214,11,597234,11,597238,11,597242,11,597246,11,599013,10,599015,10,599021,10,599023,10,599029,10,599031,10,599037,10,599039,10,599232,13,599233,13,599234,13,599235,13,599236,13,599237,13,599238,13,599239,13,599240,12,599241,12,599250,11,599254,11,599256,12,599257,12,599258,11,599262,11,599269,10,599271,10,599272,12,599273,12,599277,10,599279,10,599282,11,599285,10,599286,11,599287,10,599288,12,599289,12,599290,11,599293,10,599294,11,599295,10],S.p2D=[0,0,1,-1,0,0,-1,1,0,2,1,1,1,2,2,0,1,2,0,2,1,0,0,0],S.p3D=[0,0,1,-1,0,0,1,0,-1,0,0,-1,1,0,0,0,1,-1,0,0,-1,0,1,0,0,-1,1,0,2,1,1,0,1,1,1,-1,0,2,1,0,1,1,1,-1,1,0,2,0,1,1,1,-1,1,1,1,3,2,1,0,3,1,2,0,1,3,2,0,1,3,1,0,2,1,3,0,2,1,3,0,1,2,1,1,1,0,0,2,2,0,0,1,1,0,1,0,2,0,2,0,1,1,0,0,1,2,0,0,2,2,0,0,0,0,1,1,-1,1,2,0,0,0,0,1,-1,1,1,2,0,0,0,0,1,1,1,-1,2,3,1,1,1,2,0,0,2,2,3,1,1,1,2,2,0,0,2,3,1,1,1,2,0,2,0,2,1,1,-1,1,2,0,0,2,2,1,1,-1,1,2,2,0,0,2,1,-1,1,1,2,0,0,2,2,1,-1,1,1,2,0,2,0,2,1,1,1,-1,2,2,0,0,2,1,1,1,-1,2,0,2,0],S.p4D=[0,0,1,-1,0,0,0,1,0,-1,0,0,1,0,0,-1,0,0,-1,1,0,0,0,0,1,-1,0,0,0,1,0,-1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,-1,0,0,-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,2,1,1,0,0,1,1,1,-1,0,1,1,1,0,-1,0,2,1,0,1,0,1,1,-1,1,0,1,1,0,1,-1,0,2,0,1,1,0,1,-1,1,1,0,1,0,1,1,-1,0,2,1,0,0,1,1,1,-1,0,1,1,1,0,-1,1,0,2,0,1,0,1,1,-1,1,0,1,1,0,1,-1,1,0,2,0,0,1,1,1,-1,0,1,1,1,0,-1,1,1,1,4,2,1,1,0,4,1,2,1,0,4,1,1,2,0,1,4,2,1,0,1,4,1,2,0,1,4,1,1,0,2,1,4,2,0,1,1,4,1,0,2,1,4,1,0,1,2,1,4,0,2,1,1,4,0,1,2,1,4,0,1,1,2,1,2,1,1,0,0,3,2,1,0,0,3,1,2,0,0,1,2,1,0,1,0,3,2,0,1,0,3,1,0,2,0,1,2,0,1,1,0,3,0,2,1,0,3,0,1,2,0,1,2,1,0,0,1,3,2,0,0,1,3,1,0,0,2,1,2,0,1,0,1,3,0,2,0,1,3,0,1,0,2,1,2,0,0,1,1,3,0,0,2,1,3,0,0,1,2,2,3,1,1,1,0,2,1,1,1,-1,2,2,0,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,2,0,0,0,2,3,1,0,1,1,2,1,-1,1,1,2,2,0,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,2,0,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,2,0,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,2,0,0,2,3,1,1,1,0,2,1,1,1,-1,2,0,0,2,0,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,2,0,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,2,0,2,3,1,1,0,1,2,1,1,-1,1,2,0,0,0,2,2,3,1,0,1,1,2,1,-1,1,1,2,0,0,0,2,2,3,0,1,1,1,2,-1,1,1,1,2,0,0,0,2,2,1,1,1,-1,0,1,1,1,0,-1,0,0,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,0,0,0,0,0,2,1,-1,1,1,0,1,0,1,1,-1,0,0,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,0,0,0,0,0,2,1,-1,1,0,1,1,0,1,-1,1,0,0,0,0,0,2,1,-1,0,1,1,1,0,-1,1,1,0,0,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,2,0,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,2,0,0,0,2,1,1,-1,0,1,1,1,0,-1,1,2,2,0,0,0,2,1,1,1,-1,0,1,1,1,0,-1,2,0,2,0,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,2,0,0,2,1,-1,1,0,1,1,0,1,-1,1,2,0,2,0,0,2,1,1,-1,1,0,1,1,0,1,-1,2,0,0,2,0,2,1,-1,1,1,0,1,0,1,1,-1,2,0,0,2,0,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,2,0,2,1,1,-1,0,1,1,1,0,-1,1,2,0,0,0,2,2,1,-1,1,0,1,1,0,1,-1,1,2,0,0,0,2,2,1,-1,0,1,1,1,0,-1,1,1,2,0,0,0,2,3,1,1,0,0,0,2,2,0,0,0,2,1,1,1,-1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,1,-1,3,1,0,0,1,0,2,0,0,2,0,2,1,1,1,-1,3,1,1,0,0,0,2,2,0,0,0,2,1,1,-1,1,3,1,0,1,0,0,2,0,2,0,0,2,1,1,-1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,1,-1,1,3,1,1,0,0,0,2,2,0,0,0,2,1,-1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,1,-1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,1,-1,1,1,3,1,0,1,0,0,2,0,2,0,0,2,-1,1,1,1,3,1,0,0,1,0,2,0,0,2,0,2,-1,1,1,1,3,1,0,0,0,1,2,0,0,0,2,2,-1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,4,1,1,1,1,3,3,2,0,1,0,3,1,0,2,0,4,1,1,1,1,3,3,0,2,1,0,3,0,1,2,0,4,1,1,1,1,3,3,2,0,0,1,3,1,0,0,2,4,1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,4,1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,4,1,1,1,1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,1,-1,3,3,2,0,1,0,3,1,0,2,0,2,1,1,1,-1,3,3,0,2,1,0,3,0,1,2,0,2,1,1,1,-1,3,3,2,1,0,0,3,1,2,0,0,2,1,1,-1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,1,-1,1,3,3,0,2,0,1,3,0,1,0,2,2,1,1,-1,1,3,3,2,0,1,0,3,1,0,2,0,2,1,-1,1,1,3,3,2,0,0,1,3,1,0,0,2,2,1,-1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,1,-1,1,1,3,3,0,2,1,0,3,0,1,2,0,2,-1,1,1,1,3,3,0,2,0,1,3,0,1,0,2,2,-1,1,1,1,3,3,0,0,2,1,3,0,0,1,2,2,-1,1,1,1];for(var a=[],l=0;l<S.p2D.length;l+=4){for(var s=S.base2D[S.p2D[l]],c=null,u=null,d=0;d<s.length;d+=3)u=new n(s[d],s[d+1],s[d+2]),null===c?a[l/4]=u:c.next=u,c=u;u.next=new n(S.p2D[l+1],S.p2D[l+2],S.p2D[l+3])}this.lookup2D=[];for(l=0;l<S.lookupPairs2D.length;l+=2)this.lookup2D[S.lookupPairs2D[l]]=a[S.lookupPairs2D[l+1]];for(var h=[],l=0;l<S.p3D.length;l+=9){for(s=S.base3D[S.p3D[l]],c=null,u=null,d=0;d<s.length;d+=4)u=new r(s[d],s[d+1],s[d+2],s[d+3]),null===c?h[l/9]=u:c.next=u,c=u;u.next=new r(S.p3D[l+1],S.p3D[l+2],S.p3D[l+3],S.p3D[l+4]),u.next.next=new r(S.p3D[l+5],S.p3D[l+6],S.p3D[l+7],S.p3D[l+8])}this.lookup3D=[];for(l=0;l<S.lookupPairs3D.length;l+=2)this.lookup3D[S.lookupPairs3D[l]]=h[S.lookupPairs3D[l+1]];for(var g=[],l=0;l<S.p4D.length;l+=16){for(s=S.base4D[S.p4D[l]],c=null,u=null,d=0;d<s.length;d+=5)u=new i(s[d],s[d+1],s[d+2],s[d+3],s[d+4]),null===c?g[l/16]=u:c.next=u,c=u;u.next=new i(S.p4D[l+1],S.p4D[l+2],S.p4D[l+3],S.p4D[l+4],S.p4D[l+5]),u.next.next=new i(S.p4D[l+6],S.p4D[l+7],S.p4D[l+8],S.p4D[l+9],S.p4D[l+10]),u.next.next.next=new i(S.p4D[l+11],S.p4D[l+12],S.p4D[l+13],S.p4D[l+14],S.p4D[l+15])}this.lookup4D=[];for(l=0;l<S.lookupPairs4D.length;l+=2)this.lookup4D[S.lookupPairs4D[l]]=g[S.lookupPairs4D[l+1]];this.perm=new Uint8Array(256),this.perm2D=new Uint8Array(256),this.perm3D=new Uint8Array(256),this.perm4D=new Uint8Array(256);for(var p=new Uint8Array(256),l=0;l<256;l++)p[l]=l;(e=new Uint32Array(1))[0]=t,e=o(o(o(e)));for(l=255;0<=l;l--){e=o(e);var f=new Uint32Array(1);f[0]=(e[0]+31)%(l+1),f[0]<0&&(f[0]+=l+1),this.perm[l]=p[f[0]],this.perm2D[l]=14&this.perm[l],this.perm3D[l]=this.perm[l]%24*3,this.perm4D[l]=252&this.perm[l],p[f[0]]=p[l]}this.simplex1D=function(e){return B.simplex2D(e,1)},this.simplex2D=function(e,t){var o=(e+t)*S.STRETCH_2D,n=[e+o,t+o],r=n[0],o=n[1],n=[Math.floor(r),Math.floor(o)],i=n[0],a=n[1],n=(i+a)*S.SQUISH_2D,t=[e-(i+n),t-(a+n)],l=t[0],s=t[1],n=[r-i,o-a],t=n[0],r=n[1],o=t+r,n=new Uint32Array(4);n[0]=t-r+1,n[1]=o,n[2]=o+r,n[3]=o+t;for(var n=n[0]|n[1]<<1|n[2]<<2|n[3]<<4,c=B.lookup2D[n],u=0;void 0!==c;){var d,h=[l+c.dx,s+c.dy],g=h[0],p=h[1],f=2-g*g-p*p;0<f&&(h=(d=[i+c.xsb,a+c.ysb])[0],d=d[1],d=B.perm2D[B.perm[255&h]+d&255],u+=(f*=f)*f*(S.gradients2D[d]*g+S.gradients2D[d+1]*p)),c=c.next}return u*S.NORM_2D},this.simplex3D=function(e,t,o){var n=(e+t+o)*S.STRETCH_3D,r=[e+n,t+n,o+n],i=r[0],a=r[1],n=r[2],r=[Math.floor(i),Math.floor(a),Math.floor(n)],l=r[0],s=r[1],c=r[2],r=(l+s+c)*S.SQUISH_3D,o=[e-(l+r),t-(s+r),o-(c+r)],u=o[0],d=o[1],h=o[2],r=[i-l,a-s,n-c],o=r[0],i=r[1],a=r[2],n=o+i+a,r=new Uint32Array(7);r[0]=i-a+1,r[1]=o-i+1,r[2]=o-a+1,r[3]=n,r[4]=n+a,r[5]=n+i,r[6]=n+o;for(var r=r[0]|r[1]<<1|r[2]<<2|r[3]<<3|r[4]<<5|r[5]<<7|r[6]<<9,g=B.lookup3D[r],p=0;void 0!==g;){var f,m,z=[u+g.dx,d+g.dy,h+g.dz],y=z[0],b=z[1],v=z[2],w=2-y*y-b*b-v*v;0<w&&(f=(m=[l+g.xsb,s+g.ysb,c+g.zsb])[0],z=m[1],m=m[2],m=B.perm3D[B.perm[B.perm[255&f]+z&255]+m&255],p+=(w*=w)*w*(S.gradients3D[m]*y+S.gradients3D[m+1]*b+S.gradients3D[m+2]*v)),g=g.next}return p*S.NORM_3D},this.simplex4D=function(e,t,o,n){var r=(e+t+o+n)*S.STRETCH_4D,i=[e+r,t+r,o+r,n+r],a=i[0],l=i[1],s=i[2],r=i[3],i=[Math.floor(a),Math.floor(l),Math.floor(s),Math.floor(r)],c=i[0],u=i[1],d=i[2],h=i[3],i=(c+u+d+h)*S.SQUISH_4D,g=e-(c+i),p=t-(u+i),f=o-(d+i),m=n-(h+i),n=[a-c,l-u,s-d,r-h],i=n[0],a=n[1],l=n[2],s=n[3],r=i+a+l+s,n=new Uint32Array(11);n[0]=l-s+1,n[1]=a-l+1,n[2]=a-s+1,n[3]=i-a+1,n[4]=i-l+1,n[5]=i-s+1,n[6]=r<<6,n[7]=r+s,n[8]=r+l,n[9]=r+a,n[10]=r+i;for(var n=n[0]|n[1]<<1|n[2]<<2|n[3]<<3|n[4]<<4|n[5]<<5|n[6]<<6|n[7]<<8|n[8]<<11|n[9]<<14|n[10]<<17,z=B.lookup4D[n],y=0;void 0!==z;){var b,v,w,C=[g+z.dx,p+z.dy,f+z.dz,m+z.dw],x=C[0],k=C[1],T=C[2],A=C[3],P=2-x*x-k*k-T*T-A*A;0<P&&(b=(w=[c+z.xsb,u+z.ysb,d+z.zsb,h+z.wsb])[0],v=w[1],C=w[2],w=w[3],w=B.perm4D[B.perm[B.perm[B.perm[255&b]+v&255]+C&255]+w&255],y+=(P*=P)*P*(S.gradients4D[w]*x+S.gradients4D[w+1]*k+S.gradients4D[w+2]*T+S.gradients4D[w+3]*A)),z=z.next}return y*S.NORM_4D}},To.Point=function(e,t,o,n,r,i,a,l,s,c){z_d("13.45"),zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=0),zot(r)&&(r=0),zot(i)&&(i=0),zot(a)&&(a=0),zot(l)&&(l=0),zot(s)&&(s=0),zot(c)&&(c=0),this.x=e,this.y=t,this.z=o,this.q=n,this.r=r,this.s=i,this.t=a,this.u=l,this.v=s,this.w=c},To.Bezier=function(e,t,o,n){z_d("13.47"),this.a=e,this.b=t,this.c=o,this.d=n,this.len=100,this.arcLengths=new Array(this.len+1),this.arcLengths[0]=0;for(var r=this.x(0),i=this.y(0),a=0,l=1;l<=this.len;l+=1){var s=this.x(.01*l),c=this.y(.01*l),u=r-s,d=i-c;a+=Math.sqrt(u*u+d*d),this.arcLengths[l]=a,r=s,i=c}this.length=a},To.Bezier.prototype={map:function(e){for(var t=e*this.arcLengths[this.len],o=0,n=this.len,r=0;o<n;)r=o+((n-o)/2|0),this.arcLengths[r]<t?o=r+1:n=r;this.arcLengths[r]>t&&r--;e=this.arcLengths[r];return e===t?r/this.len:(r+(t-e)/(this.arcLengths[r+1]-e))/this.len},mx:function(e){return this.x(this.map(e))},my:function(e){return this.y(this.map(e))},x:function(e){return(1-e)*(1-e)*(1-e)*this.a.x+(1-e)*(1-e)*3*e*this.b.x+3*(1-e)*(e*e)*this.c.x+e*e*e*this.d.x},y:function(e){return(1-e)*(1-e)*(1-e)*this.a.y+(1-e)*(1-e)*3*e*this.b.y+3*(1-e)*(e*e)*this.c.y+e*e*e*this.d.y}},To.Boundary=function(e,t,o,n){z_d("13.46"),zot(e)||zot(t)||zot(o)||zot(n)||(this.x=e,this.y=t,this.width=o,this.height=n,this.contract=function(e,t,o,n){return zot(e)||(zot(t)&&(t=e),zot(o)?o=2*e:o+=e,zot(n)?n=2*t:n+=t,this.x+=e,this.y+=t,this.width-=o,this.height-=n),this})},To.GradientColor=function(e,t,o,n,r,i){z_d("13.465"),this.type="GradientColor",this.colors=zot(e)?["black","white"]:e,this.ratios=zot(t)?[0,1]:t,this.x0=zot(o)?0:o,this.y0=zot(n)?0:n,this.x1=zot(r)?0:r,this.y1=zot(i)?100:i},To.RadialColor=function(e,t,o,n,r,i,a,l){z_d("13.466"),this.type="RadialColor",this.colors=zot(e)?["black","white"]:e,this.ratios=zot(t)?[0,1]:t,this.x0=zot(o)?0:o,this.y0=zot(n)?0:n,this.r0=zot(r)?0:r,this.x1=zot(i)?0:i,this.y1=zot(a)?100:a,this.r1=zot(l)?100:l},To.BitmapColor=function(e,t,o){z_d("13.467"),this.type="BitmapColor","string"==typeof e&&window.asset&&(e=window.asset(e)),"Image"==e.type&&(e=e.bitmap),this.image="Bitmap"==e.type?e.image:e,this.repetition=t,this.matrix=o},To.Damp=function(e,t){z_d("14");var o;if(o=zob(To.Damp,arguments,"startValue, damp",this))return o;this.lastValue=zot(e)?0:e,this.damp=zot(t)?.1:t},To.Damp.prototype.convert=function(e){return this.lastValue=this.lastValue+(e-this.lastValue)*this.damp},To.Damp.prototype.immediate=function(e){return this.lastValue=e,this},To.Proportion=function(t,o,n,r,i,a,l){var e,s;if(e=zob(To.Proportion,arguments,"baseMin, baseMax, targetMin, targetMax, factor, targetRound, clamp",this))return e;z_d("15"),zot(n)&&(n=0),zot(r)&&(r=1),zot(i)&&(i=1),zot(a)&&(a=!1),zot(l)&&(l=!0),this.convert=function(e){if(!isNaN(e)&&o-t!=0)return l&&(e=Math.max(e,t),e=Math.min(e,o)),s=(e-t)/(o-t),s=0<i?n+(r-n)*s:r-(r-n)*s,a&&(s=Math.round(s)),s}},To.ProportionDamp=function(e,t,o,n,r,i,a,l){var s;if(s=zob(To.ProportionDamp,arguments,"baseMin, baseMax, targetMin, targetMax, damp, factor, targetRound, clamp",this))return s;z_d("16"),zot(o)&&(o=0),zot(n)&&(n=1),zot(r)&&(r=.1),zot(i)&&(i=1),zot(a)&&(a=!1),zot(l)&&(l=!0),this.damp=r;var c,u,d,h=this,g=0,p=e,g=o,f=setInterval(m,20);function m(){isNaN(p)||t-e==0||(l&&(p=Math.max(p,e),p=Math.min(p,t)),c=(p-e)/(t-e),u=n-o,g+=((d=0<i?o+u*c:n-u*c)-g)*h.damp)}this.immediate=function(e){return h.convert(e),m(),g=d,a&&(g=Math.round(g)),h},this.convert=function(e){return p=e,a?Math.round(g):g},this.dispose=function(e,t,o){return clearInterval(f),!0}},To.Dictionary=function(e){z_d("17"),this.length=0,this.unique=e;var n=this.objects=[],r=this.values=[];this.add=function(e,t){zot(e)||(zot(t)&&(t=!0),this.unique&&this.remove(e),n.push(e),r.push(t),this.length++)},this.at=function(e){if(!zot(e)){e=n.indexOf(e);return-1<e?r[e]:null}},this.remove=function(e){if(zot(e))return!1;e=n.indexOf(e);return-1<e&&(n.splice(e,1),r.splice(e,1),this.length--,!0)},this.clear=function(){return n=this.objects=[],r=this.values=[],this.length=null,this},this.dispose=function(e,t,o){return r=n=null,!(this.length=null)}},To.Hierarchy=function(o,l){z_d("17.5");var n,t=this;function r(e){var r=[],i=[];return function o(e,n){To.loop(e,function(e,t){r.push(t.obj),i.push(e),t.open&&o(t.list,n+1)})}(e,0),[r,i]}zot(o)||(zot(l)&&(l=!1),t.processSimple=function(e){var a=0,t={};return function n(e,r,i,o){var t;e.constructor=={}.constructor?(e.list&&(e=(t=e).list),o&&t&&To.loop(t,function(e,t){"list"!=e&&(o[e]=t)}),To.loop(e,function(e,t){var o={},e=r["id"+a]={obj:e,level:i,open:l,opened:!1,list:o};a++,n(t,o,i+1,e)})):Array.isArray(e)&&To.loop(e,function(e){r["id"+a]={obj:e},a++})}(o,t,0),n=a,t},t.processComplex=function(e){var r=0;return function o(e,n){To.loop(e,function(e,t){t.level=n,zot(t.open)&&(t.open=l),zot(t.opened)&&(t.opened=!1),t.list&&o(t.list,n+1),r++})}(e,0),n=r,e},zot(o.id0)?t.data=t.processSimple(o):t.data=t.processComplex(o),t.getLinearList=function(e){return zot(e)&&(e=t.data),r(e)[0]},t.getLinearIDs=function(e){return zot(e)&&(e=t.data),r(e)[1]},t.getData=function(n){var r;return function o(e){To.loop(e,function(e,t){return e==n?r=t:void o(t.list)})}(t.data),r},t.getNextSibling=function(n){var r,i;return function o(e){To.loop(e,function(e,t){return!i&&r?i=e:void(e==n?r=t:o(t.list))})}(t.data),i},t.getPrevSibling=function(r){var i,a=[];return function o(e,n){To.loop(e,function(e,t){return e==r?i=a[n]||a[n-1]:(a[n]=e,void o(t.list,n+1))})}(t.data,0),i},Object.defineProperty(t,"length",{get:function(){return n},set:function(e){zon&&zogy("Hierarchy() - length is read only")}}))},To.Pick=function(e){To.pickCheck||(z_d("17.6"),To.pickCheck=!0),this.choices=e,this.num=function(e){for(var t=[],o=0;o<e;o++)t.push(To.Pick.choose(this));return this.choices=To.Pick.series(t),this};var r=this;this.loop=function(e,t){for(var o,n=0;n<e;n++)if(void 0!==(o=t(To.Pick.choose(r),n,e)))return o}},To.Pick.prototype.type="Pick",To.Pick.series=function(){return To.pickCheck||(z_d("17.6"),To.pickCheck=!0),To.series.apply(null,arguments)},To.Pick.rand=function(e,t,o,n){return To.pickCheck||(z_d("17.6"),To.pickCheck=!0),To.rand(e,t,o,n)},To.Pick.choose=function(e,t,o){if(To.pickCheck||(z_d("17.6"),To.pickCheck=!0),null==t&&(t=!0),null==e)return e;if("Pick"==e.type||t){t=e.choices||e;if(Array.isArray(t)){var n=t[Math.floor(Math.random()*t.length)];return To.Pick.choose(n)}return t.constructor==={}.constructor?zot(t.noPick)?zot(t.max)?t:(zot(t.integer)&&(t.integer=!1),n=To.Pick.rand(t.min,t.max,t.integer,t.negative)):t.noPick:t instanceof Function?(null==t.count?t.count=0:t.count++,To.Pick.choose(t(o,!0))):e}return e},To.scrollX=function(e,t){return z_d("18"),To.abstractScroll("X","Left",e,t)},To.scrollY=function(e,t){return z_d("19"),To.abstractScroll("Y","Top",e,t)},To.abstractScroll=function(e,t,o,n){z_d("20");var r,i,a,l,s,c=Ao(n),u="X"==e?"Y":"X";if(zot(o)){var d=navigator.applicationName;return-1==navigator.userAgent.indexOf("Safari")&&"Safari"!=d||0,document.documentElement&&document.documentElement["scroll"+t]||document.body["scroll"+t]}return zot(n)?window.scrollTo(To["scroll"+u](),o):((c=n*("s"==c?1e3:1))<50&&(c=50),r=c/50,i=To["scroll"+e](),a=(o-i)/r,l=0,s=setInterval(function(){l++,i+=a,window.scrollTo(To["scroll"+u](),i),r<=l&&(window.scrollTo(To["scroll"+u](),o),clearInterval(s))},50)),o},To.windowWidth=function(){z_d("21");var e,t=isNaN(window.innerWidth)?window.clientWidth:window.innerWidth,o=isNaN(window.innerHeight)?window.clientHeight:window.innerHeight;return!To.mobile()||zot(window.orientation)||window.parent||(o<t&&90!=Math.abs(window.orientation)||t<o&&90==Math.abs(window.orientation))&&(e=t,t=o,o=e),void 0!==zdf&&zdf.swapRotation?o:t},To.windowHeight=function(){z_d("22");var e,t=isNaN(window.innerWidth)?window.clientWidth:window.innerWidth,o=isNaN(window.innerHeight)?window.clientHeight:window.innerHeight;return!To.mobile()||zot(window.orientation)||window.parent||(o<t&&90!=Math.abs(window.orientation)||t<o&&90==Math.abs(window.orientation))&&(e=t,t=o,o=e),void 0!==zdf&&zdf.swapRotation?t:o},To.getQueryString=function(e){if(z_d("22.5"),zot(e)&&(e=location.search.replace("?","")),""==e)return{};for(var t=e.split("&"),o={},n=0;n<t.length;n++){var r=t[n].split("=");void 0===o[r[0]]?o[r[0]]=decodeURIComponent((r[1]+"").replace(/\+/g,"%20")):"string"==typeof o[r[0]]?o[r[0]]=[o[r[0]],decodeURIComponent((r[1]+"").replace(/\+/g,"%20"))]:o[r[0]].push(decodeURIComponent((r[1]+"").replace(/\+/g,"%20")))}return o},To.swapHTML=function(e,t){return z_d("17.2"),To.swapProperties("innerHTML",zid(e),zid(t))},To.urlEncode=function(e){z_d("23");e=(e+"").toString();return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},To.urlDecode=function(e){return z_d("24"),decodeURIComponent((e+"").replace(/\+/g,"%20"))},To.setCookie=function(e,t,o){var n;if(z_d("25"),!zot(e)&&!zot(t))return n=o?((n=new Date).setTime(n.getTime()+24*o*60*60*1e3),"; expires="+n.toGMTString()):"",document.cookie=e+"="+escape(t)+n+"; path=/",!0},To.getCookie=function(e){z_d("26");var t,o=document.cookie.split(/;\s*/),n=new Array;for(I=0;I<o.length;I++)n[(t=o[I].split("="))[0]]=t[1];if(void 0!==n[e])return unescape(n[e])},To.deleteCookie=function(e){return z_d("27"),!zot(To.getCookie(e))&&(To.setCookie(e,"",-1),!0)},null==createjs)return zon&&zogr("ZIM >= 4.3.0 requires createjs namespace to be loaded (import createjs before zim)"),To;function Ge(e,t){t?(e.mouseChildren=!0,e.mouseEnabled=!0,e._enabled=!0):(e.mouseChildren=!1,e.mouseEnabled=!1,e._enabled=!1)}var c;To.localToGlobal=function(e,t,o,n){if(To.coordinatesCheck||(z_d("50.43"),To.coordinatesCheck=!0),null!=e&&null!=t){t=n.call(o,e,t),o=o.stage;if(void 0===zdf){if(!o)return t;zdf={stage:o,canvas:o.canvas}}return t.x/=To.scaX,t.y/=To.scaY,t}},To.globalToLocal=function(e,t,o,n){if(To.coordinatesCheck||(z_d("50.43"),To.coordinatesCheck=!0),null!=e&&null!=t){var r=o.stage;if(void 0===zdf){if(!r)return n.call(o,e,t);zdf={stage:r,canvas:r.canvas}}return e*=To.scaX,t*=To.scaY,n.call(o,e,t)}},To.localToLocal=function(e,t,o,n){if(To.coordinatesCheck||(z_d("50.43"),To.coordinatesCheck=!0),null!=e&&null!=t&&null!=o){t=n.localToGlobal(e,t),n=n.stage;if(void 0===zdf){if(!n)return o.globalToLocal(t.x,t.y);zdf={stage:n,canvas:n.canvas}}return o==(n=n||zdf.stage)?t:t?o.globalToLocal(t.x,t.y):void 0}},To.displayBase=function(e){To.zimDBCheck||(z_d("50.432"),To.zimDBCheck=!0);var t,o,n,r=e;Object.defineProperty(e,"width",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.width*this.scaleX)},set:function(e){var t=this.getBounds();zot(t)||0==t.width?zon&&zogy("DisplayObject() - width needs bounds set with setBounds()"):(t=e/t.width,this.scaleX=this.scaleY=t)}}),Object.defineProperty(e,"height",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.height*this.scaleY)},set:function(e){var t=this.getBounds();zot(t)||0==t.height?zon&&zogy("DisplayObject() - height needs bounds set with setBounds()"):(t=e/t.height,this.scaleX=this.scaleY=t)}}),Object.defineProperty(e,"widthOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.width*this.scaleX)},set:function(e){var t=this.getBounds();!zot(t)&&0!=t.width||!zon?(t=e/t.width,this.scaleX=t):zogy("DisplayObject() - widthOnly needs bounds set with setBounds()")}}),Object.defineProperty(e,"heightOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:Math.abs(e.height*this.scaleY)},set:function(e){var t=this.getBounds();!zot(t)&&0!=t.height||!zon?(t=e/t.height,this.scaleY=t):zogy("DisplayObject() - heightOnly needs bounds set with setBounds()")}}),Object.defineProperty(e,"level",{enumerable:!0,get:function(){return this.parent?this.parent.getChildIndex(this):null},set:function(e){this.parent&&this.parent.setChildIndex(this,Math.max(0,Math.min(e,this.parent.numChildren-1)))}}),Object.defineProperty(e,"depth",{enumerable:!0,get:function(){return this._depth},set:function(e){var t;this._depth=e,zot(this.vrChannel)||(t=this.vrParallaxDistance?e*this.vrParallax*this.vrParallaxDistance:0,"left"==this.vrChannel?this.x=this.vrStartX+e+t:"right"==this.vrChannel&&(this.x=this.vrStartX-e+t))}}),Object.defineProperty(e,"blendMode",{enumerable:!0,get:function(){return this.compositeOperation},set:function(e){this.compositeOperation=e}}),r.name||Object.defineProperty(r,"name",{get:function(){return t},set:function(e){t=e,To.zimObjectIDs[e]=r}}),r._draggable,Object.defineProperty(r,"draggable",{get:function(){return this._draggable},set:function(e){e!=this._draggable&&(this._draggable=e,this._draggable?this.drag():this.noDrag())}}),r.on("mousedown",function(e){e.target.stage&&(o=e.target.stage.frame).allowDefault&&(n=!0,o.allowDefault=!1)}),r.on("pressup",function(e){o&&n&&(o.allowDefault=!0)});for(var i=["hue","saturation","brightness","contrast"],a=0;a<i.length;a++)!function(){for(var o=i[a],e=0;e<2;e++)!function(){var t=0==e?"":"Batch";Object.defineProperty(r,o+t,{get:function(){return r.effects&&r.effects.multi?r.effects.multi[o]:0},set:function(e){r.effects&&r.effects.multi?r.effects.multi[o]=e:r.effect(new MultiEffect("hue"==o?e:0,"saturation"==o?e:0,"brightness"==o?e:0,"contrast"==o?e:0)),t||r.updateEffects()}})}()}()},To.gD=function(e){To.zimGDCheck||(z_d("50.435"),To.zimGDCheck=!0),e&&(To.KEYFOCUS==e&&(To.KEYFOCUS=null),e.draggable&&e.noDrag(),e.zimTweens&&e.stopAnimate(),e.zimWire&&e.noWire(),e.zimWired&&e.noWired(),e.zimClickHoldDownEvent&&e.noHold(),e.transformControls&&e.transformControls.dispose(),e.zimClickDownEvent&&(e.zimClickDownEvent=null),e.zimClickUpEvent&&(e.zimClickUpEvent=null),e.physics&&e.removePhysics(),e.name&&To.zimObjectIDs[e.name]==e&&delete To.zimObjectIDs[e.name])},To.Stage=function(e){var t;z_d("50.44"),zot(e)||(zot(t="CANVAS"==e.tagName?e:zid(e))||(this.cjsStage_constructor(e),this.setBounds(0,0,t.width,t.height),this.type="Stage",void 0===zdf&&(zimDefaultFrame=zdf={stage:this}),this.cache=function(e,t,o,n,r,i){var a,l;return zot(o)&&(zot(e)?zot(a=this.getBounds())||(l=0<this.borderWidth?this.borderWidth/2:0,e=a.x-l,t=a.y-l,o=a.width+2*l,n=a.height+2*l):(o=e,n=t,t=e=0)),this.cjsStage_cache(e,t,o,n,r,i),this},this.on("mousedown",function(e){var t=e.clone();t.type="pressdown",e.target.dispatchEvent(t)},void 0,!1,void 0,!0),this.loop=function(e,t,o,n,r){return To.loop(this,e,t,o,n,r)},this.hitTestGrid=function(e,t,o,n,r,i,a,l,s,c,u,d){return To.hitTestGrid(this,e,t,o,n,r,i,a,l,s,c,u,d)},this.disposeAllChildren=function(){for(var e=this.numChildren-1;0<=e;e--){var t=this.getChildAt(e);t.dispose&&t.dispose()}return this},!createjs||createjs.stageTransformable||!zdf.retina&&"undefined"==typeof exportRoot||(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(e){this.cjsStage_scaleX=e,this.cjsStage_scaleY=e,To.scaX=createjs.stageTransformable?1:e,To.scaY=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(e){this.cjsStage_scaleX=e,To.scaX=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(e){this.cjsStage_scaleY=e,To.scaY=createjs.stageTransformable?1:e}}),this.localToGlobal=function(e,t){return To.localToGlobal(e,t,this,this.cjsStage_localToGlobal)},this.globalToLocal=function(e,t){return To.globalToLocal(e,t,this,this.cjsStage_globalToLocal)},this.localToLocal=function(e,t,o){return To.localToLocal(e,t,o,this)})))},To.extend(To.Stage,createjs.Stage,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStage",!1),To.StageGL=function(e,t){var o;z_d("50.45"),zot(e)||(zot(o="CANVAS"==e.tagName?e:zid(e))||(this.cjsStageGL_constructor(e,t),this.setBounds(0,0,o.width,o.height),this.type="StageGL",void 0===zdf&&(zdf={stage:this}),this.cache=function(e,t,o,n,r,i){var a,l;return zot(o)&&(zot(e)?zot(a=this.getBounds())||(l=0<this.borderWidth?this.borderWidth/2:0,e=a.x-l,t=a.y-l,o=a.width+2*l,n=a.height+2*l):(o=e,n=t,t=e=0)),this.cjsStageGL_cache(e,t,o,n,r,i),this},this.on("mousedown",function(e){var t=e.clone();t.type="pressdown",e.target.dispatchEvent(t)},void 0,!1,void 0,!0),this.loop=function(e,t,o,n,r){return To.loop(this,e,t,o,n,r)},this.hitTestGrid=function(e,t,o,n,r,i,a,l,s,c,u,d){return To.hitTestGrid(this,e,t,o,n,r,i,a,l,s,c,u,d)},this.disposeAllChildren=function(){for(var e=this.numChildren-1;0<=e;e--){var t=this.getChildAt(e);t.dispose&&t.dispose()}return this},!createjs||createjs.stageTransformable||!zdf.retina&&"undefined"==typeof exportRoot||(Object.defineProperty(this,"scale",{get:function(){return this.cjsStage_scale},set:function(e){this.cjsStage_scaleX=e,this.cjsStage_scaleY=e,To.scaX=createjs.stageTransformable?1:e,To.scaY=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleX",{get:function(){return this.cjsStage_scaleX},set:function(e){this.cjsStage_scaleX=e,To.scaX=createjs.stageTransformable?1:e}}),Object.defineProperty(this,"scaleY",{get:function(){return this.cjsStage_scaleY},set:function(e){this.cjsStage_scaleY=e,To.scaY=createjs.stageTransformable?1:e}}),this.localToGlobal=function(e,t){return To.localToGlobal(e,t,this,this.cjsStageGL_localToGlobal)},this.globalToLocal=function(e,t){return To.globalToLocal(e,t,this,this.cjsStageGL_globalToLocal)},this.localToLocal=function(e,t,o){return To.localToLocal(e,t,o,this)})))},To.extend(To.StageGL,createjs.StageGL,["cache","localToLocal","localToGlobal","globalToLocal"],"cjsStageGL",!1),To.Container=function(e,t,o,n,r,i,a){if(s=zob(To.Container,arguments,"a, b, c, d, style, group, inherit",this))return s;To.containerCheck||(z_d("50.5"),z_d("50.435"),To.containerCheck=!0),this.cjsContainer_constructor(),this.type="Container",this.group=i;var c=this,l=!1===r?{}:To.getStyle(this.type,this.group,a);zot(e)&&(e=null!=l.a?l.a:null),zot(t)&&(t=null!=l.b?l.b:null),zot(o)&&(o=null!=l.c?l.c:null),zot(n)&&(n=null!=l.d?l.d:null);var s=u(e,t,o,n);function u(e,t,o,n){var r=[];return zot(e)?r=[e,t,o,n]:zot(t)?r=[e.x,e.y,e.width,e.height]:zot(o)?(r[0]=0,r[1]=0,r[2]=e,r[3]=t):(r[0]=e,r[1]=t,r[2]=o,r[3]=n),zot(r[3])&&(r[3]=r[2]),r}zot(e)||this.setBounds(s[0],s[1],s[2],s[3]),this.cache=function(e,t,o,n,r,i,a){if("AC"==this.type&&zdf)return zdf.ac("cache",arguments,this),this;if(l=zob(c.cache,arguments,"a,b,c,d,scale,options,margin"))return l;var l,s=c.getBounds();return zot(o)&&(zot(e)?zot(s)||(l=0<c.borderWidth?c.borderWidth/2:0,e=s.x-l,t=s.y-l,o=s.width+2*l,n=s.height+2*l):(o=e,n=t,t=e=0)),"Triangle"==c.type&&(e-=c.borderWidth||0,o+=c.borderWidth?2*c.borderWidth:0,t-=c.borderWidth||0,n+=c.borderWidth?2*c.borderWidth:0),zot(a)&&(a=0),c.cjsContainer_cache(e-a,t-a,o+2*a,n+2*a,r,i),s&&c.setBounds(s.x,s.y,s.width,s.height),c},this.uncache=function(){return c.cjsContainer_uncache(),c},this.childrenToBitmap=function(){var e=this.cacheCanvas,t=new To.Bitmap(this.cache().cacheCanvas);return e||this.uncache(),this.removeAllChildren(),t.addTo(this),this};s=zdf||1;createjs&&!createjs.stageTransformable&&s.retina&&(this.localToGlobal=function(e,t){return To.localToGlobal(e,t,this,this.cjsContainer_localToGlobal)},this.globalToLocal=function(e,t){return To.globalToLocal(e,t,this,this.cjsContainer_globalToLocal)},this.localToLocal=function(e,t,o){return To.localToLocal(e,t,o,this)}),this.setBounds=function(e,t,o,n){n=u(e,t,o,n);return this.cjsContainer_setBounds(n[0],n[1],n[2],n[3]),this},this.disposeAllChildren=function(){for(var e=this.numChildren-1;0<=e;e--){var t=this.getChildAt(e);t.dispose&&t.dispose()}return this},To.displayBase(c),!1!==r&&To.styleTransforms(this,l),this.clone=function(e){if("AC"==this.type&&zdf)return zon&&zogy("ZIM asset() - cannot clone lazy loaded asset - use Frame() assets parameter or loadAssets() method"),zdf.ac("clone",arguments,this),this;var t=this.getBounds();return zot(t)&&(t={x:null,y:null,width:null,height:null}),this.cloneChildren(this.cloneProps(new To.Container(t.x,t.y,t.width,t.height,r,this.group,a)),e)},this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)}},To.Container.prototype.dispose=function(e){return function e(t,o){t&&To.gD(t);!o&&t&&t.dispose&&t.dispose!==To.Container.prototype.dispose&&t.dispose(null,null,!0);if(t&&t.addChild&&(t.dispatchEvent("removed"),t.removeAllEventListeners(),t.numChildren))for(var n=t.numChildren-1;0<=n;n--)e(t.getChildAt(n));t&&t.parent&&t.parent.removeChild(t)}(this,e),!0},To.Container.prototype.specialColor=function(e,t){"GradientColor"==t.type?e.linearGradient(t.colors,t.ratios,t.x0,t.y0,t.x1,t.y1):"RadialColor"==t.type?e.radialGradient(t.colors,t.ratios,t.x0,t.y0,t.r0,t.x1,t.y1,t.r1):"BitmapColor"==t.type&&e.bitmap(t.image,t.repetition,t.matrix)},zimify(To.Container.prototype),To.extend(To.Container,createjs.Container,["cache","uncache","setBounds","clone","localToLocal","localToGlobal","globalToLocal"],"cjsContainer",!1),To.Shape=function(e,t,o,n,r,i,a,l,s){if(d=zob(To.Shape,arguments,"a, b, c, d, graphics, optimize, style, group, inherit",this))return d;z_d("50.6"),this.cjsShape_constructor(r),this.type="Shape",this.group=l;var c=!1===a?{}:To.getStyle(this.type,this.group,s),u=this;zot(e)&&(e=null!=c.a?c.a:null),zot(t)&&(t=null!=c.b?c.b:null),zot(o)&&(o=null!=c.c?c.c:null),zot(n)&&(n=null!=c.d?c.d:null),zot(r)&&(r=null!=c.graphics?c.graphics:null),zot(i)&&(i=null!=c.optimize&&c.optimize);var d=h(e,t,o,n);function h(e,t,o,n){var r=[];return zot(o)?(r[0]=0,r[2]=e,r[1]=0,r[3]=t):(r[0]=e,r[2]=o,r[1]=t,r[3]=n),zot(r[3])&&(r[3]=r[2]),r}if(zot(e)||this.setBounds(d[0],d[1],d[2],d[3]),!i)for(var g=["mt","lt","a","at","bt","ct","qt","cp","c","f","lf","rf","bf","ef","ss","sd","s","ls","rs","bs","es","dr","rr","rc","dc","de","dp","pg","p"],p=0;p<g.length;p++)!function(){var e=p;u[g[e]]=function(){return("ct"==g[e]?u.graphics.curveTo:u.graphics[g[e]]).apply(u.graphics,arguments),u}}();Object.defineProperty(u,"command",{get:function(){return u.graphics.command},set:function(e){}}),this.cache=function(e,t,o,n,r,i,a){if(l=zob(u.cache,arguments,"a,b,c,d,scale,options,margin"))return l;var l,s=u.getBounds();return zot(o)&&(zot(e)?zot(s)||(l=0<u.borderWidth?u.borderWidth/2:0,e=s.x-l,t=s.y-l,o=s.width+2*l,n=s.height+2*l):(o=e,n=t,t=e=0)),zot(a)&&(a=0),u.cjsShape_cache(e-a,t-a,o+2*a,n+2*a,r,i),u},!(this.setBounds=function(e,t,o,n){n=h(e,t,o,n);return this.cjsShape_setBounds(n[0],n[1],n[2],n[3]),this})!==a&&To.styleTransforms(this,c),this.clone=function(e){zot(e)&&(e=!0);var t=this.getBounds();zot(t)&&(t={x:null,y:null,width:null,height:null});t=u.cloneProps(new To.Shape(t.x,t.y,t.width,t.height,r,a,l,s));return t.graphics=e?u.graphics.clone():u.graphics,t};c=zdf||1;createjs&&!createjs.stageTransformable&&c.retina&&(this.localToGlobal=function(e,t){return To.localToGlobal(e,t,this,this.cjsShape_localToGlobal)},this.globalToLocal=function(e,t){return To.globalToLocal(e,t,this,this.cjsShape_globalToLocal)},this.localToLocal=function(e,t,o){return To.localToLocal(e,t,o,this)}),this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)},To.displayBase(u),this.dispose=function(e,t,o){To.gD(this),this.graphics.c(),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},To.extend(To.Shape,createjs.Shape,["cache","clone","setBounds","localToLocal","localToGlobal","globalToLocal"],"cjsShape",!1),zimify(To.Shape.prototype),To.Bitmap=function(l,s,c,t,o,e,n,r,i){var a,u;if(a=zob(To.Bitmap,arguments,"image, width, height, left, top, id, style, group, inherit",this))return a;z_d("50.7"),zot(l)||l.uncache&&(u=l.cacheCanvas,l=(h=l).cache().cacheCanvas),this.cjsBitmap_constructor(l),h&&!u&&h.uncache();var d=this;this.type="Bitmap",this.group=r;var h=!1===n?{}:To.getStyle(this.type,this.group,i);this.id=d.fileID=null!=h.id?h.id:e,zot(s)&&(s=null!=h.width?h.width:l?l.width:100),zot(c)&&(c=null!=h.height?h.height:l?l.height:100),zot(s)||zot(c)||d.setBounds(0,0,s,c),zot(t)&&(t=null!=h.left?h.left:0),zot(o)&&(o=null!=h.top?h.top:0),zdf&&(zdf.canvas.getContext("2d")?this.imageData=zdf.canvas.getContext("2d").createImageData(s,c):this.imageData=document.createElement("canvas").getContext("2d").createImageData(s,c),this.drawImageData=function(e,t,o,n,r,i){var a;zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=0),zot(r)&&(r=s),zot(i)&&(i=c),d.proxyCanvas||((a=d.proxyCanvas=document.createElement("canvas")).setAttribute("width",s),a.setAttribute("height",c),d.proxyContext=a.getContext("2d"),l=d.image=a),d.proxyContext&&d.proxyContext.putImageData(d.imageData,e,t,o,n,r,i)},zot(l)&&d.drawImageData(),l.match&&l.match(/data:image/i)&&setTimeout(function(){d.stage&&d.stage.update(),setTimeout(function(){d.stage&&d.stage.update()},50)},50)),l&&l.nodeName&&"video"!=l.nodeName.toLowerCase()&&(d.sourceRect={x:t,y:o,width:s,height:c}),this.cache=function(e,t,o,n,r,i){var a;zot(o)&&(zot(e)?zot(l=this.getBounds())||(a=0<this.borderWidth?this.borderWidth/2:0,e=l.x-a,t=l.y-a,o=l.width+2*a,n=l.height+2*a):(o=e,n=t,t=e=0));var l=this.getBounds();return this.cjsBitmap_cache(e,t,o,n,r,i),this.setBounds(l.x,l.y,l.width,l.height),this},this.clone=function(){var e=this.cloneProps(new To.Bitmap(l,s,c,t,o,d.fileID,n,this.group,i));return e.cloned=!0,e};var g,p=zdf||1;createjs&&!createjs.stageTransformable&&p.retina&&(this.localToGlobal=function(e,t){return To.localToGlobal(e,t,this,this.cjsBitmap_localToGlobal)},this.globalToLocal=function(e,t){return To.globalToLocal(e,t,this,this.cjsBitmap_globalToLocal)},this.localToLocal=function(e,t,o){return To.localToLocal(e,t,o,this)}),this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)},this.getColorAt=function(e,t){g||(d.cache(),g=d.cacheCanvas.getContext("2d"),d.uncache());t=g.getImageData(e,t,1,1).data;return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},To.displayBase(d),!1!==n&&To.styleTransforms(this,h),this.dispose=function(e,t,o){To.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.cloned||this.id&&((p=this.stage&&this.stage.frame?this.stage.frame:zdf)&&p.assets&&p.assets[this.id]&&delete p.assets[this.id],To.assets[this.id]&&delete To.assets[this.id]),this.parent&&this.parent.removeChild(this)}},To.Bitmap.fromData=function(t,o){var n=100,r=100,i=new Image;i.onload=function(){n=i.naturalWidth,r=i.naturalHeight,zot(n)&&(n=i.width),zot(r)&&(r=i.height);var e=new To.Bitmap(t,n,r);setTimeout(function(){o(e)},50)},i.src=t},To.extend(To.Bitmap,createjs.Bitmap,["cache","clone","dispose","localToLocal","localToGlobal","globalToLocal"],"cjsBitmap",!1),zimify(To.Bitmap.prototype),To.Sprite=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b){if(B=zob(To.Sprite,arguments,"image, cols, rows, count, offsetX, offsetY, spacingX, spacingY, width, height, animations, json, id, globalControl, spriteSheet, label, frame, style, group, inherit",this))return B;z_d("50.8"),this.type="Sprite",this.group=y;var v,w=!1===z?{}:To.getStyle(this.type,this.group,b),Y=this;if(zot(m)&&(m=null!=w.frame?w.frame:zdf),zot(d)&&!zot(e)){zot(t)&&(t=null!=w.cols?w.cols:1),zot(o)&&(o=null!=w.rows?w.rows:1),zot(n)&&(n=null!=w.count?w.count:t*o),zot(r)&&(r=null!=w.offsetX?w.offsetX:0),zot(i)&&(i=null!=w.offsetY?w.offsetY:0),zot(a)&&(a=null!=w.spacingX?w.spacingX:0),zot(l)&&(l=null!=w.spacingY?w.spacingY:0),zot(s)&&(s=(null!=w.width?w:e).width),zot(c)&&(c=(null!=w.height?w:e).height);var C=(s-r+a)/t-a,x=(c-i+l)/o-l,k=[],T=0;e:for(var A=0;A<o;A++)for(var P=0;P<t;P++){if(++T>n)break e;k.push([r+P*(C+a),i+A*(x+l),C,x])}E(e,k,u)}else if(p)u=(v=p).animations;else{if(!d)return;var B,S,k=d.frames;u=d.animations,zot(e)?(B=d.images?d.images[0]:null)&&B.split?(S=[],To.loop(d.images,function(e){var t=e.split("/").pop();m.asset(e)&&"EmptyAsset"!=m.asset(e).type?S.push(m.asset(e)):m.asset(t)&&"EmptyAsset"!=m.asset(t).type?S.push(m.asset(t)):"EmptyAsset"!=m.asset(e).type?S.push(m.asset(e)):zon&&zogy("Sprite() - please preload Sprite in Frame or with loadAssets")}),E(S,k,u)):v=new createjs.SpriteSheet(d):E(e,k,u)}function E(o,e,t){Array.isArray(o)||(o=[o]),To.loop(o,function(e,t){o[t]=e.image});t={images:o,frames:e,animations:t||[]};v=new createjs.SpriteSheet(t)}this.animations=u,this.cjsSprite_constructor(v,f),zot(f)||this.stop(),zot(h)&&(h=To.makeID()),this.id=h,zot(g)&&(g=!0),Y.globalControl=g;var D,X=0;this.parseFrames=function(e,t,o,n){var i=[],a=Number.MAX_VALUE,l=0;if(zot(e))zot(t)&&(t=0),zot(o)&&(o=Y.totalFrames-1),s(t,o);else{if(zot(Y.animations)||zot(Y.animations[e]))return[];r(Y.animations[e])}function r(e){var t;Array.isArray(e)?(s((t=e)[0],t[1],t[3]),t[2]&&!zot(Y.animations[t[2]])&&r(Y.animations[t[2]])):e.constructor=={}.constructor?function(e){if(!zot(e.frames)){zot(e.speed)&&(e.speed=1);for(var t=0;t<e.frames.length;t++)e.speed<a&&(a=e.speed),e.speed>l&&(l=e.speed),i.push({f:e.frames[t],s:e.speed});e.next&&!zot(Y.animations[e.next])&&r(Y.animations[e.next])}}(e):isNaN(e)||i.push({f:Math.floor(e),s:1})}function s(e,t,o){if(zot(o)&&(o=1),e<t)for(var n=e;n<=t;n++)r(n);else for(n=t;n<=e;n++)r(e-(n-t));function r(e){o<a&&(a=o),l<o&&(l=o),i.push({f:e,s:o})}}if(n)return i;a=To.constrain(To.decimals(a),.1),l=To.constrain(To.decimals(l),.1);for(var c,u=[],d=a!=l,h=0;h<i.length;h++)if(c=i[h],d)for(var g=0;g<To.constrain(Math.round(a<1?c.s/a:c.s),.1);g++)u.push(c.f);else u.push(c.f);return u},this.run=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B){if(S=zob(this.run,arguments,"time, label, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, startFrame, endFrame, tweek, id, globalControl, pauseOnBlur"))return S;var S=Ao();if(zot(T)&&(T=1),zot(A)||(Y.id=A),zot(P)||(Y.globalControl=P),Array.isArray(t)){for(var E,I,M=[],O=0,j=0;j<t.length;j++){(L=t[j]).lookup=Y.parseFrames(L.label,L.startFrame,L.endFrame),0==j&&(I=L.lookup[0]),delete L.startFrame,delete L.endFrame,L.obj=To.merge(L.obj,{normalizedFrame:L.lookup.length-1}),L.set=To.merge(L.set,{normalizedFrames:{noPick:L.lookup},normalizedFrame:0}),zot(L.wait)&&(L.wait=O*T),E=L.label,delete L.label,M.push(L),O=0;var L=zot(L.time)?e:L.time;0<k-x&&(O=L/(k-x)/2)}if(0==M.length)return this;1==M.length?(e=M[0].time,t=E,_()):Y.gotoAndStop(I)}else _();function _(){D=Y.parseFrames(t,x,k),X=0,Y.gotoAndStop(D[X]),x=k=null,M={normalizedFrame:D.length-1}}zot(e)&&(e="s"==S?1:1e3),Y.running&&Y.stopAnimate(Y.id),Y.running=!0,Array.isArray(M)||((O=0)<k-x&&(O=e/Math.abs(k-x)/2),D&&0<D.length&&(O=e/D.length/2),zot(c)&&(c=O*T),zot(m)&&(m=O*T));return To.animate({target:Y,obj:M,time:e,ease:"linear",call:function(){Y.running=!1,Y.stop(),o&&"function"==typeof o&&o(n||Y)},params:n,wait:r,waitedCall:i,waitedParams:a,loop:l,loopCount:s,loopWait:c,loopCall:u,loopParams:d,loopWaitCall:h,loopWaitParams:g,rewind:f,rewindWait:m,rewindCall:z,rewindParams:y,rewindWaitCall:b,rewindWaitParams:v,rewindTime:w,rewindEase:C,override:!1,pauseOnBlur:B,id:Y.id}),Y.runPaused=!1,Y},this.runPaused=!0,this.pauseRun=function(e){return zot(e)&&(e=!0),Y.runPaused=e,(Y.globalControl?To:Y).pauseAnimate(e,Y.id),Y},this.stopRun=function(){return Y.runPaused=!0,Y.running=!1,(Y.globalControl?To:Y).stopAnimate(Y.id),Y},Object.defineProperty(this,"frame",{get:function(){return this.currentFrame},set:function(e){e=Math.round(e),this.paused?this.gotoAndStop(e):this.gotoAndPlay(e)}}),Object.defineProperty(this,"normalizedFrame",{get:function(){return X},set:function(e){X=Math.round(e),this.gotoAndStop(D[X])}}),Object.defineProperty(this,"normalizedFrames",{get:function(){return D},set:function(e){D=e}}),Object.defineProperty(this,"totalFrames",{get:function(){return v.getNumFrames()},set:function(e){zog("zim.Sprite - totalFrames is read only")}}),!1!==z&&To.styleTransforms(this,w),this.clone=function(){return this.cloneProps(new To.Sprite(e,t,o,n,r,i,a,l,s,c,u,d,null,g,p,f,m,z,this.group,b))};m=zdf||1;createjs&&!createjs.stageTransformable&&m.retina&&(this.localToGlobal=function(e,t){return To.localToGlobal(e,t,this,this.cjsSprite_localToGlobal)},this.globalToLocal=function(e,t){return To.globalToLocal(e,t,this,this.cjsSprite_globalToLocal)},this.localToLocal=function(e,t,o){return To.localToLocal(e,t,o,this)}),this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)},To.displayBase(Y),this.dispose=function(e,t,o){To.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},To.extend(To.Sprite,createjs.Sprite,["clone","localToLocal","localToGlobal","globalToLocal"],"cjsSprite",!1),zimify(To.Sprite.prototype),To.MovieClip=function(e,t,o,n,r,i,a){if(l=zob(To.MovieClip,arguments,"mode, startPosition, loop, labels, style, group, inherit",this))return l;z_d("50.9"),this.type="MovieClip",this.group=i;var l=!1===r?{}:To.getStyle(this.type,this.group,a);zot(e)&&(e=null!=l.mode?l.mode:null),zot(t)&&(t=null!=l.startPosition?l.startPosition:null),zot(o)&&(o=null!=l.loop?l.loop:null),zot(n)&&(n=null!=l.labels?l.labels:null),this.cjsMovieClip_constructor(e,t,o,n),!1!==r&&To.styleTransforms(this,l),this.clone=function(){return this.cloneProps(new To.MovieClip(e,t,o,n,r,this.group,a))},this.hasProp=function(e){return!zot(this[e])||this.hasOwnProperty(e)};l=zdf||1;createjs&&!createjs.stageTransformable&&l.retina&&(this.localToGlobal=function(e,t){return To.localToGlobal(e,t,this,this.cjsMovieClip_localToGlobal)},this.globalToLocal=function(e,t){return To.globalToLocal(e,t,this,this.cjsMovieClip_globalToLocal)},this.localToLocal=function(e,t,o){return To.localToLocal(e,t,o,this)}),To.displayBase(this),this.dispose=function(e,t,o){To.gD(this),this.dispatchEvent("removed"),this.removeAllEventListeners(),this.parent&&this.parent.removeChild(this)}},To.extend(To.MovieClip,createjs.MovieClip,["clone","localToLocal","localToGlobal","globalToLocal"],"cjsMovieClip",!1),zimify(To.MovieClip.prototype),To.SVGContainer=function(e,A,z,P,B,t,o,n){if(r=zob(To.SVGContainer,arguments,"svg, splitTypes, geometric, showControls, interactive, style, group, inherit",this))return r;z_d("50.95"),this.group=o;var r=!1===t?{}:To.getStyle("SVGContainer",this.group,n);e&&"Bitmap"==e.type&&(e=e.svg);var S,i,a,l,E=this,I=new To.Point(0,0);function M(){function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var o=[],n=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(o.push(a.value),!t||o.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function P(e,t,o,n,r,i,a){var l=e.x,e=e.y;return{x:n*(l*=t)-r*(e*=o)+i,y:r*l+n*e+a}}function B(e,t,o,n){var r=e*o+t*n;return 1<r&&(r=1),r<-1&&(r=-1),(e*n-t*o<0?-1:1)*Math.acos(r)}var S=2*Math.PI;return function(e){var t=e.px,o=e.py,n=e.cx,r=e.cy,i=e.rx,a=e.ry,l=e.xAxisRotation,s=void 0===l?0:l,c=e.largeArcFlag,u=void 0===c?0:c,l=e.sweepFlag,c=void 0===l?0:l,d=[];if(0===i||0===a)return[];var h=Math.sin(s*S/360),g=Math.cos(s*S/360),e=g*(t-n)/2+h*(o-r)/2,l=-h*(t-n)/2+g*(o-r)/2;if(0==e&&0==l)return[];i=Math.abs(i),a=Math.abs(a);s=Math.pow(e,2)/Math.pow(i,2)+Math.pow(l,2)/Math.pow(a,2);1<s&&(i*=Math.sqrt(s),a*=Math.sqrt(s));var l=A(function(e,t,o,n,r,i,a,l,s,c,u,d){var h=Math.pow(r,2),g=Math.pow(i,2),p=Math.pow(u,2),f=Math.pow(d,2),m=h*g-h*f-g*p;m<0&&(m=0),m/=h*f+g*p;a=(m=Math.sqrt(m)*(a===l?-1:1))*r/i*d,m=m*-i/r*u,o=c*a-s*m+(e+o)/2,c=s*a+c*m+(t+n)/2,t=(u-a)/r,n=(d-m)/i,r=(-u-a)/r,m=(-d-m)/i,i=B(1,0,t,n),m=B(t,n,r,m);return 0===l&&0<m&&(m-=S),1===l&&m<0&&(m+=S),[o,c,i,m]}(t,o,n,r,i,a,u,c,h,g,e,l),4),p=l[0],f=l[1],m=l[2],z=l[3],l=Math.abs(z)/(S/4);Math.abs(1-l)<1e-7&&(l=1);var y=Math.max(Math.ceil(l),1);z/=y;for(var b,v,w,C,x,k,T=0;T<y;T++)d.push((b=m,k=x=C=w=void 0,w=1.5707963267948966===(v=z)?.551915024494:-1.5707963267948966===v?-.551915024494:4/3*Math.tan(v/4),C=Math.cos(b),x=Math.sin(b),k=Math.cos(b+v),v=Math.sin(b+v),[{x:C-x*w,y:x+C*w},{x:k+v*w,y:v-k*w},{x:k,y:v}])),m+=z;return d.map(function(e){var t=P(e[0],i,a,g,h,p,f),o=t.x,n=t.y,r=P(e[1],i,a,g,h,p,f),t=r.x,r=r.y,e=P(e[2],i,a,g,h,p,f);return{x1:o,y1:n,x2:t,y2:r,x:e.x,y:e.y}})}}if(zot(A)&&(A=!1),zot(z)&&(z=!0),!zot(e)){if(e.replace&&(e=e.replace(/style\s?=[^"]*"[^"]*"/gi,"")),b=zot(e.draggable)?(e.getAttribute||(i=new DOMParser,e=i.parseFromString(e,"image/svg+xml").documentElement),this.svg=e):(i=new DOMParser,b=(e=e.innerHTML?i.parseFromString(e.innerHTML,"text/xml"):e).getElementsByTagName("svg"),this.svg=b?e.getElementsByTagName("svg")[0]:null),zot(b)||(a=b.getAttribute("width"),l=b.getAttribute("height")),a=a&&Number(a.trim()),l=l&&Number(l.trim()),this.zimContainer_constructor(a,l),this.type="SVGContainer",zot(b))return;var O,s=To.black,c=To.black,u=To.black,d=To.black,h=2,g=2,p=1,f=1,m=1,y=1;var b=e.getElementsByTagName("svg");function v(e){var o,n,r,i,a,e=e.split(";");return To.loop(e,function(e){var t=(e=e.replace(/,/g,"")).split(":"),e=t[0].trim().toLowerCase(),t=t[1].trim().toLowerCase().replace("px","");"fill"==e&&(o=t),"stroke"==e&&(n=t),"stroke-width"==e&&(r=t),"opacity"==e&&(a=i=t),"fill-opacity"==e&&(i=t),"stroke-opacity"==e&&(a=t)}),[o,n,r,i,a]}function w(e,t){var o,n,r,i,a,l,s,c,u,d=L(t),h=d[0],g=d[1],p=d[2],f=(d[3],d[4],d[5]),m=d[6];"circle"==e?(r=.5523*(n=Number(t.getAttribute("r").trim())),o=z?new To.Circle(Number(t.getAttribute("r")),h,g,p):new To.Blob(h,g,p,4,n,r,"mirror",null,P,null,null,null,null,null,null,null,null,null,null,B)):"rect"==e?o=z?new To.Rectangle(Number(t.getAttribute("width")),Number(t.getAttribute("height")),h,g,p,Number(t.getAttribute("rx"))):(s=Number(t.getAttribute("width")),c=Number(t.getAttribute("height")),d=Number(t.getAttribute("rx")),n=Number(t.getAttribute("ry")),d&&n?(r=.5523*d,l=.5523*n,new To.Blob(h,g,p,[[d,0,0,0,-r,0,0,0,"free"],[s-d,0,0,0,0,0,r,0,"free"],[s,n,0,0,0,-l,0,0,"free"],[s,c-n,0,0,0,0,0,l,"free"],[s-d,c,0,0,r,0,0,0,"free"],[d,c,0,0,0,0,-r,0,"free"],[0,c-n,0,0,0,l,0,0,"free"],[0,n,0,0,0,0,0,-l,"free"]],null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,B)):new To.Blob(h,g,p,[[0,0],[s,0],[s,c],[0,c]],null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,B)):"line"==e?o=new To.Squiggle(g,p,[[Number(t.getAttribute("x1")),Number(t.getAttribute("y1"))],[Number(t.getAttribute("x2")),Number(t.getAttribute("y2"))]],null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,B):"polygon"==e||"polyline"==e?(u=(u=(u=t.getAttribute("points")).replace(/-/g," -")).replace(/\s+/g," "),i=[],-1!=u.indexOf(",")?To.loop(u.split(" "),function(e){e=e.split(",");i.push([Number(e[0].trim()),Number(e[1].trim())])}):To.loop(u.split(" "),function(e,t){(t+1)%2==0&&i.push([a,e.trim()]),a=e.trim()}),o="polygon"==e?new Blob(h,g,p,i):new To.Squiggle(g,p,i,null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,B)):"ellipse"==e&&(o=new To.Blob(h,g,p,(s=l=0,c=Number(t.getAttribute("rx")),u=Number(t.getAttribute("ry")),[[l-c,s,0,0,l,(e=s+u)+(h=.5522848*u)-u,l,s-h,"mirror"],[l,s-u,0,0,l-(g=.5522848*c),s,(p=l+c)+g-c,s,"mirror"],[p,s,0,0,l,s-h,l+g-g,e+h-u,"mirror"],[l,e,0,0,p-c+g,s,l-g,s,"mirror"]]),null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,B)),o.loc(f,m,E);t=t.getAttribute("transform");(t||O)&&j(o,t||O),!B||"Rectangle"!=o.type&&"Circle"!=o.type||o.transform({showReg:!1,visible:P})}function j(r,e){e=e.split(")");To.loop(e,function(e){var t,o,n;""!=e&&(t=(o=e.trim().split("("))[0].trim().toLowerCase(),e=o[1].trim().toLowerCase().replace("px","").replace("deg",""),"translate"==t&&(o=e.split(","),r.mov(Number(o[0].trim()),o[1]?Number(o[1].trim()):0)),"scale"==t&&(n=e.split(","),"Blob"==r.type||"Squiggle"==r.type?1==n.length?r.transformPoints("scale",Number(n[0].trim())):2==n.length&&(r.transformPoints("scaleX",Number(n[0].trim())),r.transformPoints("scaleY",Number(n[1].trim()))):1==n.length?r.sca(Number(n[0].trim())):2==n.length&&r.sca(Number(n[0].trim()),Number(n[1].trim()))),"rotate"==t&&(1==(n=e.split(",")).length?n.push(0,0):2==n.length&&n.push(0),r.rot(Number(n[0].trim()),Number(n[1].trim()),Number(n[2].trim()))),"skewX"==t&&(r.skewX=e),"skewY"==t&&(r.skewY=e))})}0==b.length&&(b=[e]),function l(e){To.loop(e,function(e){var t,o,n,r,i,a=e.tagName.toLowerCase();"path"==a&&C(e),"circle"==a&&w("circle",e),"rect"==a&&w("rect",e),"ellipse"==a&&w("ellipse",e),"line"==a&&w("line",e),"polygon"==a&&w("polygon",e),"polyline"==a&&w("polyline",e),"g"==a&&((a=e.getAttribute("style"))&&(t=(i=v(a))[0],o=i[1],n=i[2],r=i[3],i=i[4]),O=e.getAttribute("transform"),c=e.getAttribute("fill")?e.getAttribute("fill"):zot(t)?s:t,d=e.getAttribute("stroke")?e.getAttribute("stroke"):zot(o)?u:o,g=e.getAttribute("stroke-width")?e.getAttribute("stroke-width"):zot(n)?h:n,f=e.getAttribute("fill-opacity")?e.getAttribute("fill-opacity"):zot(r)?p:r,y=e.getAttribute("stroke-opacity")?e.getAttribute("stroke-opacity"):zot(i)?m:i),l(e.children),"g"==e.tagName.toLowerCase()&&(c=s,d=u,g=h,f=p,y=m,O=null)})}(b)}function L(e){var t,o,n,r,i,a=e.getAttribute("style");a&&(t=(l=v(a))[0],o=l[1],n=l[2],r=l[3],i=l[4]),t=e.getAttribute("fill")?e.getAttribute("fill"):zot(t)?c:t,o=e.getAttribute("stroke")?e.getAttribute("stroke"):zot(o)?d:o,n=e.getAttribute("stroke-width")?e.getAttribute("stroke-width"):zot(n)?g:n,r=e.getAttribute("fill-opacity")?e.getAttribute("fill-opacity"):zot(r)?f:r,i=e.getAttribute("stroke-opacity")?e.getAttribute("stroke-opacity"):zot(i)?y:i;var a=e.getAttribute("x")?e.getAttribute("x"):0,a=e.getAttribute("cx")?e.getAttribute("cx"):a,l=e.getAttribute("y")?e.getAttribute("y"):0,l=e.getAttribute("cy")?e.getAttribute("cy"):l;return zot(r)||zot(t)||(t=To.convertColor(t,"rgba",Number(r))),zot(i)||zot(o)||(o=To.convertColor(o,"rgba",Number(i))),[t,o,Number(n),Number(r),Number(i),Number(a),Number(l)]}function C(t,e){zot(e)&&(e=!0);var o,n,r,i,a,l,s=["M","m","L","l","H","h","V","v","C","c","S","s","Q","q","T","t","A","a","z","Z"],c=["m","l","h","v","c","s","q","t","a","z"],u=new To.Point(0,0);y=(y=(y=(y=(y=(y=zot(t.getAttribute)?t:(t.getAttribute("id"),t.getAttribute("d"))).replace(/,/g," ")).replace(/([a-zA-Z])/g," $1 ")).replace(/-/g," -")).replace(/\s+/g," ")).replace(/\.(\d*)\./g,".$1 ."),e&&(o=L(t),n=o[0],r=o[1],i=o[2],o[3],o[4]);var d,h=[],g=[0,0],p=new To.Point(0,0),f=new To.Point(0,0,0,0),m=new To.Point(0,0,0,0,0,0),z=new To.Point(0,0,0,0,0,0,0),y=y.split(" "),y=y.slice(1,y.length),b=[],v=!1,w="",C=!1,x="squiggle",k=null;function T(){w=b[b.length-1],2<=h.length&&("z"!=w&&"Z"!=w||(x="blob")),(a="squiggle"==x?new To.Squiggle(r,i,h,null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,B):new To.Blob(n,r,i,h,null,null,null,null,P,null,null,null,null,null,null,null,null,null,null,B)).loc(0,0,E),w=b[b.length-1],b[b.length-2],0<=c.indexOf(w)?(g[0]=h[h.length-1][0],g[1]=h[h.length-1][1],I.x=h[h.length-1][0],I.y=h[h.length-1][1],(h=[]).push([g[0],g[1]])):(g=[0,0],h=[[0,0]]),b=[],"z"!=w&&"Z"!=w&&b.push(w),u.x=0,u.y=0;var e=t.getAttribute("transform");(e||O)&&j(a,e||O)}return To.loop(y,function(e,t){var o;0==t&&(I.x=0,I.y=0,g=[0,0],w=""),-1==s.indexOf(e)?("lxo"==d&&(d="lx",b.push("l"),v=!0),"lyo"==d&&(d="ly",v=!0),"Lxo"==d&&(d="Lx",b.push("L"),v=!0),"Lyo"==d&&(d="Ly",v=!0),l=Number(e),l=Math.round(100*l)/100,"X"==d?(I.x=l,d="Y"):"Y"==d?(I.y=l,d="Lxo",h.push([I.x,I.y])):"x"==d?(I.x=I.x+l,d="y"):"y"==d&&(I.y=I.y+l,d="lxo",h.push([I.x,I.y])),"H"==d||"h"==d?(u.x=h[h.length-1][0],u.y=h[h.length-1][1],u.x=u.x+("h"==d?l:l-I.x),h.push([u.x,u.y]),d="Lx"):"V"!=d&&"v"!=d||(u.x=h[h.length-1][0],u.y=h[h.length-1][1],u.y=u.y+("v"==d?l:l-I.y),h.push([u.x,u.y]),d="lx"),"Lx"==d?(p.x=l,d="Ly"):"Ly"==d?(p.y=l,u.x=p.x,u.y=p.y,h.push([u.x,u.y]),d="Lx"):"lx"==d?(0<b.length&&(0!=u.x&&0!=u.y?(I.x=u.x,I.y=u.y):(I.x=u.x+I.x,I.y=u.y+I.y)),p.x=I.x+l,d=v?"lyo":"ly"):"ly"==d&&(p.y=I.y+l,u.x=p.x,u.y=p.y,h.push([u.x,u.y]),d="lx"),"qx"==d||"Qx"==d?(0<h.length?(I.x=h[h.length-1][0],I.y=h[h.length-1][1]):(I.x=0,I.y=0),f.x="qx"==d?I.x+l:l,d="qx"==d?"qy":"Qy"):"qy"==d||"Qy"==d?(f.y="qy"==d?I.y+l:l,d="qy"==d?"qz":"Qz",C&&(C=!1,(o=h[h.length-1])[6]=-o[4],o[7]=-o[5],o[8]="mirror",u.x=f.x,u.y=f.y,h[h.length]=[u.x,u.y,0,0,-o[6],o[7],0,0,"free"],d="qy"==d?"qx":"Qx")):"qz"==d||"Qz"==d?(f.z="qz"==d?I.x+l:l,d="qz"==d?"qq":"Qq"):"qq"!=d&&"Qq"!=d||(f.w="qq"==d?I.y+l:l,o=h[h.length-1],u.x=o[0],u.y=o[1],1==h.length?(o[2]=0,o[3]=0,o[4]=0,o[5]=0,o[6]=2/3*(f.x-u.x),o[7]=2/3*(f.y-u.y),o[8]="free"):h[h.length]=[u.x,u.y,0,0,0,0,2/3*(f.x-u.x),2/3*(f.y-u.y),"free"],u.x=f.z,u.y=f.w,h[h.length]=[u.x,u.y,0,0,2/3*(f.x-u.x),2/3*(f.y-u.y),0,0,"free"],d="qq"==d?"qx":"Qx"),"cx"==d||"Cx"==d?(0<h.length?(I.x=h[h.length-1][0],I.y=h[h.length-1][1]):(I.x=0,I.y=0),m.x="cx"==d?I.x+l:l,d="cx"==d?"cy":"Cy"):"cy"==d||"Cy"==d?(m.y="cy"==d?I.y+l:l,d="cy"==d?"cz":"Cz"):"cz"==d||"Cz"==d?(m.z="cz"==d?I.x+l:l,d="cz"==d?"cq":"Cq"):"cq"==d||"Cq"==d?(m.q="cq"==d?I.y+l:l,d="cq"==d?"cr":"Cr",C&&((o=h[h.length-1])[2]=0,o[3]=0,zot(o[4])&&(o[4]=0),zot(o[5])&&(o[5]=0),o[6]=-o[4],o[7]=-o[5],o[8]="mirror",u.x=m.z,u.y=m.q,h[h.length]=[u.x,u.y,0,0,m.x-u.x,m.y-u.y,0,0,"free"],d="cr"==d?"cx":"Cx")):"cr"==d||"Cr"==d?(m.r="cr"==d?I.x+l:l,d="cr"==d?"cs":"Cs"):"cs"==d||"Cs"==d?(m.s="cs"==d?I.y+l:l,o=h[h.length-1],1==h.length&&(o[2]=0,o[3]=0,o[4]=0,o[5]=0),o[6]=m.x-o[0],o[7]=m.y-o[1],o[8]="free",u.x=m.r,u.y=m.s,h[h.length]=[u.x,u.y,0,0,m.z-u.x,m.q-u.y,0,0,"free"],d="cs"==d?"cx":"Cx"):"ax"==d||"Ax"==d?(0<h.length?(I.x=h[h.length-1][0],I.y=h[h.length-1][1]):(I.x=0,I.y=0),z.x=l,d="ax"==d?"ay":"Ay"):"ay"==d||"Ay"==d?(z.y=l,d="ay"==d?"az":"Az"):"az"==d||"Az"==d?(z.z=l,d="az"==d?"aq":"Aq"):"aq"==d||"Aq"==d?(z.q=l,d="aq"==d?"ar":"Ar"):"ar"==d||"Ar"==d?(z.r=l,d="ar"==d?"as":"As"):"as"==d||"As"==d?(z.s="as"==d?I.x+l:l,d="as"==d?"at":"At"):"at"!=d&&"At"!=d||(z.t="at"==d?I.y+l:l,t=(S=S||M())({px:I.x,py:I.y,cx:z.s,cy:z.t,rx:z.x,ry:z.y,xAxisRotation:z.z,largeArcFlag:z.q,sweepFlag:z.r}),loop(t,function(e,t){o=h[h.length-1],1==h.length&&(o[2]=0,o[3]=0,o[4]=0,o[5]=0),0==t&&1==h.length?(o[6]=e.x1-u.x-I.x,o[7]=e.y1-u.y-I.y):(o[6]=e.x1-u.x,o[7]=e.y1-u.y),o[8]="free",u.x=e.x,u.y=e.y,h[h.length]=[u.x,u.y,0,0,e.x2-u.x,e.y2-u.y,0,0,"free"]}),d="at"==d?"ax":"Ax")):(b.push(e),"s"!=e&&(C=!1),1<b.length&&("M"!=e&&"m"!=e||(T(),"M"==e?(I.x=0,I.y=0):(I.x=h[h.length-1][0],I.y=h[h.length-1][1]),h=[],(b=[]).push(e))),"M"==e?d="X":"m"==e?d="x":"L"==e?(d="Lx",A&&k&&"l"!=k&&T(),k="l"):"l"==e?(d="lx",A&&k&&"l"!=k&&T(),k="l"):"H"==e?(d="H",A&&k&&"l"!=k&&T(),k="l"):"h"==e?(d="h",A&&k&&"l"!=k&&T(),k="l"):"V"==e?(d="V",A&&k&&"l"!=k&&T(),k="l"):"v"==e?(d="v",A&&k&&"l"!=k&&T(),k="l"):"C"==e?(d="Cx",A&&k&&"c"!=k&&T(),k="c"):"c"==e?(d="cx",A&&k&&"c"!=k&&T(),k="c"):"S"==e?(C=!0,d="Cx",A&&k&&"c"!=k&&T(),k="c"):"s"==e?(C=!0,d="cx",A&&k&&"c"!=k&&T(),k="c"):"Q"==e?(d="Qx",A&&k&&"q"!=k&&T(),k="q"):"q"==e?(d="qx",A&&k&&"q"!=k&&T(),k="q"):"T"==e?(C=!0,d="Qx",A&&k&&"q"!=k&&T(),k="q"):"t"==e?(C=!0,d="qx",A&&k&&"q"!=k&&T(),k="q"):"A"==e?(d="Ax",A&&k&&"a"!=k&&T(),k="a"):"a"==e?(d="ax",A&&k&&"a"!=k&&T(),k="a"):"z"!=e&&"Z"!=e||(x="blob"))}),e&&T(),h}!(E.processPath=function(e){return C(e,!1)})!==t&&To.styleTransforms(this,r),this.clone=function(){return E.cloneProps(new To.SVGContainer(e,A,z,P,B,t,this.group,n))}},To.extend(To.SVGContainer,To.Container,"clone","zimContainer",!1),To.CustomShape=function(e,t,o,n){To.zimCustomShapeCheck||(z_d("50.97"),To.zimCustomShapeCheck=!0),this.zimContainer_constructor(e,t,o,n,!1);var r=this;this.mouseChildren=!1,r._dashedOffset=5,Object.defineProperty(r,"color",{get:function(){return r._color},set:function(e){zot(e)&&(e="black"),(r._color=e)&&e.type?r.specialColor(r.colorCommand,e):r.colorCommand.style=e}}),this.setColorRange=function(e,t){return zot(t)?(r.startColor=r.color,r.endColor=e):(zot(e)?r.startColor=r.color:r.startColor=e,r.endColor=t),r},r._colorRange=0,Object.defineProperty(r,"colorRange",{get:function(){return r._colorRange},set:function(e){r._colorRange=e,zot(r.startColor)||zot(r.endColor)||(r.color=To.colorRange(r.startColor,r.endColor,e))}}),Object.defineProperty(r,"borderColor",{get:function(){return r._borderColor},set:function(e){(r._borderColor=e)&&!r.borderWidth&&(r.borderWidth=1),r.borderColorCommand?e&&e.type?r.specialColor(r.borderColorCommand,e):r.borderColorCommand.style=e:r.drawShape()}}),Object.defineProperty(r,"borderWidth",{get:function(){return r._borderWidth},set:function(e){0<e||(e=0),r._borderWidth=e,r.borderWidthCommand&&0!=r._borderWidth?(r.borderWidthCommand.width=r._borderWidth,r._dashed&&(r.borderDashedCommand.segments=r._dashed,r.borderDashedCommand.offset=r._dashedOffset)):(r.borderWidthCommand=null,r.drawShape())}}),Object.defineProperty(r,"thickness",{get:function(){return r._thickness},set:function(e){0<e||(e=0),r._thickness=e,r.thicknessCommand&&0!=r._thickness?(r.thicknessCommand.width=r._thickness,r._dashed&&(r.dashedCommand.segments=r._dashed,r.dashedCommand.offset=r._dashedOffset)):r.drawShape()}}),Object.defineProperty(r,"dashed",{get:function(){return r._dashed},set:function(e){if((r._dashed=e)&&!Array.isArray(r._dashed)&&(r.dashed=[10,10]),"Squiggle"==r.type||"Line"==r.type){if(!r.thicknessCommand||0==r._thickness)return;var t=r.dashedCommand}else{if(!r.borderWidthCommand||0==r._borderWidth)return;t=r.borderDashedCommand}t?r._dashed?(t.segments=r._dashed,t.offset=r._dashedOffset):(t.segments=null,t.offset=null):r.drawShape()}}),Object.defineProperty(r,"dashedOffset",{get:function(){return r._dashedOffset},set:function(e){if(isNaN(e)&&(e=5),r._dashedOffset=e,"Squiggle"==r.type||"Line"==r.type){if(!r.thicknessCommand||0==r._thickness)return;var t=r.dashedCommand}else{if(!r.borderWidthCommand||0==r._borderWidth)return;t=r.borderDashedCommand}t?r._dashed?(t.segments=r._dashed,t.offset=r._dashedOffset):(t.segments=null,t.offset=null):r.drawShape()}}),Object.defineProperty(r,"corner",{get:function(){return r._corner},set:function(e){r._corner=e,r.drawShape()}}),this.linearGradient=function(e,t,o,n,r,i){return this.linearGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.linearGradient(e,t,o,n,r,i),this},this.radialGradient=function(e,t,o,n,r,i,a,l){return this.radialGradientParams=Array.prototype.slice.call(arguments),this.colorCommand.radialGradient(e,t,o,n,r,i,a,l),this},this.cloneAll=function(e,t,o,n){var r=this.getBounds();zot(r)&&(r={x:null,y:null,width:null,height:null});e=this.cloneChildren(this.cloneProps(new To.Container(r.x,r.y,r.width,r.height,t,o,n)),e);return e.mouseChildren=!1,e.type=this.type,e}},To.extend(To.CustomShape,To.Container,null,"zimContainer",!1),To.Circle=function(e,t,o,n,r,i,a,l,s,c,u){if(p=zob(To.Circle,arguments,"radius, color, borderColor, borderWidth, dashed, percent, percentClose, strokeObj, style, group, inherit",this))return p;z_d("51"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Circle",this.group=c;var d=!1===s?{}:To.getStyle(this.type,this.group,u);zot(e)&&(e=null!=d.radius?d.radius:50),zot(r)&&(r=null!=d.dashed&&d.dashed),zot(o)&&(o=null!=d.borderColor?d.borderColor:null),zot(n)&&(n=null!=d.borderWidth?d.borderWidth:null),o<0||n<0?o=n=null:null!=o&&null==n&&(n=1),zot(t)&&(t=null!=d.color?d.color:0<n?"rgba(0,0,0,0)":"black"),zot(i)&&(i=null!=d.percent?d.percent:100),zot(a)&&(a=null==d.percentClose||d.percentClose),zot(l)&&(l=null!=d.strokeObj?d.strokeObj:{});var h=function(){return arguments}(e,t,o,n,i);e=To.Pick.choose(e),t=To.Pick.choose(t),o=To.Pick.choose(o),n=To.Pick.choose(n),i=To.Pick.choose(i);var g=this;g._radius=e,g._color=t,g._borderColor=o,g._borderWidth=n,g._dashed=r,g._dashed&&!Array.isArray(g._dashed)&&(g._dashed=[10,10]);var p=this.shape=new createjs.Shape;this.addChild(p);var f=p.graphics;g.drawShape=function(){f.c(),g.colorCommand=f.f(g._color).command,g._color&&g._color.type&&g.specialColor(g.colorCommand,g._color),(zot(g._borderWidth)||0<g._borderWidth)&&(zot(g._borderColor)&&zot(g._borderWidth)||(zot(g._borderColor)&&(g._borderColor="black"),g.borderColorCommand=f.s(g._borderColor).command,g._borderColor&&g._borderColor.type&&g.specialColor(g.borderColorCommand,g._borderColor),g.borderWidthCommand=f.ss(g._borderWidth,l.caps,l.joints,l.miterLimit,l.ignoreScale).command,g._dashed&&(g.borderDashedCommand=f.sd(Array.isArray(g._dashed)?g._dashed:[10,10],g._dashedOffset).command)));var e,t=2*g._radius;"number"==typeof i&&0<=i&&i<100?(e=360*i/100/2,f.arc(0,0,g._radius,(-e-90)*Math.PI/180,(e-90)*Math.PI/180,!1),a&&f.cp(),t=g._radius-Math.cos(e*Math.PI/180)*g._radius):f.dc(0,0,g._radius),g.setBounds(-g._radius,-g._radius,2*g._radius,t)},g.drawShape(),Object.defineProperty(g,"radius",{get:function(){return g._radius},set:function(e){g._radius=e,g.drawShape()}}),Object.defineProperty(g,"percentage",{get:function(){return i},set:function(e){i=e,g.drawShape()}}),Object.defineProperty(g,"percentClose",{get:function(){return a},set:function(e){a=e,g.drawShape()}}),!1!==s&&To.styleTransforms(this,d),this.clone=function(e,t){e=g.cloneProps(new To.Circle(e||!To.isPick(h[0])?g.radius:h[0],e||!To.isPick(h[1])?g.color:h[1],e||!To.isPick(h[2])?g.borderColor:h[2],e||!To.isPick(h[3])?g.borderWidth:h[3],g.dashed,e||!To.isPick(h[4])?i:h[4],a,l,s,this.group,u));return g.linearGradientParams&&e.linearGradient.apply(e,g.linearGradientParams),g.radialGradientParams&&e.radialGradient.apply(e,g.radialGradientParams),e}},To.extend(To.Circle,To.CustomShape,"clone","zimCustomShape",!1),To.Rectangle=function(t,o,e,n,r,i,a,l,s,c,u){if(p=zob(To.Rectangle,arguments,"width, height, color, borderColor, borderWidth, corner, dashed, strokeObj, style, group, inherit",this))return p;z_d("52"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Rectangle",this.group=c;var d=!1===s?{}:To.getStyle(this.type,this.group,u);zot(t)&&(t=null!=d.width?d.width:null),zot(o)&&(o=null!=d.height?d.height:zot(t)?100:t),zot(t)&&(t=o),zot(i)&&(i=null!=d.corner?d.corner:0),zot(a)&&(a=null!=d.dashed&&d.dashed),zot(n)&&(n=null!=d.borderColor?d.borderColor:null),zot(r)&&(r=null!=d.borderWidth?d.borderWidth:null),n<0||r<0?n=r=null:null!=n&&null==r&&(r=1),zot(e)&&(e=null!=d.color?d.color:0<r?"rgba(0,0,0,0)":"black"),zot(l)&&(l=null!=d.strokeObj?d.strokeObj:{});var h=function(){return arguments}(t,o,e,n,r);t=To.Pick.choose(t),o=To.Pick.choose(o),e=To.Pick.choose(e),n=To.Pick.choose(n),r=To.Pick.choose(r);var g=this;g._color=e,g._borderColor=n,g._borderWidth=r,g._dashed=a,g._dashed&&!Array.isArray(g._dashed)&&(g._dashed=[10,10]),g._corner=i;var p=this.shape=new createjs.Shape;this.addChild(p);var f=p.graphics;g.drawShape=function(){f.c(),g.colorCommand=f.f(g._color).command,e&&e.type&&g.specialColor(g.colorCommand,e),(zot(g._borderWidth)||0<g._borderWidth)&&(zot(g._borderColor)&&zot(g._borderWidth)||(zot(g._borderColor)&&(g._borderColor="black"),g.borderColorCommand=f.s(g._borderColor).command,g._borderColor&&g._borderColor.type&&g.specialColor(g.borderColorCommand,g._borderColor),g.borderWidthCommand=f.ss(g._borderWidth,l.caps,l.joints,l.miterLimit,l.ignoreScale).command,g._dashed&&(g.borderDashedCommand=f.sd(Array.isArray(g._dashed)?g._dashed:[10,10],g._dashedOffset).command))),Array.isArray(g._corner)?f.rc(0,0,t,o,g._corner[0],g._corner[1],g._corner[2],g._corner[3]):0<g._corner?f.rr(0,0,t,o,g._corner):f.r(0,0,t,o),g.setBounds(0,0,t,o)},g.drawShape(),!1!==s&&To.styleTransforms(this,d),this.clone=function(e){return g.cloneProps(new To.Rectangle(e||!To.isPick(h[0])?t:h[0],e||!To.isPick(h[1])?o:h[1],e||!To.isPick(h[2])?g.color:h[2],e||!To.isPick(h[3])?g.borderColor:h[3],e||!To.isPick(h[4])?g.borderWidth:h[4],i,g._dashed,l,s,this.group,u))}},To.extend(To.Rectangle,To.CustomShape,"clone","zimCustomShape",!1),To.Triangle=function(l,s,t,e,o,n,c,u,d,r,h,i,a,g){if(z=zob(To.Triangle,arguments,"a, b, c, color, borderColor, borderWidth, corner, center, adjust, dashed, strokeObj, style, group, inherit",this))return z;z_d("53"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Triangle",this.group=a;var p=!1===i?{}:To.getStyle(this.type,this.group,g);zot(l)&&(l=null!=p.a?p.a:100),zot(s)&&(s=null!=p.b?p.b:l),zot(t)&&(t=null!=p.c?p.c:s),-1==t&&(t=Math.sqrt(Math.pow(l,2)+Math.pow(s,2))),zot(c)&&(c=null!=p.corner?p.corner:0),zot(u)&&(u=null==p.center||p.center),zot(d)&&(d=null!=p.adjust?p.adjust:0),zot(o)&&(o=null!=p.borderColor?p.borderColor:null),zot(n)&&(n=null!=p.borderWidth?p.borderWidth:null),o<0||n<0?o=n=null:null!=o&&null==n&&(n=1),zot(e)&&(e=null!=p.color?p.color:0<n?"rgba(0,0,0,0)":"black"),zot(d)&&(d=null!=p.adjust?p.adjust:0),zot(h)&&(h=null!=p.strokeObj?p.strokeObj:{});var f=function(){return arguments}(l,s,t,e,o,n);l=To.Pick.choose(l),s=To.Pick.choose(s),t=To.Pick.choose(t),this.a=l,this.b=s,this.c=t,e=To.Pick.choose(e),o=To.Pick.choose(o),n=To.Pick.choose(n);var m=this;m._color=e,m._borderColor=o,m._borderWidth=n,m._dashed=r,m._dashed&&!Array.isArray(m._dashed)&&(m._dashed=[10,10]),m._corner=c;var z=[l,s,t];z.sort(function(e,t){return t-e});var y,b,v=z[0],w=z[1],C=z[2],x=[z.indexOf(l),z.indexOf(s),z.indexOf(t)];w+C<v?zog("zim display - Triangle(): invalid triangle lengths"):(y=this.shape=new createjs.Shape,this.adjusted=d,this.addChild(y),b=y.graphics,m.drawShape=function(){var e=[];Array.isArray(m._corner)?e=m._corner:e.push(m._corner,m._corner,m._corner);for(var t=0;t<3;t++)(c[t]<0||"number"!=typeof c[t])&&(c[t]=0);b.c(),m.colorCommand=b.f(m._color).command,m._color&&m._color.type&&m.specialColor(m.colorCommand,m._color),(zot(m._borderWidth)||0<m._borderWidth)&&(zot(m._borderColor)&&zot(m._borderWidth)||(zot(m._borderColor)&&(m._borderColor="black"),m.borderColorCommand=b.s(m._borderColor).command,m._borderColor&&m._borderColor.type&&m.specialColor(m.borderColorCommand,m._borderColor),m.borderWidthCommand=b.ss(m._borderWidth,h.caps,h.joints,h.miterLimit,h.ignoreScale).command,m._dashed&&(m.borderDashedCommand=b.sd(Array.isArray(m._dashed)?m._dashed:[10,10],m._dashedOffset).command))),m.one={x:0,y:0},m.two={x:l,y:0};var o=180*Math.acos((Math.pow(w,2)+Math.pow(C,2)-Math.pow(v,2))/(2*w*C))/Math.PI,n=180*Math.asin(w*Math.sin(o*Math.PI/180)/v)/Math.PI,r=[o,n,180-o-n];m.angles=[r[x[1]],r[x[2]],r[x[0]]];var i=m.angles[1],a=Math.cos(i*Math.PI/180)*s,o=Math.sin(i*Math.PI/180)*s,n=Math.max(l,l-a),r=o;m.setBounds(0,d,n,r),y.y=r,m.three={x:l-a,y:0-o};i=l*e[0]/(e[0]+e[1]||1);b.mt(i,0).at(l,0,l-a,0-o,e[1]).at(l-a,0-o,0,0,e[2]).at(0,0,l,0,e[0]).lt(i,0),b.cp(),u&&(m.regX=n/2,m.regY=r/2),d&&(m.shape.y+=d)},m.drawShape(),!1!==i&&To.styleTransforms(this,p),this.clone=function(e){e=m.cloneProps(new To.Triangle(e||!To.isPick(f[0])?l:f[0],e||!To.isPick(f[1])?s:f[1],e||!To.isPick(f[2])?t:f[2],e||!To.isPick(f[3])?m.color:f[3],e||!To.isPick(f[4])?m.borderColor:f[4],e||!To.isPick(f[5])?m.borderWidth:f[5],c,u,d,r,h,i,this.group,g));return m.linearGradientParams&&e.linearGradient.apply(e,m.linearGradientParams),m.radialGradientParams&&e.radialGradient.apply(e,m.radialGradientParams),e})},To.extend(To.Triangle,To.CustomShape,"clone","zimCustomShape"),To.Poly=function(e,t,o,n,r,i,a,l,s,c,u){if(p=zob(To.Poly,arguments,"radius, sides, pointSize, color, borderColor, borderWidth, dashed, strokeObj, style, group, inherit",this))return p;z_d("53.1"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Poly",this.group=c;var d=!1===s?{}:To.getStyle(this.type,this.group,u);zot(e)&&(e=null!=d.radius?d.radius:50),zot(t)&&(t=null!=d.sides?d.sides:5),zot(o)&&(o=null!=d.pointSize?d.pointSize:0),zot(a)&&(a=null!=d.dashed&&d.dashed),zot(r)&&(r=null!=d.borderColor?d.borderColor:null),zot(i)&&(i=null!=d.borderWidth?d.borderWidth:null),r<0||i<0?r=i=null:null!=r&&null==i&&(i=1),zot(n)&&(n=null!=d.color?d.color:0<i?"rgba(0,0,0,0)":"black"),zot(l)&&(l=null!=d.strokeObj?d.strokeObj:{});var h=function(){return arguments}(e,t,o,n,r,i);e=To.Pick.choose(e),t=To.Pick.choose(t),o=To.Pick.choose(o),n=To.Pick.choose(n),r=To.Pick.choose(r),i=To.Pick.choose(i);var g=this;g._radius=e,g._color=n,g._sides=t,g._pointSize=o,g._borderColor=r,g._borderWidth=i,g._dashed=a,g._dashed&&!Array.isArray(g._dashed)&&(g._dashed=[10,10]);var p=this.shape=new createjs.Shape;this.addChild(p),p.rotation=-90;var f=p.graphics;g.drawShape=function(){f.c(),g.colorCommand=f.f(g._color).command,g._color&&g._color.type&&g.specialColor(g.colorCommand,g._color),(zot(g._borderWidth)||0<g._borderWidth)&&(zot(g._borderColor)&&zot(g._borderWidth)||(zot(g._borderColor)&&(g._borderColor="black"),g.borderColorCommand=f.s(g._borderColor).command,g._borderColor&&g._borderColor.type&&g.specialColor(g.borderColorCommand,g._borderColor),g.borderWidthCommand=f.ss(g._borderWidth,l.caps,l.joints,l.miterLimit,l.ignoreScale).command,g._dashed&&(g.borderDashedCommand=f.sd(Array.isArray(g._dashed)?g._dashed:[10,10],g._dashedOffset).command))),f.dp(0,0,g._radius,g._sides,g._pointSize),g.setBounds(-g._radius,-g._radius,2*g._radius,2*g._radius)},g.drawShape(),Object.defineProperty(g,"radius",{get:function(){return g._radius},set:function(e){g._radius=e,g.drawShape()}}),Object.defineProperty(g,"sides",{get:function(){return g._sides},set:function(e){g._sides=e,g.drawShape()}}),Object.defineProperty(g,"pointSize",{get:function(){return g._pointSize},set:function(e){g._pointSize=e,g.drawShape()}}),!1!==s&&To.styleTransforms(this,d),this.clone=function(e,t){e=g.cloneProps(new To.Poly(e||!To.isPick(h[0])?g.radius:h[0],e||!To.isPick(h[1])?g.sides:h[1],e||!To.isPick(h[2])?g.pointSize:h[2],e||!To.isPick(h[3])?g.color:h[3],e||!To.isPick(h[4])?g.borderColor:h[4],e||!To.isPick(h[5])?g.borderWidth:h[5],g.dashed,l,s,this.group,u));return g.linearGradientParams&&e.linearGradient.apply(e,g.linearGradientParams),g.radialGradientParams&&e.radialGradient.apply(e,g.radialGradientParams),e}},To.extend(To.Poly,To.CustomShape,"clone","zimCustomShape",!1),To.Line=function(e,o,v,w,C,t,x,r,n,k,T,i,a,l,s){if(h=zob(To.Line,arguments,"length, thickness, color, startHead, endHead, dashed, strokeObj, lineType, lineOrientation, curveH, curveV, points, style, group, inherit",this))return h;z_d("53.15"),this.zimCustomShape_constructor(null,null,null,null,!1),this.type="Line",this.group=l;var c=!1===a?{}:To.getStyle(this.type,this.group,s);zot(e)&&(e=null!=c.length?c.length:100),zot(t)&&(t=null!=c.dashed&&c.dashed),zot(o)&&(o=null!=c.thickness?c.thickness:3),zot(v)&&(v=null!=c.color?c.color:"black"),zot(w)&&(w=null!=c.startHead?c.startHead:null),zot(C)&&(C=null!=c.endHead?c.endHead:null),zot(x)&&(x=null!=c.strokeObj?c.strokeObj:{}),zot(r)&&(r=null!=c.lineType?c.lineType:"straight"),"corner"!==r&&"curve"!=r&&(r="straight"),zot(n)&&(n=null!=c.lineOrientation?c.lineOrientation:"auto"),"vertical"!==n&&"horizontal"!=n&&(n="auto"),zot(k)&&(k=null!=c.curveH?c.curveH:20),zot(T)&&(T=null!=c.curveV?c.curveV:20),zot(x)&&(x=null!=c.strokeObj?c.strokeObj:{});var u=function(){return arguments}(e,v,o,w,C);e=To.Pick.choose(e),v=To.Pick.choose(v),o=To.Pick.choose(o),w=To.Pick.choose(w),C=To.Pick.choose(C),w&&w.clone&&(w=w.clone()),C&&C.clone&&(C=C.clone());var A=this;function d(e,t){"triangle"==t||"arrow"==t?(A["_"+e+"Head"]=new To.Triangle(4*o,4*o,4*o,v)).rotation=90:"circle"==t&&(A["_"+e+"Head"]=new To.Circle(2.2*o,v)),zot(A["_"+e+"Head"].startAngle)&&(A["_"+e+"Head"].startAngle=A["_"+e+"Head"].rotation)}A._length=e,A._color=v,A._thickness=o,A._dashed=t,A._dashed&&!Array.isArray(A._dashed)&&(A._dashed=[10,10]),A._startX=0,A._startY=0,A._endX=e,A._endY=0,A._startHead=w,A._endHead=C,A._points=i,A._lineOrientation=n,A.angle=0,A.lineType=r,A._startHead&&d("start",A._startHead),A._endHead&&d("end",A._endHead),w=A._startHead,C=A._endHead,w&&"Triangle"==w.type&&(w.startRegY=w.regY),C&&"Triangle"==C.type&&(C.startRegY=C.regY);var h=this.shape=new createjs.Shape;this.addChild(h);var P=h.graphics;A.drawShape=function(e,t){var o;if(P.c(),A.colorCommand=P.s(A._color).command,v&&v.type&&A.specialColor(A.colorCommand,v),A.thicknessCommand=P.ss(A._thickness,x.caps,x.joints,x.miterLimit,x.ignoreScale).command,A._dashed&&(A.dashedCommand=P.sd(Array.isArray(A._dashed)?A._dashed:[10,10],A._dashedOffset).command),A._points){var n=A._points[0];A._startX=n[0],A._startY=n[1];var r=A._points[A._points.length-1],i=[r[r.length-2],r[r.length-1]];A._endX=i[0],A._endY=i[1],P.mt(n[0],n[1]);for(var a,l=1;l<A._points.length;l++){var s=A._points[l];1==l&&(o=[A._startX,A._startY,s[0],s[1]]),2==s.length?P.lt(s[0],s[1]):4==s.length?P.qt(s[0],s[1],s[2],s[3]):6==s.length&&P.bt(s[0],s[1],s[2],s[3],s[4],s[5])}a=4<=s.length?[s[s.length-4],s[s.length-3],A._endX,A._endY]:[(c=A._points[A._points.length-2])[c.lenth-2],c[c.lenth-1],A._endX,A._endY]}else{var c,u,d,h,g,p,f,m,z,y=A._startX,b=A._startY,r=A._endX,i=A._endY;"straight"==A.lineType?(w&&"Triangle"==w.type&&((w.regY=0)!=(u=To.dist(y,b,r,i))&&(y+=A._startHead.height/2*(r-y)/u),0!=u&&(b+=A._startHead.height/2*(i-b)/u)),C&&"Triangle"==C.type&&((C.regY=0)!=(u=To.dist(y,b,r,i))&&(r-=A._endHead.height/2*(r-y)/u),0!=u&&(i-=A._endHead.height/2*(i-b)/u))):(e?"horizontal"==A._lineOrientation||"horizontal"==A.autoOrientation?w&&"Triangle"==w.type&&(w.regY=0,y=y<r?Math.min(r,y+A._startHead.height/2):Math.max(r,y-A._startHead.height/2)):w&&"Triangle"==w.type&&(w.regY=0,b=b<i?Math.min(i,b+A._startHead.height/2):Math.max(i,b-A._startHead.height/2)):w&&"Triangle"==w.type&&(w.regY=w.startRegY),t?"horizontal"==A._lineOrientation||"horizontal"==A.autoOrientation?C&&"Triangle"==C.type&&(C.regY=0,y<r?r-=A._endHead.height/2:r+=A._endHead.height/2):C&&"Triangle"==C.type&&(C.regY=0,b<i?i-=A._endHead.height/2:i+=A._endHead.height/2):C&&"Triangle"==C.type&&(C.regY=C.startRegY)),"straight"==A.lineType?(P.mt(y,b).lt(r,i),o=a=[y,b,r,i]):"corner"==A.lineType?(h=y+.4*(r-y),g=b+.4*(i-b),"auto"==A._lineOrientation&&(A.autoOrientation=Math.abs(y-r)>Math.abs(b-i)?"horizontal":"vertical"),"horizontal"==A._lineOrientation||"horizontal"==A.autoOrientation?(o=a=[y,b,h,b],P.mt(y,b).lt(h,b).lt(h,i).lt(r,i)):(o=a=[y,b,y,g],P.mt(y,b).lt(y,g).lt(r,g).lt(r,i))):(n=r<y?-1:1,c=i<b?-1:1,u=y,d=b,e=Math.abs(y-r),t=Math.abs(b-i),h=Math.min(k,.5*e),g=Math.min(T,.5*t),"auto"==A._lineOrientation&&(A.autoOrientation=Math.abs(y-r)>Math.abs(b-i)?"horizontal":"vertical"),"horizontal"==A._lineOrientation||"horizontal"==A.autoOrientation?(p=t-2*g,f=(e-2*h)/2,P.mt(u,d),0<f&&(u+=f*n,P.lt(u,d)),z=d,d+=g*c,u+=h*n,P.qt(u,z,u,d),o=a=[y,b,u,b],0<p&&(d+=p*c,P.lt(u,d)),d+=g*c,m=u,u+=h*n,P.qt(m,d,u,d),0<f&&(u+=f*n,P.lt(u,d))):(p=e-2*h,f=(t-2*g)/2,P.mt(u,d),0<f&&(d+=f*c,P.lt(u,d)),m=u,u+=h*n,d+=g*c,P.qt(m,d,u,d),o=a=[y,b,y,d],0<p&&(u+=p*n,P.lt(u,d)),u+=h*n,z=d,d+=g*c,P.qt(u,z,u,d),0<f&&(d+=f*c,P.lt(u,d))))}A.setBounds(Math.min(A._startX,A._endX),Math.min(A._startY,A._endY),Math.abs(A._startX-A._endX),Math.abs(A._startY-A._endY)),A._length=Math.sqrt(Math.pow(A._startX-A._endX,2)+Math.pow(A._startY-A._endY,2)),A.angle=180*Math.atan2(A._endY-A._startY,A._endX-A._startX)/Math.PI,A._startHead&&A._startHead.loc&&(A._startHead.loc(A._startX,A._startY,A),d=180*Math.atan2(o[3]-o[1],o[2]-o[0])/Math.PI,A._startHead.rotation=d-180+A._startHead.startAngle),A._endHead&&A._endHead.loc&&(A._endHead.loc(A._endX,A._endY,A),a=180*Math.atan2(a[3]-a[1],a[2]-a[0])/Math.PI,A._endHead.rotation=a+A._endHead.startAngle)},A.drawShape(),this.setPoints=function(e,t,o,n,r,i){return Array.isArray(e)&&zot(t)?A.points=e:(e&&!zot(e.x)?(A._startX=zot(e.x)?A._startX:e.x,A._startY=zot(e.y)?A._startY:e.y,t&&(A._endX=zot(t.x)?A._endX:t.x,A._endY=zot(t.y)?A._endY:t.y)):(A._startX=zot(e)?A._startX:e,A._startY=zot(t)?A._startY:t,A._endX=zot(o)?A._endX:o,A._endY=zot(n)?A._endY:n),A.drawShape(r,i)),A},this.from=function(e,t){return e&&!zot(e.x)?(A._startX=zot(e.x)?A._startX:e.x,A._startY=zot(e.y)?A._startY:e.y):(A._startX=zot(e)?A._startX:e,A._startY=zot(t)?A._startY:t),A.drawShape(),A},this.to=function(e,t){return e&&!zot(e.x)?(A._endX=zot(e.x)?A._endX:e.x,A._endY=zot(e.y)?A._endY:e.y):(A._endX=zot(e)?A._endX:e,A._endY=zot(t)?A._endY:t),A.drawShape(),A},Object.defineProperty(A,"length",{get:function(){return A._length},set:function(e){var t,o,n=0!=A.length?e/A.length:0;isNaN(n)||(t=A.scaleX,o=A.scaleY,A.scaleX*=n,A.scaleY*=n,e=A.localToGlobal(A._startX,A._startY),n=A.localToGlobal(A._endX,A._endY),A.scaleX=t,A.scaleY=o,e=A.globalToLocal(e.x,e.y),n=A.globalToLocal(n.x,n.y),A.setPoints(e,n))}}),Object.defineProperty(A,"startPoint",{get:function(){return new To.Point(A._startX,A._startY)},set:function(e){A._startX=zot(e.x)?A._startX:e.x,A._startY=zot(e.y)?A._startY:e.y,A.drawShape()}}),Object.defineProperty(A,"endPoint",{get:function(){return new To.Point(A._endX,A._endY)},set:function(e){A._endX=zot(e.x)?A._endX:e.x,A._endY=zot(e.y)?A._endY:e.y,A.drawShape()}}),Object.defineProperty(A,"startHead",{get:function(){return A._startHead},set:function(e){A._startHead=e,A.drawShape()}}),Object.defineProperty(A,"endHead",{get:function(){return A._endHead},set:function(e){A._endHead=e,A.drawShape()}}),Object.defineProperty(A,"startX",{get:function(){return A._startX},set:function(e){A._startX=e||0,A.drawShape()}}),Object.defineProperty(A,"startY",{get:function(){return A._startY},set:function(e){A._startY=e||0,A.drawShape()}}),Object.defineProperty(A,"endX",{get:function(){return A._endX},set:function(e){A._endX=e||0,A.drawShape()}}),Object.defineProperty(A,"endY",{get:function(){return A._endY},set:function(e){A._endY=e||0,A.drawShape()}}),Object.defineProperty(A,"points",{get:function(){return A._points},set:function(e){e&&(A._points=e,A.drawShape())}}),Object.defineProperty(A,"lineOrientation",{get:function(){return A._lineOrientation},set:function(e){e&&(A._lineOrientation=e,A.drawShape())}}),!1!==a&&To.styleTransforms(this,c),this.clone=function(e,t){var o=e||!To.isPick(u[3])?A._startHead:u[3];o&&o.clone&&((o=o.clone()).rotation=A._startHead.startAngle);var n=e||!To.isPick(u[4])?A._endHead:u[4];n&&n.clone&&((n=n.clone()).rotation=A._endHead.startAngle);n=A.cloneProps(new To.Line(e||!To.isPick(u[0])?A.length:u[0],e||!To.isPick(u[2])?A.thickness:u[2],e||!To.isPick(u[1])?A.color:u[1],o,n,A.dashed,x,r,A._lineOrientation,k,T,To.copy(i),a,this.group,s));return A.points?n.setPoints(A.points):n.setPoints(A._startX,A._startY,A._endX,A._endY),A.linearGradientParams&&n.linearGradient.apply(n,A.linearGradientParams),A.radialGradientParams&&n.radialGradient.apply(n,A.radialGradientParams),n}},To.extend(To.Line,To.CustomShape,"clone","zimCustomShape",!1),To.Squiggle=function(w,C,x,k,T,A,P,B,S,E,t,I,M,O,j,L,_,e,Y,D,X,o,R){if(n=zob(To.Squiggle,arguments,"color, thickness, points, length, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, stickColor, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",this))return n;z_d("53.2"),this.group=o;var n,W=!1===X?{}:To.getStyle("Squiggle",this.group,R);zot(C)&&(C=null!=W.thickness?W.thickness:6),zot(k)&&(k=null!=W.length?W.length:300),zot(x)&&(x=null!=W.points?W.points:5),"string"==typeof x&&(n=new To.SVGContainer,x=n.processPath(x));var r,F,H,V,N,G,q,U,Q,Z,K,J,i,$,ee,te,a,l,oe="number"==typeof x?x:x.length;function s(){te&&te.removeAllEventListeners(),V.num=oe="number"==typeof x?x:x.length,oe=Math.max(2,oe),T=k/oe,Q=V.shape=new To.Shape({style:!1}).addTo(V);var o=V.sticks=new To.Shape({style:!1}).addTo(V);E<=0&&o.removeFrom();var m=Q.graphics;m.c();var z=o.graphics;z.c();var e=E/10*8,t=E;V.selectPoints?(V.selectedBalls=new To.SelectionSet,V.selectedRect1s=new To.SelectionSet,V.selectedRect2s=new To.SelectionSet,V.selectionManager=new To.SelectionManager([V.selectedBalls,V.selectedRect1s,V.selectedRect2s],"ctrl",!1)):V.selectionManager=new To.SelectionManager(null,"ctrl");var n,r,i=To.mobile();te=V.controls=new To.Container({style:!1}).addTo(V),V.interactive&&te.drag({onTop:!i}),G=[],U=[],q=[];for(var a,l,s,c,u,d,h=0;h<oe;h++)(d=new To.Container({style:!1}).addTo(te)).num=h,"number"==typeof x?(c=To.Pick.choose(T),u=new To.Container(c,C,null,null,!1).addTo(V).loc({x:h*k/(oe-1)-c/2,y:h%2*c}),a=new To.Circle(e,V.selectPoints&&V.selectedBalls.isSelected(h)?L:To.light,To.dark,2,null,null,null,null,!1).centerReg(u).loc({x:c/2,y:0}),l=new To.Rectangle(t,t,V.selectPoints&&V.selectedRect1s.isSelected(h)?L:b(A),0==E?null:To.dark,0==E?null:2,null,null,null,!1).centerReg(u).loc({x:0,y:0}),s=new To.Rectangle(t,t,V.selectPoints&&V.selectedRect2s.isSelected(h)?L:b(A),0==E?null:To.dark,0==E?null:2,null,null,null,!1).centerReg(u).loc({x:c,y:0}),c=u.localToLocal(a.x,a.y,te),a.x=c.x,a.y=c.y,a.addTo(d,null,!1),c=u.localToLocal(l.x,l.y,te),l.x="none"==A?0:c.x-a.x,l.y="none"==A?0:c.y-a.y,l.addTo(d,null,!1),u=u.localToLocal(s.x,s.y,te),s.x="none"==A?0:u.x-a.x,s.y="none"==A?0:u.y-a.y,s.addTo(d,null,!1),d.x=a.x,d.y=a.y,a.x=0,a.y=0,"none"==A&&a.addTo(d,null,!1)):(n=(r=x[h])[8]||A,d.loc({x:r[0],y:r[1]}),a=new To.Circle(e,To.light,To.dark,2,null,null,null,null,!1).centerReg({add:!1}).addTo(d).loc({x:r[2],y:r[3]}),l=new To.Rectangle(t,t,b(n),0==E?null:To.dark,0==E?null:2,null,null,null,!1).centerReg({add:!1}).addTo(d,0).loc({x:r[4],y:r[5]}),s=new To.Rectangle(t,t,b(n),0==E?null:To.dark,0==E?null:2,null,null,null,!1).centerReg({add:!1}).addTo(d,0).loc({x:r[6],y:r[7]})),a.mySet=d,a.rect1=l,a.rect2=s,a.index=h,i?a.on("mousedown",f):a.on("dblclick",y),l.ball=a,(l.other=s).ball=a,s.other=l,0==E&&(a.expand(10),l.expand(10),s.expand(10)),i&&(a.expand(),l.expand(),s.expand()),n=[d,a,l,s,r?r[8]:A],G.push(n),q.push(a),U.push(d);var g,p=!1;function f(e){p?(e.preventDefault(),y(e)):(p=!0,setTimeout(function(){p=!1},300))}function y(e){var t,o;V.lockControlType||(t=e.target,o=G[t.index][4]||A,Math.abs(t.rect1.x)<=2&&Math.abs(t.rect1.y)<=2&&Math.abs(t.rect2.x)<=2&&Math.abs(t.rect2.y)<=2&&(o="none"),"none"==o&&t.parent.addChildAt(t,0),"none"==(o=V.types[(V.types.indexOf(o)+(V.shiftKey?-1:1)+V.types.length)%V.types.length])&&(t.rect1.x=t.rect1.y=t.rect2.x=t.rect2.y=0,t.parent.addChild(t),e.stopImmediatePropagation()),G[t.index][4]=o,t.rect1.color=b(o),t.rect2.color=b(o),V.drawShape(),(o=new createjs.Event("change")).controlType="bezierSwitch",V.dispatchEvent(o),t.stage.update())}function b(e){var t={straight:To.pink,free:To.yellow,none:To.blue};return t[e]||To.purple}function v(e){var t;"Circle"==e.target.type&&(t=V.lastSelectedIndex=V.controls.getChildIndex(e.target.parent),V.controls.numChildren<=2||(e=V.points,V.selectPoints&&(V.lastPoints=To.copy(e)),e.splice(t,1),V.points=e,V.stage.update(),V.lastSelected=V.lastSelectedIndex=null))}V.drawShape=function(){m.c();var e=To.mobile()?10:6;if(C<e){m.s("rgba(0,0,0,.01)").ss(e);var t=(i=G[0][0]).localToLocal(G[0][1].x,G[0][1].y,Q);m.mt(t.x,t.y);for(var o=0;o<G.length;o++){var n=o,r=(o+1)%G.length,i=G[n][0],a=G[n][1],l=G[n][2],s=G[n][3],c=G[r][0],u=G[r][1],d=G[r][2],h=(G[r][3],i.localToLocal(s.x,s.y,Q)),g=c.localToLocal(d.x,d.y,Q),p=c.localToLocal(u.x,u.y,Q);o!=G.length-1&&m.bt(h.x,h.y,g.x,g.y,p.x,p.y)}}V.colorCommand||(V.colorCommand=m.s(V._color).command,w&&w.type&&V.specialColor(V.colorCommand,w)),V.thicknessCommand||(V.thicknessCommand=m.ss(V._thickness,D.caps,D.joints,D.miterLimit,D.ignoreScale).command),V._dashed&&(V.dashedCommand||(V.dashedCommand=m.sd(Array.isArray(V._dashed)?V._dashed:[10,10],V._dashedOffset).command)),t=(i=G[0][0]).localToLocal(G[0][1].x,G[0][1].y,Q),m.mt(t.x,t.y),z.c().s(V.stickColor).ss(1);for(o=0;o<G.length;o++){n=o,r=(o+1)%G.length,i=G[n][0],a=G[n][1],l=G[n][2],s=G[n][3],c=G[r][0],u=G[r][1],d=G[r][2],h=(G[r][3],i.localToLocal(s.x,s.y,Q)),g=c.localToLocal(d.x,d.y,Q),p=c.localToLocal(u.x,u.y,Q);o!=G.length-1&&m.bt(h.x,h.y,g.x,g.y,p.x,p.y);var t=i.localToLocal(a.x,a.y,Q),f=i.localToLocal(l.x,l.y,Q);0==o&&(l.visible=0),0!=o&&z.mt(t.x,t.y).lt(f.x,f.y),o!=G.length-1&&z.mt(t.x,t.y).lt(h.x,h.y),o==G.length-1&&(s.visible=0)}V._dashed&&m.append(V.dashedCommand),m.append(V.thicknessCommand),m.append(V.colorCommand)},V.drawShape(),te.on("mousedown",function(e){var t,o,n;if((N=e.target.stage,!V.lockControls)&&(V.selectPoints&&(V.keyFocus=!0),g={x:e.target.x,y:e.target.y},e.target.rect1?((n=e.target).startX=n.x,n.startY=n.y,n.rect1.startX=n.rect1.x,n.rect1.startY=n.rect1.y,n.rect2.startX=n.rect2.x,n.rect2.startY=n.rect2.y):((o=e.target).startX=o.x,o.startY=o.y,t=(n=o.ball).index,e=A,zot(G[t][4])||(e=G[t][4]),"straight"==e&&(o=(e=o.other).x-n.x,n=e.y-n.y,e.stickLength=Math.sqrt(Math.pow(o,2)+Math.pow(n,2)))),V.selectPoints)){var r=V.selectionManager.currentSet;if(r&&r.selections&&0<r.selections.length)for(var i=0;i<r.selections.length;i++){var a=V.pointObjects[r.selections[i]];a[1].startX=a[1].x,a[1].startY=a[1].y,a[2].startX=a[2].x,a[2].startY=a[2].y,a[3].startX=a[3].x,a[3].startY=a[3].y}}}),V.selectPoints&&te.tap(function(e){var t;e.target.rect1?(t=e.target,V.selectedBalls.toggle(t.parent.num)):((e=e.target).color="white",((t=e.ball).rect1==e?V.selectedRect1s:V.selectedRect2s).toggle(t.parent.num));for(var o=0;o<V.pointObjects.length;o++){var n=V.pointObjects[o];n[1].color=V.selectedBalls.isSelected(o)?To.white:To.light,n[2].color=V.selectedRect1s.isSelected(o)?To.white:b(n[4]),n[3].color=V.selectedRect2s.isSelected(o)?To.white:b(n[4])}N.update()}),te.on("pressmove",function(e){if(!V.lockControls)if(V.selectPoints){var t=ne();if(-1==t.indexOf(e.target))ee(e.target),V.drawShape();else if(0<t.length){for(var o=e.target.x-e.target.startX,n=e.target.y-e.target.startY,r=0;r<t.length;r++){var i=t[r];i.x=i.startX+o,i.y=i.startY+n,ee(i)}V.drawShape()}}else ee(e.target),V.drawShape()}),te.on("pressup",function(e){var t,o;V.lockControls||(t=e.target.x!=g.x||e.target.y!=g.y,o=new createjs.Event("change"),e.target.rect1?(o.controlType="bezierPoint",function(e){if(V.selectPoints){var t=ne();if(t&&-1==t.indexOf(e))re(e);else if(t&&0<t.length)for(var o=0;o<t.length;o++)re(t[o]);else re(e)}else re(e)}(e.target)):o.controlType="bezierHandle",t&&V.dispatchEvent(o))}),V.changeControl=function(e,t,o,n,r,i,a,l,s){if(u=zob(V.changeControl,arguments,"index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update"))return u;if(zot(e))for(var c=0;c<G.length;c++)V.changeControl(c,t,o,n,r,i,a,l);else{var u=G[e];"none"==(u[4]=t)?(zot(a)||(u[2].x=a),zot(l)||(u[2].y=l),u[2].x=u[1].x,u[2].y=u[1].y,u[3].x=u[1].x,u[3].y=u[1].y,u[1].parent.addChild(u[1])):(zot(o)||(u[2].x=o),zot(n)||(u[2].y=n),zot(r)||(u[3].x=r),zot(i)||(u[3].y=i),zot(a)||(u[1].x=a),zot(l)||(u[1].y=l),u[1].parent.addChildAt(u[1],0)),s&&(V.update(),N&&N.update())}},V.transformPoints=function(e,t,o,n){return V.points=To.transformPoints(V.points,e,t,o,n),V},V.traverse=function(t,e,o,n){var r=To.copy(V.segmentRatios);r.unshift(0),zot(o)&&(o=e+1);var i,a,l=e<o;return a=l?(i=100*r[e],100*r[o]):(i=50+(100-100*r[e])/2,50+(100-100*r[o])/2),t.percentComplete=t.zimStartPercent=i,t.animate({ease:"linear",props:{path:V},rewind:!l,time:n,events:!0}),t.on("animation",function(e){(t.percentComplete>a||0==t.percentComplete)&&(t.stopAnimate(),e.remove(),(e=new createjs.Event("traversed")).obj=t,V.dispatchEvent(e))}),V},V.reversePoints=function(){return x=To.copy(V.points),V.points=To.reversePoints(To.copy(V.points)),V.update(),V},V.appendPoints=function(e,t){var o=To.copy(V.points);return V.points=To.appendPoints(o,e,t),V.update(),V},V.prependPoints=function(e,t){var o=To.copy(V.points);return V.points=To.rependPoints(o,x,t),V.update(),V},V.splitPoints=function(e){var t=To.copy(V.points);if(!(e<1||e>t.length-1)){var o=To.splitPoints(t,e),t=o[0],e=o[1],o=V.clone();return V.points=t,V.update(),o.points=e,V.parent&&o.addTo(V.parent),o}},V.makeBlob=function(n,e){zot(n)&&(n="mirror"),zot(e)&&(e=5);var t=To.copy(V.points);return To.loop(t,function(e,t,o){e[8]||(e[8]="mirror"),0==t&&("free"==n&&(e[4]=e[5]=0),e[8]=n),t==o-1&&("free"==n&&(e[6]=e[7]=0),e[8]=n)}),Math.abs(t[0][0]-t[t.length-1][0])<e&&Math.abs(t[0][1]-t[t.length-1][1])<e&&(t[0][4]=t[t.length-1][4],t[0][5]=t[t.length-1][5],t.pop()),new To.Blob({points:t,borderColor:V.color,borderWidth:V.thickness,showControls:V.controlsVisible,interactive:V.interactive,onTop:V.onTop,dashed:V.dashed,stickColor:V.stickColor})},V.update=function(e){return e?V.points=V.pointsAdjusted:V.drawShape(),V.zimAnimateChanged=!0,V},V.interactive&&(I&&Q.drag({onTop:!1}),Z=Q.on("mousedown",function(e){N=e.target.stage,g={x:Q.x,y:Q.y},V.selectPoints&&(V.keyFocus=!0),V.onTop&&(e=V.parent.numChildren-1,"Keyboard"==V.parent.getChildAt(e).type&&e--,V.parent.setChildIndex(V,e))}),K=Q.on("pressmove",function(){te.x=Q.x,te.y=Q.y,o.x=Q.x,o.y=Q.y}),J=Q.on("pressup",function(){var e=Q.x!=g.x||Q.y!=g.y,t=Q.localToLocal(V.regX,V.regY,V.parent);V.x=t.x,V.y=t.y,te.x=te.y=o.x=o.y=Q.x=Q.y=0,e&&((e=new createjs.Event("change")).controlType="move",V.dispatchEvent(e)),N&&N.update()}),V.move||ae(!0)),V.toggleEvent=V.on("mousedown",function(){V.allowToggle&&(F||(V.showControls(),V.dispatchEvent("controlsshow")))}),V.added(function(){N=V.stage,V.toggleStageEvent&&N.off("stagemousedown",V.toggleStageEvent),V.toggleStageEvent=N.on("stagemousedown",function(e){V.allowToggle&&V.stage&&F&&!V.hitTestPoint(e.stageX/To.scaX,e.stageY/To.scaY,!1)&&(V.hideControls(),V.dispatchEvent("controlshide"))})}),V.clickEvent=V.on("click",function(){V.ctrlKey&&setTimeout(function(){V.clone(!0).addTo(V.stage).mov(0,100),V.allowToggle&&(V.hideControls(),V.dispatchEvent("controlshide"));var e=new createjs.Event("change");e.controlType="move",V.dispatchEvent(e),V.stage.update()},50)}),V.hideControls=function(){return V.toggled=!1,te.visible=!1,o.visible=!1,F=!1,V.stage&&V.stage.update(),!V.allowToggle&&V.move&&ae(),V},B||V.hideControls(),V.showControls=function(){return V.toggled=!0,te.visible=!0,o.visible=!0,F=!0,te.x=Q.x,te.y=Q.y,o.x=Q.x,o.y=Q.y,V.addChildAt(Q,0),V.move&&!V.allowToggle&&ie(),V.stage&&V.stage.update(),V},V.toggle=function(e){return!0!==e&&(!1===e||F)?V.hideControls():V.showControls(),V},V.recordData=function(e){zot(e)&&(e=!1);var t={type:"Blob",index:V.parent?V.parent.getChildIndex(V):-1,x:V.x,y:V.y,points:V.recordPoints(),color:V.color,thickness:V.thickness,move:V.move,toggle:V.allowToggle,controlsVisible:F};return e?JSON.stringify(t):t},V.setData=function(e,t){if(!zot(e)){if(t)try{e=JSON.parse(e)}catch(e){return}var o=e.index;zot(o)&&(o=-1),delete e.index;var n,t=e.points;for(n in zot(t)||V.setPoints(t),delete e.points,V.num=t.length,e)V[n]=e[n];return V.parent&&V.parent.setChildIndex(V,o),V.update(),V}},V.recordPoints=function(e){zot(e)&&(e=!1);var t=V.points;return e&&(V.pane||(e=V.pane=new To.Pane({container:V.stage,width:Math.min(500,V.stage.width-20),height:Math.min(500,V.stage.height-20),draggable:!0}),(V.textArea=new To.TextArea(Math.min(400,V.stage.width-70),Math.min(400,V.stage.height-70))).centerReg(e)),V.textArea.text=JSON.stringify(t),V.pane.show()),t},!(V.setPoints=function(e){for(var t,o,n=0;n<e.length;n++)t=G[n],o=e[n],zot(t)||(t[0].x=o[0],t[0].y=o[1],t[1].x=o[2],t[1].y=o[3],t[2].x=o[4],t[2].y=o[5],t[3].x=o[6],t[3].y=o[7],t[4]=o[8]);return V.update(),V})!==X&&To.styleTransforms(V,W),V.clone=function(e,t){e=V.cloneProps(new To.Squiggle(t?V.colorCommand:e||!To.isPick(H[0])?V.color:H[0],V.thickness,V.recordPoints(),k,T,A,P,te.visible,S,E,V.allowToggle,V.move,M,O,j,L,_,V.editPoints,Y,D,X,V.group,R));return V.linearGradientParams&&e.linearGradient.apply(e,V.linearGradientParams),V.radialGradientParams&&e.radialGradient.apply(e,V.radialGradientParams),e},V.shape.on("mousedown",function(e){N=e.target.stage,V.editPoints&&(V.controlsVisible?(V.pressX=e.stageX/To.scaX,V.pressY=e.stageY/To.scaX):(V.pressX=null,V.pressY=null))}),V.addPointFactor=10,V.addMinDistance=15,V.shape.on("pressup",function(e){var n,t,r,i,o,a;V.editPoints&&V.pressX&&Math.abs(V.pressX-e.stageX/To.scaX)<$&&Math.abs(V.pressY-e.stageY/To.scaY)<$&&(V.selectPoints&&(V.lastPoints=To.copy(V.points)),a=V.points,n=V.globalToLocal(e.stageX/To.scaX,e.stageY/To.scaY),t=To.closestPointAlongCurve(n,V.segmentPoints),"anywhere"==V.editPoints?(a.splice(t+1,0,[n.x,n.y,0,0,0,0,0,0]),V.points=a,V.changeControl({index:t+1,type:"mirror",update:!0})):(o=V.pointsAdjusted,e=V.getSegmentPoint(o[t],o[(t+1)%o.length]),o=To.distanceAlongCurve(e),e=Math.round(o/V.addPointFactor),o=V.interpolate(e,t,!1,a),r=1e4,To.loop(o,function(e,t){var o=To.dist(e,n);o<r&&(r=o,i=t,0)}),r<V.addMinDistance&&(o=(a=V.segmentRatios)[t],a=0<t?a[t-1]:0,V.addPoint(100*(a+i/(e+1)*(o-a))))),V.lastSelectedIndex=t+1,V.lastSelected=V.controls.getChildAt(V.lastSelectedIndex),V.stage.update())}),V.controls.on("click",function(e){V.lastSelected=e.target.parent;V.lastSelectedIndex=V.controls.getChildIndex(e.target.parent);V.editPoints&&V.selectionManager.shiftKey&&v(e)}),V.controls.hold(v),F||V.hideControls(),V.dispatchEvent("update")}function ne(){var e=[],t=V.selectionManager.currentSet;if(t&&t.selections&&0<t.selections.length)for(var o=0;o<t.selections.length;o++){var n=V.pointObjects[t.selections[o]];t==V.selectedBalls?e.push(n[1]):t==V.selectedRect1s?e.push(n[2]):t==V.selectedRect2s&&e.push(n[3])}return e}function re(e){var t,o,n;"Circle"==e.type&&(o=(t=e).mySet,n=t.rect1,e=t.rect2,n.x-=t.x,n.y-=t.y,e.x-=t.x,e.y-=t.y,o.x+=t.x,o.y+=t.y,t.x=0,t.y=0)}function ie(){"always"!=V.move&&(i||(i=!0,Q.drag({onTop:!1}),Z=Q.on("mousedown",Z),K=Q.on("pressmove",K),J=Q.on("pressup",J)))}function ae(e){"always"!=V.move&&(e||i)&&(i=!1,Q.noDrag(),Q.off("mousedown",Z),Q.off("pressmove",K),Q.off("pressup",J))}function p(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function g(e,t,o,n,r,i,a,l){var s=e.length-1,c=0,u=0;100==n&&"Squiggle"==V.type&&(n=99.99),n=(n+1e5)%100,To.loop(o,function(e,t){return n/100<e?(s=t,u=e,!0):void(c=e)});var d=V.segmentPoints[s],h=0<u?(n/100-c)/(u-c):0,g=To.pointAlongCurve(d,h,null,l),o=[g.x,g.y,0,0];i||(a?V.interpolatedPoints.push({x:g.x,y:g.y,r:n/100}):("none"!=r&&(l=p(d[0],d[1],h),i=p(d[1],d[2],h),a=p(d[2],d[3],h),d=p(l,i,h),h=p(i,a,h),o[4]=d.x-g.x,o[5]=d.y-g.y,o[6]=h.x-g.x,o[7]=h.y-g.y,l=V.localToLocal(l.x,l.y,t[s]),e[s][6]=l.x,e[s][7]=l.y,t=V.localToLocal(a.x,a.y,t[(s+1)%e.length]),e[(s+1)%e.length][4]=t.x,e[(s+1)%e.length][5]=t.y),r&&(o[8]=r),e.splice(s+1,0,o)))}0!=oe&&(zot(T)&&(T=null!=W.controlLength?W.controlLength:k/oe),this.zimCustomShape_constructor(k,T,null,null,!1),this.type="Squiggle",this.mouseChildren=!0,zot(M)&&(M=null!=W.dashed&&W.dashed),zot(w)&&(w=null!=W.color?W.color:To.blue),w.style&&(this.colorCommand=w,w="black"),zot(A)&&(A=null!=W.controlType?W.controlType:null),zot(r=A)&&(A="mirror"),zot(P)&&(P=null!=W.lockControlType&&W.lockControlType),zot(Y)&&(Y=null==W.interactive||W.interactive),zot(B)&&(B=null!=W.showControls?W.showControls:Y),F=B,zot(S)&&(S=null!=W.lockControls?W.lockControls:!Y),zot(E)&&(E=null!=W.handleSize?W.handleSize:To.mobile()?20:10),zot(t)&&(t=null!=W.allowToggle?W.allowToggle:Y),zot(I)&&(I=null!=W.move?W.move:Y),zot(j)&&(j=null!=W.stickColor?W.stickColor:"#111"),zot(L)&&(L=null!=W.selectColor?W.selectColor:"#fff"),zot(_)&&(_=null!=W.selectPoints?W.selectPoints:Y),this.stickColor=j,zot(O)&&(O=null==W.onTop||W.onTop),zot(e)&&(e=null!=W.editPoints?W.editPoints:Y),zot(D)&&(D=null!=W.strokeObj?W.strokeObj:{}),H=function(){return arguments}(w),w=To.Pick.choose(w),(V=this).types=["mirror","straight","free","none"],this.interactive=Y,this.num=oe,this.onTop=O,this.move=I,this.editPoints=e,this.allowToggle=t,this.lockControlType=P,this.selectPoints=_,this.lockControls=S,V._color=w,V._thickness=C,V._dashed=M,V._dashed&&!Array.isArray(V._dashed)&&(V._dashed=[10,10]),i=V.move,$=2,r&&"number"!=typeof x&&To.loop(x,function(e){"none"==(e[8]=r)&&(e[4]=e[5]=e[6]=e[7]=0)}),s(),V.selectionManager.on("keydown",function(e){if(V.selectPoints&&V.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=ne();if(0<t.length){for(var o=0;o<t.length;o++){var n=t[o];37==e.keyCode?n.x-=V.selectionManager.shiftKey?10:1:39==e.keyCode?n.x+=V.selectionManager.shiftKey?10:1:38==e.keyCode?n.y-=V.selectionManager.shiftKey?10:1:40==e.keyCode&&(n.y+=V.selectionManager.shiftKey?10:1),ee(n)}V.drawShape(),V.dispatchEvent("update"),V.stage&&V.stage.update()}}}),V.selectionManager.on("keyup",function(e){if(V.selectPoints&&V.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=ne();if(0<t.length)for(var o=0;o<t.length;o++)re(t[o])}}),V.selectionManager.on("undo",function(){var e;V.selectPoints&&V.keyFocus&&V.lastPoints&&(e=To.copy(V.lastPoints),V.lastPoints=To.copy(V.points),V.points=e,V.stage&&V.stage.update())}),ee=function(e){var t,o,n,r;V.lockControls||(e.rect1?(t=(o=e).x-o.startX,n=o.y-o.startY,o.rect1.x=o.rect1.startX+t,o.rect1.y=o.rect1.startY+n,o.rect2.x=o.rect2.startX+t,o.rect2.y=o.rect2.startY+n):(t=(r=e).other,n=(o=r.ball).index,e=A,zot(G[n][4])||(e=G[n][4]),"straight"!=e&&"mirror"!=e||(n=r.x-o.x,r=r.y-o.y,"mirror"==e?(t.x=o.x-n,t.y=o.y-r):(r=Math.atan2(r,n),n=-t.stickLength*Math.cos(r+Math.PI),r=-t.stickLength*Math.sin(r+Math.PI),t.x=o.x-n,t.y=o.y-r))))},Object.defineProperty(V,"move",{get:function(){return I},set:function(e){I!=e&&((I=e)?ie:ae)()}}),Object.defineProperty(V,"interactive",{get:function(){return Y},set:function(e){F=Y=e,V.allowToggle=Y,V.editPoints=Y,V.lockControls=!Y,V.selectPoints=Y,V.move=Y,V.points=V.points}}),Object.defineProperty(V,"allowToggle",{get:function(){return t},set:function(e){t!=e&&((t=e)?V.move&&ie():!F&&V.move&&ae())}}),a=S,Object.defineProperty(V,"lockControls",{get:function(){return a},set:function(e){(a=e)?(V.controls.mouseChildren=!1,V.controls.mouseEnabled=!1):(V.controls.mouseChildren=!0,V.controls.mouseEnabled=!0)}}),V.lockControls=a,Object.defineProperty(V,"controlsVisible",{get:function(){return F},set:function(e){(F=e)?V.showControls():V.hideControls()}}),void 0!==KEYFOCUS&&(To.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return To.KEYFOCUS==V},set:function(e){To.KEYFOCUS=V}}),To.KEYFOCUS||V.selectPoints&&(V.keyFocus=!0,(l=document.activeElement)&&l.blur()),Object.defineProperty(V,"points",{get:function(){for(var e,t,o=[],n=0;n<G.length;n++)t=G[n],e=[To.decimals(t[0].x),To.decimals(t[0].y),To.decimals(t[1].x),To.decimals(t[1].y),To.decimals(t[2].x),To.decimals(t[2].y),To.decimals(t[3].x),To.decimals(t[3].y)],t[4]&&"mirror"!==t[4]&&e.push(t[4]),o.push(e);return o},set:function(e){var t=V.x,o=V.y,n=V.visible;V.dispose(!0),x=e,s(),V.lockControls=a,V.x=t,V.y=o,V.visible=n}}),Object.defineProperty(V,"pointsAdjusted",{get:function(){var n,r,i=[],a=V.pointObjects;return To.loop(a.length,function(e,t){var o;r=a[e],n=G[e],r=0==r[0].rotation&&0==r[0].scaleX&&0==r[0].scaleY?[To.decimals(n[0].x),To.decimals(n[0].y),To.decimals(n[1].x),To.decimals(n[1].y),To.decimals(n[2].x),To.decimals(n[2].y),To.decimals(n[3].x),To.decimals(n[3].y)]:(o=r[0].localToLocal(r[2].x,r[2].y,r[0].parent),e=r[0].localToLocal(r[3].x,r[3].y,r[0].parent),[To.decimals(n[0].x),To.decimals(n[0].y),To.decimals(n[1].x),To.decimals(n[1].y),To.decimals(o.x-n[0].x),To.decimals(o.y-n[0].y),To.decimals(e.x-n[0].x),To.decimals(e.y-n[0].y)]),n[4]&&"mirror"!==n[4]&&r.push(n[4]),i.push(r)}),i},set:function(e){zon&&zogy("Squiggle() - pointsAdjusted is read only")}}),Object.defineProperty(V,"pointObjects",{get:function(){return G},set:function(e){zon&&zog("Squiggle() - pointObjects is read only - but its contents can be manipulated - use squiggle.update() after changes")}}),Object.defineProperty(V,"pointControls",{get:function(){return U},set:function(e){zon&&zog("Squiggle() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(V,"pointCircles",{get:function(){return q},set:function(e){zon&&zog("Squiggle() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(V,"segmentPoints",{get:function(){var o=[],n=V.pointsAdjusted;return To.loop(n.length-1,function(e,t){e=V.getSegmentPoint(n[e],n[e+1]);o.push(e)}),o},set:function(e){zon&&zog("Squiggle() - segmentPoints is read only")}}),Object.defineProperty(V,"segmentRatios",{get:function(){var t=[],o=0;To.loop(V.segmentPoints,function(e){e=To.distanceAlongCurve(e);t.push(e),o+=e});var n=[],r=0;return To.loop(t,function(e){r+=e/o,n.push(r)}),n},set:function(e){zon&&zog("Squiggle() - segmentRatios is read only")}}),V.approximateBounds=function(e,t,o){zot(e)&&(e=80),zot(o)&&(o=0),e/=V.num;var n=V.interpolate(e,null,!0,null,!0),e=To.boundsAroundPoints(n);if(V.setBounds(e.x-o,e.y-o,e.width+2*o,e.height+2*o),t){if(!V.parent)return zon&&zogy("approximateBounds() - add to stage to first to see points"),V;V.hitPathPoints?V.hitPathPoints.removeAllChildren():V.hitPathPoints=(new To.Container).addTo(),V.hitPathPoints.top();for(var r=0;r<n.length;r++){var i=n[r],i=V.localToGlobal(i.x,i.y);new To.Circle(3).loc(i.x,i.y,V.hitPathPoints)}}return V},V.getPointAngle=function(e){var t,o=V.pointObjects[e][0],n=V.pointObjects[e][2],e=V.pointObjects[e][3];return e=o==V.stage?(t=new To.Point(n.x,n.y),new To.Point(e.x,e.y)):(t=o.localToGlobal(n.x,n.y),o.localToGlobal(e.x,e.y)),To.angle(t.x,t.y,e.x,e.y)},V.getSegmentPoint=function(e,t){if(!zot(e)&&!zot(t)){0==e[2]&&0==e[3]||(e[4]-=e[2],e[5]-=e[3],e[6]-=e[2],e[7]-=e[3],e[0]+=e[2],e[1]+=e[3],e[2]=0,e[3]=0),0==t[2]&&0==t[3]||(t[4]-=t[2],t[5]-=t[3],t[6]-=t[2],t[7]-=t[3],t[0]+=t[2],t[1]+=t[3],t[2]=0,t[3]=0);var o={x:e[0],y:e[1]},n={x:e[0]+e[6],y:e[1]+e[7]},e={x:t[0]+t[4],y:t[1]+t[5]},t={x:t[0],y:t[1]};return 0==te.x&&0==te.y||(o.x+=te.x,n.x+=te.x,e.x+=te.x,t.x+=te.x,o.y+=te.y,n.y+=te.y,e.y+=te.y,t.y+=te.y),[o,n,e,t]}},V.getAdjacentSegmentData=function(e){zot(e)&&(e=0);var t=V.pointsAdjusted;return 2==V.num?[[V.getSegmentPoint(t[0],t[1])],[0]]:0==e?[[V.getSegmentPoint(t[0],t[1]),V.getSegmentPoint(t[1],t[2])],[0,1]]:e>=V.num-2?[[V.getSegmentPoint(t[V.num-3],t[V.num-2]),V.getSegmentPoint(t[V.num-2],t[V.num-1])],[V.num-3,V.num-2]]:[[V.getSegmentPoint(t[e-1],t[e]),V.getSegmentPoint(t[e],t[e+1]),V.getSegmentPoint(t[e+1],t[e+2])],[e-1,e,e+1]]},V.getCurvePoint=function(o,e,t,n,r){(zot(o)||isNaN(o))&&(o=0),zot(e)&&(e=V.segmentRatios),zot(t)&&(t=V.segmentPoints),zot(n)&&(n=!1),zot(r)&&(r=!1);var i=e,r=t,e=To.loop(i,function(e,t){if(o<=e)return t}),t=0<e?i[e-1]:0,i=0<e?i[e]-i[e-1]:i[e];if(i){i=(o-t)/i,i=To.pointAlongCurve(r[e],i,n,!0),n=V.localToGlobal(i.x,i.y);return n.angle=i.angle,n.z=e,zot(n)?void 0:n}},this.addPoint=function(e,t){zot(e)&&(e=100);var o=V.points,n=V.segmentRatios;return g(o,V.pointControls,n,e,t=t||r),V.points=o,V.num=o.length,V},this.addPoints=function(r,i,a,l,s,c,u){zot(c)&&(c=To.copy(V.points));var d,e=To.copy(V.segmentRatios),h=0;return s&&(V.interpolatedPoints=[]),l&&(d=e.length*r),To.loop(e,function(t,o){s&&g(c,V.pointControls,V.segmentRatios,100*h,i,!zot(a)&&o!=a,s,u);var e=l?Math.round(d*(t-h)):r,n=1/(e+1);To.loop(e,function(e){e=h+(t-h)*n*(e+1);g(c,V.pointControls,V.segmentRatios,100*e,i,!zot(a)&&o!=a,s,u),!s&&0<r&&(V.points=c)}),h=t}),s&&"Squiggle"==V.type&&g(c,V.pointControls,V.segmentRatios,100,i,!1,s,u),V.stage&&V.stage.update(),V.num=c.length,V},this.interpolate=function(e,t,o,n,r){return zot(e)&&(e=1),V.addPoints(e,"none",t,o,!0,n,r),V.interpolatedPoints},this.dispose=function(e,t,o){if(V.shape){if(To.gD(V),N&&V.toggleStageEvent&&N.off("stagemousedown",V.toggleStageEvent),V.controls.noDrag(),V.controls.removeAllEventListeners(),V.selectPoints&&V.selectionManager&&V.selectionManager.dispose(),V.selectedBalls=null,V.selectedRect1s=null,V.selectedRect2s=null,V.selectionManager=null,V.off("mousedown",V.toggleEvent),V.off("click",V.clickEvent),e){V.shape.dispose(),V.shape=null;for(var n=0;n<V.points.length;n++)V.pointObjects[n][0].removeAllEventListeners(),V.pointObjects[n][1].removeAllEventListeners(),V.pointObjects[n][2].removeAllEventListeners(),V.pointObjects[n][3].removeAllEventListeners();V.controls.removeFrom(V),V.sticks.dispose(),q=G=null}else V.removeAllEventListeners(),q=G=null,o||this.zimCustomShape_dispose(!0);return!0}})},To.extend(To.Squiggle,To.CustomShape,["clone","dispose"],"zimCustomShape",!1),To.Blob=function(w,e,t,C,x,k,T,A,o,P,B,n,S,E,I,M,O,j,r,L,_,Y,i,D){if(l=zob(To.Blob,arguments,"color, borderColor, borderWidth, points, radius, controlLength, controlType, lockControlType, showControls, lockControls, handleSize, allowToggle, move, dashed, onTop, stickColor, selectColor, selectPoints, editPoints, interactive, strokeObj, style, group, inherit",this))return l;z_d("53.5"),this.group=i;var X=!1===Y?{}:To.getStyle("Blob",this.group,D);zot(x)&&(x=null!=X.radius?X.radius:100),this.zimCustomShape_constructor(-x,-x,2*x,2*x,!1),this.type="Blob",this.mouseChildren=!0,zot(E)&&(E=null!=X.dashed&&X.dashed),zot(e)&&(e=null!=X.borderColor?X.borderColor:null),zot(t)&&(t=null!=X.borderWidth?X.borderWidth:null),e<0||t<0?e=t=null:null!=e&&null==t&&(t=1),zot(w)&&(w=null!=X.color?X.color:0<t?"rgba(0,0,0,0)":To.green),w.style&&(this.colorCommand=w,w="black"),e&&e.style&&(this.borderColorCommand=e,e="black"),zot(C)&&(C=null!=X.points?X.points:4);var R="number"==typeof C?C:C.length,W=k;zot(k)&&(k=null!=X.controlLength?X.controlLength:4*x/R),zot(T)&&(T=null!=X.controlType?X.controlType:null);var a=T;zot(T)&&(T="straight"),zot(A)&&(A=null!=X.lockControlType&&X.lockControlType),zot(L)&&(L=null==X.interactive||X.interactive),zot(o)&&(o=null!=X.showControls?X.showControls:L);var F=o;zot(P)&&(P=null!=X.lockControls?X.lockControls:!L),zot(B)&&(B=null!=X.handleSize?X.handleSize:To.mobile()?20:10),zot(n)&&(n=null!=X.allowToggle?X.allowToggle:L),zot(S)&&(S=null!=X.move?X.move:L),zot(M)&&(M=null!=X.stickColor?X.stickColor:"#111"),zot(O)&&(O=null!=X.selectColor?X.selectColor:"#fff"),zot(j)&&(j=null!=X.selectPoints?X.selectPoints:L),this.stickColor=M,zot(I)&&(I=null==X.onTop||X.onTop),zot(r)&&(r=null!=X.editPoints?X.editPoints:L),zot(_)&&(_=null!=X.strokeObj?X.strokeObj:{});var H=function(){return arguments}(w,e);w=To.Pick.choose(w),e=To.Pick.choose(e);var V=this;this.interactive=L,this.num=R,this.editPoints=r,this.selectPoints=j,this.lockControls=P,this.onTop=I,this.move=S,this.allowToggle=n,this.lockControlType=A;var N,G,q,U,Q,Z,K,J;this.types=["mirror","straight","free","none"];V._color=w,V._borderColor=e,V._borderWidth=t,V._dashed=E,V._dashed&&!Array.isArray(V._dashed)&&(V._dashed=[10,10]);var $,ee,l,s=V.move,te=2;function c(e){var t;if("circle"!=e&&"rectangle"!=e&&"triangle"!=e||("circle"==e&&(e=new To.Circle(x)),"rectangle"==e&&(e=new To.Rectangle(2*x,2*x).centerReg({add:!1})),"triangle"==e&&(e=new To.Triangle(2*x,2*x,2*x))),"Circle"!=e.type&&"Rectangle"!=e.type&&"Triangle"!=e.type)return e;var o=e.getBounds();return"Circle"==e.type?(t=4,W=k=2*x*.5523):"Rectangle"==e.type?(e.centerReg({add:!1}),t=[[o.x-o.width/2,o.y-o.height/2],[o.x+o.width/2,o.y-o.height/2],[o.x+o.width/2,o.y+o.height/2],[o.x-o.width/2,o.y+o.height/2]],V.setBounds(o.x-o.width/2,o.y-o.height/2,o.width,o.height),V.regX=e.regX-o.width/2,V.regY=e.regY-o.height/2):"Triangle"==e.type&&(t=[[e.three.x-e.width/2,e.three.y+e.height/2+e.adjusted],[e.two.x-e.width/2,e.two.y+e.height/2+e.adjusted],[e.one.x-e.width/2,e.one.y+e.height/2+e.adjusted]],V.setBounds(o.x-o.width/2,o.y-o.height/2,o.width,o.height)),t}function u(){if(ee&&ee.removeAllEventListeners(),V.selectPoints?(V.selectedBalls=new To.SelectionSet,V.selectedRect1s=new To.SelectionSet,V.selectedRect2s=new To.SelectionSet,V.selectionManager=new To.SelectionManager([V.selectedBalls,V.selectedRect1s,V.selectedRect2s],"ctrl",!1)):V.selectionManager=new To.SelectionManager(null,"ctrl"),!((R="number"==typeof C?C:C.length)<=0)){zot(W)&&(k=4*x/R),U=V.shape=new To.Shape({style:!1}).addTo(V);var o=V.sticks=new To.Shape({style:!1}).addTo(V);B<=0&&o.removeFrom();var u=U.graphics;u.c();var d=o.graphics;d.c();var e,t,n,r,i,a=B/10*8,l=B,s=To.mobile();ee=V.controls=new To.Container({style:!1}).addTo(V),V.interactive&&ee.drag({onTop:!s}),N=[],q=[],G=[];for(var c,h,g,p=0;p<R;p++)(g=new To.Container({style:!1}).addTo(ee)).num=p,"number"==typeof C?(c=To.Pick.choose(k),(h=new To.Container(c,x,null,null,!1).reg(c/2,x).addTo(V)).rotation=p/R*360,n=new To.Circle(a,V.selectPoints&&V.selectedBalls.isSelected(p)?O:To.light,To.dark,2,null,null,null,null,!1).centerReg(h).loc({x:c/2,y:0}),e=new To.Rectangle(l,l,V.selectPoints&&V.selectedRect1s.isSelected(p)?O:b(T),0==B?null:To.dark,0==B?null:2,null,null,null,!1).centerReg(h).loc({x:0,y:0}),t=new To.Rectangle(l,l,V.selectPoints&&V.selectedRect2s.isSelected(p)?O:b(T),0==B?null:To.dark,0==B?null:2,null,null,null,!1).centerReg(h).loc({x:c,y:0}),c=h.localToLocal(n.x,n.y,ee),n.x=c.x,n.y=c.y,n.addTo(g,null,!1),c=h.localToLocal(e.x,e.y,ee),e.x="none"==T?0:c.x-n.x,e.y="none"==T?0:c.y-n.y,e.addTo(g,null,!1),h=h.localToLocal(t.x,t.y,ee),t.x="none"==T?0:h.x-n.x,t.y="none"==T?0:h.y-n.y,t.addTo(g,null,!1),g.x=n.x,g.y=n.y,n.x=0,n.y=0,"none"==T&&n.addTo(g,null,!1)):(r=(i=C[p])[8]||T,g.loc({x:i[0],y:i[1]}),n=new To.Circle(a,To.light,To.dark,2,null,null,null,null,!1).centerReg({add:!1}).addTo(g).loc({x:i[2],y:i[3]}),e=new To.Rectangle(l,l,b(r),0==B?null:To.dark,0==B?null:2,null,null,null,!1).centerReg({add:!1}).addTo(g,0).loc({x:i[4],y:i[5]}),t=new To.Rectangle(l,l,b(r),0==B?null:To.dark,0==B?null:2,null,null,null,!1).centerReg({add:!1}).addTo(g,0).loc({x:i[6],y:i[7]})),n.mySet=g,n.rect1=e,n.rect2=t,n.index=p,0==B&&(n.expand(10),e.expand(10),t.expand(10)),s?n.on("mousedown",z):n.on("dblclick",y),e.ball=n,(e.other=t).ball=n,t.other=e,s&&(n.expand(),e.expand(),t.expand()),r=[g,n,e,t,i?i[8]:T],N.push(r),G.push(n),q.push(g);var f,m=!1;V.drawShape=function(){u.c(),V.colorCommand||(V.colorCommand=u.f(V._color).command,w&&w.type&&V.specialColor(V.colorCommand,w)),(zot(V._borderWidth)||0<V._borderWidth)&&(zot(V._borderColor)&&zot(V._borderWidth)||(zot(V._borderColor)&&(V._borderColor="black"),V.borderColorCommand||(V.borderColorCommand=u.s(V._borderColor).command,V._borderColor&&V._borderColor.type&&V.specialColor(V.borderColorCommand,V._borderColor)),V.borderWidthCommand||(V.borderWidthCommand=u.ss(V._borderWidth,_.caps,_.joints,_.miterLimit,_.ignoreScale).command),V._dashed&&(V.borderDashedCommand||(V.borderDashedCommand=u.sd(Array.isArray(V._dashed)?V._dashed:[10,10],V._dashedOffset).command))));var e=(n=N[0][0]).localToLocal(N[0][1].x,N[0][1].y,U);u.mt(e.x,e.y),d.c().s(V.stickColor).ss(1);for(var t=0;t<N.length;t++){var o=(t+1)%N.length,n=N[t][0],r=N[t][1],i=N[t][2],a=N[t][3],l=N[o][0],s=N[o][1],c=N[o][2],a=(N[o][3],n.localToLocal(a.x,a.y,U)),c=l.localToLocal(c.x,c.y,U),s=l.localToLocal(s.x,s.y,U);u.bt(a.x,a.y,c.x,c.y,s.x,s.y);e=n.localToLocal(r.x,r.y,U),i=n.localToLocal(i.x,i.y,U);d.mt(e.x,e.y).lt(i.x,i.y),d.mt(e.x,e.y).lt(a.x,a.y)}u.cp(),u.append(V.colorCommand),V._dashed&&u.append(V.borderDashedCommand),V.borderWidthCommand&&u.append(V.borderWidthCommand),V.borderColorCommand&&u.append(V.borderColorCommand)},V.drawShape(),ee.on("mousedown",function(e){var t,o,n;if(!V.lockControls&&(V.selectPoints&&(V.keyFocus=!0),f={x:e.target.x,y:e.target.y},e.target.rect1?((n=e.target).startX=n.x,n.startY=n.y,n.rect1.startX=n.rect1.x,n.rect1.startY=n.rect1.y,n.rect2.startX=n.rect2.x,n.rect2.startY=n.rect2.y):((o=e.target).startX=o.x,o.startY=o.y,t=(n=o.ball).index,e=T,zot(N[t][4])||(e=N[t][4]),"straight"==e&&(o=(e=o.other).x-n.x,n=e.y-n.y,e.stickLength=Math.sqrt(Math.pow(o,2)+Math.pow(n,2)))),V.selectPoints)){var r=V.selectionManager.currentSet;if(r&&r.selections&&0<r.selections.length)for(var i=0;i<r.selections.length;i++){var a=V.pointObjects[r.selections[i]];a[1].startX=a[1].x,a[1].startY=a[1].y,a[2].startX=a[2].x,a[2].startY=a[2].y,a[3].startX=a[3].x,a[3].startY=a[3].y}}}),V.selectPoints&&ee.tap(function(e){var t,o;e.target.rect1?(o=e.target,V.selectedBalls.toggle(o.parent.num)):((t=e.target).color="white",((o=t.ball).rect1==t?V.selectedRect1s:V.selectedRect2s).toggle(o.parent.num));for(var n=0;n<V.pointObjects.length;n++){var r=V.pointObjects[n];r[1].color=V.selectedBalls.isSelected(n)?To.white:To.light,r[2].color=V.selectedRect1s.isSelected(n)?To.white:b(r[4]),r[3].color=V.selectedRect2s.isSelected(n)?To.white:b(r[4])}e.target.stage.update()}),ee.on("pressmove",function(e){if(!V.lockControls)if(V.selectPoints){var t=oe();if(-1==t.indexOf(e.target))$(e.target),V.drawShape();else if(0<t.length){for(var o=e.target.x-e.target.startX,n=e.target.y-e.target.startY,r=0;r<t.length;r++){var i=t[r];i.x=i.startX+o,i.y=i.startY+n,$(i)}V.drawShape()}}else $(e.target),V.drawShape()}),ee.on("pressup",function(e){var t,o;V.lockControls||(t=e.target.x!=f.x||e.target.y!=f.y,o=new createjs.Event("change"),e.target.rect1?(o.controlType="bezierPoint",function(e){if(V.selectPoints){var t=oe();if(t&&-1==t.indexOf(e))ne(e);else if(t&&0<t.length)for(var o=0;o<t.length;o++)ne(t[o]);else ne(e)}else ne(e)}(e.target)):o.controlType="bezierHandle",t&&V.dispatchEvent(o))}),V.changeControl=function(e,t,o,n,r,i,a,l,s){if(u=zob(V.changeControl,arguments,"index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY, update"))return u;if(zot(e)){for(var c=0;c<N.length;c++)V.changeControl(c,t,o,n,r,i,a,l);return V}var u=N[e];return"none"==(u[4]=t)?(zot(a)||(u[1].x=a),zot(l)||(u[1].y=l),u[2].x=u[1].x,u[2].y=u[1].y,u[3].x=u[1].x,u[3].y=u[1].y,u[1].parent.addChild(u[1])):(zot(a)||(u[1].x=a),zot(l)||(u[1].y=l),zot(o)||(u[2].x=o),zot(n)||(u[2].y=n),zot(r)||(u[3].x=r),zot(i)||(u[3].y=i),u[1].parent.addChildAt(u[1],0)),u[2].color=b(t),u[3].color=b(t),s&&(V.update(),V.stage&&V.stage.update()),V},V.transformPoints=function(e,t,o,n){return V.points=To.transformPoints(V.points,e,t,o,n),V},V.traverse=function(t,e,o,n){var r=To.copy(V.segmentRatios);r.unshift(0),zot(o)&&(o=e+1);var i,a,l=e<o;return a=l?(i=100*r[e],100*r[o]):(i=50+(100-100*r[e])/2,50+(100-100*r[o])/2),t.percentComplete=i,t.animate({ease:"linear",props:{path:V},rewind:!l,time:n,events:!0}),t.on("animation",function(e){(t.percentComplete>a||0==t.percentComplete)&&(t.stopAnimate(),e.remove(),(e=new createjs.Event("traversed")).obj=t,V.dispatchEvent(e))}),V},V.reversePoints=function(e){return zot(e)&&(e=!0),(C=To.copy(V.points)).reverse(),e&&C.unshift(C.pop()),loop(C,e=>{var t=e[6];e[6]=e[4],e[4]=t;t=e[7];e[7]=e[5],e[5]=t}),V.points=C,V.update(),V},V.splitPoints=function(e){var t=To.copy(V.points);if(!(e<1||e>t.length-1)){var o=To.copy(t.slice(0,e+1)),t=To.copy(t.slice(e));To.trimPointEnds(o),To.trimPointEnds(t);e=V.clone();return V.points=o,V.update(),e.points=t,V.parent&&e.addTo(V.parent),e}},V.makeSquiggle=function(e){var t=To.copy(V.points);zot(e)&&(e=0),e=(e+1e3*t.length)%t.length;var o=To.copy(t.slice(e)),e=To.copy(t.slice(0,e+1)),t=o.concat(e);return To.trimPointEnds(t),new To.Squiggle({points:t,color:V.borderColor,thickness:V.borderWidth,showControls:V.controlsVisible,interactive:V.interactive,onTop:V.onTop,dashed:V.dashed,stickColor:V.stickColor})},V.update=function(e){return e?V.points=V.pointsAdjusted:V.drawShape(),V.zimAnimateChanged=!0,V},V.move&&V.interactive&&U.drag({onTop:!1}),Q=U.on("mousedown",function(e){J=e.target.stage,f={x:U.x,y:U.y},V.selectPoints&&(V.keyFocus=!0),V.onTop&&(e=V.parent.numChildren-1,"Keyboard"==V.parent.getChildAt(e).type&&e--,V.parent.setChildIndex(V,e))}),Z=U.on("pressmove",function(){ee.x=U.x,ee.y=U.y,o.x=U.x,o.y=U.y}),K=U.on("pressup",function(){var e=U.x!=f.x||U.y!=f.y,t=U.localToLocal(V.regX,V.regY,V.parent);V.x=t.x,V.y=t.y,ee.x=ee.y=o.x=o.y=U.x=U.y=0,e&&((e=new createjs.Event("change")).controlType="move",V.dispatchEvent(e)),J.update()}),S||ie(!0),V.toggleEvent=V.on("mousedown",function(){V.allowToggle&&(F||(V.showControls(),V.dispatchEvent("controlsshow")))}),V.added(function(){J=V.stage,V.toggleStageEvent&&V.stage.off("stagemousedown",V.toggleStageEvent),V.toggleStageEvent=V.stage.on("stagemousedown",function(e){V.allowToggle&&V.stage&&F&&!V.hitTestPoint(e.stageX/To.scaX,e.stageY/To.scaY,!1)&&(V.hideControls(),V.dispatchEvent("controlshide"))})}),V.clickEvent=V.on("click",function(){V.ctrlKey&&setTimeout(function(){V.clone(!0).addTo(V.stage).mov(100),V.allowToggle&&(V.hideControls(),V.dispatchEvent("controlshide"));var e=new createjs.Event("change");e.controlType="move",V.dispatchEvent(e),V.stage.update()},50)}),V.hideControls=function(){return V.toggled=!1,ee.visible=!1,o.visible=!1,F=!1,V.stage&&V.stage.update(),!V.allowToggle&&V.move&&ie(),V},F||V.hideControls(),V.showControls=function(){return V.toggled=!0,ee.visible=!0,o.visible=!0,F=!0,ee.x=U.x,ee.y=U.y,o.x=U.x,o.y=U.y,V.addChildAt(U,0),V.move&&!V.allowToggle&&re(),V.stage&&V.stage.update(),V},V.toggle=function(e){return!0!==e&&(!1===e||F)?V.hideControls():V.showControls(),V},V.recordData=function(e){zot(e)&&(e=!1);var t={type:"Blob",index:V.parent?V.parent.getChildIndex(V):-1,x:V.x,y:V.y,points:V.recordPoints(),color:V.color,borderColor:V.borderColor,borderWidth:V.borderWidth,move:V.move,toggle:V.allowToggle,controlsVisible:F};return e?JSON.stringify(t):t},V.setData=function(e,t){if(!zot(e)){if(t)try{e=JSON.parse(e)}catch(e){return}var o=e.index;zot(o)&&(o=-1),delete e.index;var n,t=e.points;for(n in zot(t)||V.setPoints(t),delete e.points,this.num=t.length,e)V[n]=e[n];return V.parent&&V.parent.setChildIndex(V,o),V}},V.recordPoints=function(e){zot(e)&&(e=!1);var t,o,n=V.points;return e&&(t||(t=V.pane=new To.Pane({displayClose:!1,container:V.stage,width:Math.min(500,V.stage.width-20),height:Math.min(500,V.stage.height-20),draggable:!0}),(o=V.textArea=new To.TextArea(Math.min(400,V.stage.width-70),Math.min(400,V.stage.height-70))).centerReg(t)),t.show(),o.text=JSON.stringify(n)),n},!(V.setPoints=function(e){for(var t,o,n=0;n<e.length;n++)t=N[n],o=e[n],zot(t)||(t[0].x=o[0],t[0].y=o[1],t[1].x=o[2],t[1].y=o[3],t[2].x=o[4],t[2].y=o[5],t[3].x=o[6],t[3].y=o[7],t[4]=o[8],t[2].color=b(t[4]),t[3].color=b(t[4]));return V.update(),V})!==Y&&To.styleTransforms(V,X),V.clone=function(e,t){e=V.cloneProps(new To.Blob(t?V.colorCommand:e||!To.isPick(H[0])?V.color:H[0],t?V.borderColorCommand:e||!To.isPick(H[1])?V.borderColor:H[1],V.borderWidth,V.recordPoints(),x,k,T,A,ee.visible,P,B,V.allowToggle,V.move,E,I,M,O,j,V.editPoints,L,_,Y,V.group,D));return V.linearGradientParams&&e.linearGradient.apply(e,V.linearGradientParams),V.radialGradientParams&&e.radialGradient.apply(e,V.radialGradientParams),e},V.shapeMousedownEvent=V.shape.on("mousedown",function(e){J=e.target.stage,V.editPoints&&(V.controlsVisible?(V.pressX=e.stageX/To.scaX,V.pressY=e.stageY/To.scaY):(V.pressX=null,V.pressY=null))}),V.addPointFactor=10,V.addMinDistance=15,V.shapePressupEvent=V.shape.on("pressup",function(e){var n,t,r,i,o,a;V.editPoints&&V.pressX&&Math.abs(V.pressX-e.stageX/To.scaX)<te&&Math.abs(V.pressY-e.stageY/To.scaY)<te&&(V.selectPoints&&(V.lastPoints=To.copy(V.points)),a=V.points,n=V.globalToLocal(e.stageX/To.scaX,e.stageY/To.scaY),t=To.closestPointAlongCurve(n,V.segmentPoints),"anywhere"==V.editPoints?(a.splice(t+1,0,[n.x,n.y,0,0,0,0,0,0]),V.points=a,V.changeControl({index:t+1,type:"mirror",update:!0})):(o=V.pointsAdjusted,e=V.getSegmentPoint(o[t],o[(t+1)%o.length]),o=To.distanceAlongCurve(e),e=Math.round(o/V.addPointFactor),o=V.interpolate(e,t,!1,a),r=1e4,To.loop(o,function(e,t){var o;0==t||(o=To.dist(e,n))<r&&(r=o,i=t,0)}),r<V.addMinDistance&&(o=(a=V.segmentRatios)[t],a=0<t?a[t-1]:0,V.addPoint(100*(a+i/(e+1)*(o-a))))),V.lastSelectedIndex=t+1,V.lastSelected=V.controls.getChildAt(V.lastSelectedIndex),V.stage.update())}),V.controlsClickEvent=V.controls.on("click",function(e){V.lastSelected=e.target.parent;V.lastSelectedIndex=V.controls.getChildIndex(e.target.parent);V.editPoints&&V.selectionManager.shiftKey&&v(e)}),V.controls.hold(v),F||V.hideControls(),V.dispatchEvent("update")}function z(e){m?(e.preventDefault(),y(e)):(m=!0,setTimeout(function(){m=!1},300))}function y(e){var t,o;V.lockControlType||(t=e.target,o=N[t.index][4]||T,Math.abs(t.rect1.x)<=2&&Math.abs(t.rect1.y)<=2&&Math.abs(t.rect2.x)<=2&&Math.abs(t.rect2.y)<=2&&(o="none"),"none"==o&&t.parent.addChildAt(t,0),"none"==(o=V.types[(V.types.indexOf(o)+(V.shiftKey?-1:1)+V.types.length)%V.types.length])&&(t.rect1.x=t.rect1.y=t.rect2.x=t.rect2.y=0,t.parent.addChild(t),e.stopImmediatePropagation()),N[t.index][4]=o,t.rect1.color=b(o),t.rect2.color=b(o),V.drawShape(),(o=new createjs.Event("change")).controlType="bezierSwitch",V.dispatchEvent(o),t.stage.update())}function b(e){var t={mirror:To.purple,free:To.yellow,none:To.blue};return t[e]||To.pink}function v(e){var t;"Circle"==e.target.type&&(t=V.lastSelectedIndex=V.controls.getChildIndex(e.target.parent),V.controls.numChildren<=2||(e=V.points,V.selectPoints&&(V.lastPoints=To.copy(e)),e.splice(t,1),V.points=e,V.stage.update(),V.lastSelected=V.lastSelectedIndex=null))}}function oe(){var e=[],t=V.selectionManager.currentSet;if(t&&t.selections&&0<t.selections.length)for(var o=0;o<t.selections.length;o++){var n=V.pointObjects[t.selections[o]];t==V.selectedBalls?e.push(n[1]):t==V.selectedRect1s?e.push(n[2]):t==V.selectedRect2s&&e.push(n[3])}return e}function ne(e){var t,o,n;V.selectPoints&&"Circle"==e.type&&(o=(t=e).mySet,n=t.rect1,e=t.rect2,n.x-=t.x,n.y-=t.y,e.x-=t.x,e.y-=t.y,o.x+=t.x,o.y+=t.y,t.x=0,t.y=0)}function re(){"always"!=V.move&&(s||(s=!0,U.drag({onTop:!1}),Q=U.on("mousedown",Q),Z=U.on("pressmove",Z),K=U.on("pressup",K)))}function ie(e){"always"!=V.move&&(e||s)&&(s=!1,U.noDrag(),U.off("mousedown",Q),U.off("pressmove",Z),U.off("pressup",K))}"string"==typeof(C=c(C))&&(l=new To.SVGContainer,C=l.processPath(C)),a&&"number"!=typeof C&&To.loop(C,function(e){"none"==(e[8]=a)&&(e[4]=e[5]=e[6]=e[7]=0)}),u(),V.selectionManager.on("keydown",function(e){if(V.selectPoints&&V.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=oe();if(0<t.length){for(var o=0;o<t.length;o++){var n=t[o];37==e.keyCode?n.x-=V.selectionManager.shiftKey?10:1:39==e.keyCode?n.x+=V.selectionManager.shiftKey?10:1:38==e.keyCode?n.y-=V.selectionManager.shiftKey?10:1:40==e.keyCode&&(n.y+=V.selectionManager.shiftKey?10:1),$(n)}V.drawShape(),V.dispatchEvent("update"),V.stage&&V.stage.update()}}}),V.selectionManager.on("keyup",function(e){if(V.selectPoints&&V.keyFocus&&37<=e.keyCode&&e.keyCode<=40){var t=oe();if(0<t.length)for(var o=0;o<t.length;o++)ne(t[o])}}),V.selectionManager.on("undo",function(){var e;V.selectPoints&&V.keyFocus&&V.lastPoints&&(e=To.copy(V.lastPoints),V.lastPoints=To.copy(V.points),V.points=e,V.stage&&V.stage.update())}),$=function(e){var t,o,n,r;V.lockControls||(e.rect1?(t=(o=e).x-o.startX,n=o.y-o.startY,o.rect1.x=o.rect1.startX+t,o.rect1.y=o.rect1.startY+n,o.rect2.x=o.rect2.startX+t,o.rect2.y=o.rect2.startY+n):(t=(r=e).other,n=(o=r.ball).index,e=T,zot(N[n][4])||(e=N[n][4]),"straight"!=e&&"mirror"!=e||(n=r.x-o.x,r=r.y-o.y,"mirror"==e?(t.x=o.x-n,t.y=o.y-r):(r=Math.atan2(r,n),n=-t.stickLength*Math.cos(r+Math.PI),r=-t.stickLength*Math.sin(r+Math.PI),t.x=o.x-n,t.y=o.y-r))))},Object.defineProperty(V,"move",{get:function(){return S},set:function(e){S!=e&&((S=e)?re:ie)()}}),Object.defineProperty(V,"interactive",{get:function(){return L},set:function(e){F=L=e,V.allowToggle=L,V.editPoints=L,V.lockControls=!L,V.selectPoints=L,V.move=L,V.points=V.points}}),Object.defineProperty(V,"allowToggle",{get:function(){return n},set:function(e){n!=e&&((n=e)?V.move&&re():!F&&V.move&&ie())}}),Object.defineProperty(V,"controlsVisible",{get:function(){return F},set:function(e){(F=e)?V.showControls():V.hideControls()}});var d=P;function p(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function g(e,t,o,n,r,i,a,l){var s=e.length-1,c=0,u=0;100==n&&"Squiggle"==V.type&&(n=99.99),n=(n+1e5)%100,To.loop(o,function(e,t){return n/100<e?(s=t,u=e,!0):void(c=e)});var d=V.segmentPoints[s],h=0<u?(n/100-c)/(u-c):0,g=To.pointAlongCurve(d,h,null,l),o=[g.x,g.y,0,0];i||(a?V.interpolatedPoints.push({x:g.x,y:g.y,r:n/100}):("none"!=r&&(l=p(d[0],d[1],h),i=p(d[1],d[2],h),a=p(d[2],d[3],h),d=p(l,i,h),h=p(i,a,h),o[4]=d.x-g.x,o[5]=d.y-g.y,o[6]=h.x-g.x,o[7]=h.y-g.y,l=V.localToLocal(l.x,l.y,t[s]),e[s][6]=l.x,e[s][7]=l.y,t=V.localToLocal(a.x,a.y,t[(s+1)%e.length]),e[(s+1)%e.length][4]=t.x,e[(s+1)%e.length][5]=t.y),r&&(o[8]=r),e.splice(s+1,0,o)))}Object.defineProperty(V,"lockControls",{get:function(){return d},set:function(e){(d=e)?(V.controls.mouseChildren=!1,V.controls.mouseEnabled=!1):(V.controls.mouseChildren=!0,V.controls.mouseEnabled=!0)}}),V.lockControls=d,void 0!==KEYFOCUS&&(To.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return To.KEYFOCUS==V},set:function(e){To.KEYFOCUS=V}}),V.selectPoints&&!To.KEYFOCUS&&function(){V.keyFocus=!0;var e=document.activeElement;e&&e.blur()}(),Object.defineProperty(V,"points",{get:function(){for(var e,t,o=[],n=0;n<N.length;n++)t=N[n],e=[To.decimals(t[0].x),To.decimals(t[0].y),To.decimals(t[1].x),To.decimals(t[1].y),To.decimals(t[2].x),To.decimals(t[2].y),To.decimals(t[3].x),To.decimals(t[3].y)],t[4]&&"straight"!==t[4]&&e.push(t[4]),o.push(e);return o},set:function(e){var t=V.x,o=V.y,n=V.visible;V.dispose(!0),C=c(e),V.shape&&(V.shape.graphics.clear(),V.sticks.graphics.clear(),V.controls.noDrag(),V.removeAllChildren(),delete V.shape,delete V.sticks,delete V.controls),V.visible=!1,u(),V.lockControls=d,V.x=t,V.y=o,V.visible=n}}),Object.defineProperty(V,"pointsAdjusted",{get:function(){var n,r,i=[],a=V.pointObjects;return To.loop(a.length,function(e,t){var o;r=a[e],n=N[e],r=0==r[0].rotation&&0==r[0].scaleX&&0==r[0].scaleY?[To.decimals(n[0].x),To.decimals(n[0].y),To.decimals(n[1].x),To.decimals(n[1].y),To.decimals(n[2].x),To.decimals(n[2].y),To.decimals(n[3].x),To.decimals(n[3].y)]:(o=r[0].localToLocal(r[2].x,r[2].y,r[0].parent),e=r[0].localToLocal(r[3].x,r[3].y,r[0].parent),[To.decimals(n[0].x),To.decimals(n[0].y),To.decimals(n[1].x),To.decimals(n[1].y),To.decimals(o.x-n[0].x),To.decimals(o.y-n[0].y),To.decimals(e.x-n[0].x),To.decimals(e.y-n[0].y)]),n[4]&&"mirror"!==n[4]&&r.push(n[4]),i.push(r)}),i},set:function(e){zon&&zogy("Blob() - pointsAdjusted is read only")}}),Object.defineProperty(V,"pointObjects",{get:function(){return N},set:function(e){zon&&zog("Blob() - pointObjects is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(V,"pointControls",{get:function(){return q},set:function(e){zon&&zog("Blob() - pointControls is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(V,"pointCircles",{get:function(){return G},set:function(e){zon&&zog("Blob() - pointCircles is read only - but its contents can be manipulated - use blob.update() after changes")}}),Object.defineProperty(V,"segmentPoints",{get:function(){var o=V.pointsAdjusted,n=[];return To.loop(o.length,function(e,t){e=V.getSegmentPoint(o[e],o[e<t-1?e+1:0]);n.push(e)}),n},set:function(e){zon&&zog("Blob() - segmentPoints is read only")}}),Object.defineProperty(V,"segmentRatios",{get:function(){var t=[],o=0;To.loop(V.segmentPoints,function(e){e=To.distanceAlongCurve(e);t.push(e),o+=e});var n=[],r=0;return To.loop(t,function(e){r+=e/o,n.push(r)}),n},set:function(e){zon&&zog("Blob() - segmentRatios is read only")}}),V.approximateBounds=function(e,t){zot(e)&&(e=80),e/=V.num;var o=V.interpolate(e,null,!0,null,!0),e=To.boundsAroundPoints(o);if(V.setBounds(e.x,e.y,e.width,e.height),t){if(!V.parent)return zon&&zogy("approximateBounds() - add to stage to first to see points"),V;V.hitPathPoints?V.hitPathPoints.removeAllChildren():V.hitPathPoints=(new To.Container).addTo(),V.hitPathPoints.top();for(var n=0;n<o.length;n++){var r=o[n],r=V.localToGlobal(r.x,r.y);new To.Circle(3).loc(r.x,r.y,V.hitPathPoints)}}return V},V.getPointAngle=function(e){var t,o=V.pointObjects[e][0],n=V.pointObjects[e][2],e=V.pointObjects[e][3];return e=o==V.stage?(t=new To.Point(n.x,n.y),new To.Point(e.x,e.y)):(t=o.localToGlobal(n.x,n.y),o.localToGlobal(e.x,e.y)),To.angle(t.x,t.y,e.x,e.y)},V.getSegmentPoint=function(e,t){if(!zot(e)&&!zot(t)){0==e[2]&&0==e[3]||(e[4]-=e[2],e[5]-=e[3],e[6]-=e[2],e[7]-=e[3],e[0]+=e[2],e[1]+=e[3],e[2]=0,e[3]=0),0==t[2]&&0==t[3]||(t[4]-=t[2],t[5]-=t[3],t[6]-=t[2],t[7]-=t[3],t[0]+=t[2],t[1]+=t[3],t[2]=0,t[3]=0);var o={x:e[0],y:e[1]},n={x:e[0]+e[6],y:e[1]+e[7]},e={x:t[0]+t[4],y:t[1]+t[5]},t={x:t[0],y:t[1]};return 0==ee.x&&0==ee.y||(o.x+=ee.x,n.x+=ee.x,e.x+=ee.x,t.x+=ee.x,o.y+=ee.y,n.y+=ee.y,e.y+=ee.y,t.y+=ee.y),[o,n,e,t]}},V.getAdjacentSegmentData=function(e){zot(e)&&(e=0);var t=V.pointsAdjusted;if(2==V.num)return[[V.getSegmentPoint(t[0],t[1]),V.getSegmentPoint(t[1],t[0])],[0,1]];if(0==e)return[[V.getSegmentPoint(t[V.num-1],t[0]),V.getSegmentPoint(t[0],t[1]),V.getSegmentPoint(t[1],t[2])],[V.num-1,0,1]];if(e>=V.num-1)return[[V.getSegmentPoint(t[V.num-2],t[V.num-1]),V.getSegmentPoint(t[V.num-1],t[0]),V.getSegmentPoint(t[0],t[1])],[V.num-2,V.num-1,0]];var o=e+2>=V.num?0:e+2;return[[V.getSegmentPoint(t[e-1],t[e]),V.getSegmentPoint(t[e],t[e+1]),V.getSegmentPoint(t[e+1],t[o])],[e-1,e,e+1]]},V.getCurvePoint=function(o,e,t,n){zot(e)&&(e=V.segmentRatios),zot(t)&&(t=V.segmentPoints),zot(n)&&(n=!1);var r=e,i=t,e=To.loop(r,function(e,t){if(o<=e)return t}),t=0<e?r[e-1]:0,r=0<e?r[e]-r[e-1]:r[e],r=(o-t)/r,r=To.pointAlongCurve(i[e],r,n,!0);if(!zot(r)){n=V.localToGlobal(r.x,r.y);return n.angle=r.angle,n.z=e,zot(n)?void 0:n}},this.addPoint=function(e,t){zot(e)&&(e=100);var o=V.points,n=V.segmentRatios;return g(o,V.pointControls,n,e,t=t||a),V.points=o,V.num=o.length,V},this.addPoints=function(r,i,a,l,s,c,u){zot(c)&&(c=To.copy(V.points));var d,e=To.copy(V.segmentRatios),h=0;return s&&(V.interpolatedPoints=[]),l&&(d=e.length*r),To.loop(e,function(t,o){s&&g(c,V.pointControls,V.segmentRatios,100*h,i,!zot(a)&&o!=a,s,u);var e=l?Math.round(d*(t-h)):r,n=1/(e+1);To.loop(e,function(e){e=h+(t-h)*n*(e+1);g(c,V.pointControls,V.segmentRatios,100*e,i,!zot(a)&&o!=a,s,u),!s&&0<r&&(V.points=c)}),h=t}),s&&"Squiggle"==V.type&&g(c,V.pointControls,V.segmentRatios,100,i,null,s,u),V.stage&&V.stage.update(),V.num=c.length,V},this.interpolate=function(e,t,o,n,r){return zot(e)&&(e=1),V.addPoints(e,"none",t,o,!0,n,r),V.interpolatedPoints},this.dispose=function(e,t,o){if(V.shape){if(To.gD(V),J&&V.toggleStageEvent&&J.off("stagemousedown",V.toggleStageEvent),V.controls.noDrag(),V.controls.removeAllEventListeners(),V.selectPoints&&V.selectionManager&&V.selectionManager.dispose(),V.selectedBalls=null,V.selectedRect1s=null,V.selectedRect2s=null,V.selectionManager=null,V.off("mousedown",V.toggleEvent),V.off("click",V.clickEvent),e){V.shape.dispose(),V.shape=null;for(var n=0;n<V.points.length;n++)V.pointObjects[n][0].removeAllEventListeners(),V.pointObjects[n][1].removeAllEventListeners(),V.pointObjects[n][2].removeAllEventListeners(),V.pointObjects[n][3].removeAllEventListeners();V.controls.removeFrom(V),V.sticks.dispose(),G=N=null}else V.removeAllEventListeners(),G=N=null,o||this.zimCustomShape_dispose(!0);return!0}}},To.extend(To.Blob,To.CustomShape,["clone","dispose"],"zimCustomShape",!1),To.Flare=function(B,l,s,S,e,E,I,t,M,O,o,n,r,i,a,c,u,d,j,L,_,Y,D,X,R,W,F,H,V,N,h,g,p){if(w=zob(To.Flare,arguments,"color, borderColor, borderWidth, crossAngle, thickness, thicknessA, thicknessB, pin, startX, startY, lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close, dashed, strokeObj, spineColor, spineBorderWidth, spineBorderColor, spineDashed, spineStrokeObj, closeColor, closeBorderWidth, closeBorderColor, closeDashed, closeStrokeObj, style, group, inherit",this))return w;z_d("53.6"),this.zimContainer_constructor(),this.type="Flare",this.group=g;var f=!1===h?{}:To.getStyle(this.type,this.group,p),G=this;zot(l)&&(l=null!=f.borderColor?f.borderColor:null),zot(s)&&(s=null!=f.borderWidth?f.borderWidth:null),l<0||s<0?l=s=null:null!=l&&null==s&&(s=1),zot(B)&&(B=null!=f.color?f.color:0<s?"rgba(0,0,0,0)":"black"),(zot(s)||0<s)&&(zot(l)&&zot(s)||zot(l)&&(l="black")),zot(S)&&(S=null!=f.crossAngle?f.crossAngle:0);var m,z,y=S;function b(d,h,g,p,f,e,m,o){G.removeAllChildren();var n,r,i=G.shape=(new To.Shape).addTo(G);G.colorCommand=i.c().f(B).command,B&&B.type&&G.specialColor(G.colorCommand,B),(zot(s)||0<s)&&(zot(l)&&zot(s)||(zot(l)&&(l="black"),G.borderColorCommand=i.s(l).command,l&&l.type&&G.specialColor(G.borderColorCommand,l),G.borderWidthCommand=i.ss(s,L.caps,L.joints,L.miterLimit,L.ignoreScale).command,j&&(G.borderDashedCommand=i.sd([10,10],5).command))),i.mt(0,0),0<Y&&(n=G.spineShape=(new To.Shape).addTo(G),G.spineColorCommand=n.c().f(_).command,_&&_.type&&G.specialColor(G.spineColorCommand,_),(zot(Y)||0<Y)&&(zot(D)&&zot(Y)||(zot(D)&&(D="black"),G.spineBorderColorCommand=n.s(D).command,D&&D.type&&G.specialColor(G.spineBorderColorCommand,D),G.spineBorderWidthCommand=n.ss(Y,R.caps,R.joints,R.miterLimit,R.ignoreScale).command,X&&(G.spineBorderDashedCommand=n.sd([10,10],5).command)))),zot(W)||(r=G.closeShape=(new To.Shape).addTo(G),G.closeColorCommand=r.c().f(W).command,W&&W.type&&G.specialColor(G.closeColorCommand,W),(zot(F)||0<F)&&(zot(H)&&zot(F)||(zot(H)&&(H="black"),G.closeBorderColorCommand=r.s(H).command,closeBorder&&closeBorder.type&&G.specialColor(G.closeBorderCommand,H),G.closeBorderWidthCommand=r.ss(F,N.caps,N.joints,N.miterLimit,N.ignoreScale).command,V&&(G.closeBorderDashedCommand=r.sd([10,10],5).command))),i.mt(0,0));var z,y,c=M,u=O,b=S,v=b-180,w=E,C=I,x=h[0],t=Math.max(d.length,h.length,g.length,p.length,f.length),x=v,k=[],T=[],A=[],a=(G.points=[],G.pinPoints=[]);function P(e,t,o,n,r){var i=r-90,a=180-n-(90-i),r=Math.tan(i*To.RAD)*o,r=(e-t-r)/Math.sin(a*To.RAD)*Math.sin(n*To.RAD)+Math.sqrt(Math.pow(o,2)+Math.pow(r,2));return{x:r*Math.sin(i*To.RAD),y:r*Math.cos(i*To.RAD),t:r}}To.loop(t,function(e,t){var o=function(e){var t=h[e],o=d[e],n=g[e],r=p[e],i=f[e];m&&(u=m[e]);zot(t)&&(t=x,G.angles[e]=t);zot(o)&&(o=200,G.lengths[e]=o);zot(n)&&(n=0,G.anglesA[e]=n);zot(r)&&(r=0,G.anglesB[e]=r);zot(i)&&(i=0,G.anglesEnd[e]=i);m&&zot(u)&&(u=B,G.crossColors[e]=u);var a=180-(i+=90),l=Math.cos((x-t)*To.RAD),s=Math.sin((x-t)*To.RAD),c=new To.Point(0,0),e=new To.Point(o,0);{var u;u=zot(z)?new To.Point(Math.cos(b*To.RAD)*w,Math.sin(b*To.RAD)*w):new To.Point(z.x*l-z.y*s,z.x*s+z.y*l)}n=P(o,u.x,u.y,n,a),a=new To.Point(o-n.x,-n.y);l=zot(y)?new To.Point(Math.cos(v*To.RAD)*w,Math.sin(v*To.RAD)*C):new To.Point(y.x*l-y.y*s,y.x*s+y.y*l);r=P(o,l.x,l.y,r,i),i=new To.Point(o-r.x,r.y);return z=new To.Point(a.x-o,a.y),y=new To.Point(i.x-o,i.y),{a:x=t,A:u,B:a,C:i,D:l,E:e,F:c,tA:n.t,tB:r.t}}(e),n=Math.cos(o.a*To.RAD),r=Math.sin(o.a*To.RAD),i=new To.Point(c+o.A.x*n-o.A.y*r,u+o.A.x*r+o.A.y*n),a=new To.Point(c+o.B.x*n-o.B.y*r,u+o.B.x*r+o.B.y*n),l=new To.Point(c+o.C.x*n-o.C.y*r,u+o.C.x*r+o.C.y*n),s=new To.Point(c+o.D.x*n-o.D.y*r,u+o.D.x*r+o.D.y*n);k.push(i,a),T.unshift(l,s),A.push([i,a,l,s]);s=new To.Point(c+o.F.x*n-o.F.y*r,u+o.F.x*r+o.F.y*n),n=new To.Point(c+o.E.x*n-o.E.y*r,u+o.E.x*r+o.E.y*n);0==e&&G.pinPoints.push(s),G.pinPoints.push(n),c=n.x,u=n.y,w=o.tA,C=o.tB}),G.points=k.concat(T),e?(To.loop(A,function(e,t){i.mt(e[0].x,e[0].y),zot(m)||zot(m[t])||i.f(m[t]).mt(e[0].x,e[0].y),i.lt(e[1].x,e[1].y).lt(e[2].x,e[2].y).lt(e[3].x,e[3].y).cp()}),o&&i.mt(A[A.length-1][1].x,A[A.length-1][1].y).lt(A[A.length-1][2].x,A[A.length-1][2].y).lt(A[0][3].x,A[0][3].y).lt(A[0][0].x,A[0][0].y).cp()):(To.loop(k,function(e,t){0==t?i.mt(e.x,e.y):i.lt(e.x,e.y)}),o&&(i.lt(k[0].x,k[0].y),i.cp()),To.loop(T,function(e,t){0==t&&o?i.mt(e.x,e.y):i.lt(e.x,e.y)}),o&&i.lt(T[0].x,T[0].y),i.cp()),n&&(To.loop(a,function(e,t){0==t?n.mt(e.x,e.y):n.lt(e.x,e.y)}),o&&n.lt(a[0].x,a[0].y).cp()),zot(W)||(To.loop(T,function(e,t){0==t?r.mt(e.x,e.y):r.lt(e.x,e.y)}),o&&r.lt(T[0].x,T[0].y).cp())}S-=90,zot(e)&&(e=null!=f.thickness?f.thickness:null),zot(E)&&(E=null!=f.thicknessA?f.thicknessA:null),zot(I)&&(I=null!=f.thicknessB?f.thicknessB:null),zot(e)?zot(I)&&!zot(E)?I=E:zot(E)&&!zot(I)?E=I:I=E=10:zot(I)&&!zot(E)?I=e-E:zot(E)&&!zot(I)?E=e-I:I=E=e/2,G.thickness=E+I,zot(c)&&(c=null==f.cross||f.cross),zot(u)&&(u=null!=f.crossColors?f.crossColors:null),zot(u)||Array.isArray(u)||(u=[u]),zot(d)&&(d=null!=f.close&&f.close),zot(M)&&(M=null!=f.startX?f.startX:0),zot(O)&&(O=null!=f.startY?f.startY:0),zot(o)&&(o=null!=f.lengths?f.lengths:[200]),Array.isArray(o)||(o=[o]),zot(n)&&(n=null!=f.angles?f.angles:[0]),Array.isArray(n)||(n=[n]),zot(r)&&(r=null!=f.anglesA?f.anglesA:[10]),Array.isArray(r)||(r=[r]),zot(i)&&(i=null!=f.anglesB?f.anglesB:To.copy(r)),Array.isArray(i)||(i=[i]),zot(a)&&(a=null!=f.anglesEnd?f.anglesEnd:[0]),Array.isArray(a)||(a=[a]),zot(L)&&(L=null!=f.strokeObj?f.strokeObj:{miterLimit:2}),zot(D)&&(D=null!=f.spineBorderColor?f.spineBorderColor:null),zot(Y)&&(Y=null!=f.spineBorderWidth?f.spineBorderWidth:null),D<0||Y<0?D=Y=null:null!=D&&null==Y&&(Y=1),zot(_)&&(_=null!=f.spineColor?f.spineColor:0<Y?"rgba(0,0,0,0)":"black"),zot(X)&&(X=null!=f.spineDashed?f.spineDashed:null),zot(R)&&(R=null!=f.spineStrokeObj?f.spineStrokeObj:{miterLimit:2}),(zot(Y)||0<Y)&&(zot(D)&&zot(Y)||zot(D)&&(D=l||"black")),zot(H)&&(H=null!=f.closeBorderColor?f.closeBorderColor:null),zot(F)&&(F=null!=f.closeBorderWidth?f.closeBorderWidth:null),H<0||F<0?H=F=null:null!=H&&null==F&&(F=1),zot(W)&&(W=null!=f.closeColor?f.closeColor:0<F?"rgba(0,0,0,0)":null),zot(V)&&(V=null!=f.closeDashed?f.closeDashed:null),zot(N)&&(N=null!=f.closeStrokeObj?f.closeStrokeObj:{miterLimit:2}),(zot(F)||0<F)&&(zot(H)&&zot(F)||zot(H)&&(H=l||"black")),this.thicknessA=E,this.thicknessB=I,this.cross=c,this.close=d,this.lengths=o,this.angles=n,this.anglesA=r,this.anglesB=i,this.anglesEnd=a,this.crossColors=u,b(o,n,r,i,a,c,u,d),this.add=function(e,t,o,n,r,i,a,l){var s;return(s=zob(G.add,arguments,"lengths, angles, anglesA, anglesB, anglesEnd, cross, crossColors, close"))?s:(zot(i)||(G.cross=i),zot(l)||(G.close=l),zot(e)||(Array.isArray(e)||(e=[e]),zot(G.lengths)?G.lengths=e:G.lengths=G.lengths.concat(e)),zot(t)||(Array.isArray(t)||(t=[t]),zot(G.angles)?G.angles=t:G.angles=G.angles.concat(t)),zot(o)||(Array.isArray(o)||(o=[o]),zot(G.anglesA)?G.anglesA=o:G.anglesA=G.anglesA.concat(o)),zot(n)||(Array.isArray(n)||(n=[n]),zot(G.anglesB)?G.anglesB=n:G.anglesB=G.anglesB.concat(n)),zot(r)||(Array.isArray(r)||(r=[r]),zot(G.anglesEnd)?G.anglesEnd=r:G.anglesEnd=G.anglesEnd.concat(r)),zot(a)||(zot(G.crossColors)?zon&&zogy("Flare() - must set crossColor for original object parameters"):(Array.isArray(a)||(a=[a]),zot(G.crossColors)?G.crossColors=a:G.crossColors=G.crossColors.concat(a))),G.remake(),G)},this.remake=function(){return E=this.thicknessA,I=this.thicknessB,b(G.lengths,G.angles,G.anglesA,G.anglesB,G.anglesEnd,G.cross,G.crossColors,G.close),G},Object.defineProperty(G,"color",{get:function(){return B},set:function(e){zot(e)&&(e="black"),(B=e)&&e.type?G.specialColor(G.colorCommand,e):G.colorCommand.style=e}}),this.setColorRange=function(e,t){return z=zot(t)?(m=G.color,e):(m=zot(e)?G.color:e,t),G};var v=0;Object.defineProperty(G,"colorRange",{get:function(){return v},set:function(e){v=e,zot(m)||zot(z)||(G.color=To.colorRange(m,z,e))}}),Object.defineProperty(G,"borderColor",{get:function(){return l},set:function(e){l=e,G.borderColorCommand?e&&e.type?G.specialColor(G.borderColorCommand,e):G.borderColorCommand.style=e:b()}}),Object.defineProperty(G,"borderWidth",{get:function(){return s},set:function(e){0<e||(e=0),s=e,G.borderWidthCommand&&0!=s?(G.borderWidthCommand.width=s,j&&(G.borderDashedCommand.segments=[20,10],G.borderDashedCommand.offset=5)):b()}}),Object.defineProperty(G,"spineColor",{get:function(){return _},set:function(e){zot(e)&&(e="black"),_=e,G.spineColorCommand?e&&e.type?G.specialColor(G.spineColorCommand,e):G.spineColorCommand.style=e:b()}}),Object.defineProperty(G,"spineBorderColor",{get:function(){return D},set:function(e){D=e,G.spineBorderColorCommand?e&&e.type?G.specialColor(G.spineBorderColorCommand,e):G.spineBorderColorCommand.style=e:b()}}),Object.defineProperty(G,"spineBorderWidth",{get:function(){return Y},set:function(e){0<e||(e=0),Y=e,G.spineBorderWidthCommand&&0!=Y?(G.spineBorderWidthCommand.width=Y,X&&(G.spineBorderDashedCommand.segments=[20,10],G.spineBorderDashedCommand.offset=5)):b()}}),Object.defineProperty(G,"closeColor",{get:function(){return W},set:function(e){zot(e)&&(e="black"),W=e,G.closeColorCommand?e&&e.type?G.specialColor(G.closeColorCommand,e):G.closeColorCommand.style=e:b()}}),Object.defineProperty(G,"closeBorderColor",{get:function(){return H},set:function(e){H=e,G.closeBorderColorCommand?e&&e.type?G.specialColor(G.closeBorderColorCommand,e):G.closeBorderColorCommand.style=e:b()}}),Object.defineProperty(G,"closeBorderWidth",{get:function(){return F},set:function(e){0<e||(e=0),F=e,G.closeBorderWidthCommand&&0!=F?(G.closeBorderWidthCommand.width=F,V&&(G.closeBorderDashedCommand.segments=[20,10],G.closeBorderDashedCommand.offset=5)):b()}}),Object.defineProperty(G,"pin",{get:function(){return t},set:function(e){0<e||(e=0),e>G.pinPoints.length-1&&(t=0),t=e;e=G.pinPoints[t];e&&(G.regX=e.x,G.regY=e.y)}});var w=To.boundsAroundPoints(G.points);this.setBounds(w.x,w.y,w.width,w.height),zot(t)||(G.pin=t),(this.mouseChildren=!1)!==h&&To.styleTransforms(this,f),this.clone=function(){return G.cloneProps(new To.Flare(B,l,s,y,To.copy(e),To.copy(E),To.copy(I),t,M,O,To.copy(o),To.copy(n),To.copy(r),To.copy(i),To.copy(a),c,To.copy(u),d,j,L,_,Y,D,X,R,W,F,H,V,N,h,this.group,p))}},To.extend(To.Flare,To.Container,["clone"],"zimContainer",!1),To.MultiFlare=function(n,r,i,a,e,t,o){if(l=zob(To.MultiFlare,arguments,"flares, pins, angles, endToEnd, style, group, inherit",this))return l;z_d("53.7"),this.zimContainer_constructor(),this.type="MultiFlare",this.group=t;var l=!1===e?{}:To.getStyle(this.type,this.group,o),s=this;zot(n)&&(n=null!=l.flares?l.flares:[]),Array.isArray(n)||(n=[n]),zot(r)&&(r=null!=l.pins?l.pins:null),zot(i)&&(i=null!=l.angles?l.angles:null),zot(a)&&(a=null!=l.endToEnd&&l.endToEnd),s.flares=n,s.pins=r,s.angles=i,s.endToEnd=a,s.mouseChildren=!1,s.add=function(e,t){return zot(e)||(zot(t)&&(t=!0),Array.isArray(e)||(e=[e]),To.loop(e,function(e){t?s.flares.push(e.clone()):s.flares.push(e)}),s.remake(),s.stage&&s.stage.update()),s},s.remove=function(e){return zot(e)||(Array.isArray(e)||(e=[e]),To.loop(e,function(e){e=s.flares.indexOf(e);0<=e&&s.flares.splice(e,1)}),s.remake(),s.stage&&s.stage.update()),s},s.remake=function(){s.removeAllChildren(),To.loop(s.flares,function(e,t){var o;r&&!zot(r[t])&&(e.pin=r[t]),i&&!zot(i[t])&&(e.rotation=i[t]),e.addTo(s),s.flares.push(e),a&&0<t&&(t=(o=n[t-1]).pinPoints[o.pinPoints.length-1],o=o.localToLocal(t.x,t.y,s),t=e.pinPoints[0],t=e.localToLocal(t.x,t.y,s),e.mov(o.x-t.x,o.y-t.y))})},s.remake(),!1!==e&&To.styleTransforms(this,l),this.clone=function(){return s.cloneProps(new To.MultiFlare(To.copy(n,!0),To.copy(r),To.copy(i),a,e,this.group,o))}},To.extend(To.MultiFlare,To.Container,["clone"],"zimContainer",!1),To.FlareBox=function(o,n,e,t,r,i,a,l,s,c,u){if(d=zob(To.FlareBox,arguments,"width, height, color, borderColor, borderWidth, flares, corners, pins, style, group, inherit",this))return d;z_d("53.8"),this.group=c;var d=!1===s?{}:To.getStyle("FlareBox",this.group,u);zot(o)&&(o=null!=d.width?d.width:220),zot(n)&&(n=null!=d.height?d.height:80),this.zimContainer_constructor(o,n),this.type="FlareBox";var h=this;if(this.mouseChildren=!1,zot(t)&&(t=null!=d.borderColor?d.borderColor:null),zot(r)&&(r=null!=d.borderWidth?d.borderWidth:null),t<0||r<0?t=r=null:null!=t&&null==r&&(r=1),zot(e)&&(e=null!=d.color?d.color:0<r?"rgba(0,0,0,0)":"black"),(zot(r)||0<r)&&(zot(t)&&zot(r)||zot(t)&&(t="black")),zot(i)&&(i=null!=d.flares?d.flares:null),zot(a)&&(a=null!=d.corners?d.corners:null),zot(l)&&(l=null!=d.pins?d.pins:null),h.backing=new To.Rectangle(o,n,e,t,r).addTo(this),!zot(i)){if("MultiFlare"!=i.type){if(!Array.isArray(i)){if("Flare"!=i.type)return;i=[i]}i=new To.MultiFlare(i,l)}i.addTo(h),h.multiFlare=i,h.flares=h.multiFlare.flares,i.loop(function(e,t){l&&!zot(l[t])?e.pin=l[t]:zot(e.pin)&&(e.pin=0),a&&!zot(a[t])?e.corner=a[t]:zot(e.corner)&&(e.corner=0),1==e.corner?e.loc(o,0):2==e.corner?e.loc(o,n):3==e.corner?e.loc(0,n):e.loc(0,0),e.rot(90*(e.corner-e.pin))}),!1!==s&&To.styleTransforms(this,d),this.clone=function(){return h.cloneProps(new To.FlareBox(o,n,e,t,r,To.copy(i,!0),To.copy(a),To.copy(l),s,this.group,u))}}},To.extend(To.FlareBox,To.Container,["clone"],"zimContainer",!1),To.Label=function(e,i,t,o,n,r,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j){var L;if(L=zob(To.Label,arguments,"text, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, bold, italic, variant, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingHorizontal, paddingVertical, shiftHorizontal, shiftVertical, rollPersist, labelWidth, labelHeight, maxSize, splitWords, style, group, inherit",this))return L;z_d("54"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Label",this.group=O;var _=!1===M?{}:To.getStyle(this.type,this.group,j);zot(e)&&(e=null!=_.text?_.text:"LABEL"),zot(i)&&(i=null!=_.size?_.size:36),zot(t)&&(t=null!=_.font?_.font:"arial"),zot(o)&&(o=null!=_.color?_.color:"black"),zot(c)&&(c=null!=_.bold&&_.bold),zot(u)&&(u=null!=_.italic&&_.italic);var Y=function(){return arguments}(e,i,t,o,c,u);e=To.Pick.choose(e);var D=!1;""===e&&(e=" ",D=!0),i=To.Pick.choose(i),t=To.Pick.choose(t),o=To.Pick.choose(o),c=To.Pick.choose(c),u=To.Pick.choose(u),zot(n)&&(n=null!=_.rollColor?_.rollColor:null),!zot(r)&&"ignore"!=r||(r=null!=_.shadowColor&&"ignore"!=r?_.shadowColor:-1),!zot(a)&&"ignore"!=a||(a=null!=_.shadowBlur&&"ignore"!=a?_.shadowBlur:14),zot(l)&&(l=null!=_.align?_.align:"left"),zot(s)&&(s=null!=_.valign?_.valign:"top"),zot(f)&&zot(_.outlineColor)||!zot(m)||(m=null!=_.outlineWidth?_.outlineWidth:Math.round(.2*i)),zot(m)&&zot(_.outlineWidth)||!zot(f)||(f=null!=_.outlineColor?_.outlineColor:"#000000"),zot(m)&&(m=null!=_.outlineWidth?_.outlineWidth:0),!zot(z)&&"ignore"!=z||(z=null!=_.backgroundColor&&"ignore"!=z?_.backgroundColor:null),!zot(C)&&"ignore"!=C||(C=null!=_.padding&&"ignore"!=C?_.padding:10),zot(x)&&(x=null!=_.paddingHorizontal?_.paddingHorizontal:C),zot(k)&&(k=null!=_.paddingVertical?_.paddingVertical:C),zot(T)&&(T=null!=_.shiftHorizontal?_.shiftHorizontal:0),zot(A)&&(A=null!=_.shiftVertical?_.shiftVertical:0),zot(d)&&(d=null!=_.variant&&_.variant),zot(h)&&(h=null!=_.lineWidth?_.lineWidth:null),zot(g)&&(g=null!=_.lineHeight?_.lineHeight:null),!zot(p)&&"ignore"!=p||(p=null!=_.backing&&"ignore"!=p?_.backing.clone():null),zot(P)&&(P=null!=_.rollPersist&&_.rollPersist),null!=_.labelWidth&&(h=_.labelWidth),zot(B)||(h=B),"middle"==l&&(l="center"),zot(S)&&(S=null!=_.labelHeight?_.labelHeight:null),zot(E)&&(E=null!=_.maxSize?_.maxSize:null),i=E?Math.min(i,E):i,zot(I)&&(I=null!=_.splitWords&&_.splitWords);var X=void 0!==zdf&&zdf.retina,R=this;this.mouseChildren=!1,this.paddingVertical=k,this.paddingHorizontal=x;var W=[];W[0]=u?"italic":"normal",W[1]=d?"small-caps":"normal",W[2]=c?"bold":"normal",W[3]=i+"px",W[4]=t;var F,H,V,N,G,q=W.join(" "),e=String(e),U=!1,Q=h,Z=S;function K(e){e=new createjs.Text(e,q,o);return e.lineWidth=Q,e.lineHeight=g,e}if(zot(p)&&zot(z)?(V=new createjs.Shape,R.hitArea=V):(Q&&(Q-=2*x),Z&&(Z-=2*k)),F=K(e),I&&1.2*i<Q)for(var J=F.getMetrics(),$=0;J.width>Q&&$<1e3;)$++,To.loop(J.lines,function(e,t){var o=K(e=e.replace(/^[\s\t]+/,"")),o=o.getMeasuredWidth();if(Q<o){e=function(e,t){var o=Math.ceil(Q/e*t.length),n=t.substr(0,o),r=K(n),i=r.getMeasuredWidth();if(Q<i)for(;Q<i;)o--,i=(r=K(n=t.substr(0,o))).getMeasuredWidth();else if(i<Q){for(;i<Q;)o++,i=(r=K(n=t.substr(0,o))).getMeasuredWidth();o--,n=t.substr(0,o)}return{endIndex:o,start:n,end:t.substr(o,t.length)}}(o,e);return J.lines[t]=e.start,J.lines.length>t+1?(e.end.trim(),J.lines[t+1]=e.end+" "+J.lines[t+1]):J.lines.push(e.end),J=(F=K(J.lines.join(" "))).getMetrics(),!1}});function ee(){R.removeChild(R.background),R.background=new To.Rectangle(R.getBounds().width+2*x,R.getBounds().height+2*k,z,y,b,v,w,null,!1),To.center(R.background,R,0),R.setBounds(R.background.x,R.background.y,R.background.width,R.background.height)}function te(){var e,t,o=F.getBounds(),n=o.y,r=o.height;Q&&(e=o.x,"right"==l?e=o.x-Q+o.width:"center"==l&&(e=-Q/2),F.setBounds(e,n,Q,r),o=F.getBounds()),"baseline"==s?t=o.y:"top"==s?(F.y=i-i/6,t=0):"center"==s||"middle"==s?(t=-o.height/2,F.y=.3*i):t=-o.height,R.setBounds(o.x,t,_.width?_.width-2*C:o.width,_.height?_.height-2*C:o.height),R.hitArea&&R.hitArea.graphics.c().f("black").r(R.getBounds().x,R.getBounds().y,R.getBounds().width,R.getBounds().height),"center"!=s&&"middle"!=s||(To.pos(F,null,0),To.mov(F,0,1)),S||(p?U&&oe():zot(z)||ee()),"baseline"==s||X||(F.y+=i/32),ne()}function oe(){var e=p.boundsToGlobal(),e=R.boundsToGlobal(e,!0);R.setBounds(e.x,e.y,e.width,e.height)}function ne(){To.pos(F,"left"==l||"right"==l?p||R.background?x:0:null,"top"==s||"baseline"==s||"bottom"==s?p||R.background?k:0:null,"right"==l,"bottom"==s),F.x+=T,F.y+=A}function re(){H&&(H.x=F.x,H.y=F.y,R.addChildAt(H,R.background||R.backing?1:0))}(this.label=F).textAlign=l,F.textBaseline="alphabetic",0<m&&((H=this.outlineLabel=F.clone()).color=f,H.outline=m),-1!=r&&0<a&&(F.shadow=new createjs.Shadow(r,3,3,a)),this.addChild(F),te(),zot(p)||("Pattern"==p.type?(R.backing=new To.Container(R.width+2*x,R.height+2*k,null,null,!1).centerReg(null,null,!1),-1!=r&&0<a&&(new To.Rectangle(R.width+2*x-2,R.height+k-2,"#666",null,null,v,null,null,!1).center(R.backing).shadow=new createjs.Shadow(r,3,3,a)),V=new To.Rectangle(R.width+2*x,R.height+2*k,z,null,null,v,null,null,!1).addTo(R.backing),p.centerReg(V),p.setMask(V),R.backing.pattern=p):R.backing=p,R.backing.center(R,0),p=R.backing,oe(),U=!0),ne(),re(),Object.defineProperty(R,"text",{get:function(){return" "==F.text&&D?"":F.text},set:function(e){D=!1,""===e&&(e=" ",D=!0),F.text=String(e),F.setBounds(null),R.setBounds(null),te(),H&&(H.text=String(e)),zot(h)||zot(S)||(le(),H&&re())}}),Object.defineProperty(R,"size",{get:function(){return i},set:function(e){i=E?Math.min(e,E):e,W[3]=i+"px",this.label.font=W.join(" "),H&&(H.font=W.join(" ")),F.setBounds(null),R.setBounds(null),te()}}),Object.defineProperty(R,"bold",{get:function(){return Boolean(this.label.font.match("bold"))},set:function(e){c=e,W[2]=e?"bold":"normal",this.label.font=W.join(" "),H&&(H.font=W.join(" "))}}),Object.defineProperty(R,"italic",{get:function(){return Boolean(this.label.font.match("italic"))},set:function(e){u=e,W[0]=e?"italic":"normal",this.label.font=W.join(" "),H&&(H.font=W.join(" "))}}),Object.defineProperty(R,"variant",{get:function(){return Boolean(this.label.font.match("small-caps"))},set:function(e){d=e,W[1]=e?"small-caps":"normal",this.label.font=W.join(" "),H&&(H.font=W.join(" "))}}),Object.defineProperty(R,"font",{get:function(){return W[4]},set:function(e){zot(e)||(t=e,W[4]=e,this.label.font=W.join(" "),H&&(H.font=W.join(" ")))}}),Object.defineProperty(R,"align",{get:function(){return l},set:function(e){zot(e)||(l=e,this.label.textAlign=l,H&&(H.textAlign=l),te())}}),Object.defineProperty(R,"valign",{get:function(){return s},set:function(e){zot(e)||(s=e,te())}}),Object.defineProperty(R,"color",{get:function(){return o},set:function(e){n==o&&(n=e),o=e,F.color=o,To.OPTIMIZE||!zns&&OPTIMIZE||!R.stage||R.stage.update()}}),this.setColorRange=function(e,t){return G=zot(t)?(N=R.color,e):(N=zot(e)?R.color:e,t),R};var ie=0;function ae(){R.mouseoverEvent=R.on("mouseover",function(e){R.showRollColor&&R.showRollColor()}),R.mouseoutEvent=R.on("mouseout",function(e){R.rollPersist||R.showRollColor(!1)}),R.pressupEvent=R.on("pressup",function(e){R.rollPersist&&R.showRollColor(!1)})}function le(){R.size=200;for(var e=0;g<Z/2&&(R.height>Z||R.width>Q)&&(e++,R.size=R.size/2,!(50<e)););for(e=0;R.height<=Z&&R.width<=Q&&(e++,R.size=Math.ceil(R.size+1),!(50<e)););R.size=R.size-1,re(),F.setBounds(null);var t=F.getBounds(),o=t.y,n=t.height;Z&&("bottom"==s?o=t.y-Z+t.height:"center"==s&&(o=-Z/2),n=Z),F.setBounds(t.x,o,t.width,n),p?U&&oe():zot(z)||ee()}Object.defineProperty(R,"colorRange",{get:function(){return ie},set:function(e){ie=e,zot(N)||zot(G)||(R.color=To.colorRange(N,G,e))}}),Object.defineProperty(R,"backgroundColor",{get:function(){return z},set:function(e){z=e,R.background?R.background.color=e:R.backing?R.backing.color=e:ee(),To.OPTIMIZE||!zns&&OPTIMIZE||!R.stage||R.stage.update()}}),Object.defineProperty(R,"outlineColor",{get:function(){return f},set:function(e){f=e,H&&(H.color=f),To.OPTIMIZE||!zns&&OPTIMIZE||!R.stage||R.stage.update()}}),Object.defineProperty(R,"rollColor",{get:function(){return n},set:function(e){!R.mouseoverEvent&&e&&ae(),null==e&&R.mouseoverEvent&&(R.off("mouseover",R.mouseoverEvent),R.off("mouseout",R.mouseoutEvent),R.off("pressup",R.pressupEvent)),n=e}}),this._enabled=!0,Object.defineProperty(R,"enabled",{get:function(){return R._enabled},set:function(e){Ge(R,e),F.color=o,R.mouseChildren=!1,To.OPTIMIZE||!zns&&OPTIMIZE||!R.stage||R.stage.update()}}),this.showRollColor=function(e){return zot(e)&&(e=!0),F.color=e?n:o,R.stage&&R.stage.update(),R},n&&ae(),Object.defineProperty(R,"labelWidth",{get:function(){return h},set:function(e){0<e&&(Q=h=e,zot(p)&&zot(z)||Q&&(Q-=2*x),R.label.lineWidth=Q,H&&(H.lineWidth=Q),F.setBounds(null),R.setBounds(null),te(),S&&le(),To.OPTIMIZE||!zns&&OPTIMIZE||!R.stage||R.stage.update())}}),Object.defineProperty(R,"labelHeight",{get:function(){return S},set:function(e){0<e&&(Z=S=e,zot(p)&&zot(z)||Z&&(Z-=2*k),h&&le(),R.setBounds(null),To.OPTIMIZE||!zns&&OPTIMIZE||!R.stage||R.stage.update())}}),zot(h)||zot(S)||le(),To.styleTransforms(this,_),this.clone=function(e){return R.cloneProps(new To.Label(e||!To.isPick(Y[0])?R.text:Y[0],e||!To.isPick(Y[1])?i:Y[1],e||!To.isPick(Y[2])?t:Y[2],e||!To.isPick(Y[3])?o:Y[3],n,r,a,l,s,e||!To.isPick(Y[4])?c:Y[4],e||!To.isPick(Y[5])?u:Y[5],d,h,g,zot(p)?null:p.clone(e),f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,this.group,j))}},To.extend(To.Label,To.Container,"clone","zimContainer"),To.LabelOnPath=function(o,i,a,l,e,t,n,r,s,c,u){if(d=zob(To.LabelOnPath,arguments,"label, path, percentAngle, percents, showPath, allowToggle, interactive, onTop, style, group, inherit",this))return d;z_d("54.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelOnPath",this.group=c;var d=!1===s?{}:To.getStyle(this.type,this.group,u);zot(o)&&(o=null!=d.label?d.label:new To.Label("Label on Path")),zot(i)&&(i=null!=d.path?d.path:new To.Squiggle({points:[[0,0,0,0,-86,57,86,-57],[300,150,0,0,-133,21,133,-21]]})),zot(a)&&(a=null!=d.percentAngle?d.percentAngle:100),zot(l)&&(l=null!=d.percents?d.percents:null),zot(e)&&(e=null==d.showPath||d.showPath),zot(t)&&(t=null==d.allowToggle||d.allowToggle),zot(n)&&(n=null==d.interactive||d.interactive),zot(r)&&(r=null!=d.onTop&&d.onTop);var h=o.color;i.addTo(this);var g=this;this.path=i,this.allowToggle=t,i.interactive=n,"string"==typeof o&&(o=new To.Label(o));var p=i.alpha;e||i.alp(0),i.onTop=r;var f=this.letters=(new To.Container).addTo(this);if(!l){l=[];for(var m=0;m<o.text.length;m++)l.push(To.decimals(1/(o.text.length-("Blob"==i.type?0:1))*100*m))}function z(){for(var e=f.numChildren-1;0<=e;e--)f.getChildAt(e).dispose();g.numLetters=o.text.length;for(e=0;e<g.numLetters;e++){var t=o.clone();t.text=o.text[e],t.centerReg(f).reg(null,t.height),""!=t.text&&" "!=t.text&&t.expand(0),g.allowToggle&&(t.cursor="pointer"),t.on("mousedown",function(){g.allowToggle&&g.toggle()})}g.resize()}this.percents=l,this.resize=function(){for(var e=i.segmentRatios,t=i.segmentPoints,o=0;o<this.numLetters;o++){var n,r=i.getCurvePoint(l[o]/100,e,t,!0);r&&((n=this.globalToLocal(r.x,r.y))&&f.getChildAt(o).loc(n).rot((180<r.angle?r.angle-360:r.angle)*a/100))}return this},z(),this.showPath=function(e){return this.toggle(!0),i.toggle(e),this},this.hidePath=function(){return this.toggle(!1),this},Object.defineProperty(g,"text",{get:function(){return o.text},set:function(e){o.text=e,l=[];for(var t=0;t<o.text.length;t++)l.push(To.decimals(1/(o.text.length-("Blob"==i.type?0:1))*100*t));z()}}),Object.defineProperty(this,"color",{get:function(){return h},set:function(e){h=e;for(var t=0;t<g.letters.numChildren;t++)g.letters.getChildAt(t).color=h;g.stage&&g.stage.update()}}),Object.defineProperty(g,"interactive",{get:function(){return n},set:function(e){n=e,i.interactive=e,this.ticker&&To.Ticker.remove(this.ticker),n&&(this.ticker=To.Ticker.add(function(){g.resize()}))}}),this.interactive&&(this.ticker=To.Ticker.add(function(){g.resize()}));var y=g.toggled=e;this.toggle=function(e){if(this.allowToggle)return(y=zot(e)?!y:!!e)?(i.alp(p),this.interactive&&(i.showControls(),f.mouseEnabled=!1,f.mouseChildren=!1,f.cursor="default",this.controlHideEvent&&i.off("controlshide",this.controlHideEvent),this.controlHideEvent=i.on("controlshide",function(){f.mouseEnabled=!0,f.mouseChildren=!0,f.cursor="pointer",p=i.alpha,i.alp(0),y=!1,g.toggled=y,g.stage&&g.stage.update()},null,!0))):(p=i.alpha,i.alp(0),f.mouseEnabled=!0,f.mouseChildren=!0,f.cursor="pointer"),g.toggled=y,g.stage&&g.stage.update(),g},g.toggle(!0),To.styleTransforms(this,d),this.clone=function(){return g.cloneProps(new To.LabelOnPath(g.label.clone(),g.path.clone(),a,To.copy(l),e,t,n,r,s,this.group,u))},this.dispose=function(e,t,o){return this.ticker&&To.Ticker.remove(this.ticker),o||this.zimContainer_dispose(!0),!0}},To.extend(To.LabelOnPath,To.Container,["clone","dispose"],"zimContainer",!1),To.LabelOnArc=function(n,e,t,o,r,i,a,l,s,c,u,d,h,g,p,f,m){if(v=zob(To.LabelOnArc,arguments,"label, size, font, color, radius, flip, spacing, letterSpacing, angles, showCircle, arcColor, arcBorderColor, arcBorderWidth, radiusSpread, style, group, inherit",this))return v;z_d("54.55"),this.group=f;var z=!1===p?{}:To.getStyle("LabelOnArc",this.group,m);zot(e)&&(e=null!=z.size?z.size:30),zot(n)&&(n=null!=z.label?z.label:new To.Label("Label on Arc",e)),zot(t)&&(t=null!=z.font?z.font:"verdana"),zot(o)&&(o=null!=z.color?z.color:"white"),zot(r)&&(r=null!=z.radius?z.radius:100),zot(i)&&(i=null!=z.flip&&z.flip),zot(a)&&(a=null!=z.spacing?z.spacing:0),zot(l)&&(l=null!=z.letterSpacing?z.letterSpacing:5),zot(s)&&(s=null!=z.angles?z.angles:null);var y=!zot(s),b=To.copy(s);zot(c)&&(c=null!=z.showCircle&&z.showCircle),zot(u)&&(u=null!=z.arcColor?z.arcColor:null),zot(d)&&(d=null!=z.arcBorderColor?z.arcBorderColor:null),zot(h)&&(h=null!=z.arcBorderWidth?z.arcBorderWidth:null),zot(g)&&(g=null!=z.radiusSpread&&z.radiusSpread);var v=this.outerRadius=r+a+n.height;this.innerRadius=r+a,this.zimContainer_constructor(-v,-v,2*v,2*v,!1),this.type="LabelOnArc";var w,C,x,k,T,A,P=this;function B(){var e;P.disposeAllChildren(),i&&(e=n.text.split("").reverse().join(""),n.text=e),w=P.letters=new To.Container(P.width,P.height).centerReg(P),P.numLetters=n.text.length,P.letterHeight=n.height,C=P.labels=[];for(var t=0;t<P.numLetters;t++){var o=n.clone();C.push(o),o.text=n.text[t],o.letterHolder=new To.Container(o.width,o.height),o.centerReg(o.letterHolder).rot(i?180:0)}if(k=P.circle=new To.Circle(r),c&&k.addTo(P),x=P.arc=(new To.Shape).addTo(P),S(),s){for(t=T=0;t<s.length;t++)T+=s[t];T+=s[s.length-1]/2}E()}function S(){for(A=[T=0],I=0;I<P.numLetters;I++){var e=C[I],t=180*Math.atan((e.width+l)/2/(r+a))/Math.PI*2;A.push(t),T+=t,e.letterHolder.centerReg(w).reg(null,r+a+e.height+(i?.13*e.height:0))}P.circle.radius=r,(u||d||h)&&(0<h&&zot(d)?d="#000000":zot(h)&&!zot(d)&&(h=2),x.graphics.c().f(null).s(d).ss(h).arc(0,0,r,(startAngle-90)*Math.PI/180,(startAngle-90+T)*Math.PI/180))}function E(){if(!y){s=[];for(var e=0;e<A.length-1;e++)s[e]=Math.round((A[e]+A[e+1])/2*100)/100}P.angles=s;for(var t=P.startAngle=-T/2,e=0;e<w.numChildren;e++)var o=w.getChildAt(e),t=(s[e],o.rotation=t+s[e])}"Label"!=n.type&&(n=new To.Label(n,e,t,o)),n.text,B(),Object.defineProperty(this,"radius",{get:function(){return r},set:function(e){r=e,S(),y||g||E()}}),Object.defineProperty(this,"color",{get:function(){return o},set:function(e){o=e;for(var t=0;t<P.labels.length;t++)P.labels[t].color=o;P.stage&&P.stage.update()}}),Object.defineProperty(P,"text",{get:function(){return n.text},set:function(e){n.text=e,s=b?To.copy(b):null,B()}}),To.styleTransforms(this,z),this.clone=function(){return P.cloneProps(new To.LabelOnArc(n,e,t,o,r,i,a,l,s,c,u,d,h,g,p,this.group,m))}},To.extend(To.LabelOnArc,To.Container,"clone","zimContainer",!1),To.LabelLetters=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p){if(z=zob(To.LabelLetters,arguments,"label, align, valign, letterSpacing, letterSpacings, lineSpacing, lineSpacings, lineHeight, lineAlign, lineValign, cache, rtl, style, group, inherit",this))return z;z_d("54.57"),this.group=g;var f=!1===h?{}:To.getStyle("LabelLetters",this.group,p);zot(e)&&(e=null!=f.label?f.label:new To.Label("Label Letters")),zot(t)&&(t=null!=f.align?f.align:"center"),zot(o)&&(o=null!=f.valign?f.valign:"center"),zot(n)&&(n=null!=f.letterSpacing?f.letterSpacing:5),zot(r)&&(r=null!=f.letterSpacings?f.letterSpacings:null),zot(l)&&(l=null!=f.lineHeight?f.lineHeight:null),zot(i)&&(i=null!=f.lineSpacing?f.lineSpacing:5),zot(a)&&(a=null!=f.lineSpacings?f.lineSpacings:null),zot(d)&&(d=null!=f.rtl&&f.rtl),zot(s)&&(s=null!=f.lineAlign?f.lineAlign:d?"right":"left"),zot(c)&&(c=null!=f.lineValign?f.lineValign:"bottom"),zot(u)&&(u=null!=f.cache&&f.cache),this.zimContainer_constructor(null,null,null,null,!1),this.type="LabelLetters";var m=this,z=m.letterData=[];function y(o){var n,i=[];d&&(G=-1,n=(o=(o=(o=(o=(o=o.replace(/[\u0591-\u07FF]+/gi,function(e){return e.split("").reverse().join("")})).replace(/([^\u0591-\u07FF ])([\u0591-\u07FF])/gi,"$1-!!-$2")).replace(/([\u0591-\u07FF])([^\u0591-\u07FF ])/gi,"$1-!!-$2")).replace(/([^\u0591-\u07FF]) ([\u0591-\u07FF])/gi,"$1-!!- -!!-$2")).replace(/([\u0591-\u07FF]) ([^\u0591-\u07FF])/gi,"$1-!!- -!!-$2")).split(/-!!-/g),loop(n,function(e,t){e.match(/[\u0591-\u07FF]/i)&&(n[t]=e.split(" ").reverse().join(" "))}),o=n.join("")),o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=o.replace(/\n|\r/g,"<br>")).replace(/<strong>|<strong \/>|<strong\/>/gi,"<b>")).replace(/<\/strong>/gi,"</b>")).replace(/<em>|<em \/>|<em\/>/gi,"<i>")).replace(/<\/em>/gi,"</i>")).replace(/\\n|\\r/g,"<br>")).replace(/<br>|<br \/>|<br\/>(<\/br>)?/gi,"<br>")).replace(/<b/gi,"<b")).replace(/<i/gi,"<i")).replace(/<u/gi,"<u")).replace(/<br/gi,"<br")).replace(/<a/gi,"<a")).replace(/<font/gi,"<font");var r,a=[/<(a|i|u|f|br|\/a|\/i|\/u|\/f|\/b)[^>]*>/g,/<(a|i|u|f|br|\/a|\/i|\/u|\/f|b)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|\/a)[^>]*>/g,/<(b|i|u|f|br|\/b|\/i|\/u|\/f|a)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|\/i)[^>]*>/g,/<(b|a|u|f|br|\/b|\/a|\/u|\/f|i)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|\/u)[^>]*>/g,/<(b|a|i|f|br|\/b|\/a|\/i|\/f|u)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,/<(b|a|i|u|br|\/b|\/a|\/i|\/u|f)[^>]*>/g];To.loop(["b","a","i","u","font"],function(e,t){r=o.replace(a[2*t],""),l("font"==e?r.split("<font "):"a"==e?r.split("<a "):r.split("<"+e+">"),e,0),l((r=o.replace(a[2*t+1],"")).split("</"+e+">"),e,1)}),r=(r=o.replace(/<br>/gi,"@^#")).replace(/<(b|a|i|u|f|\/b|\/a|\/i|\/u|\/f)[^>]*>/g,""),arr=r.split("@^#");var e=arr.join("\n");function l(e,o,n){var t,r;1<e.length&&("font"!=o&&"a"!=o||0!=n?(e.pop(),t=0,To.loop(e,function(e){t+=e.length;e=i[t];e||(i[t]=[]),(e=i[t])[n]?e[n].push(o):e[n]=[o]})):(r=e[0].length,To.loop(e,function(e,t){0!=t&&((t=i[r])||(i[r]=[]),t=i[r],e=e.split(">"),t[n]?t[n].push(o+" "+e[0]):t[n]=[o+" "+e[0]],r+=e[1].length)})))}return r=arr.join(""),l(arr,"br",0),{text:r,data:i,original:e}}"Label"!=e.type?(data=y(e),z=data.data,e=new To.Label(data.text)):(data=y(e.text),z=data.data,e.text=data.text),m.text=data.original,m._color=e.color,m.numLetters=e.text.length;var b=!zot(r);if(r&&!Array.isArray(r)&&(r=null),r)for(v=0;v<m.numLetters;v++)zot(r[v])&&(r[v]=n);else{r=[];for(var v=0;v<m.numLetters;v++)r.push(n)}if(m.letterSpacings=r,a&&!Array.isArray(a)&&(a=null),a)for(v=0;v<m.numLetters-1;v++)zot(a[v])&&(a[v]=i);else{a=[];for(var v=0;v<m.numLetters-1;v++)a.push(i)}m.lineSpacings=a,m.labels=[],m.lines=[[]];var w=[],C=[],x=[0],k=0,T=0,A=0,P=0,B=0,S=z,E=!1,I=!1,M=!1,O=!1,j=!1,L=!1,_=!1,Y=!1,D=(e.group,!1),X=!1,R=!1,W=!1;m.rolls=[[]];for(v=0;v<m.numLetters;v++){var F,O=!1;S[v]&&(S[v][1]&&(0<=S[v][1].indexOf("b")&&(E=!1),0<=S[v][1].indexOf("i")&&(I=!1),0<=S[v][1].indexOf("u")&&(M=!1),To.loop(S[v][1],function(e){return e.match(/^font/i)?(R=j=!1,W&&m.rolls.push([]),void(_=Y=L=W=!1)):void(e.match(/^a/i)&&(X=D=!1))})),S[v][0]&&(0<=S[v][0].indexOf("b")&&(E=!0),0<=S[v][0].indexOf("i")&&(I=!0),0<=S[v][0].indexOf("u")&&(M=!0),O=0,To.loop(S[v][0],function(e){"br"==e&&O++}),To.loop(S[v][0],function(e){var t,o;return e.match(/^font/i)?((o=e.match(/ color\s?=\s?(\S*)/i))&&(j=o[1],0<=(t=To.colors.indexOf(j))&&(j=To.colorsHex[t]),j=j.replace(/'/g,"")),(o=e.match(/size\s?=\s?(\S*)/i))&&(L=o[1]),(o=e.match(/backgroundColor\s?=\s?(\S*)/i))&&(R=o[1],0<=(t=To.colors.indexOf(R))&&(R=To.colorsHex[t]),R=R.replace(/'/g,"")),(o=e.match(/rollBackgroundColor\s?=\s?(\S*)/i))&&(W=o[1],0<=(t=To.colors.indexOf(W))&&(W=To.colorsHex[t]),W=W.replace(/'/g,"")),(o=e.match(/group\s?=\s?(\S*)/i))&&(_=o[1]),void((o=e.match(/family\s?=\s?(.*)/i))&&(Y=(Y=o[1]).split(/\ssize\s?=|\scolor\s?=|\sgroup\s?=/i)[0]))):void(e.match(/^a/i)&&((o=e.match(/href\s?=\s?(\S*)/i))&&(D=o[1]),(o=e.match(/target\s?=\s?(\S*)/i))&&(X=o[1])))}))),_?F=new Label({text:e.text[v],group:_}):(F=e.clone()).text=e.text[v],m.labels.push(F),E&&(F.bold=!0),I&&(F.italic=!0),j&&(F.color=j),R&&(F.backgroundColor=R);var H=b||zot(F.backgroundColor)?r[v]:-.5;W&&(F.rollIndex=m.rolls.length-1,F.zrbc=W,F.zobc=F.backgroundColor,m.rolls[F.rollIndex].push(F),F.expand(0),F.on("mouseover",V),F.on("mouseout",N)),D&&(F.expand(H,0),F.zurl=D,F.ztar=X,F.cur(),F.on("click",function(e){var t=e.currentTarget;N(e),t.ztar||(t.ztar="_self"),zgo(t.zurl,t.ztar)})),L&&(F.size=L),Y&&(F.font=Y),O&&(k+=(zot(l)?A:l)+a[P],x.push(k),C.push(zot(l)?A:l),w.push(T),B=Math.max(B,T)),O&&(1<O&&To.loop(O-1,function(e){m.lines.push([]),k+=(zot(l)?A:l)+a[P],x.push(k),C.push(zot(l)?A:l),w.push(0),P++}),T=A=0,m.lines.push([]),P++),T+=F.width+H,A=Math.max(A,F.height),v==m.numLetters-1&&(w.push(T),C.push(A),B=Math.max(B,T)),m.lines[P].push(F),M&&(F.underline=new To.Line(F.width+H+1,1,F.color).center(F,this).mov(0,F.height/2))}function V(e){var t=e.currentTarget,e=m.rolls[t.rollIndex];To.loop(e,function(e){e.backgroundColor=t.zrbc}),t.stage&&t.stage.update()}function N(e){var t=e.currentTarget,e=m.rolls[t.rollIndex];To.loop(e,function(e){e.backgroundColor=t.zobc}),t.stage&&t.stage.update()}for(var G=0,q=0;q<m.lines.length;q++){var U,Q=m.lines[q],T=w[q],A=C[q],k=x[q];for(K="left"==s?0:"right"==s?B-T:(B-T)/2,U=k,v=0;v<Q.length;v++){G++,u&&F.cache(),(F=Q[v]).regX="left"==t?0:"right"==t?F.width:F.width/2,F.regY="top"==o?0:"bottom"==o?F.height:F.height/2;var Z=U+("top"==o?0:"bottom"==o?F.height:F.height/2);"center"==c||"middle"==c?Z+=(C[q]-F.height)/2:"bottom"==c&&(Z+=C[q]-F.height);var H=b||zot(F.backgroundColor)?r[G-1]:-.5,K="left"==t?(F.loc(K,Z,this),F.x+F.width+H):"right"==t?(F.loc(K+F.width,Z,this),F.x+H):(F.loc(K+F.width/2,Z,this),F.x+F.width/2+H)}}this.getBounds()||this.setBounds(0,0,0,0),this.regX=this.getBounds().x,this.regY=this.getBounds().y,Object.defineProperty(this,"color",{get:function(){return this._color},set:function(e){this._color=e;for(var t=0;t<m.numChildren;t++)m.getChildAt(t).color=this._color;m.stage&&m.stage.update()}}),this.dispose=function(){To.gD(this),To.loop(m.labels,function(e){e.removeFrom(),e.dispose()}),m.removeFrom()},To.styleTransforms(this,f),this.clone=function(){return m.cloneProps(new To.LabelLetters(e,t,o,n,r,i,a,l,s,c,u,d,h,this.group,p))}},To.extend(To.LabelLetters,To.Container,"clone","zimContainer",!1),To.Button=function(n,r,t,i,a,o,l,s,c,e,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L,_,Y,D,X,R,W,F,H,V,N,G,q,U,Q,Z,K){if(ee=zob(To.Button,arguments,"width, height, label, backgroundColor, rollBackgroundColor, color, rollColor, borderColor, borderRollColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, toggleBackgroundColor, rollToggleBackgroundColor, toggleColor, rollToggleColor, toggleBacking, rollToggleBacking, toggleIcon, rollToggleIcon, toggleEvent, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, waitBacking, rollWaitBacking, waitIcon, rollWaitIcon, align, valign, indent, indentHorizontal, indentVertical, style, group, inherit",this))return ee;z_d("55"),this.group=Z;var J=!1===Q?{}:To.getStyle("Button",Z,K);zot(n)&&(n=null!=J.width?J.width:200),zot(r)&&(r=null!=J.height?J.height:60),this.zimContainer_constructor(n,r,null,null,!1),this.type="Button",zot(i)&&(i=null!=J.backgroundColor?J.backgroundColor:"#C60"),zot(a)&&(a=null!=J.rollBackgroundColor?J.rollBackgroundColor:"#F93");var $=o,ee=l;zot(o)&&(o=null!=J.color?J.color:"white"),zot(l)&&(l=null!=J.rollColor?J.rollColor:"white");var te=function(){return arguments}(i,a,o,l);i=zik(i),a=zik(a),o=zik(o),l=zik(l);var oe=s,ne=e;zot(s)&&(s=null!=J.borderColor?J.borderColor:null),zot(e)&&(e=null!=J.borderWidth?J.borderWidth:null),s<0||e<0?s=e=null:null!=s&&null==e&&(e=1),zot(c)&&(c=null!=J.borderRollColor?J.borderRollColor:s),zot(u)&&(u=null!=J.corner?J.corner:20),zot(d)&&(d=null!=J.shadowColor?J.shadowColor:"rgba(0,0,0,.3)"),zot(h)&&(h=null!=J.shadowBlur?J.shadowBlur:14),zot(g)&&(g=null!=J.hitPadding?J.hitPadding:0),zot(V)&&(V=null!=J.align?J.align:"center"),zot(N)&&(N=null!=J.valign?J.valign:"center"),zot(G)&&(G=null!=J.indent?J.indent:10),zot(q)&&(q=null!=J.indentHorizontal?J.indentHorizontal:G),zot(U)&&(U=null!=J.indentVertical?J.indentVertical:G),zot(p)&&(p=null!=J.gradient?J.gradient:0),zot(f)&&(f=null!=J.gloss?J.gloss:0),zot(t)&&(t=zot(v)?null!=J.label?J.label:"PRESS":"");var re=(!zot(C)||!zot(P)||!zot(B)||!zot(S)||!zot(E))&&zot(M)&&zot(R)&&zot(W);re&&zot(I)&&(I=To.mobile()?"mousedown":"click"),"string"!=typeof t&&"number"!=typeof t||(t=new To.Label({text:t,size:null!=J.size?J.size:36,font:null!=J.font?J.font:"arial",color:null!=J.color&&null==$?J.color:o,rollColor:J.rollColor&&null==ee!=null?J.rollColor:l,align:V,valign:N,rollPersist:null!=J.rollPersist&&J.rollPersist,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",shiftVertical:null!=J.shiftVertical?J.shiftVertical:0,shiftHorizontal:null!=J.shiftHorizontal?J.shiftHorizontal:0,style:!1,group:this.group})),zot(b)&&(b=null!=J.rollPersist&&J.rollPersist),this.rollPersist=b,zot(m)&&(m=null!=J.dashed&&J.dashed),zot(C)||"Label"!=C.type||zon&&zogy("Button() - do not pass Label to toggle parameter - just pass a String"),zot(x)&&(x=null!=J.toggleBackgroundColor?J.toggleBackgroundColor:i),zot(k)&&(k=null!=J.rollToggleBackgroundColor?J.rollToggleBackgroundColor:a),zot(T)&&(T=null!=J.toggleColor?J.toggleColor:t.color),zot(A)&&(A=null!=J.rollToggleColor?J.rollToggleColor:t.rollColor),zot(j)&&(j=null!=J.waitBackgroundColor?J.waitBackgroundColor:i),zot(L)&&(L=null!=J.rollWaitBackgroundColor?J.rollWaitBackgroundColor:a),zot(_)&&(_=null!=J.waitColor?J.waitColor:t.color),zot(Y)&&(Y=null!=J.rollWaitColor?J.rollWaitColor:t.rollColor);var ie=this;this.mouseChildren=!1,this.cursor="pointer",ie.focus=!1,ie.rolled=!1;var ae=Ao(O);zot(z)&&(z=null!=J.backing?J.backing.clone():null),zot(z)?ie.backing=new To.Rectangle(n,r,i,null,null,u,m,null,!1).centerReg(null,null,!1):ie.backing=z,ie.rollBacking=zot(y)?null!=J.rollBacking?J.rollBacking.clone():null:y,ie.waitBacking=zot(R)?null!=J.waitBacking?J.waitBacking.clone():null:R,ie.rollWaitBacking=zot(W)?null!=J.rollWaitBacking?J.rollWaitBacking.clone():null:W,ie.toggleBacking=zot(P)?null!=J.toggleBacking?J.toggleBacking.clone():null:P,ie.rollToggleBacking=zot(B)?null!=J.rollToggleBacking?J.rollToggleBacking.clone():null:B;for(var le,se,ce=["backing","rollBacking","toggleBacking","rollToggleBacking","waitBacking","rollWaitBacking"],ue=0;ue<ce.length;ue++)le=ce[ue],(se=ie[le])&&("Pattern"==se.type?se=de(le,se):-1!=d&&0<h&&(se.shadow=new createjs.Shadow(d,3,3,h)),se.x=n/2,se.y=r/2);function de(e,t){ie[e]=new To.Container(n,r,null,null,!1).centerReg(null,null,!1),-1!=d&&0<h&&(new To.Rectangle(n-2,r-2,"#666",null,null,u,null,null,!1).center(ie[e]).shadow=new createjs.Shadow(d,3,3,h));var o=ie[e].mask=new To.Rectangle(n,r,0<=e.indexOf("roll")?a:i,null,null,u,null,null,!1).addTo(ie[e]);return t.centerReg(o),t.setMask(o.shape),ie[e].pattern=t,ie[e]}ie.addChild(ie.backing),e&&(ie.border=new To.Rectangle(n,r,"rgba(0,0,0,0)",s,e,u,m,null,!1),ie.addChild(ie.border)),ie.icon=zot(v)?null!=J.icon?J.icon.clone():null:v,ie.rollIcon=zot(w)?null!=J.rollIcon?J.rollIcon.clone():null:w,ie.waitIcon=zot(F)?null!=J.waitIcon?J.waitIcon.clone():null:F,ie.rollWaitIcon=zot(H)?null!=J.rollWaitIcon?J.rollWaitIcon.clone():null:H,ie.toggleIcon=zot(S)?null!=J.toggleIcon?J.toggleIcon.clone():null:S,ie.rollToggleIcon=zot(E)?null!=J.rollToggleIcon?J.rollToggleIcon.clone():null:E;for(var he,ge,pe,fe,me,ze,ye=["icon","rollIcon","toggleIcon","rollToggleIcon","waitIcon","rollWaitIcon"],ue=0;ue<ye.length;ue++){var be=ye[ue],be=ie[be];be&&(be.x=n/2,be.y=r/2)}function ve(){(pe=new createjs.Shape).graphics.f("#000").r(-g,-g,n+2*g,r+2*g),ie.hitArea=ge=pe}function we(){ie.toggled?(zot(C)||(ie.label.text=!0===C?fe:C),zot(T)||(ie.label.color=T),zot(A)||(ie.label.rollColor=A),ie.rolled?(ie.rollToggleBacking?Oe("rollToggleBacking",ie.rollToggleBacking):ie.toggleBacking&&Oe("toggleBacking",ie.toggleBacking),ie.rollToggleIcon?Oe("rollToggleIcon",ie.rollToggleIcon):ie.toggleIcon&&Oe("toggleIcon",ie.toggleIcon),zot(z)&&zot(ie.rollToggleBacking)&&(ie.backing.color=k)):(ie.toggleBacking&&Oe("toggleBacking",ie.toggleBacking),ie.toggleIcon&&Oe("toggleIcon",ie.toggleIcon),zot(z)&&(ie.backing.color=x))):(ie.label.color=me,ie.label.rollColor=ze,ie.label.text=fe,Ce()),ie.stage&&ie.stage.update()}function Ce(){ie.rolled?(zot(z)&&!ie.rollBacking&&(ie.backing.color=a),ie.rollBacking?Oe("rollBacking",ie.rollBacking):ie.backing&&Oe("backing",ie.backing),ie.rollIcon?Oe("rollIcon",ie.rollIcon):ie.icon?Oe("icon",ie.icon):Oe("icon")):(zot(z)&&(ie.backing.color=i),ie.backing&&Oe("backing",ie.backing),ie.icon?Oe("icon",ie.icon):Oe("icon"))}ie.icon&&ie.addChild(ie.icon),Array.isArray(u)||(u=[u,u,u,u]),0<p&&((he=new createjs.Shape).graphics.lf(["rgba(255,255,255,"+p+")","rgba(0,0,0,"+p+")"],[0,1],0,0,0,r-e),he.graphics.rc(e/2,e/2,n-e,r-e,u[0],u[1],u[2],u[3]),this.addChild(he)),0<f&&((he=new createjs.Shape).graphics.f("rgba(255,255,255,"+f+")"),he.graphics.rc(e/2,e/2,n-e,(r-e)/2,u[0],u[1],0,0),he.graphics.f("rgba(0,0,0,"+f+")"),he.graphics.rc(e/2,r/2,n-e,(r-e)/2,0,0,u[2],u[3]),this.addChild(he)),0<g&&ve(),this.addChild(t),t.center(this),t.y+=1,this.label=t,To.pos(t,"left"==V||"right"==V?q:null,"top"==N||"bottom"==N?U:null,"right"==V,"bottom"==N),this.toggled=!1,re&&(fe=t.text,me=t.color,ze=t.rollColor,this.on(I,function(){ie.toggled=!ie.toggled,we()}));var xe,ke,Te,Ae,Pe=!(this.toggle=function(e){return re?(zot(e)?ie.toggled=!ie.toggled:ie.toggled=e,we()):zon&&zogy("Button() - can't toggle with wait parameters provided"),ie}),Be=ie.waiting=!1,Se=ie.label.color,Ee=ie.label.rollColor,Ie=this.on("mousedown",function(){Pe=!0,Me()});function Me(){zot(M)&&zot(R)&&zot(W)||ie.waiting||(Be=!0,zot(X)&&(X=!0),D&&(Ae=ie.stage.on("stagemousedown",function(e){ie.hitTestPoint(e.stageX/To.scaX,e.stageY/To.scaY)||ie.clearWait()},null,!0)),setTimeout(function(){ie.waiting=!0},50),ke=t.text,zot(_)||(ie.label.color=_),zot(Y)||(ie.label.rollColor=Y),Te=ie.enabled,!X&&ie.enabled&&(ie.enabled=!1),zot(M)||(ie.label.text=M),ie.rolled?(zot(z)&&!ie.rollWaitBacking&&(ie.backing.color=L),ie.rollWaitBacking?Oe("rollWaitBacking",ie.rollWaitBacking):ie.waitBacking&&Oe("waitBacking",ie.waitBacking),ie.rollWaitIcon?Oe("rollWaitIcon",ie.rollWaitIcon):ie.waitIcon&&Oe("waitIcon",ie.waitIcon)):(zot(z)&&!ie.waitBacking&&(ie.backing.color=j),ie.waitBacking&&Oe("waitBacking",ie.waitBacking),ie.waitIcon&&Oe("waitIcon",ie.waitIcon)),zot(O)&&(O="s"==ae?5:5e3),xe&&xe.clear(),xe=To.timeout(O,function(){ie.enabled||(ie.enabled=Te),ie.clearWait(),ie.dispatchEvent("waited")}),ie.stage&&ie.stage.update())}function Oe(e){if(0<=e.indexOf("con")){for(var t=0;t<ye.length;t++){var o=ye[t],o=ie[o];ie.removeChild(o)}ie[e]&&ie.addChildAt(ie[e],1)}else if(ie[e]){for(t=0;t<ce.length;t++){var n=ce[t],n=ie[n];ie.removeChild(n)}ie[e]&&ie.addChildAt(ie[e],0)}}this.wait=function(){Me()},this.clearWait=function(){return xe&&(Ae&&ie.stage.off("stagemousedown",Ae),xe.clear(),ie.label.text=ke,Ce(),ie.label.color=Se,ie.label.rollColor=Ee,setTimeout(function(){ie.waiting=!1},55),Be=!1,ie.stage&&ie.stage.update()),ie},this.removeWait=function(){return ie.clearWait(),M=null,ie.waitBacking=null,ie.rollWaitBacking=null,ie.off("mousedown",Ie),ie},this.on("pressup",function(){Pe=!1,ie.rollPersist&&!je&&Xe()});var je=!1;function Le(){ie.rolled=!0,je=!0,Be?(zot(z)&&zot(ie.rollWaitBacking)&&(ie.backing.color=zot(L)?a:L),Oe("rollWaitBacking",ie.rollWaitBacking),ie.rollWaitIcon&&Oe("rollWaitIcon",ie.rollWaitIcon)):re&&ie.toggled?(zot(z)&&zot(ie.rollToggleBacking)&&(ie.backing.color=k),Oe("rollToggleBacking",ie.rollToggleBacking),ie.rollToggleIcon&&Oe("rollToggleIcon",ie.rollToggleIcon)):(zot(z)?ie.backing.color=a:zot(z.mask)||(ie.backing.mask.color=a),Oe("rollBacking",ie.rollBacking),ie.rollIcon&&Oe("rollIcon",ie.rollIcon)),ie.border&&(ie.border.borderColor=c),ie.label.showRollColor&&ie.label.showRollColor(),ie.stage&&ie.stage.update()}this.on("mouseover",function(e){ie.stage&&ie.stage.frame.leftMouseDown&&!_e||Le()});var _e=!1,Ye=!1;function De(e){je=!1,ie.off("mouseout",De),ie.rollPersist&&Pe||Xe()}function Xe(){ie.rolled=!1,Be||ie.waiting?(zot(z)&&zot(ie.waitBacking)&&(ie.backing.color=zot(j)?i:j),ie.waitBacking?Oe("waitBacking",ie.waitBacking):Oe("backing",ie.backing),ie.waitIcon?Oe("waitIcon",ie.waitIcon):ie.icon?Oe("icon",ie.icon):Oe("icon")):ie.toggled&&re?(zot(z)&&zot(ie.toggleBacking)&&(ie.backing.color=x),ie.toggleBacking?Oe("toggleBacking",ie.toggleBacking):Oe("backing",ie.backing),ie.toggleIcon?Oe("toggleIcon",ie.toggleIcon):ie.icon?Oe("icon",ie.icon):Oe("icon")):(zot(z)?ie.backing.color=i:zot(z.mask)||(ie.backing.mask.color=i),Oe("backing",ie.backing),ie.icon?Oe("icon",ie.icon):Oe("icon")),ie.border&&(ie.border.borderColor=s),ie.label.showRollColor&&ie.label.showRollColor(!1),ie.stage&&ie.stage.update()}function Re(e,t){return zot(e)||(ie.contains(ie[e])&&(ie.removeChild(ie[e]),t&&ie.addChildAt(t,0<=e.indexOf("con")?ie.numChildren-1:0),ie.stage&&ie.stage.update()),t?(zot(z)&&"backing"==e&&(z=t),"Pattern"==t.type&&(t=de(e,t)),ie[e]=t,ie[e].x=n/2,ie[e].y=r/2):ie[e]=null),ie}this.on("mousedown",function(e){_e=!0,ie.rolled||(Ye=!0,Le())}),this.on("pressup",function(e){_e=!1,Ye&&(Ye=!1,De())}),this.on("pressmove",function(e){var t=ie.stage?ie.stage.frame:zdf,t=ie.hitTestPoint(t.mouseX,t.mouseY);_e&&!t?(De(),_e=!1):!_e&&t&&(Le(),_e=!0)}),this.on("mouseout",De),Object.defineProperty(ie,"text",{get:function(){return" "==t.text?"":t.text},set:function(e){t.text=e,fe=fe&&e,t.center(this),t.y+=1,To.pos(t,"left"==V||"right"==V?q:null,"top"==N||"bottom"==N?U:null,"right"==V,"bottom"==N)}}),Object.defineProperty(ie,"color",{get:function(){return o},set:function(e){o=e,me=me&&o,ie.label&&!zot(ie.label.color)&&(ie.label.color=o),To.OPTIMIZE||!zns&&OPTIMIZE||!ie.stage||ie.stage.update()}}),Object.defineProperty(ie,"rollColor",{get:function(){return l},set:function(e){l=e,ze=ze&&l,ie.label&&(ie.label.rollColor=l)}}),Object.defineProperty(ie,"backgroundColor",{get:function(){return i},set:function(e){i=e,ie.backing.color?ie.backing.color=i:ie.backing.mask&&(ie.backing.mask.color=i),To.OPTIMIZE||!zns&&OPTIMIZE||!ie.stage||ie.stage.update()}}),Object.defineProperty(ie,"rollBackgroundColor",{get:function(){return a},set:function(e){a=e,ie.rollBacking&&ie.rollBacking.color?ie.rollBacking.color=a:ie.rollBacking&&ie.rollBacking.mask&&(ie.rollBacking.mask.color=a)}}),Object.defineProperty(ie,"borderColor",{get:function(){return s},set:function(e){s=e,ie.rolled||(ie.backing&&ie.backing.borderColor&&(ie.backing.borderColor=e),ie.border&&(ie.border.borderColor=e))}}),Object.defineProperty(ie,"borderRollColor",{get:function(){return c},set:function(e){c=e,ie.rolled&&(ie.backing&&ie.backing.borderColor&&(ie.backing.borderColor=e),ie.border&&(ie.border.borderColor=e))}}),Object.defineProperty(ie,"hitPadding",{get:function(){return g},set:function(e){0==(g=e)?ge&&(this.hitArea=null):ve()}}),this._enabled=!0,this.startMouseChildren=this.mouseChildren,Object.defineProperty(ie,"enabled",{get:function(){return ie._enabled},set:function(e){ie._enabled&&(ie.startMouseChildren=ie.mouseChildren),e?(Ge(ie,e),ie.mouseChildren=ie.startMouseChildren):(Xe(),Ge(ie,e)),t.color=t.color,To.OPTIMIZE||!zns&&OPTIMIZE||!ie.stage||ie.stage.update()}}),this.setBacking=function(e,t){Re(e,t)},!(this.setIcon=function(e,t){Re(e,t)})!==Q&&To.styleTransforms(this,J),this.clone=function(e){e=new To.Button(n,r,t.clone(),e||!To.isPick(te[0])?i:te[0],e||!To.isPick(te[1])?a:te[1],e||!To.isPick(te[2])?o:te[2],e||!To.isPick(te[3])?l:te[3],oe,c,ne,u,d,h,g,p,f,m,zot(z)?null:ie.backing.clone(),zot(y)?null:ie.rollBacking.clone(),b,zot(v)?null:v.clone(),zot(w)?null:w.clone(),C,x,k,T,A,zot(P)?null:P.clone(),zot(B)?null:B.clone(),zot(S)?null:S.clone(),zot(E)?null:E.clone(),I,M,O,j,L,_,Y,D,X,zot(R)?null:R.clone(),zot(W)?null:W.clone(),zot(F)?null:F.clone(),zot(H)?null:H.clone(),V,N,G,q,U,Q,this.group,K);return ie.cloneProps(e)},this.doDispose=function(e,t,o){return ie.icon&&ie.icon.dispose(),ie.rollIcon&&ie.rollIcon.dispose(),ie.waitIcon&&ie.waitIcon.dispose(),ie.rollWaitIcon&&ie.rollWaitIcon.dispose(),ie.toggleIcon&&ie.toggleIcon.dispose(),ie.rollToggleIcon&&ie.rollToggleIcon.dispose(),ie.icon=ie.rollIcon=ie.waitIcon=ie.rollWaitIcon=ie.toggleIcon=ie.rollToggleIcon=null,o||this.zimContainer_dispose(!0),!0}},To.extend(To.Button,To.Container,["clone","dispose"],"zimContainer",!1),To.Button.prototype.dispose=function(e){return this.doDispose(null,null,e)},To.CheckBox=function(t,o,e,n,r,i,a,l,s,c,u,d,h,g,p){if(b=zob(To.CheckBox,arguments,"size, label, startChecked, color, backgroundColor, borderColor, borderWidth, corner, margin, indicatorType, indicatorColor, tap, style, group, inherit",this))return b;z_d("56"),this.zimContainer_constructor(null,null,null,null,!1),this.type="CheckBox",this.group=g;var f=!1===h?{}:To.getStyle(this.type,this.group,p);zot(t)&&(t=null!=f.size?f.size:60),zot(o)&&(o=null!=f.label?f.label:null),zot(e)&&(e=null!=f.startChecked&&f.startChecked);var m=e;zot(n)&&(n=null!=f.color?f.color:"#111"),zot(r)&&(r=null!=f.backgroundColor?f.backgroundColor:"rgba(255,255,255,.8)"),zot(i)&&(i=null!=f.borderColor?f.borderColor:"#111"),zot(a)&&(a=null!=f.borderWidth?f.borderWidth:t/10),i<0||a<0?i=a=null:null!=i&&null==a&&(a=t/10),zot(l)&&(l=null!=f.corner?f.corner:0),"string"!=typeof o&&"number"!=typeof o||(o=new To.Label({text:o,size:5*t/6,color:n,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:h,group:this.group})),zot(s)&&(s=null!=f.margin?f.margin:t/5),"box"!=c&&"square"!=c&&"x"!=c&&(c=null!=f.indicatorType?f.indicatorType:"check"),zot(u)&&(u=null!=f.indicatorColor?f.indicatorColor:0<a?i:"black"),this.setBounds(-s,-s,t+2*s,t+2*s),zot(d)&&(d=null!=f.tap&&f.tap);var z=this;this.cursor="pointer";var y=this.box=new To.Rectangle(t,t,r,null,null,l),b=this.box2=new To.Rectangle(5*t/7,5*t/7,"rgba(0,0,0,0)",i,a,l);b.x=t/7,b.y=t/7,this.addChild(y,b);y=t;o&&(o.center(z),o.x=z.getBounds().width,this.label=o,this.setBounds(-s,-s,t+3*s+o.getBounds().width,Math.max(t+2*s,o.getBounds().height)),y=o.x+o.width);b=new To.Shape({style:!1});b.graphics.f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,y+2*s,this.getBounds().height),this.hitArea=b;var v=new To.Shape({style:!1}),w=v.graphics;"check"==c?w.f(u).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"):"box"==c||"square"==c?w.f(u).dr(-35,-35,70,70):w.f(u).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg");v.setBounds(-47.5,-47.5,95,95);var C=t/161;function x(e){m=!m,z.setChecked(m),z.dispatchEvent("change")}v.scaleX=v.scaleY=C,v.alpha=.9,v.x=t/2,v.y=t/2,m&&this.addChild(v),d?this.tap(x):this.on((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",x),Object.defineProperty(z,"checked",{get:function(){return m},set:function(e){z.setChecked(e)}}),this.toggle=function(e){zot(e)&&(e=!m),z.setChecked(e)},Object.defineProperty(z,"toggled",{get:function(){return m},set:function(e){z.setChecked(e)}}),Object.defineProperty(z,"text",{get:function(){return o?o.text:null},set:function(e){o&&(o.text=e,To.OPTIMIZE||!zns&&OPTIMIZE||!z.stage||z.stage.update())}}),Object.defineProperty(v,"indicatorColor",{get:function(){return u},set:function(e){m&&z.removeChild(v),v=new createjs.Shape,w=v.graphics,u=e,w.f(u).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"),v.scaleX=v.scaleY=C,v.alpha=.9,v.x=t/2,v.y=t/2,m&&z.addChild(v),To.OPTIMIZE||!zns&&OPTIMIZE||!z.stage||z.stage.update()}}),Object.defineProperty(z,"indicator",{get:function(){return v},set:function(e){zog("ZIM CheckBox - check is read only")}}),this._enabled=!0,Object.defineProperty(z,"enabled",{get:function(){return z._enabled},set:function(e){Ge(z,e)}}),!(this.setChecked=function(e){return zot(e)&&(e=!0),(m=e)?z.addChild(v):z.removeChild(v),To.OPTIMIZE||!zns&&OPTIMIZE||!z.stage||z.stage.update(),z})!==h&&To.styleTransforms(this,f),this.clone=function(){return z.cloneProps(new To.CheckBox(t,o?o.clone():"",e,n,r,i,a,l,s,c,u,d,h,this.group,p))}},To.extend(To.CheckBox,To.Container,"clone","zimContainer",!1),To.RadioButtons=function(a,i,l,s,c,u,d,h,g,o,p,n,f,e,r){var t;if(t=zob(To.RadioButtons,arguments,"size, buttons, vertical, color, backgroundColor, borderColor, borderWidth, spacing, margin, always, indicatorColor, selectedIndex, style, group, inherit",this))return t;z_d("57"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadioButtons",this.group=e;var m=!1===f?{}:To.getStyle(this.type,this.group,r);zot(a)&&(a=null!=m.size?m.size:60),a=Math.max(5,a),zot(i)&&(i=null!=m.buttons?m.buttons:["A","B","C"]),zot(l)&&(l=null==m.vertical||m.vertical),zot(s)&&(s=null!=m.color?m.color:"#111"),zot(c)&&(c=null!=m.backgroundColor?m.backgroundColor:"rgba(255,255,255,.8)"),zot(u)&&(u=null!=m.borderColor?m.borderColor:"#111"),zot(d)&&(d=null!=m.borderWidth?m.borderWidth:a/9),u<0||d<0?u=d=null:null!=u&&null==d&&(d=a/10),zot(h)&&(h=l?null!=m.spacing?m.spacing:.2*a:null!=m.spacing?m.spacing:a),zot(g)&&(g=null!=m.margin?m.margin:a/5),zot(o)&&(o=null!=m.always&&m.always),zot(p)&&(p=null!=m.indicatorColor?m.indicatorColor:0<d?u:"black");var z,y=this;if(this.cursor="pointer",this.labels=[],this.indicators=[],"string"==typeof i){var b=i;i=[];for(var v=0;v<b.length;v++)i.push({label:b[v]})}var w=new To.Container({style:!1});function C(e){e=w.getChildIndex(e.target);o&&y.selectedIndex==e||(y.setSelected(e),y.dispatchEvent("change"))}this.addChild(w),function(){for(var e,t=!1,o=i.length-1;0<=o;o--)(e=i[o]).selected&&!0===e.selected&&(t?e.selected="false":(t=!0,y.id=e.id));w.removeAllChildren(),y.buttons=[];for(var n,r=0,o=0;o<i.length;o++)"string"!=typeof(e=i[o])&&"number"!=typeof e||(n={selected:!1,label:new To.Label({text:e,size:5*a/6,color:null!=m.color?m.color:s,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",style:f,group:y.group})},e=n),(e.label&&"string"==typeof e.label||"number"==typeof e.label)&&(e.label=new To.Label({text:e.label,size:null!=m.size?m.size:5*a/6,color:null!=m.color?m.color:s,valign:"center",style:f})),y.labels.push(e.label),e.index=o,i[o]=e,(n=function(e,t){var o=new To.Container({style:!1});y.buttons.push(o),o.mouseChildren=!1,o.setBounds(-g,-g,a+2*g,a+2*g);var n=new To.Shape({style:!1}),r=n.graphics;r.f(c).dc(a/2,a/2,a/1.85),r.s(u).ss(d).dc(a/2,a/2,a/2-a/2/5),o.addChild(n);var i=o.check=new To.Circle(a/5.2,p,null,null,null,null,null,null,!1);y.indicators.push(i),i.mouseEnabled=!1,i.alpha=.95,i.regX=i.regY=-a/2;n=a;t&&(o.addChild(t),t.x=o.getBounds().width,t.y=a/2,o.setBounds(-g,-g,a+2*g+t.getBounds().width,Math.max(a+2*g,t.getBounds().height)),n=t.x+t.width,o.text=t.text);e&&(o.addChild(i),y.label=t,y.label&&(y.text=t.text));t=new To.Shape({style:!1});return(r=t.graphics).f("rgba(0,0,0,.01)").r(o.getBounds().x,o.getBounds().y,n+2*g,o.getBounds().height),o.hitArea=t,o}(e.selected,e.label)).type="RadioButton",(n.obj=e).selected&&(z=n.obj),w.addChild(n),l?(n.y=r,r+=n.getBounds().height+h):(n.x=r,r+=n.getBounds().width+h)}();for(var x=0;x<w.numChildren;x++)w.getChildAt(x).on((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",C);this.getBounds()||this.setBounds(0,0,a,a),this.setBounds(-g,-g,this.getBounds().width+2*g,this.getBounds().height),this.setSelected=function(e){if(zot(e)&&(e=-1),-1==e||w.getChildAt(e)){for(var t,o,n=0;n<w.numChildren;n++)(t=w.getChildAt(n)).removeChild(t.check);return 0<=e&&(t=w.getChildAt(e),o=-2,z&&(o=z.index),z=t.obj),-1==e||o==z.index?(z=null,y.id=null,y.label=null,y.text=""):(t.addChild(t.check),y.id=z.id,y.label=z.label,y.label&&(y.text=y.label.text)),To.OPTIMIZE||!zns&&OPTIMIZE||!y.stage||y.stage.update(),y}},Object.defineProperty(y,"selected",{get:function(){return z},set:function(e){zog("ZIM RadioButton - selected is read only")}}),Object.defineProperty(y,"selectedIndex",{get:function(){return z?z.index:-1},set:function(e){o&&y.selectedIndex==e||y.setSelected(e)}}),this._enabled=!0,Object.defineProperty(y,"enabled",{get:function(){return y._enabled},set:function(e){Ge(y,e)}}),zot(n)&&(n=null!=m.selectedIndex?m.selectedIndex:0),y.selectedIndex=n,To.styleTransforms(this,m),this.clone=function(){for(var e=To.copy(i),t=0;t<e.length;t++)e[t].label=e[t].label.clone();return y.cloneProps(new To.RadioButtons(a,e,l,s,c,u,d,h,g,o,p,n,f,this.group,r))}},To.extend(To.RadioButtons,To.Container,"clone","zimContainer",!1),To.Toggle=function(o,n,e,t,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w){if(x=zob(To.Toggle,arguments,"width, height, label, startToggled, backgroundColor, margin, indicatorType, indicatorColor, tap, toggleBackgroundColor, color, borderColor, borderWidth, corner, indicatorCorner, shadowColor, shadowBlur, time, labelLeft, style, group, inherit",this))return x;z_d("57.5"),this.group=v;var C=!1===b?{}:To.getStyle("Toggle",this.group,w);zot(o)&&(o=null!=C.width?C.width:80),zot(n)&&(n=null!=C.height?C.height:50),this.zimContainer_constructor(o,n,null,null,!1),this.type="Toggle",zot(r)&&(r=null!=C.backgroundColor?C.backgroundColor:"#C60"),zot(i)&&(i=null!=C.margin?C.margin:10),zot(a)&&(a=null!=C.indicatorType?C.indicatorType:"circle"),zot(l)&&(l=null!=C.indicatorColor?C.indicatorColor:"#fff"),zot(c)&&(c=null!=C.toggleBackgroundColor?C.toggleBackgroundColor:"#F93"),zot(u)&&(u=null!=C.color?C.color:"#111"),zot(d)&&(d=null!=C.borderColor?C.borderColor:null),zot(h)&&(h=null!=C.borderWidth?C.borderWidth:null),d<0||h<0?d=h=null:null!=d&&null==h&&(h=1),zot(g)&&(g=null!=C.corner?C.corner:"circle"!=a?0:25),zot(p)&&(p=null!=C.indicatorCorner?C.indicatorCorner:0),zot(f)&&(f=null!=C.shadowColor?C.shadowColor:"rgba(0,0,0,.3)"),zot(m)&&(m=null!=C.shadowBlur?C.shadowBlur:14),zot(t)&&(t=null!=C.startToggled&&C.startToggled);var x=Ao(z);zot(z)&&(z=null!=C.time?C.time:"s"==x?.1:100),zot(e)&&(e=null!=C.label?C.label:null),zot(y)&&(y=null!=C.labelLeft?C.labelLeft:null);var k=this;k.cursor="pointer","string"!=typeof e&&"number"!=typeof e||(e=this.label=new To.Label({text:e,size:C.size||5*n/6,color:u,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),"string"!=typeof y&&"number"!=typeof y||(y=this.labelLeft=new To.Label({text:y,size:C.size||5*n/6,color:u,valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),this.background=new To.Rectangle(o,n,r,d,h,g).addTo(this),this.indicator="rectangle"==a||"square"==a?new To.Rectangle(.65*n,.65*n,l,null,null,p).center(this.background).pos(.2*n,null,t):new To.Circle(.35*n,l).center(this.background).pos(.175*n,null,t);var T=t;function A(e){var t,o=k.indicator.x,e=!0===e?0:z;"rectangle"==a||"square"==a?k.indicator.pos(.2*n,null,T):k.indicator.pos(.175*n,null,T),0<z&&k.indicator.animate({props:{x:o},from:!0,time:e}),k.background.color=T?c:r,k.text=T?k.label?k.label.text:"on":k.labelLeft?k.labelLeft.text:"off",k.zimAccessibility&&(t="Toggle set to "+(T?k.label?k.label.text+".":"on.":k.labelLeft?k.labelLeft.text+".":"off."),setTimeout(function(){k.zimAccessibility.talk(t)},50))}k.background.color=T?c:r,-1!=f&&0<m&&(this.background.shadow=new createjs.Shadow(f,3,3,m)),e&&(this.addChild(e),e.x=o+2+i+h,e.y=n/2,this.label=e,this.setBounds(-i,-i,o+3*i+h+e.getBounds().width,Math.max(n+2*i,e.getBounds().height))),y&&(this.addChild(y),y.x=0,k.background.x+=y.width+3+i+h,k.label.x+=y.width+3+i+h,y.y=n/2,this.labelLeft=y,this.setBounds(-i,-i,k.getBounds().width+y.width+3+i+h,k.getBounds().height)),this.expand(To.mobile()?20:10),this.tap(function(e){if(y){var t=k.localToGlobal(y.width+3+i+h+o/2,0);if(e.stageX/To.scaX<t.x-o/2&&!T||e.stageX/To.scaX>=t.x+o/2&&T)return}T=!T,A(),k.dispatchEvent("change")},To.mobile()?20:10),new To.Swipe(this,20,"s"==x?.2:200).on("swipe",function(e){0!=e.swipeX&&(1==e.swipeX&&T||-1==e.swipeX&&!T||(T=!T,A(),k.dispatchEvent("change")))}),Object.defineProperty(k,"textLeft",{get:function(){return y?y.text:null},set:function(e){y&&(y.text=e,To.OPTIMIZE||!zns&&OPTIMIZE||!k.stage||k.stage.update())}}),k.toggle=function(e,t){var o=T;return zot(e)&&(e=!0),o!=(T=e)&&A(t),k},k.text=T?k.label?k.label.text:"on":k.labelLeft?k.labelLeft.text:"off",Object.defineProperty(k,"toggled",{get:function(){return T},set:function(e){k.toggle(e)}}),this._enabled=!0,Object.defineProperty(k,"enabled",{get:function(){return k._enabled},set:function(e){Ge(k,e)}}),!1!==b&&To.styleTransforms(this,C),this.clone=function(){return k.cloneProps(new To.Toggle(o,n,e?e.clone():"",t,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y?y.clone():"",b,this.group,w))}},To.extend(To.Toggle,To.Container,"clone","zimContainer",!1),To.Tip=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L,_,Y,D,X,R,W){var F;if(F=zob(To.Tip,arguments,"text, align, valign, margin, marginH, marginV, outside, target, size, font, color, rollColor, shadowColor, shadowBlur, textAlign, textValign, lineWidth, lineHeight, backing, outlineColor, outlineWidth, backgroundColor, backgroundBorderColor, backgroundBorderWidth, corner, backgroundDashed, padding, paddingHorizontal, paddingVertical, shiftHorizontal, shiftVertical, rollPersist, labelWidth, labelHeight, maxSize, bold, italic, variant, splitWords, style, group, inherit",this))return F;z_d("57.6"),this.group=R;var H=!1===X?{}:To.getStyle("Tip",this.group,W);zot(e)&&(e=null!=H.text?H.text:"Here's a tip!"),zot(n)&&(n=null!=H.margin?H.margin:40),zot(r)&&(r=null!=H.marginH?H.marginH:n),zot(i)&&(i=null!=H.marginV?H.marginV:n),zot(t)&&(t=null!=H.align?H.align:"right"),zot(o)&&(o=null!=H.valign?H.valign:"bottom"),zot(a)&&(a=null!=H.outside&&H.outside),zot(w)&&(w=null!=H.backgroundColor?H.backgroundColor:To.blue),zot(u)&&(u=null!=H.color?H.color:To.white),zot(k)&&(k=null!=H.corner?H.corner:25),zot(k)&&(k=null!=H.corner?H.corner:25),zot(k)&&(k=null!=H.corner?H.corner:25),zot(P)&&(P=null!=H.paddingHorizontal?H.paddingHorizontal:14+(Array.isArray(k)?k[0]:k)),!zot(h)&&"ignore"!=h||(h=null!=H.shadowColor&&"ignore"!=h?H.shadowColor:"rgba(0,0,0,.3)"),!zot(g)&&"ignore"!=g||(g=null!=H.shadowBlur&&"ignore"!=g?H.shadowBlur:1),this.zimLabel_constructor(e,s,c,u,d,null,null,p,f,L,_,Y,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,D,X,R,To.copy(H)),this.type="Tip",a&&(r=-r,i=-i);var V=this;V.align=t,V.valign=o,this.background.sha(h,3,5,g),this.show=function(e,o){var t=Ao(o);zot(e)&&(e=null!=H.delay?H.delay:0),zot(o)&&(o=null!=H.time?H.time:"s"==t?2:2e3);if(zot(l)){if(!zdf)return V;l=zdf.stage}else{if(!l.getBounds)return V;if(zot(l.stage))return zog("zim display - Waiter(): The container must have a stage property"),V}function n(){var e;e=l.boundsToGlobal?l.boundsToGlobal():l.getBounds();var t=new To.Container(e.x,e.y,e.width,e.height);t.zimTemp=!0,t.loc(0,0,l.stage),"center"!=V.align&&"middle"!=V.align&&"center"!=V.valign&&"middle"!=V.valign||V.center(t),V.pos("center"==V.align||"middle"==V.align?null:r,"center"==V.valign||"middle"==V.valign?null:i,"right"==V.align,"bottom"==V.valign,t),a&&("right"==V.align?V.x+=V.width:"left"==V.align&&(V.x-=V.width),"bottom"==V.valign?V.y+=V.height:"top"==V.valign&&(V.y-=V.height)),V.addTo(t.stage),t.zimTemp&&t.removeFrom&&(t.removeFrom(),t=null),t=V.stage,V.timeoutID&&V.timeoutID.clear(),V.timeoutID=To.timeout(o,function(){V.hide(),t.stage.update()}),V.upID&&t.stage.off("stagemouseup",V.upID),V.upID=t.stage.on("stagemouseup",function(){V.hide(),t.stage&&t.stage.update()}),t.stage&&t.stage.update()}return 0<e?V.showID=To.timeout(e,n):n(),V},this.hide=function(){return this.removeFrom(),this.timeoutID&&this.timeoutID.clear(),this.upID&&l.stage&&l.stage.off("stagemouseup",this.downID),V},!(this.clear=function(){V.showID&&V.showID.clear(),V.hide()})!==X&&To.styleTransforms(this,H),this.clone=function(){return V.cloneProps(new To.Tip(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,D,X,this.group,W))}},To.extend(To.Tip,To.Label,"clone","zimLabel",!1),To.Pane=function(r,i,n,a,l,s,c,u,d,h,g,p,f,m,z,y,b,e,v,w,C,x,k,T,A,t,P){if(S=zob(To.Pane,arguments,"width, height, label, backgroundColor, color, draggable, resets, modal, corner, backdropColor, shadowColor, shadowBlur, center, displayClose, backdropClose, backing, fadeTime, container, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, close, closeColor, style, group, inherit",this))return S;z_d("58"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pane";var o="zim display - Pane(): Please pass in a reference to a container with bounds set as first parameter";if(zot(e)){if(!zdf)return void zog(o);e=zdf.stage}else{if(!e.getBounds)return void zog(o);if(zot(e.getStage))return void zog("zim display - Pane(): The container must have a stage property")}this.group=t;var B=!1===A?{}:To.getStyle(this.type,this.group,P);zot(r)&&(r=null!=B.width?B.width:200),zot(i)&&(i=null!=B.height?B.height:200),zot(n)&&(n=null!=B.label?B.label:null),"string"!=typeof n&&"number"!=typeof n||(n=new To.Label({text:n,size:null!=B.size?B.size:40,align:null!=B.align?B.align:"center",valign:null!=B.valign?B.valign:"center",color:null!=B.color?B.color:l,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),zot(a)&&(a=null!=B.backgroundColor?B.backgroundColor:"white"),zot(s)&&(s=null!=B.draggable&&B.draggable),zot(c)&&(c=null==B.resets||B.resets),zot(u)&&(u=null==B.modal||B.modal),zot(d)&&(d=null!=B.corner?B.corner:20),zot(v)&&(v=null!=B.titleBar?B.titleBar:null),zot(w)&&(w=null!=B.titleBarColor?B.titleBarColor:null),zot(C)&&(C=null!=B.titleBarBackgroundColor?B.titleBarBackgroundColor:null),zot(x)&&(x=null!=B.titleBarHeight?B.titleBarHeight:null),zot(h)&&(h=null!=B.backdropColor?B.backdropColor:"rgba(0,0,0,.2)"),zot(g)&&(g=null!=B.shadowColor?B.shadowColor:"rgba(0,0,0,.3)"),zot(p)&&(p=null!=B.shadowBlur?B.shadowBlur:20),zot(f)&&(f=null==B.center||B.center),zot(m)&&(m=null==B.displayClose||B.displayClose),s&&(m=!1),zot(z)&&(z=null==B.backdropClose||B.backdropClose),zot(b)&&(b=null!=B.fadeTime?B.fadeTime:0),zot(k)&&(k=null!=B.close&&B.close),zot(T)&&(T=null!=B.closeColor?B.closeColor:"#555");var S=this.backdrop=new To.Shape({style:!1});S.type="CreateJS_Shape";o=S.graphics;o.f(h),o.drawRect(-5e3,-5e3,1e4,1e4),this.setBounds(-r/2,-i/2,r,i);var E=this;E.container=e,S.on((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",z?Y:function(e){e.stopImmediatePropagation()});var I,M,O,j,L,_=new To.Dictionary(!0);function Y(e){E.dispatchEvent("closing"),setTimeout(function(){D(),E.dispatchEvent("close")},10),e.stopImmediatePropagation()}function D(){function e(){E.container.removeChild(E);for(var e,t,o=0;o<E.numChildren;o++)"TextArea"!=(t=E.getChildAt(o)).type&&"Loader"!=t.type&&"Tag"!=t.type||(e={obj:t,depth:E.getChildIndex(t)},_.add(t,e));for(var n,o=E.numChildren-1;0<=o;o--)"TextArea"!=(t=E.getChildAt(o)).type&&"Loader"!=t.type&&"Tag"!=t.type||E.removeChild(t);To.OPTIMIZE||!zns&&OPTIMIZE||E.container.stage.update(),c&&(isNaN(E.resetX)||(E.x=E.resetX),isNaN(E.resetY)||(E.y=E.resetY)),E.zimAccessibility&&((n=E.zimAccessibility).resize(E),(L||E.zimTabTag.nextSibling).focus(),setTimeout(function(){n.talk("Pane has been closed.")},50))}0<b?E.animate({obj:{alpha:0},time:b,call:function(){e(),E.dispatchEvent("fadedout")}}):e()}S.on("mousedown",function(e){e.stopImmediatePropagation()}),u&&this.addChild(S),zot(y)?I=this.backing=this.display=new To.Rectangle({width:r,height:i,color:a,corner:d,style:!1}):("Pattern"==y.type?(j=y,I=new To.Rectangle(r,i,a,null,null,d,null,null,!1),j.centerReg(I),j.setMask(I.shape)):I=y,E.display=E.backing=I),m&&(I.cursor="pointer",I.on((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",Y)),-1!=g&&0<p&&(I.shadow=new createjs.Shadow(g,8,8,p)),I.on("click",function(e){e.stopImmediatePropagation()}),this.resetX,this.resetY,s&&(I.cursor="pointer",I.on("mousedown",function(e){e.target.stage,isNaN(E.resetX)&&(E.resetX=E.x),isNaN(E.resetY)&&(E.resetY=E.y),M=e.stageX/To.scaX-E.x,O=e.stageY/To.scaY-E.y,I.cursor="pointer"}),I.on("pressmove",function(e){var t,o,e=(t=e.stageX/To.scaX-M,e=e.stageY/To.scaY-O,t=Math.max(r/2,Math.min(E.container.getBounds().width-r/2,t)),e=Math.max(i/2,Math.min(E.container.getBounds().height-i/2,e)),{x:t,y:e});E.x=e.x,E.y=e.y;for(var n=0;n<E.numChildren;n++)"TextArea"!=(o=E.getChildAt(n)).type&&"Loader"!=o.type&&"Tag"!=o.type||o.resize();E.stage.update()}),this.on("pressup",function(e){I.cursor="pointer",E.stage&&E.stage.update()})),I.centerReg(this),n&&(this.addChild(n),To.center(n,this),this.label=n,this.text=n.text,n.mouseEnabled=!1),zot(v)||("string"==typeof v&&(v=new To.Label(v,null,null,w)),j=E.titleBarLabel=v,zot(x)&&(x=1.5*j.height),zot(w)&&(w="black"),zot(C)&&(C="rgba(0,0,0,.2)"),E.titleBar=v=new To.Container(r,x,null,null,!1).centerReg(E).mov(0,-i/2+x/2),v.mouseEnabled=!1,v.mouseChildren=!1,E.titleBar.backing=new To.Rectangle(r,x,C,null,null,[.95*d,.95*d,0,0],null,null,!1).addTo(v),j.center(v).pos({x:Math.max(d/2,10),reg:!0})),k&&((k=E.close=new To.Shape(-40,-40,80,80,null,!1)).graphics.f(T).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),(v?k.addTo(E).scaleTo(v,null,50).mov(r/2-Math.max(d/2,10)-k.width/2,-i/2+x/2):k.addTo(E).sca(.3).mov(r/2-k.width-3,-i/2+k.height)).expand(40),k.cursor="pointer",k.expand(),k.on((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",Y)),Object.defineProperty(E,"text",{get:function(){return" "==n.text?"":n.text},set:function(e){n.text=e}}),this._enabled=!0,Object.defineProperty(E,"enabled",{get:function(){return E._enabled},set:function(e){Ge(E,e)}}),this.hide=function(e){return D(),E.toggled=!1,e&&E.dispatchEvent("close"),E},this.show=function(){f&&isNaN(E.resetX)&&(E.x=E.container.getBounds().width/2,E.y=E.container.getBounds().height/2),E.container.addChild(E);for(var e,t=0;t<_.length;t++)E.addChildAt(_.values[t].obj,_.values[t].depth);return 0<b?(E.alpha=0,E.animate({props:{alpha:1},time:b,call:function(){E.dispatchEvent("fadedin")}})):E.container.stage&&E.container.stage.update(),E.zimAccessibility&&(e=E.zimAccessibility,setTimeout(function(){e.activatedObject&&(L=e.activatedObject.zimTabTag)},50),e.resize(E),e.tabIndex=E.zimTabIndex),E.toggled=!0,E},!(this.toggle=function(e){return!0!==e&&(!1===e||E.container.contains(E))?E.hide():E.show(),E})!==A&&To.styleTransforms(this,B),this.clone=function(){var e=n.x,t=n.y,o=E.cloneProps(new To.Pane(r,i,n.clone(),a,l,s,c,u,d,h,g,p,f,m,z,zot(y)?y.clone():null,b,E.container,v,w,C,x,k,T,A,this.group,P));return o.label.x=e,o.label.y=t,o}},To.extend(To.Pane,To.Container,"clone","zimContainer",!1),To.Panel=function(t,e,o,a,l,n,s,c,r,i,u,d,h,g,p,f,m,z,y,b,v,w,C,x){if(E=zob(To.Panel,arguments,"width, height, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, backgroundColor, borderColor, borderWidth, corner, close, closeColor, arrow, align, shadowColor, shadowBlur, draggable, boundary, extraButton, collapse, collapsed, style, group, inherit",this))return E;z_d("57.7"),this.group=C;var k=!1===w?{}:To.getStyle("Panel",this.group,x);zot(t)&&(t=null!=k.width?k.width:250),zot(e)&&(e=null!=k.height?k.height:300),this.zimContainer_constructor(t,e,null,null,!1),this.type="Panel",zot(o)&&(o=null!=k.titleBar?k.titleBar:"PANEL"),zot(a)&&(a=null!=k.titleBarColor?k.titleBarColor:"#fff"),zot(l)&&(l=null!=k.titleBarBackgroundColor?k.titleBarBackgroundColor:"#555"),zot(n)&&(n=null!=k.titleBarHeight?k.titleBarHeight:30),zot(s)&&(s=null!=k.backgroundColor?k.backgroundColor:"#eee"),zot(c)&&(c=null!=k.borderColor?k.borderColor:"#888"),zot(r)&&(r=null!=k.borderWidth?k.borderWidth:null),c<0||r<0?c=r=null:null!=c&&null==r&&(r=1),zot(i)&&(i=null!=k.corner?k.corner:5),zot(g)&&(g=null!=k.align?k.align:"left"),zot(p)&&(p=null!=k.shadowColor?k.shadowColor:"rgba(0,0,0,.3)"),zot(f)&&(f=null!=k.shadowBlur?k.shadowBlur:14),zot(m)&&(m=null!=k.draggable&&k.draggable),zot(z)&&(z=null!=k.boundary?k.boundary:null),zot(u)&&(u=null!=k.close&&k.close),zot(d)&&(d=null!=k.closeColor?k.closeColor:zot(a)?"#555":a),zot(h)&&(h=null!=k.arrow?k.arrow:To.vee(o)),Array.isArray(i)||(i=[i,i,i,i]),zot(b)&&(b=null!=k.collapse&&k.collapse),zot(v)&&(v=null!=k.collapsed&&k.collapsed);var T=this,A=this.background=new To.Rectangle(t,e,s,c,r,i).addTo(this);-1!=p&&0<f&&(this.background.shadow=new createjs.Shadow(p,3,3,f));var P=o,B=To.Pick.choose(P),S=To.Pick.choose(a),E=To.Pick.choose(l);To.Pick.choose(s),To.Pick.choose(c);"string"==typeof B&&(B=new To.Label({text:B,color:S,size:null!=k.size?k.size:20,bold:null!=k.bold&&k.bold,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));var I=T.titleBarLabel=B;zot(E)&&(E="rgba(0,0,0,.2)"),T.titleBar=o=new To.Container(t,n,null,null,!1).loc(0,0,T);var M,O=T.titleBar.backing=new To.Rectangle(t+r,n,E,null,null,[.95*i[0],.95*i[1],0,0],!0,null,!1).center(o);function j(){"right"==g?I.center(o).pos(Math.max(i[0]/2,10),null,!0):"center"==g||"middle"==g?I.center(o):I.center(o).loc(Math.max(i[0]/2,10)),I.mov(0,2)}o&&j(),T.label=B,T.text=B.text,u&&((u=T.close=new To.Shape(-40,-40,80,80,null,!1)).graphics.f(d).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),o?(u.centerReg(o).scaleTo(o,null,50),"right"==g?u.pos(Math.max(i[1]/2,15)):u.pos(Math.max(i[1]/2,15),null,!0)):u.addTo(T).sca(.3).mov(t/2-u.width-3,-e/2+u.height),u.expand(40),u.cursor="pointer",u.on((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){var e=T.stage;T.removeFrom(),T.dispatchEvent("close"),e.update()})),b&&(v&&(T.collapsed=!0),T.collapseEvent=T.titleBar.on("dblclick",function(){v=!v,T.collapsed=v})),this.nextPanel=function(e,t){var o=zot(e)||zot(P.array)?To.Pick.choose(P):P.array[e],n=zot(e)||zot(a.array)?To.Pick.choose(a):a.array[e],r=zot(e)||zot(l.array)?To.Pick.choose(l):l.array[e],i=zot(e)||zot(s.array)?To.Pick.choose(s):s.array[e],e=zot(e)||zot(c.array)?To.Pick.choose(c):c.array[e];"string"==typeof o&&(o=new To.Label({text:o,color:n,size:null!=k.size?k.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),T.label=o,T.text=o.text,I.removeFrom(),I=T.titleBarLabel=o,j(),O.color=r,T.background.color=i,T.background.borderColor=e,t&&T.dispatchEvent("change"),!OPTIMIZE&&T.stage&&T.stage.update()},m&&(o.cursor="pointer",o.on("mousedown",function(){T.drag({rect:z,currentTarget:!0})}),o.on("pressup",function(){T.noDrag(!1)})),0<h&&(B=u?u.width+15:0,(M=T.arrow=new To.Shape(-20,-20,40,40,null,!1)).graphics.f(a).p("AiJieIETCeIkTCfg"),M.centerReg(o).scaleTo(o,null,70).alp(.8).hov(1).expand(),"right"==g?M.pos(Math.max(i[1]/2,10)+B):M.pos(Math.max(i[1]/2,10)+B,null,!0),M.cursor="pointer",M.on((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){T.nextPanel(),T.dispatchEvent("change")})),zot(y)||(y=T.extraButton=new To.Button({label:"R",width:50,height:50,corner:5,group:"PanelExtra"}).scaleTo(o,null,70).centerReg(o).expand(),"left"==g?y.pos(0<h?M.x-M.width-25:Math.max(i[1]/2,10)):y.pos(0<h&&"center"!=g?M.x+M.width:Math.max(i[1]/2,10)));T.overlay=new To.Rectangle(t,e,null,null,null,i).alp(.3);Object.defineProperty(T,"panelHeight",{get:function(){return T.background.height},set:function(e){A.removeFrom(),A=this.background=new To.Rectangle(t,e,s,c,r,i).addTo(this).bot(),-1!=p&&0<f&&(this.background.shadow=new createjs.Shadow(p,3,3,f)),T.setBounds(t,e),!OPTIMIZE&&T.stage&&T.stage.update()}}),Object.defineProperty(T,"collapsed",{get:function(){return v},set:function(e){(v=e)?T.setMask(T.titleBar.backing,!0):T.setMask(null),T.stage&&T.stage.update()}}),this._enabled=!0,Object.defineProperty(T,"enabled",{get:function(){return T._enabled},set:function(e){Ge(T,e),e?T.overlay.removeFrom():T.overlay.addTo(T),!OPTIMIZE&&T.stage&&T.stage.update()}}),!1!==w&&To.styleTransforms(this,k),this.clone=function(){return T.cloneProps(new To.Toggle(t,e,o?o.clone():"",a,l,n,s,c,r,i,u,d,h,g,p,f,m,z,y,b,v,w,this.group,x))},this.doDispose=function(e,t,o){return b&&this.titleBar.off("dblclick",this.collapseEvent),o||this.zimContainer_dispose(!0),!0}},To.extend(To.Panel,To.Container,["clone","dispose"],"zimContainer",!1),To.Panel.prototype.dispose=function(e){return this.doDispose(null,null,e)},To.Window=function(a,l,o,e,s,n,c,u,d,h,t,r,i,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L,_,Y,D,X,R){if(W=zob(To.Window,arguments,"width, height, backgroundColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, slide, slideDamp, slideSnap, interactive, shadowColor, shadowBlur, paddingHorizontal, paddingVertical, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, cancelCurrentDrag, fullSize, fullSizeColor, resizeHandle, style, group, inherit",this))return W;z_d("58.1"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Window",this.group=X;var W=!1===D?{}:To.getStyle(this.type,this.group,R);zot(a)&&(a=null!=W.width?W.width:300),zot(l)&&(l=null!=W.height?W.height:200),zot(o)&&(o=null!=W.backgroundColor?W.backgroundColor:"#333");var F=e,H=s;zot(e)&&(e=null!=W.borderColor?W.borderColor:"#999"),zot(s)&&(s=null!=W.borderWidth?W.borderWidth:1),zot(n)&&(n=null!=W.padding?W.padding:0),zot(c)&&(c=null!=W.corner?W.corner:0),zot(u)&&(u=null==W.swipe||W.swipe),zot(d)&&(d=null==W.scrollBarActive||W.scrollBarActive),zot(h)&&(h=null!=W.scrollBarDrag&&W.scrollBarDrag),zot(t)&&(t=null!=W.scrollBarColor?W.scrollBarColor:e),zot(r)&&(r=null!=W.scrollBarAlpha?W.scrollBarAlpha:.3),zot(i)&&(i=null==W.scrollBarFade||W.scrollBarFade),zot(g)&&(g=null==W.scrollBarH||W.scrollBarH),zot(p)&&(p=null==W.scrollBarV||W.scrollBarV),h&&(i=null!=W.scrollBarFade&&W.scrollBarFade),zot(f)&&(f=null==W.slide||W.slide),zot(m)&&(m=null!=W.slideDamp?W.slideDamp:.6),zot(z)&&(z=null!=W.slideSnap?W.slideSnap:"vertical"),zot(y)&&(y=null==W.interactive||W.interactive),zot(b)&&(b=null!=W.shadowColor?W.shadowColor:"rgba(0,0,0,.3)"),zot(v)&&(v=null!=W.shadowBlur?W.shadowBlur:20),zot(C)&&(C=null!=W.paddingVertical?W.paddingVertical:n),zot(w)&&(w=null!=W.paddingHorizontal?W.paddingHorizontal:n),zot(x)&&(x=null==W.scrollWheel||W.scrollWheel),zot(T)&&(T=null!=W.titleBar?W.titleBar:null),zot(A)&&(A=null!=W.titleBarColor?W.titleBarColor:null),zot(P)&&(P=null!=W.titleBarBackgroundColor?W.titleBarBackgroundColor:null),zot(B)&&(B=null!=W.titleBarHeight?W.titleBarHeight:null),zot(S)&&(S=null!=W.draggable?W.draggable:null),zot(E)&&(E=null!=W.boundary?W.boundary:null),zot(I)&&(I=null!=W.onTop?W.onTop:null),zot(M)&&(M=null!=W.close?W.close:null),zot(O)&&(O=null!=W.closeColor?W.closeColor:null),zot(j)&&(j=null!=W.cancelCurrentDrag&&W.cancelCurrentDrag),zot(L)&&(L=null!=W.fullSize?W.fullSize:null),zot(_)&&(_=null!=W.fullSizeColor?W.fullSizeColor:null),zot(Y)&&(Y=null!=W.resizeHandle?W.resizeHandle:null),!1===T&&(T=null),zot(T)||(zot(B)&&(B=30),l-=B);var V=this;this.scrollX=this.scrollY=this.scrollXMax=this.scrollYMax=0;var N=this.backing=new To.Shape({style:!1});this.addChild(N);var G=new createjs.Shape;G.type="WindowBacking";var q=G.graphics;this.addChild(G);var U,Q,Z=this.content=new To.Container({style:!1});this.addChild(Z),Z.mask=G,y||(U=new createjs.Shape),0<s&&(Q=new createjs.Shape,this.addChild(Q));var K=T?0:c;function J(){V.setBounds(0,0,a,l),N.graphics.c().f(o).rc(0,0,a,l,K,K,c,c),-1!=b&&0<v&&(N.shadow=new createjs.Shadow(b,4,4,v)),0<s&&(c?Q.graphics.c().s(e).ss(s,"square","miter").rc(0,0,a,l,K,K,c,c):Q.graphics.c().s(e).ss(s,"square","miter").dr(0,0,a,l)),zot(ge)||(ge=T.backing.widthOnly=V.width,V.setBounds(0,-B,V.width,l+B)),V.close&&(T?M.pos({x:a-Math.max(c/2,10)-M.width/2,y:B/2,reg:!0}):M.pos(Math.max(c/2,10)/2,M.height/2,!0,!1,V)),V.fullSize&&(L.pos({x:a-Math.max(c/2,10)-L.width/2,y:B/2,reg:!0}),V.close&&L.mov(-M.width-10))}J();var $,ee,te,oe,ne,re,ie,ae,le,se,ce,ue,de,he,ge,pe,fe,me,ze,ye,be,ve=this.scrollBar={};function we(){be.loc(0,0,V).top().alp(.01).mov(V.width,V.height-(V.titleBar?V.titleBar.height:0))}function Ce(e){"right"==e.align?(e.x=w,e.resize(V.width-(ae?ve.size+2*ve.spacing:w)-2*w)):("center"==e.align||e.align,e.resize(V.width-(ae?ve.size+2*ve.spacing:0)-2*w)),e.alpha=e.wrapperLastAlpha}function xe(e){zot(ke)&&(ke=V.stage||zimDefaultFrame.stage),zot(e)&&(e=!0),e?To.dragBoundary(Z,new createjs.Rectangle(0,0,ie?-V.scrollXMax:0,ae?-V.scrollYMax:0)):To.dragBoundary(Z,new createjs.Rectangle(-1e3,-1e3,ke.width+2e3,ke.height+2e3))}ve.color=t,ve.size=6,ve.minSize=2*ve.size,ve.spacing=3.5+s/2,ve.margin=0,ve.corner=ve.size/2,ve.showTime=.5,ve.fadeTime=3,d&&($=ve.horizontal=new To.Shape({style:!1}),ee=$.graphics,$.alpha=r,this.addChild($),h&&$.drag({localBounds:!0}),te=ve.vertical=new To.Shape({style:!1}),oe=te.graphics,te.alpha=r,this.addChild(te),h&&te.drag({localBounds:!0})),this.update=function(){d&&(ee.clear(),oe.clear()),le=d?ve.size+2*ve.spacing:0,se=Z.getBounds()?Z.getBounds().width:0,ce=Z.getBounds()?Z.getBounds().height:0,ie=g&&a-w<se&&(d||!0===u||"auto"==u||"horizontal"==u),ae=p&&l-C<ce&&(d||!0===u||"auto"==u||"vertical"==u),V.scrollXMax=se+2*w-a+(ae?le+ve.margin:0),V.scrollYMax=ce+2*C-l+(ie?le+ve.margin:0),q.clear();var e=s/2,t=s/2,o=a-(ae&&d?ve.size+2*ve.spacing:0)-(ae?0:s),n=l-(ie&&d?ve.size+2*ve.spacing:0)-(ie?0:s);q.f("rgba(0,0,0,0)").rc(e,t,o,n,K,K,ae&&d?0:c,ie&&d?0:c),G.setBounds(V.getBounds().x,V.getBounds().y,V.getBounds().width,V.getBounds().height),To.expand(G,0),y||(U.graphics.c().f("red").dr(e,t,o,n),Z.hitArea=U);var r,i,e=Math.max(c,Math.min(ve.corner,ve.spacing)),t=e+s/2,o=e+(ae?le:0)+s/2,n=e+s/2,e=e+(ie?le:0)+s/2;ie&&d&&(r=Math.max(ve.minSize,(a-t-o)*(a-t-o)/(se+w+ve.margin)),ee.f(ve.color).rr(0,0,r,ve.size,ve.corner),$.x=t,$.y=l-ve.size-ve.spacing,ne=new To.Proportion(-V.scrollXMax,0,t,a-r-o,-1),h&&($.setBounds(0,0,r,ve.size),i=new createjs.Rectangle(t,$.y,a-r-t-o,0),$.dragBoundary(i),$.proportion=new To.Proportion(i.x,i.x+i.width,0,-V.scrollXMax),$.off("pressmove",ue),ue=$.on("pressmove",function(){V.dispatchEvent("scrolling"),U&&(U.x=-Z.x,U.y=-Z.y),Z.x=$.proportion.convert($.x)}))),ae&&d&&(r=Math.max(ve.minSize,(l-n-e)*(l-n-e)/(ce+C+ve.margin)),oe.f(ve.color).rr(0,0,ve.size,r,ve.corner),te.x=a-ve.size-ve.spacing,te.y=n,re=new To.Proportion(-V.scrollYMax,0,n,l-r-e,-1),h&&(te.setBounds(0,0,ve.size,r),i=new createjs.Rectangle(te.x,n,0,l-r-n-e),te.dragBoundary(i),te.proportion=new To.Proportion(i.y,i.y+i.height,0,-V.scrollYMax),te.off("pressmove",de),de=te.on("pressmove",function(){V.dispatchEvent("scrolling"),U&&(U.x=-Z.x,U.y=-Z.y),Fe=Z.y=te.proportion.convert(te.y)}))),De(),clearTimeout(V.d2Timeout),V.d2Timeout=setTimeout(function(){$&&$.proportion&&(Z.x=$.proportion.convert($.x)),te&&te.proportion&&(Z.y=te.proportion.convert(te.y))},50),clearTimeout(V.dTimeout),V.dTimeout=setTimeout(function(){xe()},300),xe()},this.resize=function(e,t){zot(e)&&(e=a),zot(t)&&(t=l);var o=20;T&&(o=he.x+he.width+10),e<o&&(e=o),t<20&&(t=20),a=e,l=t,J();for(var n=0;n<Z.numChildren;n++){var r=Z.getChildAt(n);"Wrapper"==r.type&&Ce(r)}return V.update(),Fe=Z.y,k&&He.immediate(Fe),V},zot(T)||(zot(S)&&(S=!0),"string"==typeof T&&(T=new To.Label({text:T,color:A,size:null!=W.size?W.size:20,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),he=V.titleBarLabel=T,zot(P)&&(P="rgba(0,0,0,.2)"),V.titleBar=T=new To.Container(a,B,null,null,!1).centerReg(V).mov(0,-l/2-B/2),ge=V.titleBar.backing=new To.Rectangle(a+s,B,P,null,null,[.95*c,.95*c,0,0],!0,null,!1).center(T),he.center(T).pos({x:Math.max(c/2,Math.max(10,n)),reg:!0}),V.regX=0,V.regY=-B,V.setBounds(0,-B,a,l+B),S?(T.cursor="pointer",T.on("mousedown",function(){V.drag({rect:E,currentTarget:!0,onTop:I})}),T.on("pressup",function(){V.noDrag(!1)})):T.on("mousedown",function(){})),M&&(zot(O)&&(O="#555"),(M=V.close=new To.Shape(-40,-40,80,80,null,!1)).graphics.f(O).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),(T?M.centerReg(V).scaleTo(T,null,50).pos({x:a-Math.max(c/2,10)-M.width/2,y:B/2,reg:!0}):M.sca(.3).pos(Math.max(c/2,10)/2,M.height/2,!0,!1,V)).expand(40),M.cursor="pointer",M.expand(),M.on((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){var e=V.stage;V.removeFrom(),V.dispatchEvent("close"),e&&e.update()})),zot(T)||L&&(zot(_)&&(_="#555"),L=V.fullSize=new To.Rectangle(80,80,To.faint,_,16),pe=(new To.Shape).s(_).ss(16).mt(-19.6,-20.6).lt(-19.6,-40).lt(40,-40).lt(40,20.7).lt(19.6,20.7).lt(19.6,40).lt(-40,40).lt(-40,-20.6).lt(-19.6,-20.6).lt(19.6,-20.6).lt(19.6,20.7).addTo(V.fullSize).mov(40,40).alp(0),L.centerReg(V).scaleTo(T,null,42).pos({x:a-Math.max(c/2,10)-L.width/2,y:B/2,reg:!0}).expand(40),V.close&&L.mov(-M.width-10),L.cursor="pointer",L.expand(),V.fullCheck=!1,fe=a,me=l,ze=V.x,ye=V.y,L.on((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){V.fullCheck?(V.resize(fe,me-T.height),V.x=ze,V.y=ye,V.fullCheck=!1,pe.alpha=0,V.fullSize.getChildAt(0).alpha=1):(fe=V.width,me=V.height,ze=V.x,ye=V.y,V.resize(V.parent.width,V.parent.height),V.x=0,V.y=0,V.fullCheck=!0,pe.alpha=1,V.fullSize.getChildAt(0).alpha=.01),V.stage&&V.stage.update()})),Y&&((be=V.resizeHandle=new To.Rectangle(25,25,To.grey,To.white).alp(.01).centerReg().rot(45).hov(.5).loc(0,0,V).mov(V.width,V.height-(V.titleBar?V.titleBar.height:0)).drag()).on("pressmove",function(){V.resize(be.x,be.y)}),be.on("pressup",we),V.titleBar&&V.titleBar.on("pressup",we)),this.add=function(e,t){if(Ne(e),e.getBounds())return t&&V.removeAll(),Z.addChild(e),"Wrapper"==e.type&&(te.alpha=0,g=!1,e.wrapperLastAlpha=e.alpha,e.alpha=0,this.added(function(){Ce(e),V.resize(),$.alpha=1,te.alpha=1})),0==e.x&&(e.x=w),0==e.y&&(e.y=C),V.update(),V;zog("SwipeBox.add() - please add content with bounds set")},this.remove=function(e){return Z.removeChild(e),V.update(),V};var ke,Te,Ae,Pe,Be,Se,Ee,Ie,Me,Oe,je,Le,_e=!(this.removeAll=function(){return Z.removeAllChildren(),V.update(),V});function Ye(){Fe=Z.y,k&&He.immediate(Fe),d&&De()}function De(){V.dispatchEvent("scrolling"),U&&(U.x=-Z.x,U.y=-Z.y),ie&&d&&($.x=ne.convert(Z.x)),ae&&d&&(te.y=re.convert(Z.y))}function Xe(e){zot(e)&&(e=100),Ne(V),u&&setTimeout(function(){Z&&(To.drag({obj:Z,currentTarget:!0,localBounds:!0,slide:f,slideDamp:m,slideSnap:!((!g||!0!==u&&"auto"!=u&&"horizontal"!=u)&&(!p||!0!==u&&"auto"!=u&&"vertical"!=u))&&z}),Z.removeAllEventListeners("slidestart"),Z.on("slidestart",function(){V.dispatchEvent("slidestart")}),Z.removeAllEventListeners("slidestop"),Z.on("slidestop",function(e){f&&Re(),V.dispatchEvent("slidestop")}),Z.getBounds()&&0<Z.getBounds().width&&xe())},e)}function Re(e){To.Ticker.remove(Ye),_e=!1,ie&&i&&d&&To.animate($,{alpha:0},ve.fadeTime),ae&&i&&d&&To.animate(te,{alpha:0},ve.fadeTime)}function We(){if(!Z.stage)return Le||(V.dispatchEvent("hoverout"),Le=!0),void To.Ticker.remove(We);Math.abs(Se-V.windowMouseX)>je||Math.abs(Ee-V.windowMouseY)>je?(Le||(V.dispatchEvent("hoverout"),Le=!0),Be=Date.now(),Se=V.windowMouseX,Ee=V.windowMouseY):Date.now()-Be>Oe&&((Math.abs(Ie-V.windowMouseX)>je||Math.abs(Me-V.windowMouseY)>je)&&(V.contentMouse=Z.globalToLocal(V.windowMouseX,V.windowMouseY),V.dispatchEvent("hoverover"),Ie=V.windowMouseX,Me=V.windowMouseY,Le=!1),Be=Date.now())}u&&Z.on("mousedown",function(){_e||To.Ticker.add(Ye,Z.stage),_e=!0,ie&&d&&i&&To.animate($,{alpha:r},ve.showTime),ae&&d&&i&&To.animate(te,{alpha:r},ve.showTime)}),this.on("added",function(){Xe(50)},null,!0),this.cancelCurrentDrag=function(){V.content&&V.content.noDrag(!1),setTimeout(function(){Z&&(To.drag({obj:Z,currentTarget:!0,localBounds:!0,slide:f,slideDamp:m,slideSnap:!((!g||!0!==u&&"auto"!=u&&"horizontal"!=u)&&(!p||!0!==u&&"auto"!=u&&"vertical"!=u))&&z}),Z.getBounds()&&0<Z.getBounds().width&&xe())},300)},this.added(function(e){Te=(ke=e).on("stagemousemove",function(e){V.windowMouseX=e.stageX/To.scaX,V.windowMouseY=e.stageY/To.scaY})}),f?Z.on("slidestop",Re):Z.on("mousedown",function(){Z.stage.on("stagemouseup",Re,null,!0)}),j&&(V.blurEvent=function(){V.cancelCurrentDrag(),Re()},document.window.addEventListener("blur",V.blurEvent)),y&&(Z.on("mousedown",function(e){ke=e.target.stage,Ae=e.stageX/To.scaX,Pe=Date.now()}),Z.on("click",function(e){Date.now()-Pe<600&&Math.abs(e.stageX/To.scaX-Ae)<5&&(V.contentMouse=Z.globalToLocal(e.stageX/To.scaX,e.stageY/To.scaY),V.dispatchEvent("select"))}),Z.on("mouseover",function(){Be=Date.now(),To.Ticker.add(We,Z.stage)}),Z.on("mouseout",function(){Le||(V.dispatchEvent("hoverout"),Le=!0);To.Ticker.remove(We)}),Me=Ie=Ee=Se=0,Oe=300,Le=!(je=2));var Fe=V.scrollY;V.scrollWindow=function(e){var t;ae&&V.stage&&V.hitTestPoint(V.windowMouseX,V.windowMouseY)&&V.contains(V.stage.getObjectUnderPoint(V.windowMouseX*To.scaX,V.windowMouseY*To.scaY))&&(zot(e)&&(e=event),zot(t=e.detail?-19*e.detail:e.wheelDelta)&&(t=-19*e.deltaY),Fe+=t,Fe=Math.max(-V.scrollYMax,Math.min(0,Fe)),k||(V.scrollY=Fe,Z.stage.update()))},x&&(window.addEventListener("mousewheel",V.scrollWindow),window.addEventListener("wheel",V.scrollWindow),window.addEventListener("DOMMouseScroll",V.scrollWindow));var He,Ve=!1;function Ne(e){k&&!Ve&&e.stage&&(Ve=!0,He=new To.Damp(V.scrollY,k),V.dampTicker=To.Ticker.add(function(){_e||zot(Fe)||(V.scrollY=He.convert(Fe))},e.stage))}this._enabled=!0,Object.defineProperty(V,"enabled",{get:function(){return V._enabled},set:function(e){e?Xe():(clearTimeout(V.dTimeout),To.noDrag(Z)),Ge(V,e)}}),this._scrollEnabled=!0,Object.defineProperty(V,"scrollEnabled",{get:function(){return V._scrollEnabled},set:function(e){e?(Xe(),h&&(ue&&($.mouseEnabled=!0),de&&(te.mouseEnabled=!0)),window.addEventListener("mousewheel",V.scrollWindow),window.addEventListener("wheel",V.scrollWindow),window.addEventListener("DOMMouseScroll",V.scrollWindow)):(clearTimeout(V.dTimeout),To.noDrag(Z),h&&(ue&&($.mouseEnabled=!1),de&&(te.mouseEnabled=!1)),window.removeEventListener("mousewheel",V.scrollWindow),window.removeEventListener("wheel",V.scrollWindow),window.removeEventListener("DOMMouseScroll",V.scrollWindow)),V._scrollEnabled=e}}),Object.defineProperty(V,"scrollX",{get:function(){return Z.x},set:function(e){Z.x=e,clearTimeout(V.d2Timeout),Z.zimDragImmediate&&Z.zimDragImmediate(Z.x,Z.y),De()}}),Object.defineProperty(V,"scrollY",{get:function(){return Z.y},set:function(e){Z.y=e,clearTimeout(V.d2Timeout),Z.zimDragImmediate&&Z.zimDragImmediate(Z.x,Z.y),De()}}),Object.defineProperty(V,"backgroundColor",{get:function(){return o},set:function(e){o=e,J()}}),!1!==D&&To.styleTransforms(this,W),this.clone=function(e){zot(e)&&(e=!0);var t=V.cloneProps(new To.Window(a,l,o,F,H,n,c,u,d,h,ve.color,r,i,g,p,f,m,z,y,b,v,w,C,T,A,P,B,S,E,I,M,O,j,L,_,Y,D,X,R));return e&&(V.content.cloneChildren(t.content),t.update()),t},this.doDispose=function(e,t,o){return x&&(window.removeEventListener("mousewheel",V.scrollWindow),window.removeEventListener("wheel",V.scrollWindow),window.removeEventListener("DOMMouseScroll",V.scrollWindow)),Te&&ke&&ke.off("stagemousemove",Te),V.resizeHandle&&V.resizeHandle.removeAllEventListeners(),V.blurEvent&&document.window.removeEventListener("blur",V.blurEvent),To.Ticker.remove(We),zot(Ye)||To.Ticker.remove(Ye),o||this.zimContainer_dispose(!0),!(Z=V.content=null)}},To.extend(To.Window,To.Container,["clone","dispose"],"zimContainer",!1),To.Window.prototype.dispose=function(e){return this.doDispose(null,null,e)},To.Page=function(o,n,r,i,a,l,s,c,u,d,h){if(t=zob(To.Page,arguments,"width, height, color, color2, vertical, pattern, scalePattern, cache, style, group, inherit",this))return t;z_d("58.3"),this.group=d;var e=!1===u?{}:To.getStyle("Page",this.group,h);zot(o)&&(o=(null!=e.width?e:zdf).width),zot(n)&&(n=(null!=e.height?e:zdf).height),this.zimContainer_constructor(0,0,o,n,!1),this.type="Page";var g=this;zot(a)&&(a=null==e.vertical||e.vertical),zot(r)&&(r=null!=e.color?e.color:To.light),zot(i)&&(i=null!=e.color2?e.color2:null),zot(l)&&(l=null!=e.pattern?e.pattern:null),zot(s)&&(s=null!=e.scalePattern?e.scalePattern:"fill"),zot(c)&&(c=null!=e.cache&&e.cache),zot(i)||(r=new To.GradientColor([r,i],[0,1],0,0,a?0:o,a?n:0),i=null);var t=this.backing=new To.Rectangle({width:o,height:n,color:r,style:!1}).addTo(this);!zot(c)||zot(i)&&zot(l)||(c=!0),c&&t.cache(),zot(l)||(this.pattern=l.addTo(this),s&&l.scaleTo(this,100,100,s).center(this),c&&l.cache()),Object.defineProperty(g,"color",{get:function(){return r},set:function(e){zot(e)&&(e="black"),r=e,g.backing.color=e}}),!1!==u&&To.styleTransforms(this,e),this.clone=function(e){zot(e)&&(e=!1),r.type&&(i=null);var t=g.cloneProps(new To.Page(o,n,r,i,a,l,s,c,u,d,h));return e&&g.cloneChildren(t),t}},To.extend(To.Page,To.Container,["clone"],"zimContainer",!1),To.Layer=function(e,t,n,l,s,c,o,r,u,d,i,a,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B){if(Y=zob(To.Layer,arguments,"width, height, titleBar, titleBarContainer, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, borderWidth, borderColor, dashed, transformObject, titleBarWidth, titleBarHeight, titleBarX, titleBarY, titleBarDraggable, close, closeColor, closeBackgroundColor, closeIndicatorColor, anchor, style, group, inherit",this))return Y;z_d("58.5"),this.group=P;var S=!1===A?{}:To.getStyle("Layer",this.group,B);zot(e)&&(e=null!=S.width?S.width:500),zot(t)&&(t=null!=S.height?S.height:500),this.zimContainer_constructor(0,0,e,t,!1),this.type="Layer";var E=this;E.distX=40,E.distY=0,zot(n)&&(n=null!=S.titleBar?S.titleBar:"LAYER");var I=n,M=n,O=!0;zot(s)&&(s=null!=S.backgroundColor?S.backgroundColor:"#eee"),zot(c)&&(c=null!=S.rollBackgroundColor?S.rollBackgroundColor:"#fff"),zot(o)&&(o=null!=S.selectedBackgroundColor?S.selectedBackgroundColor:"#666"),zot(u)&&(u=null!=S.color?S.color:"#666"),zot(d)&&(d=null!=S.rollColor?S.rollColor:"#666"),zot(i)&&(i=null!=S.selectedColor?S.selectedColor:"#ddd"),zot(h)&&(h=null!=S.borderWidth?S.borderWidth:1),zot(g)&&(g=null!=S.borderColor?S.borderColor:s),(g<0||h<0)&&(g=h=null),zot(p)&&(p=null==S.dashed||S.dashed),zot(f)&&(f=null!=S.titleBar?S.titleBar:null),zot(m)&&(m=null!=S.titleBarWidth?S.titleBarWidth:100);var j=m;if(zot(z)&&(z=null!=S.titleBarHeight?S.titleBarHeight:40),zot(y)&&(y=null!=S.titleBarX?S.titleBarX:null),zot(b)&&(b=null!=S.titleBarY?S.titleBarY:null),zot(v)&&(v=null==S.titleBarDraggable||S.titleBarDraggable),zot(w)&&(w=null==S.close||S.close),zot(C)&&(C=null!=S.closeColor?S.closeColor:o),zot(x)&&(x=null!=S.closeBackgroundColor?S.closeBackgroundColor:o),zot(k)&&(k=null!=S.closeIndicatorColor?S.closeIndicatorColor:i),zot(T)&&(T=null==S.anchor||S.anchor),v||(T=!1),E.anchor=T,w&&(m+=30),f=To.merge({borderColor:o},f,{events:!0,visible:!1,ghostColor:g,ghostWidth:h,ghostDashed:p,ghostHidden:!0}),zot(l)&&(l=null!=S.titleBarContainer?S.titleBarContainer:null),zot(l)){if(!zdf)return void zog("zim Layer(): Please pass in a reference to a container with bounds set.");l=zdf.stage}var L;E.active=!1,E.turnOff=function(e,t){E.active=!1,w&&(E.checkBox.visible=!1),E.transformControls.remove(),E.mouseChildren=!0,E.button.backgroundColor=s,E.button.rollBackgroundColor=c,E.button.color=u,E.button.rollColor=u,E.transformControls.allowToggleOff(),E.resizeChildren&&E.resizeChildren()},E.turnOn=function(){E.active=!0,w&&(E.checkBox.visible=!0,E.checkBox.checked=!0),E.button.backgroundColor=o,E.button.rollBackgroundColor=o,E.button.color=i,E.button.rollColor=i,E.mouseChildren=!1,E.transformControls.add(),E.transformControls.allowToggleOn()},E.titleBarPos=function(e,t){if(E.titleBar)return E.titleBar.pos?(E.titleBar.pos(e,t,arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]),L.update()):(E.distX=e,E.distY=t),O=!1,E};var _=E.visible;E.visible=!1;var Y=Ao();this.added(function(a){L=a,E.transform(f),0<=h&&E.transformControls.hideGhost(),setTimeout(function(){E.visible=_,0<=h&&setTimeout(function(){E.transformControls.showGhost(),E.stage&&E.stage.update()},100),L=a;var e,t,r=E.titleBar=new To.Container(m,z).reg(0,z).loc(E,null,l).mov(E.distX,E.distY);function o(e){var t,o,n;O&&v&&(t=l.localToLocal(r.x-E.distX,r.y-E.distY,E.parent),o=E.localToLocal(E.regX,E.regY,E.parent),n=E.localToLocal(0,0,E.parent),E.x=t.x+(o.x-n.x),E.y=t.y+(o.y-n.y),E.transformControls.resize(e),i(E))}function i(e){e.loop(function(e){"Layer"==e.type&&(E.titleBarDraggable&&e.move(),e.transformControls.ghost&&e.transformControls.resize(),i(e))})}function n(){return 0==r.x||(r.y==r.height||(r.x==l.width-r.width||r.y==l.height))}v&&r.drag({all:!0,boundary:new To.Boundary(0,z,l.width-m,l.height-z),localBounds:!0}),40==E.distX&&0==E.distY||r.pos(E.distX,E.distY),w&&(E.checkBox=new To.CheckBox({borderColor:C,backgroundColor:x,indicatorColor:k,size:20,startChecked:!0}).center(r).pos(0,null,!0).change(function(){E.turnOff(!0,!0)}),E.checkBox.visible=!1),r.mouseChildren=!0,(r.layer=E).resetTitleBar=function(){E.distX=40,E.distY=0,O=!0,E.move(!0),E.stage&&E.stage.update()},"string"!=typeof M&&"number"!=typeof M||(M=new To.Label({text:M,color:u,rollColor:d,size:null!=S.size?S.size:18,group:this.group})),E.label=M,E.label.center(r),E.button=new To.Button({shadowBlur:-1,width:j,height:z-1,label:E.label,color:u,rollColor:d,backgroundColor:s,rollBackgroundColor:c,corner:null!=S.corner?S.corner:0,inherit:To.copy(S)}).addTo(r),E.button.on("mousedown",function(){l.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff(!0,!0)}),E.active||E.turnOn(),r.top()}),E.button.on("pressmove",function(){o()}),E.button.on("pressup",function(){o(!0);var e=E.localToLocal(0,0,l);E.distX=r.x-e.x,E.distY=r.y-e.y,r.top(),!n()&&v&&(e=E.localToGlobal(0,0),E.button.hitTestPoint(e.x,e.y)&&E.resetTitleBar())}),E.button.on("dblclick",function(){v&&E.resetTitleBar()}),E.turnOff(),E.on("transformed",function(e){"move"!=e.transformType&&"size"!=e.transformType&&"stretch"!=e.transformType&&"rotate"!=e.transformType||(v&&E.move(),i(E))}),E.move=function(e){!e&&!O&&E.anchor&&n()||(r.loc(E.localToLocal(0,0,l)).mov(E.distX,E.distY),r.x<0&&(O=!1,r.x=0),r.y<r.height&&(O=!1,r.y=r.height),r.x>l.width-r.width&&(O=!1,r.x=l.width-r.width),r.y>l.height&&(O=!1,r.y=l.height),E.anchor||(O=!0))},E.on("transformhide",function(){E.turnOff(!0,!0),l.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()})}),E.resizeChildren=function(e){E.transformControls.resize(e),E.loop(function(e){e.transformControls&&(e.transformControls.visible&&e.transformControls.hide(),"Layer"==e.type?e.resizeChildren():e.transformControls.resize())})},E.resize=function(e){return E.move(),E.resizeChildren(e),E},E.toggled=!1,E.toggle=function(e){return zot(e)?E.toggled=!E.toggled:E.toggled=e,E.toggled?(l.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()}),E.turnOn()):(r.top(),E.turnOff(),l.loop(function(e){e&&e!=r&&e.layer&&e.layer.turnOff&&e.layer.active&&e.layer.turnOff()})),E.stage&&E.stage.update(),E},Object.defineProperty(E,"titleBarDraggable",{get:function(){return v},set:function(e){(v=e)?r.drag({all:!0,boundary:To.Boundary(0,40,l.width-m,l.height-z),localBounds:!0}):r.noDrag(!1)}}),E.stageUpEvent=L.on("stagemouseup",function(){E.transformControls.visible&&r.top()}),zot(y)&&zot(b)||(O=!1,e=zot(y)?r.x:y,t=zot(b)?r.y-z:b,E.titleBarStartX=y,E.titleBarStartY=b,E.titleBarPos(e,t),t=E.parent.localToLocal(E.x,E.y,l),E.distX=r.x-t.x,E.distY=r.y-t.y)})},"s"==Y?.05:50),!1!==A&&To.styleTransforms(this,S),this.clone=function(){return E.cloneProps(new To.Layer(e,t,I,l,s,c,o,r,u,d,i,a,h,g,p,f,j,z,y,b,v,w,C,x,k,T,A,this.group,B))},this.dispose=function(e,t,o){return E.stageUpEvent&&L.off("stagemouseup",E.stageUpEvent),l&&l.loop(function(e){e.layer=null}),E.transformControls.dispose(),E.transformControls=null,o||this.zimContainer_dispose(!0),E.titleBar.layer=null,E.titleBar.dispose(),E.checkBox=E.button=null,!(n=E.titleBar=f=null)}},To.extend(To.Layer,To.Container,["clone","dispose"],"zimContainer",!1),To.Waiter=function(a,l,e,t,o,n,r,s,i,c,u){if(z=zob(To.Waiter,arguments,"container, speed, foregroundColor, backgroundColor, corner, shadowColor, shadowBlur, fadeTime, style, group, inherit",this))return z;z_d("59"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Waiter",this.group=c;var d=!1===i?{}:To.getStyle(this.type,this.group,u),h=Ao(l);zot(l)&&(l=null!=d.speed?d.speed:"s"==h?.6:600),zot(e)&&(e=null!=d.foregroundColor?d.foregroundColor:"white"),zot(t)&&(t=null!=d.backgroundColor?d.backgroundColor:"orange"),zot(o)&&(o=null!=d.corner?d.corner:16),zot(n)&&(n=null!=d.shadowColor?d.shadowColor:"rgba(0,0,0,.3)"),zot(r)&&(r=null!=d.shadowBlur?d.shadowBlur:14),zot(s)&&(s=null!=d.fadeTime?d.fadeTime:0);this.setBounds(-52,-20,104,40);var g,p=this,f=this.display=new To.Shape({style:!1});this.addChild(f),f.setBounds(0,0,104,40),f.regX=52,f.regY=20;var m=f.graphics;m.f(t);var z=o;Array.isArray(z)||(z=[o,o,o,o]),m.rc(0,0,104,40,z[0],z[1],z[2],z[3]),-1!=n&&0<r&&(f.shadow=new createjs.Shadow(n,3,3,r)),f.on("click",function(e){e.stopImmediatePropagation()});var y,b=new To.Container({style:!1});this.addChild(b);for(var v,w=0;w<3;w++)(y=new createjs.Shape).graphics.f(e).dc(0,0,12),y.x=32*(w-1),b.addChild(y),y.cache(-12,-12,24,24),y.alpha=0;this.hide=function(){function e(){var e;p.parent&&p.parent.removeChild(p),(g=p.stage)&&g.update(),p.zimAccessibility&&((e=p.zimAccessibility).resize(p),(v||p.zimTabTag.nextSibling).focus(),setTimeout(function(){e.talk("Waiter has finished.")},50))}return 0<s?p.animate({obj:{alpha:0},time:s,call:e}):e(),p.toggled=!1,p};var C=[];this.show=function(){var e,t="zim display - Waiter(): Please pass in a reference to a container with bounds set as first parameter to Waiter";if(zot(a)){if(!zdf)return void zog(t);a=zdf.stage}else{if(!a.getBounds)return void zog(t);if(zot(a.stage))return void zog("zim display - Waiter(): The container must have a stage property")}for(var o,n=0,r=l*("s"==h?1e3:1),i=0;i<b.numChildren;i++)b&&C.push(setTimeout(function(){e=b.getChildAt(n),createjs.Tween.get(e,{loop:!0}).to({alpha:1},r/3/2).wait(r/3).to({alpha:0},r/3).wait(r-r/3-r/3/2),n++},i*r/3));return p.ticker=createjs.Ticker.on("tick",function(){a.stage.update()}),p.x=a.getBounds().width/2,p.y=a.getBounds().height/2,a.addChild(p),0<s&&(p.alpha=0,p.animate({alpha:1},s)),p.zimAccessibility&&(o=p.zimAccessibility,setTimeout(function(){o.activatedObject&&(v=o.activatedObject.zimTabTag)},50),o.resize(p),o.talk(p.zimTabTag.getAttribute("aria-label"))),p.toggled=!0,p},!(p.toggle=function(e){return!0!==e&&(!1===e||p.parent)?p.hide():p.show(),p})!==i&&To.styleTransforms(this,d),this.clone=function(){return p.cloneProps(new To.Waiter(a,l,e,t,o,n,r,s,i,this.group,u))},this.dispose=function(e,t,o){p.ticker&&createjs.Ticker.off("tick",p.ticker),createjs.Tween.removeTweens(p),p.removeFrom();for(var n=0;n<b.numChildren;n++){var r=b.getChildAt(n);clearInterval(C[n]),createjs.Tween.removeTweens(r)}return o||this.zimContainer_dispose(!0),!0}},To.extend(To.Waiter,To.Container,["clone","dispose"],"zimContainer",!1),To.ProgressBar=function(t,o,n,r,i,a,l,e,s,c,u,d,h,g,p,f,m,z,y,b,v){if(T=zob(To.ProgressBar,arguments,"barType, foregroundColor, backgroundColor, borderColor, borderWidth, padding, label, color, labelPosition, percentage, corner, shadowColor, shadowBlur, backing, delay, fastClose, container, autoHide, style, group, inherit",this))return T;z_d("59.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ProgressBar",this.group=b;var w=!1===y?{}:To.getStyle(this.type,this.group,v);zot(o)&&(o=null!=w.foregroundColor?w.foregroundColor:"#acd241"),zot(n)&&(n=null!=w.backgroundColor?w.backgroundColor:"#444"),zot(r)&&(r=null!=w.borderColor?w.borderColor:n),zot(i)&&(i=null!=w.borderWidth?w.borderWidth:null),zot(s)&&(s=null!=w.labelPosition?w.labelPosition:"bottom"),zot(t)&&(t=null!=w.barType?w.barType:"circle"),zot(a)&&(a=null!=w.padding?w.padding:"circle"==t?2:-.5),zot(u)&&(u=null!=w.corner?w.corner:15),zot(d)&&(d=null!=w.shadowColor?w.shadowColor:"rgba(0,0,0,.3)"),zot(h)&&(h=null!=w.shadowBlur?w.shadowBlur:14),zot(g)&&(g=null!=w.backing?w.backing.clone():null),zot(f)&&(f=null==w.fastClose||w.fastClose),r<0||i<0?r=i=null:null!=r&&null==i&&(i="circle"==t?10:2);var C=Ao(p);zot(p)&&(p=null!=w.delay?w.delay:"s"==C?.1:100),zot(z)&&(z=null==w.autoHide||w.autoHide),zot(l)&&(l=null!=w.label?w.label:null),zot(e)&&(e=null!=w.color?w.color:o),"string"!=typeof l&&"number"!=typeof l||(l=new To.Label({text:l,color:e,backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group}));l&&l.text,!zot(c)&&zot(l)&&(l=new To.Label("")),this.label=l;var x,k,T,A,P,B,S=30,E=this,I=0;function M(e){var t,o;return E.backing?(t=E.getChildIndex(E.backing),E.removeChild(E.backing)):t=E.numChildren,E.border&&E.removeChild(E.border),zot(e)||"Pattern"!=e.type?e=E.backing=(zot(e)?new To.Rectangle(x,S,n,r,i,u,null,null,!1):g).addTo(E,t):(o=e,((e=E.backing=new To.Rectangle(x,S,n,null,null,u,null,null,!1).addTo(E,t)).pattern=o).center(e),e.getBounds(),o.setMask(e.shape),i&&(E.border=new To.Rectangle(x,S,"rgba(0,0,0,0)",r,i,u,null,null,!1).addTo(E,t+1))),e}function O(e){"circle"==t?A.graphics.c().mt(0,0).s(o).ss(i-2*a+.5).a(0,0,x,0,360*e/100*Math.PI/180):(P.sca(e/100,1),A.setMask(P)),zot(c)||(l.text=l.startText+" "+Math.min(Math.round(e),100)+"%"),z&&f&&100<=Math.round(e)&&(E.timeOut=setTimeout(function(){E.hide()},200)),!E.dispatched&&100<=Math.round(e)&&(E.dispatchEvent("complete"),E.dispatched=!0,setTimeout(function(){E&&(E.dispatched=!1)},100)),E.stage&&E.stage.update()}E.visible=!1,setTimeout(function(){E.visible=!0,E.stage&&E.stage.update()},p),"circle"==t?(x=20,g=this.backing=new To.Circle(x,"rgba(0,0,0,0)",n,i,null,null,null,null,!1).addTo(E),A=this.bar=new To.Shape({style:!1}).addTo(E).loc(g.x,g.y).rot(-90)):(x=200,-1!=d&&0<h&&(new To.Rectangle(x-2,S-2,n,null,null,u,null,null,!1).addTo(this).shadow=new createjs.Shadow(d,3,3,h)),g=M(g),k=u,Array.isArray(k)||(k=[u,u,u,u]),T=1.2*(a+i/2),A=this.bar=new To.Rectangle(x-1.8*(a+i/2),S-1.8*(a+i/2),o,null,null,[k[0]-T,k[1]-T,k[2]-T,k[3]-T],null,null,!1).center(this),P=this.mask=new To.Rectangle(x-1.8*(a+i/2),S-1.8*(a+i/2),null,null,null,null,null,null,!1).center(this).alp(0).sca(0,1),A.setMask(P)),E.setBacking=function(e){M(e),E.stage&&E.stage.update()},g.on("click",function(e){e.stopImmediatePropagation()}),zot(l)||(l.scaleX=l.scaleY=.8,l.startText=l.text,zot(c)||(l.text=l.startText+"  0%"),l.center(E),"above"==s?l.y-=60:l.y+=60,l.alpha=.8),this.hide=function(){var e,t=E.stage;return E.parent&&E.parent.removeChild(E),"Pattern"==E.backing.type&&E.backing.pauseInterval&&E.backing.pauseInterval(),t&&t.update(),E.zimAccessibility&&((e=E.zimAccessibility).resize(E),(B||E.zimTabTag.nextSibling).focus(),setTimeout(function(){e.talk("Progress Bar has finished.")},50)),E.toggled=!1,E},this.show=function(){var e,t="zim display - ProgressBar(): Please pass in a reference to a container with bounds set as first parameter of the ProgressBar";if(zot(m)){if(!zdf)return void zog(t);m=zdf.stage}else{if(!m.getBounds)return void zog(t);if(zot(m.stage))return void zog("zim display - Waiter(): The container must have a stage property")}return E.timeOut&&clearTimeout(E.timeOut),O(0),E.zimActiveLoader&&E.zimActiveLoader.on("progress",function(e){O(I=100*e.progress)}),E.center(m),"Pattern"==E.backing.type&&E.backing.pauseInterval&&E.backing.pauseInterval(!1),E.zimAccessibility&&(e=E.zimAccessibility,setTimeout(function(){e.activatedObject&&(B=e.activatedObject.zimTabTag)},50),e.resize(E),e.talk(E.zimTabTag.getAttribute("aria-label"))),E.toggled=!0,E},E.toggle=function(e){return!0!==e&&(!1===e||E.parent)?E.hide():E.show(),E},E.run=function(e,t){zot(t)||(z=t),zot(e)&&(e="s"==C?3:3e3),Po(e,C);var o=e*("s"==C?1e3:1);E.toggle(!0),E.runInterval&&clearInterval(E.runInterval),E.percent=0;var n=Date.now();return E.runInterval=setInterval(function(){E.percent=(Date.now()-n)/o*100,100<=E.percent&&(E.percent=100,clearInterval(E.runInterval))},30),E},E.dispatched=!1,Object.defineProperty(E,"percent",{get:function(){return I},set:function(e){O(I=e)}}),!1!==y&&To.styleTransforms(this,w),this.clone=function(){return E.cloneProps(new To.ProgressBar(t,o,n,r,i,a,l,e,s,c,u,d,h,g,p,f,m,z,y,this.group,v))},this.dispose=function(e,t,o){return"Pattern"==E.backing.type&&E.backing.clearInterval&&E.backing.clearInterval(),E.runInterval&&clearInterval(E.runInterval),o||this.zimContainer_dispose(!0),!0}},To.extend(To.ProgressBar,To.Container,["clone","dispose"],"zimContainer",!1),To.Indicator=function(e,t,n,r,i,o,a,l,s,c,u,d,h,g,p,f,m,z,y,b){if(k=zob(To.Indicator,arguments,"width, height, num, foregroundColor, backgroundColor, borderColor, borderWidth, backdropColor, corner, indicatorType, fill, scale, lightScale, interactive, shadowColor, shadowBlur, selectedIndex, style, group, inherit",this))return k;z_d("60"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Indicator",this.group=y;var v=!1===z?{}:To.getStyle(this.type,this.group,b);zot(e)&&(e=null!=v.width?v.width:300),zot(t)&&(t=null!=v.height?v.height:50),zot(n)&&(n=null!=v.num?v.num:6),zot(r)&&(r=null!=v.foregroundColor?v.foregroundColor:"#f58e25"),zot(i)&&(i=null!=v.backgroundColor?v.backgroundColor:"#666"),i<0&&(i=null!=v.backgroundColor?v.backgroundColor:"rgba(0,0,0,.01)"),zot(o)&&(o=null!=v.borderColor?v.borderColor:null),zot(a)&&(a=null!=v.borderWidth?v.borderWidth:null),o<0||a<0?o=a=null:null!=o&&null==a&&(a=1),zot(l)&&(l=null!=v.backdropColor?v.backdropColor:-1),zot(s)&&(s=null!=v.corner?v.corner:0),zot(c)&&(c=null!=v.indicatorType?v.indicatorType:"dot"),zot(u)&&(u=null!=v.fill&&v.fill),zot(d)&&(d=null!=v.scale?v.scale:1),zot(h)&&(h=null!=v.lightScale?v.lightScale:1),zot(g)&&(g=null!=v.interactive&&v.interactive),zot(p)&&(p=null!=v.shadowColor?v.shadowColor:"rgba(0,0,0,.3)"),zot(f)&&(f=null!=v.shadowBlur?v.shadowBlur:5);var w,C=(zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",x=this;this.lights=[];var k;new To.Container({style:!1});-1!=l&&(k=x.backdrop=new To.Rectangle(e,t,l,o,a,s,null,null,!1),this.addChild(k));var T,A=this.lightsContainer=new To.Container({style:!1});this.addChild(A);var P=.5*t,B=e/(n+1),S=new createjs.Shape;"square"==c||"box"==c?S.graphics.f("black").dr(-B/2/h+P/2,-t/2+P/2,B/h,t):S.graphics.f("black").dr(-B/2/h,-t/2,B/h,t);for(var E=0;E<n;E++)"square"==c||"box"==c?((T=new To.Rectangle(P,P,i,o,a,null,null,null,!1)).regX=T.width/2,T.regY=T.height/2):T=new To.Circle(P/2,i,o,a,null,null,null,null,!1),this.lights.push(T),T.znum=E,T.scaleX=T.scaleY=h,T.hitArea=S,T.x=B+B*E,T.y=t/2,A.addChild(T);function I(e){var t;n<=e&&(e=-1);for(var o=0;o<n;o++)t=o==e?r:u&&o<e?r:i,A.getChildAt(o).color=t;x.zimAccessibility&&x.zimAccessibility.changeTitle(x),To.OPTIMIZE||!zns&&OPTIMIZE||!x.stage||x.stage.update()}A.setBounds(0,0,e,t),A.regX=A.x=e/2,A.regY=A.y=t/2,this.addChild(A),-1!=p&&0<f&&(A.shadow=new createjs.Shadow(p,2,2,f)),g&&(A.cursor="pointer",A.on(C,function(e){w!=e.target.znum&&(I(w=e.target.znum),x.dispatchEvent("change"))})),A.scaleX=A.scaleY=d,Object.defineProperty(this,"selectedIndex",{get:function(){return w},set:function(e){w=Math.floor(e),I(w=To.constrain(w,-1,n-1))}}),Object.defineProperty(this,"num",{get:function(){return n},set:function(e){zon&&zogy("Indicator() - num is read only")}}),this._enabled=!0,Object.defineProperty(x,"enabled",{get:function(){return x._enabled},set:function(e){Ge(x,e)}}),zot(m)&&(m=null!=v.selectedIndex?v.selectedIndex:0),x.selectedIndex=m,!1!==z&&To.styleTransforms(this,v),this.clone=function(){return x.cloneProps(new To.Indicator(e,t,n,r,i,o,a,l,s,c,u,d,h,g,p,f,m,z,this.group,b))}},To.extend(To.Indicator,To.Container,"clone","zimContainer",!1),To.TextInput=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L,e,_){if(R=zob(To.TextInput,arguments,"width, height, placeholder, text, size, font, color, backgroundColor, borderColor, borderWidth, maxLength, password, selectionColor, selectionAlpha, cursorColor, cursorSpeed, shadowColor, shadowBlur, align, corner, padding, paddingHorizontal, paddingVertical, shiftHorizontal, shiftVertical, multiline, wrap, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, style, group, inherit",this))return R;z_d("54.2"),this.group=e;var Y=!1===L?{}:To.getStyle("TextInput",this.group,_);zot(i)&&(i=null!=Y.size?Y.size:36),!zot(w)&&"ignore"!=w||(w=null!=Y.padding&&"ignore"!=w?Y.padding:5),zot(C)&&(C=null!=Y.paddingHorizontal?Y.paddingHorizontal:w),zot(x)&&(x=null!=Y.paddingVertical?Y.paddingVertical:w),zot(t)&&(t=null!=Y.width?Y.width:300),zot(o)&&(o=null!=Y.height?Y.height:i+2*x),zot(n)&&(n=null!=Y.placeholder?Y.placeholder:null),zot(r)&&(r=null!=Y.text?Y.text:""),zot(a)&&(a=null!=Y.font?Y.font:"arial"),zot(l)&&(l=null!=Y.color?Y.color:To.dark),zot(s)&&(s=null!=Y.backgroundColor?Y.backgroundColor:To.lighter),zot(c)&&(c=null!=Y.borderColor?Y.borderColor:null),zot(u)&&(u=null!=Y.borderWidth?Y.borderWidth:null);var D=function(){return arguments}(t,o,n,r,l,s,c);t=To.Pick.choose(t),o=To.Pick.choose(o),n=To.Pick.choose(n),r=To.Pick.choose(r),l=To.Pick.choose(l),s=To.Pick.choose(s),c=To.Pick.choose(c),zot(g)&&(g=null!=Y.selectionColor?Y.selectionColor:l),zot(p)&&(p=null!=Y.selectionAlpha?Y.selectionAlpha:.2),zot(f)&&(f=null!=Y.cursorColor?Y.cursorColor:l),zot(m)&&(m=null!=Y.cursorSpeed?Y.cursorSpeed:.5),zot(z)&&(z=null!=Y.shadowColor?Y.shadowColor:"rgba(0,0,0,.3)"),zot(y)&&(y=null!=Y.shadowBlur?Y.shadowBlur:20),zot(b)&&(b=null!=Y.align?Y.align:"left"),zot(v)&&(v=null!=Y.corner?Y.corner:0),zot(k)&&(k=null!=Y.shiftHorizontal?Y.shiftHorizontal:0),zot(h)&&(h=null!=Y.password&&Y.password),zot(T)&&(T=null!=Y.shiftVertical?Y.shiftVertical:h?.25*i:0),zot(d)&&(d=null!=Y.maxLength?Y.maxLength:null),zot(A)&&(A=null!=Y.multiline&&Y.multiline),zot(P)&&(P=null!=Y.wrap&&Y.wrap),zot(B)&&(B=null!=Y.scrollBarActive&&Y.scrollBarActive),zot(S)&&(S=null!=Y.scrollBarDrag&&Y.scrollBarDrag),zot(E)&&(E=null!=Y.scrollBarColor?Y.scrollBarColor:c),zot(I)&&(I=null!=Y.scrollBarAlpha?Y.scrollBarAlpha:.3),zot(M)&&(M=null==Y.scrollBarFade||Y.scrollBarFade),zot(O)&&(O=null==Y.scrollBarH||Y.scrollBarH),zot(j)&&(j=null==Y.scrollBarV||Y.scrollBarV),S&&(M=null!=Y.scrollBarFade&&Y.scrollBarFade),this.zimWindow_constructor(t,o,s,c,u,w,v,!1,B,S,E,I,M,O,j,!1,null,!1,!0,z,y,C,x,!0,null,null,null,null,null,!1,null,null,null,null,null,!1,null,!1,L,e,To.copy(Y)),this.type="TextInput";var X=this;this.placeholderLabel=new To.Label({text:n||"",size:i,color:l}).alp(.5),""==r&&this.add(this.placeholderLabel);var R=new Rectangle(t-2*w,o-2*w,To.clear).center(this);this.cursor="text";var W=this.label=new To.TextInput.LabelInput(r,i,d,h,g,p,f,m,a,l,null,null,null,b,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,k,T,null,null,null,d,null,L,e,_);this.add(W),W.setMask(R),this.htmlTag=this.label.hiddenInput,this.selection=this.label.selection,this.blinker=this.label.blinker,"right"==b&&(W.x=t-W.width,this.placeholderLabel.x=t-this.placeholderLabel.width-C);R=new Rectangle(w,o,To.clear).addTo(this).expand(0);R.on("mousedown",function(e){W.onMousedown(e),e.stopImmediatePropagation()}),R.on("pressmove",function(e){W.onPressmove(e),e.stopImmediatePropagation()}),R.on("dblclick",function(e){W.onDblclick(e),e.stopImmediatePropagation()});R=new Rectangle(w,o,To.clear).pos(0,0,RIGHT,TOP,this).expand(0);R.on("mousedown",function(e){W.onMousedown(e),e.stopImmediatePropagation()}),R.on("pressmove",function(e){W.onPressmove(e),e.stopImmediatePropagation()}),R.on("dblclick",function(e){W.onDblclick(e),e.stopImmediatePropagation()});var F="";this.on("mousedown",function(e){W.onMousedown(e),F=W.text}),this.on("pressmove",function(e){W.onPressmove(e),e.stopImmediatePropagation()}),this.on("dblclick",function(e){W.onDblclick(e),e.stopImmediatePropagation()}),this.added(function(e){e.on("stagemousedown",function(e){X.hitTestPoint(e.stageX,e.stageY)||(W.focus=!1,W.text!=F&&X.dispatchEvent("change"),F=W.text)})}),this.label.on("focus",function(){X.dispatchEvent("focus")}),this.label.on("blur",function(){X.dispatchEvent("blur")}),this.label.on("input",function(){""!=W.text&&X.placeholderLabel.parent&&(X.placeholderLabel.removeFrom(),X.stage&&X.stage.update()),""!=W.text||X.placeholderLabel.parent||(X.add(X.placeholderLabel),X.stage&&X.stage.update()),X.dispatchEvent("input")}),this.label.on("keydown",function(){X.dispatchEvent("keydown")}),this.label.on("blinker",function(){var e=W.x+W.blinker.x;newX=To.constrain(e,C,t-C-W.blinker.width),e!=newX&&(W.x-=e-newX),X.stage&&X.stage.update()}),Object.defineProperty(X,"text",{get:function(){return W.hiddenInput.value},set:function(e){W.setText(e),To.OPTIMIZE||!zns&&OPTIMIZE||!X.stage||X.stage.update()}}),Object.defineProperty(X,"focus",{get:function(){return W.focus},set:function(e){W.focus=e}}),Object.defineProperty(X,"color",{get:function(){return W.color},set:function(e){W.color=e,To.OPTIMIZE||!zns&&OPTIMIZE||!X.stage||X.stage.update()}}),Object.defineProperty(X,"size",{get:function(){return W.size},set:function(e){W.size=e,W.hiddenInput.style.fontSize=e+"px",To.OPTIMIZE||!zns&&OPTIMIZE||!X.stage||X.stage.update()}}),Object.defineProperty(X,"align",{get:function(){return W.align},set:function(e){"center"==e&&(e="left"),b=W.align=e,W.x="right"==b?t-W.width:0,To.OPTIMIZE||!zns&&OPTIMIZE||!X.stage||X.stage.update()}}),Object.defineProperty(X,"font",{get:function(){return W.font},set:function(e){W.font=e,To.OPTIMIZE||!zns&&OPTIMIZE||!X.stage||X.stage.update()}}),Object.defineProperty(X,"selectionAlpha",{get:function(){return W.selectionAlpha},set:function(e){W.selectionAlpha=e,0!=W.selection.alpha&&(W.selection.alpha=e),To.OPTIMIZE||!zns&&OPTIMIZE||!X.stage||X.stage.update()}}),To.styleTransforms(this,Y),this.clone=function(e){return X.cloneProps(e||!To.isPick(D[0])?t:D[0],e||!To.isPick(D[1])?o:D[1],e||!To.isPick(D[2])?n:D[2],e||!To.isPick(D[3])?r:D[3],i,a,e||!To.isPick(D[4])?l:D[4],e||!To.isPick(D[5])?s:D[5],e||!To.isPick(D[6])?c:D[6],u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L,this.group,_)}},To.extend(To.TextInput,To.Window,"clone","zimWindow",!1),To.TextInput.LabelInput=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L,o,_,Y,D,X){this.zimLabel_constructor(e,t,s,c,null,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,null,j,L,null,_,Y,D,X),this.type="LabelInput",zot(c)&&(c=To.dark),zot(r)&&(r=c),zot(i)&&(i=.2),this.selectionAlpha=i,zot(a)&&(a=c),zot(l)&&(l=.5),this.hiddenInput=document.createElement("INPUT"),this.hiddenInput.value=e,this.hiddenInput.type=n?"password":"text",0<o&&(this.hiddenInput.maxLength=o),this.hiddenInput.autocapitalize="off",this.hiddenInput.autocorrect="off",this.hiddenInput.autocomplete="off",this.hiddenInput.spellcheck=!1,this.hiddenInput.style.position="absolute",this.hiddenInput.style.overflow="hidden",this.hiddenInput.style.left="-99999px",this.hiddenInput.style.top="-99999px",this.hiddenInput.style.zIndex=-999,this.hiddenInput.style.opacity=0,this.hiddenInput.style.width="1px",this.hiddenInput.style.height="1px",this.hiddenInput.style.fontSize="1px",this.onFocus=function(){R.zil&&window.removeEventListener("keydown",R.zil[0]),this.blinker.alp(1).replayTween(),this.selection.alp(.2),this.positionBlinkerAndSelection(),this.dispatchEvent("focus")},this.onBlur=function(){R.zil&&window.addEventListener("keydown",R.zil[0]),this.positionBlinkerAndSelection(),this.blinker.pauseAnimate(!0).alp(0),this.selection.alp(0),this.dispatchEvent("blur")},this.onInput=function(){this.text="text"==this.hiddenInput.type?this.hiddenInput.value:this.hiddenInput.value.replace(/./g,"*"),this.measureText(),this.positionBlinkerAndSelection(),this.dispatchEvent("input")},this.onSelect=function(){this.positionBlinkerAndSelection(),this.focus&&this.blinker.replayTween()};var R,W=this;this.onKeydown=function(){this.blinker.replayTween(),setTimeout(function(){W.positionBlinkerAndSelection.call(W),W.dispatchEvent("keydown")},10)},this.onMousedown=function(e){this.focus||this.hiddenInput.focus();e=this.eventPositionGlobalToLocal(e),e=this.mapPointToIndex(e);this.hiddenInput.setSelectionRange(e,e),this.positionBlinkerAndSelection()},this.onPressmove=function(e){this.focus||this.hiddenInput.focus();e=this.eventPositionGlobalToLocal(e),e=this.mapPointToIndex(e);this.hiddenInput.selectionStart===this.hiddenInput.selectionEnd?this.hiddenInput.selectionStart<=e?this.hiddenInput.setSelectionRange(this.hiddenInput.selectionStart,e,"forward"):this.hiddenInput.setSelectionRange(e,this.hiddenInput.selectionEnd,"backward"):"forward"===this.hiddenInput.selectionDirection?this.hiddenInput.setSelectionRange(this.hiddenInput.selectionStart,e,"forward"):this.hiddenInput.setSelectionRange(e,this.hiddenInput.selectionEnd,"backward"),this.positionBlinkerAndSelection()},this.onDblclick=function(){this.hiddenInput.select(),this.positionBlinkerAndSelection()},this.positionBlinkerAndSelection=function(){var e,t,o,n;this.focus&&(e=this.backing||this.background?this.paddingHorizontal:0,t=this.backing||this.background?this.paddingVertical:0,this.hiddenInput.selectionStart!==this.hiddenInput.selectionEnd?(n=this.textWidthArray[this.hiddenInput.selectionStart],o=this.textWidthArray[this.hiddenInput.selectionEnd],this.selection.widthOnly=o-n,this.selection.heightOnly=this.textHeight,this.selection.pos(n+e-1,t),this.selection.alp(this.selectionAlpha)):this.selection.alp(0),this.blinker.heightOnly=this.textHeight,n="backward"===this.hiddenInput.selectionDirection?this.hiddenInput.selectionStart:this.hiddenInput.selectionEnd,this.blinker.pos(this.textWidthArray[n]+e-1+("right"==g&&""==this.text?this.width:0),t),this.dispatchEvent("blinker")),this.stage&&this.stage.update()},this.eventPositionGlobalToLocal=function(e){e=this.globalToLocal(e.stageX/To.scaX,e.stageY/To.scaY);return e.x-="right"==g?this.label.x-this.width:this.label.x,e.y-=this.label.y,e},this.mapPointToIndex=function(e){for(var t=this.textWidthArray.length-1,o=0;o<this.textWidthArray.length-1;o++){var n=(this.textWidthArray[o]+this.textWidthArray[o+1])/2;if(e.x<=n){t=o;break}}return t},this.measureText=function(){for(var e=this.label.clone(),t=0;t<this.text.length&&t<this.previousMeasuredText.length&&this.text[t]===this.previousMeasuredText[t];)t++;for(this.textWidthArray=this.textWidthArray.slice(0,t+1),t++;t<=this.text.length;t++)e.text=this.text.slice(0,t),this.textWidthArray.push(e.getMeasuredWidth());this.previousMeasuredText=this.text,this.textHeight=e.getMeasuredLineHeight()},this.setText=function(e){this.hiddenInput.value=e,this.onInput()},Object.defineProperty(this,"focus",{get:function(){return document.activeElement===W.hiddenInput},set:function(e){!0===e?W.hiddenInput.focus():W.hiddenInput.blur()}}),this.added(function(e){R=e.frame,W.hiddenInput.addEventListener("focus",W.onFocus.bind(W)),W.hiddenInput.addEventListener("blur",W.onBlur.bind(W))}),this.hiddenInput.addEventListener("input",this.onInput.bind(this)),this.hiddenInput.addEventListener("select",this.onSelect.bind(this)),this.hiddenInput.addEventListener("keydown",this.onKeydown.bind(this)),document.body.appendChild(this.hiddenInput),this.on("mousedown",this.onMousedown.bind(this)),this.on("pressmove",this.onPressmove.bind(this)),this.on("dblclick",this.onDblclick.bind(this)),this.cursor="text",this.blinker=new To.Rectangle(2,1,a).animate({obj:{alpha:0},wait:l,time:.1,rewind:!0,rewindWait:l,loop:!0,loopWait:l}).pauseAnimate(!0).alp(0).addTo(this),this.selection=new To.Rectangle(1,1,r).alp(0).addTo(this),this.textWidthArray=[0],this.previousMeasuredText="",this.textHeight=null,this.measureText()},To.extend(To.TextInput.LabelInput,To.Label,null,"zimLabel",!1),To.List=function(r,o,n,e,i,t,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L,_,Y,D,X,R,W,F,H,V,N,G,q,U,Q,Z,K,J,$,ee,te,oe,ne,re,ie,ae,le,se,ce,ue,de){if(ge=zob(To.List,arguments,"width, height, list, viewNum, vertical, currentSelected, align, valign, labelAlign, labelValign, labelIndent, labelIndentHorizontal, labelIndentVertical, indent, spacing, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, padding, corner, swipe, scrollBarActive, scrollBarDrag, scrollBarColor, scrollBarAlpha, scrollBarFade, scrollBarH, scrollBarV, scrollBarOverlay, slide, slideDamp, slideSnap, shadowColor, shadowBlur, paddingHorizontal, paddingVertical, scrollWheel, damp, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, draggable, boundary, onTop, close, closeColor, excludeCustomTap, organizer, checkBox, pulldown, clone, cancelCurrentDrag, selectedIndex, noScale, style, group, inherit",this))return ge;z_d("60.5"),this.group=ue;var he=!1===ce?{}:To.getStyle("List",this.group,de);zot(r)&&(r=null!=he.width?he.width:300),zot(o)&&(o=null!=he.height?he.height:zot(oe)?200:200+oe.height),zot(n)&&(n=null!=he.list?he.list:["Option 1","Option 2","Option 3","Option 4","Option 5","Option 6","Option 7","Option 8","Option 9","Option 10"]),0==n.length&&(n=["%-&"]),this.originalList=n,zot(e)&&(e=null!=he.viewNum?he.viewNum:5),zot(i)&&(i=null==he.vertical||he.vertical),zot(t)&&(t=null==he.currentSelected||he.currentSelected);var ge=!zot(a)||!zot(s);zot(ne)&&(ne=null!=he.checkBox&&he.checkBox),zot(a)&&(a=null!=he.align?he.align:ne?"left":"center"),zot(l)&&(l=null!=he.valign?he.valign:"center"),zot(s)&&(s=null!=he.labelAlign?he.labelAlign:a),zot(c)&&(c=null!=he.labelValign?he.labelValign:l),zot(g)&&(g=null!=he.indent?he.indent:ne?0:10),zot(u)&&(u=null!=he.labelIndent?he.labelIndent:g),zot(d)&&(d=null!=he.labelIndentHorizontal?he.labelIndentHorizontal:u),zot(h)&&(h=null!=he.labelIndentVertical?he.labelIndentVertical:u),zot(p)&&(p=null!=he.spacing?he.spacing:2),zot(b)&&(b=null!=he.backdropColor?he.backdropColor:"#333"),zot(f)&&(f=null!=he.backgroundColor?he.backgroundColor:"#777"),zot(m)&&(m=null!=he.rollBackgroundColor?he.rollBackgroundColor:"#555"),zot(z)&&(z=null!=he.selectedBackgroundColor?he.selectedBackgroundColor:"#444"),zot(y)&&(y=null!=he.selectedRollBackgroundColor?he.selectedRollBackgroundColor:"#555"),zot(v)&&(v=null!=he.color?he.color:"white"),zot(w)&&(w=null!=he.rollColor?he.rollColor:v),zot(C)&&(C=null!=he.selectedColor?he.selectedColor:v),zot(x)&&(x=null!=he.selectedRollColor?he.selectedRollColor:w),zot(b)&&(b=null!=he.backdropColor?he.backdropColor:b);var pe=k,fe=T;zot(k)&&(k=null!=he.borderColor?he.borderColor:"#999"),zot(T)&&(T=null!=he.borderWidth?he.borderWidth:1),zot(A)&&(A=null!=he.padding?he.padding:p),zot(P)&&(P=null!=he.corner?he.corner:0),zot(B)&&(B=null==he.swipe||he.swipe),zot(S)&&(S=null==he.scrollBarActive||he.scrollBarActive),zot(E)&&(E=null==he.scrollBarDrag||he.scrollBarDrag),zot(I)&&(I=null!=he.scrollBarColor?he.scrollBarColor:k),zot(M)&&(M=null!=he.scrollBarAlpha?he.scrollBarAlpha:.3),zot(O)&&(O=null==he.scrollBarFade||he.scrollBarFade),zot(j)&&(j=null!=he.scrollBarH?he.scrollBarH:!i),zot(L)&&(L=null!=he.scrollBarV?he.scrollBarV:i),E&&(O=null!=he.scrollBarFade&&he.scrollBarFade),zot(_)&&(_=null==he.scrollBarOverlay||he.scrollBarOverlay),zot(Y)&&(Y=null==he.slide||he.slide),zot(D)&&(D=null!=he.slideDamp?he.slideDamp:.6),zot(X)&&(X=null!=he.slideSnap?he.slideSnap:i?"vertical":"horizontal"),zot(R)&&(R=null!=he.shadowColor?he.shadowColor:"rgba(0,0,0,.3)"),zot(W)&&(W=null!=he.shadowBlur?he.shadowBlur:20),zot(H)&&(H=null!=he.paddingVertical?he.paddingVertical:A),zot(F)&&(F=null!=he.paddingHorizontal?he.paddingHorizontal:A),zot(V)&&(V=null==he.scrollWheel||he.scrollWheel),zot(G)&&(G=null!=he.titleBar?he.titleBar:null),zot(q)&&(q=null!=he.titleBarColor?he.titleBarColor:null),zot(U)&&(U=null!=he.titleBarBackgroundColor?he.titleBarBackgroundColor:null),zot(Q)&&(Q=null!=he.titleBarHeight?he.titleBarHeight:35),zot(Z)&&(Z=null!=he.draggable?he.draggable:null),zot(K)&&(K=null!=he.boundary?he.boundary:null),zot(J)&&(J=null!=he.onTop?he.onTop:null),zot($)&&($=null!=he.close?he.close:null),zot(ee)&&(ee=null!=he.closeColor?he.closeColor:null),zot(te)&&(te=null!=he.excludeCustomTap&&he.excludeCustomTap),zot(ne)&&(ne=null!=he.checkBox&&he.checkBox),zot(re)&&(re=null!=he.pulldown&&he.pulldown),zot(se)&&(se=null!=he.noScale&&he.noScale),zot(ie)&&(ie=null!=he.clone&&he.clone),!1===G&&(G=null),this.vertical=i;var me=this,ze=o;ne&&To.loop(n,function(e,t){n[t]=To.List.checkItem(e,null,r,"left",10,10,p,v,w,C,x,f,m,z,y)});var ye,be,ve,we,Ce,xe,ke,Te,Ae,Pe=Ao();n.constructor=={}.constructor&&(be=zot(n.shade)?zot(he.shade)?.2:he.shade:n.shade,ve=zot(n.dim)?zot(he.dim)?.1:he.dim:n.dim,we=zot(n.shift)?zot(he.shift)?15:he.shift:n.shift,Ce=zot(n.bloom)?!zot(he.bloom)&&he.bloom:n.bloom,xe=zot(n.whither)?!zot(he.whither)&&he.whither:n.whither,ke=zot(n.open)?!zot(he.open)&&he.open:n.open,Te=zot(n.expander)?zot(he.expander)?"plus":he.expander:n.expander,expender=Te.toLowerCase(),"arrows"==Te&&(Te="arrow"),"none"!=Te&&"arrow"!=Te&&(Te="plus"),!0===Ce&&(Ce="s"==Pe?.01:10),!0===xe&&(xe="s"==Pe?.01:10),Po(Ce),Po(xe),!0===we&&(we=15),!0===be&&(be=.2),!0===ve&&(ve=.1),Ae=zot(n.subStyles)?zot(he.subStyles)?{}:he.subStyles:n.subStyles,zot(n.menu)||(n=n.menu),ye=new To.Hierarchy(n,ke),ke&&ye.data&&ye.data.id0&&(ye.data.id0.open=!1),n=ye.getLinearList(),ge||(a=s="left")),re&&(e=(zot(ye)?n:ye).length,o=e*r/620*100+(e+1)*p+(zot(G)?0:Q),T=0,z=f,b=To.clear,B=!1);var Be,Se=0,Ee=0;To.loop(n,function(e){"ListItem"==e.type&&(e.width=r-2*p),se&&(e.width&&(Se+=e.width),e.height&&(Ee+=e.height))}),Se&&(Se+=p*(n.length-1)),Ee&&(Ee+=p*(n.length-1)),this.align=a,this.valign=l,this.indent=g,zot(oe)||(o-=oe.height,((oe.list=me).organizer=oe).setButtons(),Q+=oe.height),this.zimWindow_constructor(r,o,b,k,T,A,P,B,S,E,I,M,O,j,L,Y,D,X,!0,R,W,F,H,V,N,G,q,U,Q,Z,K,J,$,ee,ae,!1,null,!1,ce,ue,To.copy(he)),this.type="List",zot(G)||(this.titleBarLabel.pos(null,Q-30,null,!0),zot(Q)&&(Q=30),o-=Q),zot(oe)||oe.addTo(me).loc(0,-oe.height),Se&&se?(me.itemWidth=i?r-2*F-(!S||_?0:6):Se/n.length,me.itemHeight=i?Ee/n.length:o-2*H-(!S||_?0:6)):(me.itemWidth=i?r-2*F-(!S||_?0:6):(r-2*F)/e,me.itemHeight=i?(o-2*H)/e:o-2*H-(!S||_?0:6));var Ie,Me,Oe,je=To.copy(he);function Le(e,t,o){e.listZID=t,e.label&&(be&&new To.Rectangle(we*(o.level+1),e.height).alp(be).pos(0,0,"right"==me.align,!1,e),ve&&new To.Rectangle(e.width,e.height).alp((o.level+1)*ve).addTo(e).bot().ord(1),we&&"center"!=me.align&&(e.label.x+=("right"==me.align?-1:1)*we*(o.level+1)));t=ye.getData(t);t.obj=e,t.list&&!To.isEmpty(t.list)&&(e.expander=new To.Label({size:"arrow"==Te?22:36,text:t.open?"arrow"==Te?"":"-":"arrow"==Te?"":"+",align:"center",color:To.convertColor(v,"rgba",.6)}).center(e).alp("none"==Te?0:.7).pos(15,null,"right"!=me.align).mov(0,t.open?-3:0))}function _e(){var n,o,t,r,i,a,l;me.selected.expander&&((n=ye.getData(me.selected.listZID)).open?(me.selected.expander&&(me.selected.expander.text="arrow"==Te?"":"+",me.selected.expander.mov(0,3)),n.open=!1,o=ye.getNextSibling(me.selected.listZID),t=zot(o)?me.items.length-1:To.loop(me.items,function(e,t){if(e.listZID==o)return t-1}),xe?(l=0,me.enabled=!1,To.interval(xe,function(e){me.removeAt(1,me.selectedIndex+t-me.selectedIndex-l),l++,e.total==e.count+1&&(me.enabled=!0)},t-me.selectedIndex,!0)):me.removeAt(t-me.selectedIndex,me.selectedIndex+1)):(n.open=!0,me.selected.expander&&(me.selected.expander.text="arrow"==Te?"":"-",me.selected.expander.mov(0,-3)),r=ye.getLinearList(n.list),i=ye.getLinearIDs(n.list),n.opened?Array.isArray(r)&&(Ce?(l=0,me.enabled=!1,To.interval(Ce,function(e){me.addAt(r[l],me.selectedIndex+1+l),e.total==e.count+1&&(me.enabled=!0),l++},r.length,!0)):me.addAt(r,me.selectedIndex+1)):(n.opened=!0,zot(a=Ae[n.level])&&(a={}),Array.isArray(r)&&(Ce?(l=0,me.enabled=!1,To.interval(Ce,function(e){me.addAt(r[l],me.selectedIndex+1+l,{backgroundColor:a.backgroundColor,color:a.color,rollBackgroundColor:a.rollBackgroundColor,rollColor:a.rollColor,selectedBackgroundColor:a.selectedBackgroundColor,selectedColor:a.selectedColor,selectedRollBackgroundColor:a.selectedRollBackgroundColor,selectedRollColor:a.selectedRollColor});var t=i[l],o=me.items[me.selectedIndex+1+l];Le(o,t,n),o.label.backgroundColor=To.clear,e.total==e.count+1&&(me.enabled=!0),l++,me.stage&&me.stage.update()},r.length,!0)):(me.addAt(r,me.selectedIndex+1,{backgroundColor:a.backgroundColor,color:a.color,rollBackgroundColor:a.rollBackgroundColor,rollColor:a.rollColor,selectedBackgroundColor:a.selectedBackgroundColor,selectedColor:a.selectedColor,selectedRollBackgroundColor:a.selectedRollBackgroundColor,selectedRollColor:a.selectedRollColor}),To.loop(i,function(e,t){t=me.items[me.selectedIndex+1+t];Le(t,e,n),t.label.backgroundColor=To.clear}))))))}function Ye(e){if(i){var t=-(me.itemHeight+p)*e+o/2-me.itemHeight/2;return(me.itemHeight+p)*me.length<o&&(t=0),0<t&&(t=0),(me.itemHeight+p)*me.length>o&&t<-me.tabs.height+o-2*H&&(t=-me.tabs.height+o-2*H),t}e=-(me.itemWidth+p)*e+r/2-me.itemWidth/2;return(me.itemWidth+p)*me.length<r&&(e=0),0<e&&(e=0),(me.itemWidth+p)*me.length>r&&e<-me.tabs.width+r-2*F&&(e=-me.tabs.width+r-2*F),e}delete je.borderWidth,delete je.borderColor,Ie=To.copy(n,ie),Be=me.tabs=new To.Tabs({width:i?me.itemWidth:me.itemWidth*n.length,height:i?me.itemHeight*n.length:me.itemHeight,tabs:Ie,spacing:p,vertical:i,backgroundColor:f,rollBackgroundColor:m,selectedBackgroundColor:z,selectedRollBackgroundColor:y,color:v,rollColor:w,selectedColor:C,selectedRollColor:x,backdropColor:b,currentEnabled:!0,currentSelected:t,align:a,valign:l,labelAlign:s,labelValign:c,labelIndent:u,labelIndentHorizontal:d,labelIndentVertical:h,indent:g,useTap:!0,excludeCustomTap:te,keyWrap:!1,style:ce,group:ue,inherit:je}).mov(i?0:F,i?H:0),me.add(Be),To.loop(Be.labels,function(e){e&&(e.backgroundColor=To.clear)}),ye&&(ge=ye.getLinearIDs(),To.loop(ge,function(e,t){me.tabs.buttons[t].listZID=e}),To.loop(me.tabs.buttons,function(e){var t=ye.getData(e.listZID);To.isEmpty(t.list)||(e.expander=new To.Label({size:"arrow"==Te?22:36,text:"arrow"==Te?"":"+",align:"center",color:To.convertColor(v,"rgba",.6)}).center(e).alp("none"==Te?0:.7).pos(15,null,"right"!=me.align))}),Me=ke,me.toggle=function(e){if(zot(e))e=!Me;else if(e==Me)return;me.selectedIndex=0,Me=e,_e()},Object.defineProperty(me,"toggled",{get:function(){return Me},set:function(e){Me!=e&&me.toggle()}}),me.tap(_e)),Be.tap(function(e){e.target.selectedIndex!=me.selectedIndex&&(me.selectedIndex=Be.selectedIndex,me.dispatchEvent("change"),e.preventDefault())}),Be.on("keychange",function(e){e.target.selectedIndex!=me.selectedIndex&&(me.selectedIndex=Be.selectedIndex,setTimeout(function(){var e;i?((e=me.selected.y+me.scrollY)<0||e>me.height-me.selected.height)&&me.animateTo(me.selectedIndex,"ms"==Pe?100:.1):((e=me.selected.x+me.scrollX)<0||e>me.width-me.selected.width)&&me.animateTo(me.selectedIndex,"ms"==Pe?100:.1)},100),me.dispatchEvent("change"))}),this.getItemIndex=function(e){return me.items.indexOf(e)},this.animateTo=function(e,t){zot(e)&&(e=0),zot(t)&&(t=.05);var o,n=Ao(t),e=Ye(me.selectedIndex=e);return i?(o=Math.abs(me.scrollY-e)/me.itemHeight,me.animate({scrollY:e},o*t/("s"==n?1:1e3))):(o=Math.abs(me.scrollX-e)/me.itemWidth,me.animate({scrollX:e},o*t/("s"==n?1:1e3))),me},this.addAt=function(e,t,o,n){return zot(e)||("ListItem"==e.type?e.width=r-2*p:Array.isArray(e)&&To.loop(e,function(e){"ListItem"==e.type&&(e.width=r-2*p)}),e.clone?me.tabs.addAt(n?e.clone():e,t,o):me.tabs.addAt(To.copy(e,n),t,o),me.update()),me},this.removeAt=function(e,t){me.tabs.removeAt(e,t),Oe=me.tabs.selectedIndex;t=Be.getBounds();return Be.setBounds(0,0,t.width,t.height),me.update(),me},"%-&"==n[0]&&1==n.length&&me.removeAt(1,0),this.clear=function(){return me.tabs.removeAt(me.length,0),me.content.x=0,me.content.y=0,me.update(),me},this.setCheck=function(e,t){zot(e)&&(e=0),zot(t)&&(t=!0),me.items[e].checkBox.checked=t,me.items[e].content.zimOut()},this.getCheck=function(e){return zot(e)&&(e=0),me.items[e].checkBox.checked},this.setChecks=function(t){return To.loop(me.items,function(e){e.checkBox.checked=t,e.content.zimOut()}),me},Object.defineProperty(me,"items",{get:function(){return me.tabs.buttons},set:function(e){zon&&zogy("List() - items is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(me,"list",{get:function(){return me.tabs.buttons},set:function(e){zon&&zogy("List() - list is read only - use addAt() and removeAt() to change")}}),Object.defineProperty(me,"length",{get:function(){return me.tabs.buttons.length},set:function(e){zon&&zogy("List() - length is read only")}}),Object.defineProperty(me,"selectedIndex",{get:function(){return Oe},set:function(e){Be.selectedIndex=e,me.label=Be.label,me.selected=Be.selected,Oe=e,To.OPTIMIZE||!zns&&OPTIMIZE||!me.stage||me.stage.update()}}),t&&(me.selectedIndex=0),Object.defineProperty(me,"selectedIndexPlusPosition",{get:function(){return Oe},set:function(e){me.selectedIndex=e,Oe=e,i?me.scrollY=Ye(e)-2:me.scrollX=Ye(e),To.OPTIMIZE||!zns&&OPTIMIZE||!me.stage||me.stage.update()}}),Object.defineProperty(me,"text",{get:function(){return me.label?me.label.text:null},set:function(e){me.label&&(me.label.text=e)}}),Object.defineProperty(me,"currentValue",{get:function(){return me.label?me.label.text:null},set:function(n){var e=To.loop(me.list,function(e,t){var o;e.label&&(o=e.label.text),"Label"==e.type&&(o=e.text);e=new RegExp(n,"i");if(o&&o.match(e))return t});!0!==e&&(me.selectedIndexPlusPosition=e)}}),Object.defineProperty(me,"itemDown",{get:function(){return me.tabs.buttonDown},set:function(e){}}),Object.defineProperty(me,"itemsText",{get:function(){for(var e=[],t=0;t<me.tabs.buttons.length;t++){var o=me.tabs.buttons[t].label;o&&!zot(o.text)?e.push(o.text):e.push(null)}return e},set:function(e){zon&&zogy("List() - itemsText is read only")}}),t&&(me.selectedIndex=0),Object.defineProperty(me,"checkBoxes",{get:function(){for(var e=[],t=0;t<me.tabs.buttons.length;t++){var o=me.tabs.buttons[t].checkBox;e.push(o)}return e},set:function(e){zon&&zogy("List() - checkBoxes is read only")}}),Object.defineProperty(me,"accordionIndex",{get:function(){var e=me.selected.listZID;return e?Number(e.split("id")[1]):null},set:function(e){zon&&zogy("List() - accordionIndex is read only")}}),this.last=function(){return this.selectedIndexPlusPosition=this.length-1,this},this.first=function(){return this.selectedIndexPlusPosition=0,this},ke&&_e&&(me.selected=me.items[0],_e()),zot(le)&&(le=null!=he.selectedIndex?he.selectedIndex:0),me.selectedIndex=le,!1!==ce&&To.styleTransforms(this,he),this.clone=function(){return me.cloneProps(new To.List(r,ze,To.copy(me.originalList,!0),e,i,t,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,pe,fe,A,To.copy(P),B,S,E,I,M,O,j,L,_,Y,D,X,R,W,F,H,V,N,G,q,U,Q,Z,K,J,$,ee,te,oe,ne,re,ie,ae,le,se,ce,this.group,de))},this.dispose=function(e,t,o){return o||(me.organizer&&me.organizer.dispose(),this.zimWindow_dispose()),!0}},To.extend(To.List,To.Window,["clone","dispose"],"zimWindow",!1),To.List.makeBase=function(e,t,o,n){zot(n)&&(n=To.dark),e.backing=new To.Rectangle(e.width,e.height,n).center(e),"Label"==t.type?e.label=t:e.label=new To.Label(t,null,null,To.white),e.text=e.label.text,e.label.center(e).loc(o)},To.List.slider=function(e,t,o,n,r,i,a,l,s,c,u,d,h){var g;if(g=zob(To.List.slider,arguments,"label, min, max, val, call, step, obj, property, paddingLeft, paddingRight, factor, offset, backgroundColor"))return g;var p=new To.Container(620,100);return p.type="ListItem",p.listItem="Slider",zot(s)&&(s=20),zot(c)&&(c=30),zot(u)&&(u=1),zot(d)&&(d=0),To.List.makeBase(p,e,s,h),p.slider=new To.Slider({inside:!0,barWidth:40,barLength:150,barColor:To.blue,min:t,max:o,step:i}).sca(1.5).center(p).mov(20).change(function(){p.stepper.currentValue=d+Math.round(p.slider.currentValue*u),a&&l&&(a[l]=p.slider.currentValue),r&&"function"==typeof r&&r(p.slider.currentValue,p.parent),p.slider.stage&&p.slider.stage.update()}),zot(n)||(p.slider.currentValue=n),p.stepper=new To.Stepper({corner:0,arrows:!1,stepperType:"number",min:d+t*u,max:d+o*u,step:i}).sca(.5).center(p).pos(c,null,!0).change(function(){p.slider.currentValue=p.stepper.currentValue/(u||1)-d,a&&l&&(a[l]=p.slider.currentValue),r&&"function"==typeof r&&r(p.slider.currentValue,p.parent),p.stepper.stage&&p.stepper.stage.update()}),zot(n)||(p.stepper.currentValue=d+n*u),p},To.List.checkBox=function(e,t,o,n,r,i,a,l){var s;if(s=zob(To.List.checkBox,arguments,"label, checked, call, obj, property, paddingLeft, paddingRight, backgroundColor"))return s;var c=new To.Container(620,100);return c.type="ListItem",c.listItem="CheckBox",zot(i)&&(i=20),zot(a)&&(a=30),To.List.makeBase(c,e,i,l),c.checkBox=new To.CheckBox({startChecked:t,label:""}).sca(1.2).center(c).pos(256+a,null,!0).change(function(){n&&r&&(n[r]=c.checkBox.checked),o&&"function"==typeof o&&o(c.checkBox.checked,c.parent),c.checkBox.stage&&c.checkBox.stage.update()}),c},To.List.colorPicker=function(e,t,o,n,r,i,a,l,s){var c;if(c=zob(To.List.colorPicker,arguments,"label, color, picker, call, obj, property, paddingLeft, paddingRight, backgroundColor"))return c;var u=new To.Container(620,100);return u.type="ListItem",u.listItem="ColorPicker",zot(a)&&(a=20),zot(l)&&(l=30),To.List.makeBase(u,e,a,s),zot(t)&&(t=To.pink),u.colorPicker=o||new To.ColorPicker({alphaPicker:!1,selectedColor:t}),u.swatch=new To.Rectangle(132,66,t,To.lighter,5).center(u).pos(270,null,!0).cur(),u.swatch.on("mousedown",function(){u.colorPicker.selectedColor=u.swatch.color,u.colorPicker.show()}),u.colorLabel=new To.Label(u.swatch.color.toUpperCase(),40,null,To.light).center(u).pos(l,null,!0),u.colorPicker.on("close",function(){var e=u.colorPicker.stage;u.colorPicker.hide(),e&&e.update()}),u.colorPicker.on("change",function(){var e=u.colorPicker.stage;u.swatch.color=u.colorPicker.selectedColor,u.colorLabel.text=u.swatch.color.toUpperCase(),u.colorPicker.hide(),r&&i&&(r[i]=u.colorPicker.selectedColor),n&&"function"==typeof n&&n(u.colorPicker.selectedColor,u.parent),e&&e.update()}),u},To.List.checkItem=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m){if(z=zob(To.List.checkItem,arguments,"label, size, width, align, paddingHorizontal, paddingVertical, spacing, color, rollColor, selectedColor, selectedRollColor, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, group, inherit"))return z;var z=To.getStyle("CheckBox",f,m);zot(t)&&(t=null!=z.size?z.size:20);z=To.getStyle("List",f,m);zot(o)&&(o=300),zot(r)&&(r=10),zot(i)&&(i=10),zot(n)&&(n=null!=z.align?z.align:"center"),zot(a)&&(a=null!=z.spacing?z.spacing:2),zot(d)&&(d=null!=z.backgroundColor?z.backgroundColor:"#777"),zot(h)&&(h=null!=z.rollBackgroundColor?z.rollBackgroundColor:"#555"),zot(g)&&(g=null!=z.selectedBackgroundColor?z.selectedBackgroundColor:"#444"),zot(p)&&(p=null!=z.selectedRollBackgroundColor?z.selectedRollBackgroundColor:"#555"),zot(l)&&(l=null!=z.color?z.color:"white"),zot(s)&&(s=null!=z.rollColor?z.rollColor:l),zot(c)&&(c=null!=z.selectedColor?z.selectedColor:l),zot(u)&&(u=null!=z.selectedRollColor?z.selectedRollColor:s);var y=new To.Container;return y.type="CheckItem",y.checkBox=new To.CheckBox({size:t,label:e,color:l,tap:!0}),y.backing=new To.Rectangle(o-2*a,y.checkBox.height+2*i,d).addTo(y),y.checkBox.center(y),"center"!=n&&"middle"!=n&&y.checkBox.pos(r,null,"right"==n),y.backing.tap(function(){y.checkBox.toggle(),y.zimOut()}),y.checkBox.change(function(){y.zimOut()}),y.zimOver=function(){y.backing.color=y.checkBox.checked?p:h,y.checkBox.label.color=y.checkBox.checked?u:s,y.stage&&y.stage.update()},y.zimOut=function(){y.backing.color=y.checkBox.checked?g:d,y.checkBox.label.color=y.checkBox.checked?c:l,y.stage&&y.stage.update()},y.backing.on("mouseover",y.zimOver),y.checkBox.on("mouseover",y.zimOver),y.backing.on("mouseout",y.zimOut),y.checkBox.on("mouseout",y.zimOut),y},To.Stepper=function(o,e,n,t,r,i,a,s,l,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L){if(_=zob(To.Stepper,arguments,"list, width, backgroundColor, borderColor, borderWidth, label, color, vertical, arrows, corner, shadowColor, shadowBlur, continuous, display, press, hold, holdDelay, holdSpeed, draggable, dragSensitivity, dragRange, stepperType, min, max, step, step2, arrows2, arrows2Scale, keyEnabled, keyArrows, rightForward, downForward, selectedIndex, style, group, inherit",this))return _;z_d("61"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Stepper",this.group=j;var _=!1===O?{}:To.getStyle(this.type,this.group,L);zot(o)&&(o=null!=_.list?_.list:[]),zot(e)&&(e=null!=_.width?_.width:200),zot(n)&&(n=null!=_.backgroundColor?_.backgroundColor:"white"),zot(t)&&(t=null!=_.borderColor?_.borderColor:null),zot(r)&&(r=null!=_.borderWidth?_.borderWidth:null),t<0||r<0?t=r=null:null!=t&&null==r&&(r=1),zot(a)&&(a=null!=_.color?_.color:"#555"),zot(i)&&(i=null!=_.label?_.label:""),"string"!=typeof i&&"number"!=typeof i||(i=new To.Label({text:i,size:null!=_.size?2*_.size:64,color:a,align:null!=_.align?_.align:"center",valign:null!=_.valign?_.valign:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",padding:"ignore",backgroundColor:"ignore",group:this.group})),zot(s)&&(s=null!=_.vertical&&_.vertical),zot(l)&&(l=null==_.arrows||_.arrows),zot(c)&&(c=null!=_.corner?_.corner:16),zot(u)&&(u=null!=_.shadowColor?_.shadowColor:"rgba(0,0,0,.3)"),zot(d)&&(d=null!=_.shadowBlur?_.shadowBlur:14),zot(h)&&(h=null!=_.continuous&&_.continuous),zot(g)&&(g=null==_.display||_.display),zot(p)&&(p=null==_.press||_.press),zot(f)&&(f=null==_.hold||_.hold);var Y=Ao(m);zot(m)&&(m=null!=_.holdDelay?_.holdDelay:"s"==Y?.4:400),zot(z)&&(z=null!=_.holdSpeed?_.holdSpeed:"s"==Y?.2:200),Po(z,Y),zot(y)&&(y=null==_.draggable||_.draggable),(zot(b)||b<=0)&&(b=null!=_.dragSensitivity?_.dragSensitivity:.1),zot(v)&&(v=null!=_.dragRange?_.dragRange:200),zot(w)&&(w=null!=_.stepperType?_.stepperType:0<o.length?"list":"number"),zot(C)&&(C=null!=_.min?_.min:0),zot(x)&&(x=null!=_.max?_.max:10),zot(k)&&(k=null!=_.step?_.step:1),zot(T)&&(T=null!=_.step2?_.step2:k),zot(A)&&T!=k&&"number"==w&&(A=null==_.arrows2||_.arrows2),zot(P)&&(P=null!=_.arrows2Scale?_.arrows2Scale:.5),zot(B)&&(B=null==_.keyEnabled||_.keyEnabled),zot(S)&&(S=null==_.keyArrows||_.keyArrows),zot(E)&&(E=null==_.rightForward||_.rightForward),zot(I)&&(I=null!=_.downForward?_.downForward:"number"!=w);var D,X=this;n=zik(n);var R,W,F,H=k,V=1;function N(e){e=String(e).split(".")[1];return e=e?e.length:0}"number"==w?(C=Number(C),x=Number(x),NaN==C&&(C=0),NaN==x&&(x=100),R=x<C?(V=-1,ee=x,x=C,C=ee,x):C,this.min=C,this.max=x,C<0&&0<x&&(R=0),k=Math.abs(k),W=Math.max(N(k),N(T))):"letter"==w?(o="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),"string"!=typeof C&&(C="A"),"string"!=typeof x&&(x="Z"),C=C.substr(0,1).toUpperCase(),x=x.substr(0,1).toUpperCase(),(te=o.indexOf(C))<0&&(C="A",te=0),(oe=o.indexOf(x))<0&&(x="Z",oe=o.length),oe<te&&(o.reverse(),te=o.length-1-te,oe=o.length-1-oe),o=o.splice(te,oe-te+1)):w="list";var G=0,q=0;y&&this.on("mousedown",function(e){X.zimAccessibility&&X.zimAccessibility.aria||(this.stage.mouseMoveOutside=!0,G=e.rawX/To.scaX,q=e.rawY/To.scaY,F=this.stage.on("stagemousemove",function(e){G=e.rawX/To.scaX,q=e.rawY/To.scaY}))},null,!0),(this.label=i).mouseChildren=!1;var U,Q,Z,K,J,$,ee,te,oe,ne,re,ie,ae,le;i.mouseEnabled=!1;function se(r,i,a,e,t){var l;f&&(0==(ne=e)&&(ne=1),0==(re=t)&&(re=1),y||(b=1),e=m*("s"==Y?1e3:1),l=t=z*("s"==Y?1e3:1),ie=new To.Proportion(0,v,t,t*b),U=setTimeout(function(){(function n(){Q=setTimeout(function(){var e,t,o=r;y&&(e=Math.abs(G-ne),t=Math.abs(q-re),s?(i||a||(e=0),a&&(t=0)):(i||a||(t=0),a&&(e=0)),(10<=e||10<=t)&&(l=t<e?(H=s?T:k,o=0<G-ne?1:-1,ie.convert(Math.abs(ne-G))):(H=s?k:T,o=0<q-re?1:-1,"number"!=w&&I||(o*=-1),ie.convert(Math.abs(re-q))))),ue(o),n()},l)})()},e))}function ce(){X.zimAccessibility&&X.zimAccessibility.aria||(clearTimeout(U),clearTimeout(Q))}function ue(e){if("number"==w){var t=R;R+=H*e*V,R=To.decimals(R,W),h?R>X.max?R=X.min:R<X.min&&(R=X.max):(R>X.max?(R=1==k?X.max:t,g&&(ae.cursor="default")):g&&(ae.cursor="pointer"),R<X.min&&(R=1==k?X.min:t))}else{if(e=D+e,h)e>o.length-1&&(e=0),e<0&&(e=o.length-1);else{if(e>o.length-1)return void(g&&(ae.cursor="default"));if(g&&(ae.cursor="pointer"),e<0)return}D=e}he("number"==w?R:o[D],"number"==w?R:D),X.currentValue!=le&&X.dispatchEvent("change"),le=X.currentValue}function de(){X.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function he(e,t){D=t,g&&("number"==w&&0!=e&&0<W&&(e=To.decimals(e,W,!0)),i.text=e,i.center(X)),l&&(Z.alpha=1,K.color=n,Z.cursor="pointer",J.alpha=1,$.color=n,J.cursor="pointer",h||("number"==w?(D==X.min&&(0<V?ge:pe)(),D==X.max&&(0<V?pe:ge)()):(0==D&&(s?pe:ge)(),D==o.length-1&&(s?ge:pe)()))),!J||To.OPTIMIZE||!zns&&OPTIMIZE||!J.stage?!i||To.OPTIMIZE||!zns&&OPTIMIZE||!i.stage||i.stage.update():J.stage.update(),X.zimAccessibility&&X.zimAccessibility.changeTitle(X,null,!0)}function ge(){l&&(Z.alpha=.8,K.color="#aaa",Z.cursor="default")}function pe(){l&&(J.alpha=.8,$.color="#aaa",J.cursor="default")}l&&(Z=this.containerPrev=new To.Container({style:!1}),this.addChild(Z),K=this.arrowPrev=new To.Triangle(100,80,80,n,null,null,null,null,null,null,null,!1),-1!=u&&0<d&&(Z.shadow=new createjs.Shadow(u,3,3,d)),Z.addChild(K),Z.expand(),Z.cursor="pointer",Z.on("mousedown",function(e){var t;X.zimAccessibility&&X.zimAccessibility.aria||(H=k,ue(t=s?I?1:-1:E?-1:1),se(t,null,null,e.stageX/To.scaX,e.stageY/To.scaY))}),f&&Z.on("pressup",ce),s?(Z.rotation=180,Z.x=e/2,Z.y=g?Z.height+25+100+Z.height/2+25:2*Z.height):(Z.rotation=-90,Z.x=Z.height/2,Z.y=Z.width/2)),g?((ae=this.textBox=new To.Rectangle(e,100,n,t,r,c,null,null,!1)).cursor="pointer",this.addChild(ae),-1!=u&&0<d&&(ae.shadow=new createjs.Shadow(u,3,3,d)),l&&(s?l&&(ae.y=K.height+25):l&&(ae.x=K.height+25)),this.addChild(i),0<o.length&&(D=0,i.text=o[D]),i.center(X),ae.on("mousedown",function(e){X.zimAccessibility&&X.zimAccessibility.aria||(le=X.currentValue,p&&ue(1),se(1,!0,null,e.stageX/To.scaX,e.stageY/To.scaY))}),ae.on("pressup",function(){X.zimAccessibility&&X.zimAccessibility.aria})):0<o.length&&(D=0),l&&(J=this.containerNext=new To.Container({style:!1}),this.addChild(J),$=this.arrowNext=new To.Triangle(100,80,80,n,null,null,null,null,null,null,null,!1),-1!=u&&0<d&&(J.shadow=new createjs.Shadow(u,3,3,d)),J.addChild($),J.expand(),J.cursor="pointer",J.on("mousedown",function(e){var t;X.zimAccessibility&&X.zimAccessibility.aria||(H=k,ue(t=s?I?-1:1:E?1:-1),se(t,null,null,e.stageX/To.scaX,e.stageY/To.scaY))}),f&&J.on("pressup",ce),s?(J.rotation=0,J.x=e/2,J.y=J.getBounds().height/2):(J.rotation=90,J.x=g?ae.x+ae.getBounds().width+J.getBounds().height/2+25:Z.x+Z.getBounds().width,J.y=J.getBounds().width/2)),f&&g&&ae.on("pressup",ce),A&&(ee=this.prev2=new To.Container({style:!1}),oe=this.arrowPrev2=new To.Triangle(100,80,80,"rgba(0,0,0,.2)",n,2,null,null,null,null,null,!1),ee.addChild(oe),ee.expand(),ee.cursor="pointer",ee.sca(P),ee.alpha=.5,ee.on("mousedown",function(e){var t;X.zimAccessibility&&X.zimAccessibility.aria||(H=T,ue(t=s?E?-1:1:I?1:-1),se(t,null,!0,e.stageX/To.scaX,e.stageY/To.scaY))}),f&&ee.on("pressup",ce),te=this.next2=new To.Container({style:!1}),oe=this.arrowNext2=new To.Triangle(100,80,80,"rgba(0,0,0,.2)",n,2,null,null,null,null,null,!1),te.addChild(oe),te.expand(),te.cursor="pointer",te.sca(P),te.alpha=.5,te.on("mousedown",function(e){var t;X.zimAccessibility&&X.zimAccessibility.aria||(H=T,ue(t=s?E?1:-1:I?-1:1),se(t,null,!0,e.stageX/To.scaX,e.stageY/To.scaY))}),f&&te.on("pressup",ce),s?(ee.y=this.height/2,ee.x=-ee.width/2-25*Math.max(.2,Math.min(1,P)),ee.rotation=270,te.y=this.height/2,te.x=this.width+te.width/2+25*Math.max(.2,Math.min(1,P)),te.rotation=90):(te.x=this.width/2,te.y=-te.height/2-25*Math.max(.2,Math.min(1,P)),te.rotation=0,ee.x=this.width/2,ee.y=this.height+ee.height/2+25*Math.max(.2,Math.min(1,P)),ee.rotation=180),this.addChild(ee,te)),Object.defineProperty(this,"stepperArray",{get:function(){if("number"==w){o=[];for(var e=X.min;e<=X.max;e+=Math.min(k,T))o.push(To.decimals(e,W,null,!1))}return o},set:function(e){o=e,X.selectedIndex=X.selectedIndex}}),Object.defineProperty(this,"min",{get:function(){return C},set:function(e){"number"==w?(X.currentValue<e&&(X.currentValue=e),C=e,X.selectedIndex=X.selectedIndex):C=e}}),Object.defineProperty(this,"max",{get:function(){return x},set:function(e){"number"==w?(X.currentValue>e&&(X.currentValue=e),x=e,X.selectedIndex=X.selectedIndex):x=e}}),he("number"==w?R:o[D],"number"==w?R:D),Object.defineProperty(this,"selectedIndex",{get:function(){return"number"==w?X.stepperArray.indexOf(X.currentValue):D},set:function(e){zot(e)||("number"==w?(D=Math.min(X.stepperArray.length-1,Math.max(0,e)),he(R=X.stepperArray[D],R)):(e=Math.min(o.length-1,Math.max(0,e)),he(o[D=e],D)))}}),Object.defineProperty(this,"currentValue",{get:function(){return"number"==w?R:o[D]},set:function(e){if(!zot(e))if("number"==w){if(e=Number(e),X.max>X.min){if(e>X.max||e<X.min)return}else if(e<X.max||e>X.min)return;var t=X.stepperArray.indexOf(e);t<0||(D=t,he(R=X.stepperArray[D],R))}else-1<o.indexOf(e)&&(e=o.indexOf(e))!=X.selectedIndex&&he(o[D=e],D)}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return X.currentValue},set:function(e){String(e)!=String(X.currentValue)&&(X.currentValue=e,X.dispatchEvent("change"))}}),Object.defineProperty(this,"continuous",{get:function(){return h},set:function(e){h=e,"number"==w?he(R,R):he(o[X.selectedIndex],X.selectedIndex)}}),this._enabled=!0,Object.defineProperty(X,"enabled",{get:function(){return X._enabled},set:function(e){Ge(X,e),e?("number"==w?he(R,R):he(o[X.selectedIndex],X.selectedIndex),window.addEventListener("keydown",X.keyDownEvent)):(ge(),pe(),window.removeEventListener("keydown",X.keyDownEvent),g&&(i.mouseChildren=!1),g&&(i.mouseEnabled=!1)),!J||To.OPTIMIZE||!zns&&OPTIMIZE||!J.stage?!i||To.OPTIMIZE||!zns&&OPTIMIZE||!i.stage||i.stage.update():J.stage.update()}}),void 0!==KEYFOCUS&&(To.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return To.KEYFOCUS==X},set:function(e){To.KEYFOCUS=X}}),To.KEYFOCUS||de(),this.on("mousedown",function(){de()});var fe=!0,me="";this.on("mousedown",function(){fe=!0,me="",X.zimAccessibility&&X.zimAccessibility.aria||(X.focus=!0,0)}),this.keyDownEvent=function(e){if(X.stage&&(X.zimAccessibility&&X.focus||!X.zimAccessibility&&X.keyFocus)){var t,o=(e=e||event).keyCode;if(S&&37<=o&&o<=40&&(r=E?39:37,i=I?38:40,n=E?37:39,o==(t=I?40:38)||o==r?(H=s&&o==t||!s&&o==r?k:T,ue(1)):o!=i&&o!=n||(H=s&&o==i||!s&&o==n?k:T,ue(-1))),B)if("number"==w){var n,r=null,i=null;if(8==o&&((n=String(me).split("")).pop(),r=n.pop(),me=n.join("")),!e.shiftKey&&48<=o&&o<=57?r=o-48:96<=o&&o<=105?r=o-96:190==o?(me=String(me)+".",i=!0):173==o||189==o?(X.currentValue=-1*X.currentValue,X.currentValue!=le&&X.dispatchEvent("change"),le=X.currentValue,0):46==o&&(fe=!0,me=""),zot(r)&&zot(i))return fe=!0,void(me="");zot(r)||(me=fe?(fe=!1,r):r=Number(me+""+r),r<C||x<r||(X.currentValue=r,X.currentValue!=le&&X.dispatchEvent("change"),le=X.currentValue))}else fe=!0,me="",X.currentValue=String.fromCharCode(e.keyCode),X.currentValue!=le&&X.dispatchEvent("change"),le=X.currentValue}},window.addEventListener("keydown",this.keyDownEvent),this.next=function(){ue(1)},this.prev=function(){ue(-1)},zot(M)&&(M=null!=_.selectedIndex?_.selectedIndex:0),X.selectedIndex=M,!1!==O&&To.styleTransforms(this,_),this.clone=function(){return X.cloneProps(new To.Stepper(o,e,n,t,r,i.clone(),a,s,l,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,this.group,L))},this.dispose=function(e,t,o){return window.removeEventListener("keydown",X.keyDownEvent),X.removeAllEventListeners(),X.stage&&X.stage.off(F),o||this.zimContainer_dispose(!0),Z=this.containerPrev=K=this.arrowPrev=null,J=this.containerNext=$=this.arrowNext=null,!(ae=this.textBox=i=this.label=null)}},To.zut=function(e){if(zot(e)||!e.key)return!0;To.async("https://zimjs.com/gamdata.php?id="+e.key+"&player="+e.player+"&score="+e.score+"&reverse="+e.info.reverse+"&total="+e.info.total+"&allowZero="+e.info.allowZero,e.info.type)},To.extend(To.Stepper,To.Container,["clone","dispose"],"zimContainer",!1),To.Slider=function(n,r,t,i,o,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,e,P,B,S,E,I,M,O,j,L){if(V=zob(To.Slider,arguments,"min, max, step, button, barLength, barWidth, barColor, vertical, useTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, inside, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, damp, currentValue, expand, expandVertical, expandBar, expandBarVertical, useLabels, labelMargin, style, group, inherit",this))return V;z_d("62"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Slider",this.group=j;var _,Y=!1===O?{}:To.getStyle(this.type,this.group,L);if(zot(n)&&(n=null!=Y.min?Y.min:0),zot(r)&&(r=null!=Y.max?Y.max:10),r-n!=0){zot(v)&&(v=null!=Y.sound&&Y.sound),zot(t)&&(t=null!=Y.step?Y.step:0),zot(i)&&(i=null!=Y.button?Y.button:v?"aztec":null),zot(o)&&(o=null!=Y.barLength?Y.barLength:300),zot(a)&&(a=null!=Y.barWidth?Y.barWidth:3),zot(l)&&(l=null!=Y.barColor?Y.barColor:v?To.lighter:"#666"),zot(s)&&(s=null!=Y.vertical?Y.vertical:!!v),zot(c)&&(c=null!=Y.useTicks?Y.useTicks:!!v),zot(d)&&(d=null!=Y.tickStep?Y.tickStep:t||(c||v?(n-r)/40:0)),zot(h)&&(h=null!=Y.semiTicks?Y.semiTicks:d?3:0),zot(u)&&(u=null!=Y.tickColor?Y.tickColor:v?To.tin:l),zot(g)&&(g=null!=Y.tickScale?Y.tickScale:v?1.25:1),zot(p)&&(p=null!=Y.semiTickScale?Y.semiTickScale:1),zot(f)&&(f=null!=Y.accentSize?Y.accentSize:v?10:0),zot(m)&&(m=null!=Y.accentOffset?Y.accentOffset:v?-(f+a)/2:0),zot(z)&&(z=null!=Y.accentColor?Y.accentColor:To.pink),zot(y)&&(y=null!=Y.accentBackgroundColor?Y.accentBackgroundColor:v?To.blue:To.clear),zot(b)&&(b=null!=Y.accentDifference?Y.accentDifference:-.5),zot(w)&&(w=null!=Y.inside&&Y.inside),zot(C)&&(C=null==Y.keyArrows||Y.keyArrows),zot(k)&&(k=null==Y.keyArrowsH||Y.keyArrowsH),zot(T)&&(T=null==Y.keyArrowsV||Y.keyArrowsV),zot(x)&&(x=null!=Y.keyArrowsStep?Y.keyArrowsStep:(r-n)/100),zot(A)&&(A=null!=Y.damp&&Y.damp),zot(e)&&(e=null!=Y.currentValue&&Y.currentValue),zot(P)&&(P=null!=Y.expand?Y.expand:To.mobile()?10:null),zot(B)&&(B=null!=Y.expandVertical?Y.expandVertical:P),zot(S)&&(S=null!=Y.expandBar?Y.expandBar:null),zot(E)&&(E=null!=Y.expandBarVertical?Y.expandBarVertical:P),zot(I)&&(I=null!=Y.useLabels&&Y.useLabels),zot(M)&&(M=null!=Y.labelMargin?Y.labelMargin:20);var D=this,X=function(){return arguments}(n,r,t,e);n=To.Pick.choose(n),r=To.Pick.choose(r);var R,W=t=To.Pick.choose(t);e=To.Pick.choose(e),f&&(D.accentBacking=new To.Rectangle(o-.25,f+b,y).addTo(this).rot(s?90:0).mov(s?-m-a/2+b/2:.25,s?0:m+a/2-b/2),R=D.accent=new To.Rectangle(o,f,z).sca(0,1).rot(s?-90:0).mov(s?-m-f-a/2:0,s?o:m+a/2).addTo(this));var F,H,V,N,G,q,U=!(!zot(Y.backing)&&"Pattern"!=Y.backing.type);!zot(i)&&"string"!=typeof i||(F=30,H=40,s&&(F=50,H=40),"pill"!=i&&"aztec"!=i&&"circle"!=i&&"grip"!=i||("pill"==i?N={width:s?40:18,height:s?18:40,borderColor:To.tin,borderWidth:3,corner:8}:"aztec"==i?(F=null!=Y.width?Y.width:.9*Math.max(F,H),H=null!=Y.height?Y.height:.6*Math.min(F,H),V=we(null!=Y.backgroundColor?Y.backgroundColor:To.lighter).rot(s?0:-90),G=we(null!=Y.rollBackgroundColor?Y.rollBackgroundColor:To.white).rot(s?0:-90),N={width:F,height:H,backing:V,rollBacking:G},Y.borderWidth=0,Y.borderColor=0):"circle"==i&&(F=null!=Y.width?Y.width:30,H=null!=Y.height?Y.height:30,N={width:F,height:F,corner:null!=Y.corner?Y.corner:F/2}),D.buttonType=i),G=null!=Y.borderColor?Y.borderColor:N?N.borderColor:U?"#666":null,i=new To.Button({width:null!=Y.width?Y.width:N?N.width:F,height:null!=Y.height?Y.height:N?N.height:H,label:"",backgroundColor:null!=Y.backgroundColor?Y.backgroundColor:"#fff",rollBackgroundColor:null!=Y.rollBackgroundColor?Y.rollBackgroundColor:"#ddd",borderColor:G,borderRollColor:null!=Y.borderRollColor?Y.borderRollColor:G,borderWidth:null!=Y.borderWidth?Y.borderWidth:N?N.borderWidth:U?1:null,corner:null!=Y.corner?Y.corner:N?N.corner:0,backing:null!=Y.backing?Y.backing.clone():N?N.backing:null,rollBacking:null!=Y.rollBacking?Y.rollBacking.clone():N?N.rollBacking:null,shadowColor:null!=Y.shadowColor?Y.shadowColor:null,shadowBlur:null!=Y.shadowBlur?Y.shadowBlur:null,hitPadding:30,style:!1}),"circle"==D.buttonType?(i.scaleY=H/F,s||i.rot(-90)):"grip"==D.buttonType&&To.loop([1,1,1],function(e,t,o){s?new To.Line(.62*i.width,e,i.borderColor||To.grey).pos(0,.4*i.height/2+(t+1)*(.6*i.height)/(o+1),To.CENTER,To.TOP,i):new To.Line(.62*i.height,e,i.borderColor||To.grey).rot(90).pos(.4*i.width/2+(t+1)*(.6*i.width)/(o+1),0,To.LEFT,To.CENTER,i)})),i.rollPersist=!0,zot(P)&&zot(B)||i.expand(P,B),s?(q=i.width,w?(ee=o,this.setBounds(0,0,q,ee)):(ee=o+i.height,this.setBounds(-i.width/2,-i.height/2,q,ee))):(ee=Math.max(i.height,a),w?(q=o,this.setBounds(0,0,q,ee)):(q=o+i.width,this.setBounds(-i.width/2,-i.height/2,q,ee)));var Q,Z,K,J,$,ee,te,oe,ne,re,ie,ae=n,le=0;if(this.button=i,this.cursor="pointer",c&&(K=this.ticks=new To.Shape({style:!1}),this.addChild(K),(J=K.graphics).ss(1).s(u),$=Math.round((r-n)/(d||t)),ee=(r-n)/$,t=d?(ee!=d&&zon&&zogy("Slider() - non-divisible step ("+d+") adjusted to "+ee),d=ee):(ee!=t&&zon&&zogy("Slider() - non-divisible step ("+t+") adjusted to "+ee),ee),te=w?(o-(s?i.height:i.width))/Math.abs($):o/Math.abs($)),s){var se=w?i.height/2:0,ce=this.bar=new To.Rectangle(a,o,l,null,null,null,null,null,!1);if(S?ce.expand(S,expandBarVerticical):ce.expand(20,0),ce.centerReg(this),i.centerReg(this),Z=ce.getBounds(),Q=new createjs.Rectangle(ce.x,Z.y+se,0,Z.height-2*se),c){I&&(ge=D.labels=(new Container).addTo(D));for(var ue=0;ue<=Math.abs($);ue++){var de=(pe=ue%(h+1)==0)?25*g:15*p,he=se+te*ue;J.mt(0,he).lt(de,he),I&&(h&&pe||!h)&&(fe=Math.max(To.countDecimals(W),To.countDecimals(n),To.countDecimals(r)),new Label({text:To.decimals(r-(r-n)/Math.abs($)*ue,fe+1),size:Y.size||10,align:"left",valign:"center"}).centerReg({add:!1}).reg(0).loc(de+M+2,he-1,ge))}K.x=ce.x+15}}else{var ge,se=w?i.width/2:0;if(ce=this.bar=new To.Rectangle(o,a,l,null,null,null,null,null,!1),S?ce.expand(S,expandBarVerticical):ce.expand(0,20),ce.centerReg(this),i.centerReg(this),Z=ce.getBounds(),Q=new createjs.Rectangle(Z.x+se,ce.y,Z.width-2*se,0),c){I&&(ge=D.labels=(new Container).addTo(D));for(ue=0;ue<=Math.abs($);ue++){var pe,fe,de=se+te*ue,he=-((pe=ue%(h+1)==0)?25*g:15*p);J.mt(de,0).lt(de,he),I&&(h&&pe||!h)&&(fe=Math.max(To.countDecimals(W),To.countDecimals(n),To.countDecimals(r)),new Label({text:To.decimals(n+(r-n)/Math.abs($)*ue,fe+1),size:Y.size||10,align:"center",valign:"center"}).centerReg({add:!1}).loc(de,he-M,ge))}K.y=ce.y-10}}i.x=Q.x,i.y=Q.y,i.on("mousedown",function(e){_=e.target.stage,D.focus=!0;e=D.globalToLocal(e.stageX/To.scaX,e.stageY/To.scaY);oe=e.x-i.x,ne=e.y-i.y,_&&(_.mouseMoveOutside=!0)}),i.on("pressmove",function(e){xe(e)}),ce.on("mousedown",function(e){_=e.target.stage,ne=oe=0,D.zimAccessibility&&D.zimAccessibility.aria||xe(e)}),A&&(re=n,ie=new To.Damp(re,A),D.ticker=To.Ticker.add(function(){re=ie.convert(ae)})),Object.defineProperty(this,"currentValue",{get:function(){return A?re:ae},set:function(e){zot(e)||(n<r?(e<n&&(e=n),r<e&&(e=r)):(n<e&&(e=n),e<r&&(e=r)),ae=e=Ce(e),ie&&ie.immediate(ae),le=s?(i.y=(e-r)/(n-r)*Q.height+se,i.y):(i.x=(e-n)/(r-n)*Q.width+se,i.x),R&&ve(),Te(),To.OPTIMIZE||!zns&&OPTIMIZE||!D.stage||D.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return A?re:ae},set:function(e){e!=D.currentValue&&(D.currentValue=e,D.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return n},set:function(e){zon&&zogy("Slider() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return r},set:function(e){zon&&zogy("Slider() - max is read only")}}),Object.defineProperty(this,"step",{get:function(){return t},set:function(e){zon&&zogy("Slider() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return k},set:function(e){k=e}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return T},set:function(e){T=e}}),void 0!==KEYFOCUS&&(To.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return To.KEYFOCUS==D},set:function(e){To.KEYFOCUS=D}}),C&&!To.KEYFOCUS&&Ae(),this.on("mousedown",function(){C&&Ae()});var me=!1,ze=!1,ye=!1,be=!1;this.keyDownEvent=function(e){D.stage&&(D.zimAccessibility&&D.focus||!D.zimAccessibility&&D.keyFocus)&&(37==e.keyCode&&k?me=!0:40==e.keyCode&&T?ze=!0:39==e.keyCode&&k?ye=!0:38==e.keyCode&&T&&(be=!0),null==D.keyInterval&&(me||ze||ye||be)&&(Pe(),D.keyTimeout=setTimeout(function(){null==D.keyInterval&&(me||ze||ye||be)&&(D.keyInterval=setInterval(Pe,40))},140)))},window.addEventListener("keydown",this.keyDownEvent),D.keyUpEvent=function(e){37==e.keyCode?me=!1:40==e.keyCode?ze=!1:39==e.keyCode?ye=!1:38==e.keyCode&&(be=!1),null==D.keyInterval||me||ze||ye||be||(clearInterval(D.keyInterval),D.keyInterval=null)},window.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(D,"enabled",{get:function(){return D._enabled},set:function(e){Ge(D,e),e?(window.addEventListener("keydown",D.keyDownEvent),window.addEventListener("keyup",D.keyUpEvent)):(window.removeEventListener("keydown",D.keyDownEvent),window.removeEventListener("keyup",D.keyUpEvent))}}),zot(e)||(D.currentValue=e),To.setSwipe(this,!1),!1!==O&&To.styleTransforms(this,Y),this.clone=function(e){return D.cloneProps(new To.Slider(e||!To.isPick(X[0])?D.min:X[0],e||!To.isPick(X[1])?D.max:X[1],e||!To.isPick(X[2])?D.step:X[2],i.clone(),o,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,e||!To.isPick(X[3])?D.currentValue:X[3],P,B,S,E,I,M,O,this.group,L))},this.dispose=function(e,t,o){return window.removeEventListener("keydown",D.keyDownEvent),window.removeEventListener("keyup",D.keyUpEvent),o||this.zimContainer_dispose(!0),!0}}else zog("ZIM Slider range must not be 0");function ve(){R.sca((D.currentValue-D.min)/Math.abs(D.max-D.min),1)}function we(e){var t=new To.Shape(F,H);return t.f(e).s(null!=Y.borderColor?Y.borderColor:To.tin).ss(null!=Y.borderWidth?Y.borderWidth:3).mt(2,0).lt(F+2,.2*H).lt(F+2,.8*H).lt(2,H).cp().centerReg({add:!1}),t}function Ce(e){return 0==t?e:Math.round(e/t)*t}function xe(e){var t,o=D.globalToLocal(e.stageX/To.scaX,e.stageY/To.scaY),e=(t=o.x-oe,e=o.y-ne,o=Q,t=Math.max(o.x,Math.min(o.x+o.width,t)),e=Math.max(o.y,Math.min(o.y+o.height,e)),{x:t,y:e});le=s?(i.x=e.x,ae=Ce((e.y-Q.y)/Q.height*(n-r)),i.y=Q.y+ae*Q.height/(n-r),ae+=r,i.y!=le&&D.dispatchEvent("change"),i.y):(ae=Ce((e.x-Q.x)/Q.width*(r-n)),i.x=Q.x+ae*Q.width/(r-n),ae+=n,i.y=e.y,i.x!=le&&D.dispatchEvent("change"),i.x),R&&ve(),Te(),To.OPTIMIZE||!zns&&OPTIMIZE||!D.stage||D.stage.update()}function ke(e){return 0<e?1:-1}function Te(){D.zimAccessibility&&D.zimAccessibility.changeTitle(D,null,!0)}function Ae(){D.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function Pe(){(me||ze)&&(D.currentValueEvent-=0<t?t*ke(r-n):x*ke(r-n)),(ye||be)&&(D.currentValueEvent+=0<t?t*ke(r-n):x*ke(r-n))}},To.extend(To.Slider,To.Container,["clone","dispose"],"zimContainer",!1),To.Selector=function(a,n,r,i,l,s,c,u,d,h,g,p,f,m,z,y,e,t,o){if(x=zob(To.Selector,arguments,"tile, borderColor, borderWidth, backgroundColor, corner, dashed, paddingHorizontal, paddingVertical, speed, diagonal, dim, multi, keyArrows, behind, resizeScale, selectedIndex, style, group, inherit",this))return x;z_d("62.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Selector",this.group=t;var b=!1===e?{}:To.getStyle(this.type,this.group,o),v=Ao();zot(a)&&(a=null!=b.tile?b.tile:new To.Tile(new To.Circle(20,To.red),4,4,10,10)),zot(n)&&(n=null!=b.borderColor?b.borderColor:"white"),zot(r)&&(r=null!=b.borderWidth?b.borderWidth:2),zot(i)&&(i=null!=b.backgroundColor?b.backgroundColor:"rgba(0,0,0,.1)"),zot(l)&&(l=null!=b.corner?b.corner:10),zot(s)&&(s=null!=b.dashed&&b.dashed),zot(c)&&(c=null!=b.padding?b.padding:a.spacingH/2),zot(u)&&(u=null!=b.paddingVertical?b.paddingVertical:a.spacingV/2),zot(d)&&(d=null!=b.speed?b.speed:2),zot(h)&&(h=null!=b.diagonal&&b.diagonal),zot(g)&&(g=null!=b.dim&&b.dim),zot(p)&&(p=null!=b.multi&&b.multi),p&&(d=0),zot(f)&&(f=null==b.keyArrows||b.keyArrows),zot(m)&&(m=null!=b.behind&&b.behind),zot(z)&&(z=null!=b.resizeScale&&b.resizeScale),zot(y)&&(y=null!=b.selectedIndex?b.selectedIndex:null);var w=[],C=[];To.loop(a.items.length,function(e){w.push(zik(n)),C.push(zik(i))});var x,k,T,A,P,B,S,E=this;zot(y)&&p||(x=zot(T=y)||y<0?0:y,k=a.getChildAt(x),E.currentItem=a.getChildAt(x),zot(y=T)&&(y=null!=b.selectedIndex?b.selectedIndex:0)),(T=k||a.getChildAt(0))&&(A=T.width+2*c,P=T.height+2*u),E.tile=a.addTo(E).cur(),p?(B=this.selectors=[],To.loop(10,function(){(S=new To.Rectangle(A,P,To.faint,To.faint,r,l,s,{ignoreScale:!z}).centerReg(E,m?0:1)).visible=!1,B.push(S),S.mouseEnabled=!1}),this.selector=S):((S=this.selector=new To.Rectangle(A,P,To.faint,To.faint,r,l,s,{ignoreScale:!z}).centerReg(E)).loc(a.width/2,T.y+u,E,m?0:1),S.visible=!1),y<0||zot(k)||(S.loc(T.x+c,T.y+u,E,m?0:1),S.color=C[y],S.borderColor=w[y],S.visible=!0),a.mov(c,u),this.setBounds(a.width+2*c,a.height+2*u);var I={};function M(e,t,o){zot(o)&&(o=S),y=(k=e).tileNum,o.color=C[y],o.borderColor=w[y],p&&(E.upItem=E.upIndex=null,E.downItem=k,E.downIndex=y),E.animating=!0;var n=a.localToLocal(e.x,e.y,E),r=Math.abs(n.x-S.x),i=Math.abs(n.y-S.y),t=E.noAnimate||t?0:d;E.noAnimate=!1,0==t?(o.loc(n.x,n.y).siz(e.width+2*c,e.height+2*u),E.animating=!1,E.dispatchEvent("change")):(h||(r+i)*t<=0?o.animate({x:n.x,y:n.y},(i+r)*t):(o.stopAnimate(),i<=r?o.animate([{props:{x:n.x},time:Math.max("s"==v?.1:100,r*t/("s"==v?1e3:1))},{props:{y:n.y},time:Math.max("s"==v?.1:100,i*t/("s"==v?1e3:1))}]):o.animate([{props:{y:n.y},time:Math.max("s"==v?.1:100,i*t/("s"==v?1e3:1))},{props:{x:n.x},time:Math.max("s"==v?.1:100,r*t/("s"==v?1e3:1))}])),o.animate({props:{widthOnly:e.width+2*c,heightOnly:e.height+2*u},time:Math.max("s"==v?.2:200,(i+r)*t/("s"==v?1e3:1)),call:function(){E.animating=!1,E.dispatchEvent("change")}}),g&&(t=!0===g?.7:To.constrain(g,0,1),a.animate({props:{alpha:t},rewind:!0,time:(i+r)*d*.7/("s"==v?1e3:1)}))),a.stage&&a.stage.update()}function O(){E.keyFocus=!0;var e=document.activeElement;e&&e.blur()}this.tileDown=a.on("mousedown",function(e){var t=S;if(!p||!zot(t=B.shift())){t.visible=!0;for(var o=e.target,n=0;o.parent!=a&&n<10;)o=o.parent,n++;o.parent==a&&M(o,null,t),p&&(e="id"+Math.abs(e.pointerID+1),I[e]={index:y,item:k,selector:t})}}),p&&(this.tileMove=a.on("pressmove",function(e){var t="id"+Math.abs(e.pointerID+1),o=I[t];zot(o)||(t=a.itemUnderPoint(e.stageX/To.scaX,e.stageY/To.scaY),o.item!=t&&(E.upItem=o.item,E.upIndex=o.index,E.downItem=o.item=t,E.downIndex=o.index=t?t.tileNum:null,E.dispatchEvent("change"),zot(t)?o.selector.visible=!1:(e=a.localToLocal(t.x,t.y,E),o.selector.loc(e.x,e.y).siz(t.width+2*c,t.height+2*u),o.selector.color=C[o.index],o.selector.borderColor=w[o.index],o.selector.visible=!0),E.stage.update()))}),this.tileUp=a.on("pressup",function(e){var t="id"+Math.abs(e.pointerID+1),e=I[t];zot(e)||(E.downIndex=E.downItem=null,E.upIndex=e.index,E.upItem=e.item,B.push(e.selector),e.selector.visible=!1,E.dispatchEvent("change"),E.stage&&!To.OPTIMIZE&&E.stage.update(),delete I[t])})),E.noAnimate=!1,f&&E.added(function(){E.keyEvent=E.stage.frame.on("keydown",function(e){var t,o,n,r;E.stage&&E.enabled&&(E.animating||(E.zimAccessibility&&E.focus||!E.zimAccessibility&&E.keyFocus)&&(!0===(t=To.loop(a.items2D,function(e,o){e=To.loop(e,function(e,t){if(e==k)return[t,o]});if(Array.isArray(e))return e}))&&(t=[0,0]),o=a.items2D[t[1]].length,n=a.items2D.length,"39"==e.keyCode?(r=(t[0]+1)%o,M(a.items2D[t[1]][r],r<t[0])):"37"==e.keyCode?(r=(t[0]-1+o)%o,M(a.items2D[t[1]][r],r>t[0])):"38"==e.keyCode?(r=(t[1]-1+n)%n,M(a.items2D[r][t[0]],r>t[1])):"40"==e.keyCode&&(r=(t[1]+1)%n,M(a.items2D[r][t[0]],r<t[1]))))})}),Object.defineProperty(this,"selectedIndex",{get:function(){return y},set:function(e){zot(e)&&(E.currentItem=null),E.currentItem=a.items[e]}}),Object.defineProperty(this,"text",{get:function(){return k.text},set:function(e){zon&&zogy("Selector() - text is read only")}}),Object.defineProperty(this,"currentItem",{get:function(){return k},set:function(e){if(zot(e))return y=k=null,S.visible=!1,E.selectedCol=null,void(E.selectedRow=null);S.visible=!0,E.lastItem=k,E.lastIndex=y,E.lastCol=E.selectedCol,E.lastRow=E.selectedRow,E.selectedCol=e.tileCol,E.selectedRow=e.tileRow,y=e.tileNum,M(k=e)}}),this._enabled=!0,Object.defineProperty(E,"enabled",{get:function(){return E._enabled},set:function(e){e?E.mouse():E.noMouse(),E._enabled=e}}),void 0!==KEYFOCUS&&(To.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return To.KEYFOCUS==E},set:function(e){To.KEYFOCUS=E}}),To.KEYFOCUS||O(),this.on("mousedown",function(){O()}),!1!==e&&To.styleTransforms(this,b),this.clone=function(e){if(e)for(var t=[],o=0;o<E.tile.items.length;o++)t.push(E.tile.items[o].clone(!0));return E.cloneProps(new To.Selector(e?To.series(t):a.clone?a.clone():a,n,r,i,l,s,c,u,d,h,g,p,f,m,z,y,this.style,this.group))},this.dispose=function(e,t,o){E.keyEvent&&E.stage&&E.stage.frame.off("keydown",E.keyEvent),a.off(E.tileDown),a.dispose(),p&&(a.off(E.tileMove),a.off(E.tileUp)),o||this.zimContainer_dispose(!0)}},To.extend(To.Selector,To.Container,["clone","dispose"],"zimContainer",!1),To.Dial=function(n,i,r,t,o,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L,_,e,Y,D,X,R,W){if($=zob(To.Dial,arguments,"min, max, step, width, backgroundColor, indicatorColor, indicatorScale, indicatorType, useTicks, innerTicks, tickColor, tickStep, semiTicks, tickScale, semiTickScale, innerCircle, innerScale, innerColor, inner2Color, accentSize, accentOffset, accentColor, accentBackgroundColor, accentDifference, sound, linear, gap, limit, keyArrows, keyArrowsStep, keyArrowsH, keyArrowsV, continuous, continuousMin, continuousMax, damp, currentValue, useLabels, labelMargin, style, group, inherit",this))return $;z_d("63"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Dial",this.group=R;var F=!1===X?{}:To.getStyle(this.type,this.group,W);if(zot(n)&&(n=null!=F.min?F.min:0),zot(i)&&(i=null!=F.max?F.max:10),i-n!=0){zot(T)&&(T=null!=F.sound&&F.sound),zot(r)&&(r=null!=F.step?F.step:T?0:1),zot(t)&&(t=null!=F.width?F.width:100),zot(o)&&(o=null!=F.backgroundColor?F.backgroundColor:"#666"),zot(a)&&(a=null!=F.indicatorColor?F.indicatorColor:T?"white":"#222"),zot(l)&&(l=null!=F.indicatorScale?F.indicatorScale:1),zot(s)&&(s=null!=F.indicatorType?F.indicatorType:T?"aztec":"arrow"),zot(c)&&(c=null!=F.useTicks?F.useTicks:0!=r),zot(u)&&(u=null!=F.innerTicks&&F.innerTicks),zot(h)&&(h=null!=F.tickStep?F.tickStep:r||(c?.25:0)),zot(g)&&(g=null!=F.semiTicks?F.semiTicks:T?3:0),zot(d)&&(d=null!=F.tickColor?F.tickColor:T?To.tin:o),zot(p)&&(p=null!=F.tickScale?F.tickScale:T?1.25:1),zot(f)&&(f=null!=F.semiTickScale?F.semiTickScale:1.25),zot(m)&&(m=null==F.innerCircle||F.innerCircle),zot(y)&&(y=null!=F.innerColor?F.innerColor:T?To.pink:"rgba(0,0,0,.2)"),zot(b)&&(b=null!=F.inner2Color?F.inner2Color:T?To.light:"rgba(0,0,0,.1)"),zot(z)&&(z=null!=F.innerScale?F.innerScale:T?.4:.5),zot(v)&&(v=null!=F.accentSize?F.accentSize:T?t/2*.15:0),zot(w)&&(w=null!=F.accentOffset?F.accentOffset:t/2*.45),zot(k)&&(k=null!=F.accentDifference?F.accentDifference:-.25),zot(C)&&(C=null!=F.accentColor?F.accentColor:To.pink),zot(x)&&(x=null!=F.accentBackgroundColor?F.accentBackgroundColor:T?To.blue:To.clear),zot(P)&&(P=null!=F.gap?F.gap:T?.25:0),zot(A)&&(A=null!=F.linear?F.linear:T),P&&(O=!(A=!0)),zot(B)&&(B=null==F.limit||F.limit),zot(S)&&(S=null==F.keyArrows||F.keyArrows),zot(E)&&(E=null!=F.keyArrowsStep?F.keyArrowsStep:(i-n)/100),zot(I)&&(I=null==F.keyArrowsH||F.keyArrowsH),zot(M)&&(M=null==F.keyArrowsV||F.keyArrowsV),zot(O)&&(O=null!=F.continuous&&F.continuous),O&&(B=null!=F.limit&&F.limit),zot(_)&&(_=null!=F.damp&&F.damp),zot(e)&&(e=null!=F.currentValue&&F.currentValue),zot(Y)&&(Y=null!=F.useLabels&&F.useLabels),zot(D)&&(D=null!=F.labelMargin?F.labelMargin:10),0==B&&(_=null);var H=this;this.cursor="pointer";var V=function(){return arguments}(n,i,r,e);n=To.Pick.choose(n),i=To.Pick.choose(i);var N=r=To.Pick.choose(r);e=To.Pick.choose(e);var G,q,U,Q=t/2,Z=t,K=n,J=0;v&&(G=t/2+w+v/2,q=360*P/2,H.accentBacking=new To.Shape(-Q,-Q,2*Q,2*Q).addTo(this).s(x).ss(v+k).a(0,0,G,(q-90)*To.RAD,(360-q-90)*To.RAD),U=H.accent=new To.Shape(-Q,-Q,2*Q,2*Q).addTo(this));var $=this.backing=new To.Circle(Q,o,null,null,null,null,null,null,!1);v?$.center(this):this.addChild($),m&&(ee=this.inner=new To.Circle(Q*z,y,null,null,null,null,null,null,!1),this.addChild(ee),te=this.inner2=new To.Circle(Q*(z-.1),b,null,null,null,null,null,null,!1),this.addChild(te)),T&&(H.rotation=180);var ee,te,oe,ne,re,ie,ae,le,se=Math.abs(i-n)/(h||r)+(P?1:0),ce=r?Math.abs(i-n)/r:0;if(c){var ue,de=this.ticks=new To.Container({style:!1});this.addChild(de),Y&&(ue=H.labels=new Container(2*t,2*Z).centerReg(H));for(var he=0;he<se;he++){var ge=he%(g+1)==0,pe=new To.Rectangle(1,Q*(ge?.2*p:.1*f),d,null,null,null,null,null,!1);pe.regY=Q+(u?z-.05:pe.height+.1*Q),pe.regX=.5,pe.rotation=(360-360*P)/(se-(P?1:0))*he+360*P/2,de.addChild(pe),Y&&(g&&ge||!g)&&(ge=Math.max(To.countDecimals(N),To.countDecimals(n),To.countDecimals(i)),new Label({text:To.decimals(n+(i-n)/Math.abs(ce)*he,ge+1),size:F.size||10,align:"center",valign:"center"}).centerReg({add:!1}).loc(0,-D-1,pe).addTo(ue))}H.expand(pe.height)}this.setBounds(-Q,-Q,t,t),"dot"==s||"circle"==s?(oe=this.indicator=new To.Container({style:!1}),ne=this.indicatorShape=new To.Circle(.19*Q,a,null,null,null,null,null,null,!1),oe.addChild(ne),To.sca(oe,l),oe.regY=Q-oe.getBounds().width*l/2-.07*Q):"line"==s||"rectangle"==s?(oe=this.indicator=new To.Container({style:!1}),ne=this.indicatorShape=new To.Rectangle(.1*Q,.3*Q,a,null,null,null,null,null,null,null,!1),oe.addChild(ne),To.sca(oe,l),oe.regY=Q-oe.getBounds().width*l/2-.07*Q,oe.regX=.05*Q):"aztec"==s?(oe=this.indicator=new To.Container({style:!1}),ee=.05*Q,te=.1*Q,Z=.42*Q,ne=this.indicatorShape=new To.Shape(-te,0,2*te,Z).f(a).mt(-ee,0).lt(ee,0).lt(te,Z).lt(-te,Z).cp(),oe.addChild(ne),To.sca(oe,l),oe.regY=Q-oe.getBounds().width*l/2-.04*Q):(oe=this.indicator=new To.Container({style:!1}),ne=this.indicatorShape=new To.Triangle(.4*Q,.4*Q,.4*Q,a,null,null,null,null,null,null,null,!1),oe.addChild(ne),To.sca(oe,l),oe.regY=Q-oe.getBounds().height*l*(u?.85:.75),u&&(ne.rotation=180)),oe.regY/=l,this.addChild(oe);var fe,me,ze,ye,be,ve,we,Ce,xe,ke=0;O?(ze=me=fe=0,ve=!(be=ye=!1)):0,A?this.on("mousedown",function(e){var o,n;e.target.stage,H.zimAccessibility&&H.zimAccessibility.aria||(o=re=oe.rotation,H.parent.globalToLocal(0,0),n=H.parent.globalToLocal(e.stageX/To.scaX,e.stageY/To.scaY),ae=H.on("pressmove",function(e){var t=H.parent.globalToLocal(e.rawX/To.scaX,e.rawY/To.scaY);oe.rotation=o=re+100*(n.y-t.y)/(this.width||1),B&&(360-360*P/2<o||o<0+360*P/2)&&(o=To.constrain(o,360*P/2,360-360*P/2),n=H.parent.globalToLocal(e.rawX/To.scaX,e.rawY/To.scaY),re=o),Oe(o)}),le=this.on("pressup",function(e){H.off("pressmove",ae),H.off("pressup",le)}))}):(we=!0,this.on("mousedown",function(e){var t,o,n,r;e.target.stage,H.zimAccessibility&&H.zimAccessibility.aria||(re=oe.rotation,t=H.parent.globalToLocal(e.stageX/To.scaX,e.stageY/To.scaY),t.x,o=t.x-H.x,n=H.y-t.y,ie=180*Math.atan2(o,n)/Math.PI,r=(new Date).getTime(),ae=H.on("pressmove",function(e){var t,o;ye&&(o=(t=H.parent.globalToLocal(e.rawX/To.scaX,e.rawY/To.scaY)).x-H.x,n=H.y-t.y,ie=180*Math.atan2(o,n)/Math.PI,re=oe.rotation),o=(t=H.parent.globalToLocal(e.rawX/To.scaX,e.rawY/To.scaY)).x-H.x,n=H.y-t.y;var n=180*Math.atan2(o,n)/Math.PI,n=((n=re+n-ie)+36e5)%360;B&&we&&(180<n-ke&&H.currentValue!=i?n=0:n-ke<-180&&(n=359)),we=!0,Oe(n),ke=n,t.x}),le=this.on("pressup",function(e){H.currentValue!=H.min&&H.currentValue!=H.max&&(we=!1),(new Date).getTime()-r<200&&(t=H.parent.globalToLocal(e.rawX/To.scaX,e.rawY/To.scaY),o=t.x-H.x,n=H.y-t.y,Oe(180*Math.atan2(o,n)/Math.PI-H.rotation)),re=oe.rotation,H.off("pressmove",ae),H.off("pressup",le)}))})),_&&(Ce=n,xe=new To.Damp(Ce,_),H.ticker=To.Ticker.add(function(){Ce=xe.convert(K)})),Object.defineProperty(this,"currentValue",{get:function(){return _?Ce:K},set:function(e){zot(e)||(O?(ye=!1,zot(j)||zot(L)?zot(j)?zot(L)||L<e&&(e=L,ye=!0):e<j&&(e=j,ye=!0):j<L?(e<j&&(e=j,ye=!0),L<e&&(e=L,ye=!0)):(j<e&&(e=j,ye=!0),e<L&&(e=L,ye=!0)),ve&&(be=!0,ze=360*Math.floor(e/(i-n)))):n<i?(e<n&&(e=B?n:i),i<e&&(e=B?i:n)):(n<e&&(e=B?n:i),e<i&&(e=B?i:n)),e=Ee(K=e),_&&_.immediate(K),oe.rotation=360*P/2+(e-n)*(360-360*P)/(i-n),oe.rotation=(oe.rotation+36e5)%360,J=e-n,ke=oe.rotation,U&&Se(),Me(),To.OPTIMIZE||!zns&&OPTIMIZE||!H.stage||H.stage.update())}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return _?Ce:K},set:function(e){e!=H.currentValue&&(H.currentValue=e,H.dispatchEvent("change"))}}),Object.defineProperty(this,"min",{get:function(){return n},set:function(e){O?n=e:zon&&zogy("Dial() - min is read only")}}),Object.defineProperty(this,"max",{get:function(){return i},set:function(e){O?i=e:zon&&zogy("Dial() - max is read only")}}),Object.defineProperty(this,"continuous",{get:function(){return O},set:function(e){zon&&zogy("Dial() - continuous is read only")}}),Object.defineProperty(this,"continuousMin",{get:function(){return j},set:function(e){j=e,H.currentValue<j&&(H.currentValue=j)}}),Object.defineProperty(this,"continuousMax",{get:function(){return L},set:function(e){L=e,H.currentValue>L&&(H.currentValue=L)}}),Object.defineProperty(this,"step",{get:function(){return r},set:function(e){zon&&zogy("Dial() - step is read only")}}),Object.defineProperty(this,"keyArrowsH",{get:function(){return I},set:function(e){I=e}}),Object.defineProperty(this,"keyArrowsV",{get:function(){return M},set:function(e){M=e}}),void 0!==KEYFOCUS&&(To.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return To.KEYFOCUS==H},set:function(e){To.KEYFOCUS=H}}),S&&!To.KEYFOCUS&&je(),this.on("mousedown",function(){S&&je()});var Te=!1,Ae=!1,Pe=!1,Be=!1;this.keyDownEvent=function(e){H.stage&&(H.zimAccessibility&&H.focus||!H.zimAccessibility&&H.keyFocus)&&(37==e.keyCode&&I?Te=!0:40==e.keyCode&&M?Ae=!0:39==e.keyCode&&I?Pe=!0:38==e.keyCode&&M&&(Be=!0),null==H.keyInterval&&(Te||Ae||Pe||Be)&&(Le(),H.keyTimeout=setTimeout(function(){null==H.keyInterval&&(Te||Ae||Pe||Be)&&(H.keyInterval=setInterval(Le,40))},140)))},window.addEventListener("keydown",this.keyDownEvent),H.keyUpEvent=function(e){37==e.keyCode?Te=!1:40==e.keyCode?Ae=!1:39==e.keyCode?Pe=!1:38==e.keyCode&&(Be=!1),null==H.keyInterval||Te||Ae||Pe||Be||(clearInterval(H.keyInterval),H.keyInterval=null)},window.addEventListener("keyup",this.keyUpEvent),this._enabled=!0,Object.defineProperty(H,"enabled",{get:function(){return H._enabled},set:function(e){e?(window.addEventListener("keydown",H.keyDownEvent),window.addEventListener("keyup",H.keyUpEvent)):(window.removeEventListener("keydown",H.keyDownEvent),window.removeEventListener("keyup",H.keyUpEvent)),H._enabled=e}}),zot(e)&&(e=null!=F.currentValue?F.currentValue:n),H.currentValue=e,!1!==X&&To.styleTransforms(this,F),this.clone=function(e){return H.cloneProps(new To.Dial(e||!To.isPick(V[0])?H.min:V[0],e||!To.isPick(V[1])?H.max:V[1],e||!To.isPick(V[2])?H.step:V[2],t,o,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L,_,e||!To.isPick(V[3])?H.currentValue:V[3],Y,D,X,this.group,W))},this.dispose=function(e,t,o){return window.removeEventListener("keydown",H.keyDownEvent),window.removeEventListener("keyup",H.keyUpEvent),o||this.zimContainer_dispose(!0),!0}}else zog("ZIM Dial range must not be 0");function Se(){U.c().s(C).ss(v).a(0,0,G,(q-90)*To.RAD,(oe.rotation-2*q)*To.RAD)}function Ee(e){return 0==r?e:Math.round(e/r)*r}function Ie(e){return 0<e?1:-1}function Me(){H.zimAccessibility&&H.zimAccessibility.changeTitle(H,null,!0)}function Oe(e){if(O){be&&(fe=e,be=!1),fe+180<e?ze-=360:e<fe-180&&(ze+=360),me=ze+e,ve=!1;var t=H.currentValue;return H.currentValue=Ee(me*(i-n)/360),t!=H.currentValue&&H.dispatchEvent("change"),fe=e,ve=!0,U&&Se(),1}var o;e<0&&(e+=360),e%=360,0!=r?(o=Ee(((e=Math.min(e,360))-360*P/2)/(360-360*P)*(i-n)),oe.rotation=360*P/2+o*(360-360*P)/(i-n)):o=((oe.rotation=e)-360*P/2)/(360-360*P)*(i-n),o!=J&&(K=(J=o)+n,U&&Se(),H.dispatchEvent("change"),To.OPTIMIZE||!zns&&OPTIMIZE||!H.stage||H.stage.update()),Me()}function je(){H.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function Le(){(Te||Ae)&&(H.currentValueEvent-=0<r?r*Ie(i-n):E*Ie(i-n)),(Pe||Be)&&(H.currentValueEvent+=0<r?r*Ie(i-n):E*Ie(i-n))}},To.extend(To.Dial,To.Container,["clone","dispose"],"zimContainer",!1),To.Tabs=function(s,c,n,u,d,h,g,p,f,m,z,y,a,l,b,v,o,r,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L,_,Y,i,D,X,R,W,F,H,V,N,G,e,q){if(ve=zob(To.Tabs,arguments,"width, height, tabs, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, vertical, spacing, currentEnabled, currentSelected, corner, base, keyEnabled, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, backdropColor, align, valign, labelAlign, labelValign, labelIndent, labelIndentHorizontal, labelIndentVertical, indent, useTap, excludeCustomTap, selectedIndex, styleLabels, keyWrap, style, group, inherit",this))return ve;z_d("65");var U=!1===G?{}:To.getStyle("Tabs",e,q);zot(y)&&(y=null!=U.vertical&&U.vertical),zot(s)&&(s=null!=U.width?U.width:null);var Q=!zot(s);if(zot(s)&&(s=y?60:240),zot(c)&&(c=null!=U.height?U.height:y?240:60),this.zimContainer_constructor(null,null,null,null,!0),this.type="Tabs",this.group=e,(zot(n)||n.length<=0)&&(n=null!=U.tabs?U.tabs:[1,2,3,4]),zot(u)&&(u=null!=U.backgroundColor?U.backgroundColor:"#777"),zot(d)&&(d=null!=U.rollBackgroundColor?U.rollBackgroundColor:"#555"),zot(h)&&(h=null!=U.selectedBackgroundColor?U.selectedBackgroundColor:"#333"),zot(g)&&(g=null!=U.selectedRollBackgroundColor?U.selectedRollBackgroundColor:d),zot(p)&&(p=null!=U.color?U.color:"white"),zot(f)&&(f=null!=U.rollColor?U.rollColor:p),zot(m)&&(m=null!=U.selectedColor?U.selectedColor:p),zot(z)&&(z=null!=U.selectedRollColor?U.selectedRollColor:f),zot(x)&&(x=null!=U.backing?U.backing.clone():null),zot(k)&&(k=null!=U.rollBacking?U.rollBacking.clone():null),zot(j)&&(j=null!=U.align?U.align:"center"),zot(L)&&(L=null!=U.valign?U.valign:"center"),zot(_)&&(_=null!=U.labelAlign?U.labelAlign:j),zot(Y)&&(Y=null!=U.labelValign?U.labelValign:L),zot(R)&&(R=null!=U.indent?U.indent:10),zot(i)&&(i=null!=U.labelIndent?U.labelIndent:R),zot(D)&&(D=null!=U.labelIndentHorizontal?U.labelIndentHorizontal:i),zot(X)&&(X=null!=U.labelIndentVertical?U.labelIndentVertical:i),zot(l)&&(l=null!=U.currentEnabled&&U.currentEnabled),zot(b)&&(b=null==U.currentSelected||U.currentSelected),b||(l=!0),zot(a)&&(a=null!=U.spacing?U.spacing:1),zot(v)&&(v=null!=U.corner?U.corner:0),zot(w)&&(w=null!=U.gradient?U.gradient:null),zot(C)&&(C=null!=U.gloss?U.gloss:null),zot(o)&&(o=null!=U.base?U.base:0!=v||Array.isArray(v)?y?"left":"bottom":"none"),zot(r)&&(r=null==U.keyEnabled||U.keyEnabled),zot(W)&&(W=null!=U.useTap&&U.useTap),zot(F)&&(F=null!=U.excludeCustomTap&&U.excludeCustomTap),zot(O)&&(O=null!=U.backdropColor?U.backdropColor:null),zot(V)&&(V=null!=U.styleLabels?U.styleLabels:null),zot(N)&&(N=null==U.keyWrap||U.keyWrap),"none"==o||0==v||Array.isArray(v))Array.isArray(v)||(v=[v,v,v,v]);else switch(o){case"bottom":v=[v,v,0,0];break;case"left":v=[0,v,v,0];break;case"top":v=[0,0,v,v];break;case"right":v=[v,0,0,v]}var Z=this;this.keyEnabled=r;var K,J,$=0,ee=[],te=[],t=n.length,oe=(s-a*(t-1))/t,ne=(c-a*(t-1)-2)/t;zot(O)||(J=this.backdrop=new To.Rectangle(s,c,O,null,null,null,null,null,!1),this.addChild(J));var re,ie=!1;function ae(e){for(var t=0;t<e.length;t++){var o=e[t];o.constructor!=={}.constructor?re="string"==typeof o||"number"==typeof o||"Label"==o.type?(e[t]={type:"TabObject",label:String(null!=o)||"Label"==o.type?o:"1"},re&&"TabObject"!=re&&(ie=!0),"TabObject"):(re&&"TabObject"==re&&(ie=!0),"Other"):(re&&"TabObject"!=re&&(ie=!0),re="TabObject",o.type="TabObject")}}ae(n);for(var le,se,ce=0,ue=0,de=0;de<n.length;de++)le=n[de],y?Q&&(le.width=le.width||s):(zot(le.width)&&ue++,ce+=zot(le.width)?oe:le.width);if(!y)if(s-a*(t-1)<ce)for(de=0;de<n.length;de++)(le=n[de]).width=(s-a*(t-1))/ce*(zot(le.width)?oe:le.width);else if(Math.round(ce)<Math.round(s-a*(t-1))&&0<ue)for(se=(t*oe-(ce-ue*oe))/ue,de=0;de<n.length;de++)(le=n[de]).width=zot(le.width)?se:le.width;function he(e,t){for(de=0;de<e.length;de++)""!=(le=e[de])&&"TabObject"==le.type&&(zot(le.label)&&(le.label=" "),"string"!=typeof le.label&&"number"!=typeof le.label||(le.label=new To.Label({text:le.label,size:null!=U.size?U.size:y?ne/2:c/2,font:null!=U.font?U.font:null,style:V,valign:Y,inherit:t})))}he(n,V?U:null);for(var ge=0,de=0;de<n.length;de++)!(le=n[de]).width&&y&&le.label.width>ge&&(ge=le.label.width);var pe=0;function fe(e,t){var o=[],n=[];for(de=0;de<e.length;de++){if("TabObject"==(le=e[de]).type){var r={color:zot(le.color)?To.Pick.choose(p):le.color,rollColor:zot(le.rollColor)?To.Pick.choose(f):le.rollColor,selectedColor:zot(le.selectedColor)?To.Pick.choose(m):le.selectedColor,selectedRollColor:zot(le.selectedRollColor)?To.Pick.choose(z):le.selectedRollColor,backgroundColor:zot(le.backgroundColor)?To.Pick.choose(u):le.backgroundColor,rollBackgroundColor:zot(le.rollBackgroundColor)?To.Pick.choose(d):le.rollBackgroundColor,selectedBackgroundColor:zot(le.selectedBackgroundColor)?To.Pick.choose(h):le.selectedBackgroundColor,selectedRollBackgroundColor:zot(le.selectedRollBackgroundColor)?To.Pick.choose(g):le.selectedRollBackgroundColor,wait:zot(le.wait)?To.Pick.choose(T):le.wait};if(t)for(var i in t)zot(t[i])||(r[i]=t[i]);(K=new To.Button({width:y?zot(le.width)?Q?s:ge+ne/2+v[0]/2:le.width:zot(le.width)?oe:le.width,height:y?ne:c,label:le.label,borderColor:null!=U.borderColor?U.borderColor:null,borderWidth:null!=U.borderWidth?U.borderWidth:null,backgroundColor:r.backgroundColor,rollBackgroundColor:r.rollBackgroundColor,corner:v,shadowColor:-1,gradient:w,gloss:C,backing:x?x.clone():null,rollBacking:k?k.clone():null,wait:r.wait,waitTime:zot(le.waitTime)?A:le.waitTime,waitBackgroundColor:zot(le.waitBackgroundColor)?P:le.waitBackgroundColor,rollWaitBackgroundColor:zot(le.rollWaitBackgroundColor)?B:le.rollWaitBackgroundColor,waitColor:zot(le.waitColor)?S:le.waitColor,rollWaitColor:zot(le.rollWaitBackgroundColor)?E:le.rollWaitColor,waitModal:zot(le.waitModal)?I:le.waitModal,waitEnabled:zot(le.waitEnabled)?M:le.waitEnabled,align:_,valign:Y,indentHorizontal:D,indentVertical:X,inherit:To.copy(U)})).tabInfo=r,K.color=K.tabInfo.color,K.rollColor=K.tabInfo.rollColor,K.type="TabsButton",K.content=le,K.listIndentReady=!0}else{if(le.listIndentReady)K=le;else{(K=new To.Container).type=le.type,K.content=le;for(var a=["text","backing","label","slider","stepper","checkBox","colorPicker","swatch","colorLabel"],l=0;l<a.length;l++)le[a[l]]&&(K[a[l]]=le[a[l]])}le.checkBox&&(K.checkBox=le.checkBox),zot(K.tabInfo)&&(K.tabInfo={}),F&&(K.excludeTap=!0),K.tabInfo.color=zot(le.color)?p:le.color,K.tabInfo.backgroundColor=zot(le.backgroundColor)?u:le.backgroundColor,le.listIndentReady||(new To.Rectangle(Math.max(le.width,y?Q?s:ge+ne/2+v[0]/2:le.width),Math.max(le.height,y?ne:c),To.clear).addTo(K).expand(0).cur(),le.center(K).cur(),"center"!=j&&"middle"!=j&&le.pos(0,null,"right"==j),"center"!=L&&"middle"!=L&&le.pos(null,0,null,"bottom"==L))}K.width>pe&&(pe=K.width),W?K.tap(function(e){ye(e.currentTarget.znum),Z.dispatchEvent("change"),To.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}):K.zimTabEvent=K.on((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(e){ye(e.currentTarget.znum),Z.dispatchEvent("change"),To.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}),K.on("mousedown",function(e){Z.buttonDown=e.currentTarget}),K.on("pressup",function(){Z.buttonDown=null}),n.push(le.label),o.push(K),K.index=de}return[o,n]}var me=fe(n);function ze(){var e,t=0,o=0;for(de=0;de<te.length;de++)(e=te[de]).znum=de,e.selectedIndex=de,e.selectedIndex==$&&b&&(e.backgroundColor=h,e.rollBackgroundColor=g,e.color=m),ee[de]&&(ee[de].znum=de),Z.addChild(e),y&&!Q||(e.x=(s-e.width)/2,e.y=(c-e.height)/2),y?(e.y=o,o=e.y+e.height+a,"left"==j?e.x=("TabsButton"==e.type||"ListItem"==e.type?0:R)+(e.regX-(e.getBounds()?e.getBounds().x:0))*e.scaleX:"right"==j&&(e.x=(Q?s:pe)-e.width-("TabsButton"==e.type||"ListItem"==e.type?0:R))):(e.x=t,t=e.x+e.width+a,"top"==L?e.y=("TabsButton"!=e.type||ie?R:0)+(e.regY-(e.getBounds()?e.getBounds().y:0))*e.scaleY:"bottom"==L&&(e.y=c-e.height-("TabsButton"!=e.type||ie?R:0))),0!=de||l||(e.enabled=!1),e.enabled=!0;zot(O)||Z.removeChild(J),Z._bounds=null;var n=Z.getBounds(),r=0,i=0;if(n||0==createjs.EaselJS.version[0]?n&&(r=y&&0!=n.width&&Q?s:n.width,i=y&&0!=n.height?n.height:c,Z.setBounds(r,i)):Z.setBounds(),zot(O)||(J.widthOnly=r,J.heightOnly=i,Z.addChildAt(J,0)),y&&!Q)for(de=0;de<=te.length;de++)"center"!=j&&"middle"!=j||(e.x=(r-e.width)/2)}function ye(e){var t;e!=$&&((t=te[$])&&b&&(t.tabInfo&&zot(t.tabInfo.wait)&&(t.tabInfo.backgroundColor&&(t.backgroundColor=t.tabInfo.backgroundColor),t.tabInfo.rollBackgroundColor&&(t.rollBackgroundColor=t.tabInfo.rollBackgroundColor),t.tabInfo.color&&t.label&&(t.color=t.tabInfo.color),t.tabInfo.rollColor&&t.label&&(t.rollColor=t.tabInfo.rollColor)),l||(t.enabled=!0)),(t=te[$=e])&&(t.tabInfo&&zot(t.tabInfo.wait)&&b&&(t.tabInfo.selectedBackgroundColor&&(t.backgroundColor=t.tabInfo.selectedBackgroundColor),t.tabInfo.selectedRollBackgroundColor&&(t.rollBackgroundColor=t.tabInfo.selectedRollBackgroundColor),t.tabInfo.selectedColor&&t.label&&(t.color=t.tabInfo.selectedColor),t.tabInfo.selectedRollColor&&t.label&&(t.rollColor=t.tabInfo.selectedRollColor)),l||(t.enabled=!1)))}function be(){Z.keyFocus=!0;var e=document.activeElement;e&&e.blur()}te=me[0],ee=me[1],ze(),this.addAt=function(e,t,o){zot(t)&&(t=te.length),t=To.constrain(t,0,te.length),Array.isArray(e)||(e=[e]),ae(e),he(e,o);e=fe(e,o),o=e[0],e=e[1];t<=$&&($+=o.length);o=[t,0].concat(o);return Array.prototype.splice.apply(te,o),o=[t,0].concat(e),Array.prototype.splice.apply(ee,o),ze(),Z},this.removeAt=function(e,t){if(0==te.length)return Z;for(zot(e)&&(e=1),zot(t)&&(t=te.length-e),(t=To.constrain(t,0,te.length-e))<=$&&$<=t+e&&($=-1),t+e<$&&($-=e),de=t;de<t+e;de++)te[de].tabInfo&&(te[de].tabInfo.backgroundColor&&(te[de].backgroundColor=te[de].tabInfo.backgroundColor),te[de].tabInfo.color&&te[de].label&&(te[de].color=te[de].tabInfo.color)),W?te[de].noTap():te[de].off((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",te[de].zimTabEvent),te[de].removeFrom();return te.splice(t,e),ee.splice(t,e),ze(),Z},Z.keyEvent=function(e){var t;Z.keyEnabled&&Z.keyFocus&&!Z.zimAccessibility&&9==e.keyCode&&(t=$,e.shiftKey?ye(--t<0?N?n.length-1:0:t):ye(++t>n.length-1?N?0:n.length-1:t),Z.dispatchEvent("change"),Z.dispatchEvent("keychange"),To.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update(),e.preventDefault())},window.addEventListener("keydown",Z.keyEvent),Object.defineProperty(this,"selected",{get:function(){return te[$]},set:function(e){zon&&zogy("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"selectedIndex",{get:function(){return $},set:function(e){ye(e),To.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}),this.last=function(){return this.selectedIndex=this.buttons.length-1,this},this.first=function(){return this.selectedIndex=0,this},Object.defineProperty(this,"tabs",{get:function(){return $},set:function(e){ye(Math.min(Math.max(e,0),n.length-1)),To.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}),Object.defineProperty(this,"color",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.color:p},set:function(e){if(p=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.color=e),t==$&&b||(Z.buttons[t].color=p);To.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"rollColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.rollColor:f},set:function(e){if(f=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.rollColor=e),Z.buttons[t].rollColor=f,t!=$&&Z.buttons[t].rolled&&(Z.buttons[t].color=f);To.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"selectedColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.selectedColor:m},set:function(e){if(m=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.selectedColor=e),t==$&&b&&(Z.buttons[t].color=m);To.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"selectedRollColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.selectedRollColor:z},set:function(e){if(z=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.selectedRollColor=e),t==$&&b&&Z.buttons[t].rolled&&(Z.buttons[t].color=z);To.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"backgroundColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.backgroundColor:u},set:function(e){if(u=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.backgroundColor=e),t==$&&b||(Z.buttons[t].backgroundColor=u);To.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"rollBackgroundColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.rollBackgroundColor:d},set:function(e){if(d=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.rollBackgroundColor=e),Z.buttons[t].rollBackgroundColor=d,t!=$&&Z.buttons[t].rolled&&(Z.buttons[t].backgroundColor=d);To.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"selectedBackgroundColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.selectedBackgroundColor:h},set:function(e){if(h=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.selectedBackgroundColor=e),t==$&&b&&(Z.buttons[t].backgroundColor=h);To.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"selectedRollBackgroundColor",{get:function(){return Z.buttons[0].tabItems?Z.buttons[0].tabItems.selectedRollBackgroundColor:g},set:function(e){if(g=e,Z.buttons[0].tabInfo){for(var t=0;t<Z.buttons.length;t++)Z.buttons[t].tabInfo&&(Z.buttons[t].tabInfo.selectedRollBackgroundColor=e),t==$&&b&&Z.buttons[t].rolled&&(Z.buttons[t].backgroundColor=g);To.OPTIMIZE||!zns&&OPTIMIZE||!Z.stage||Z.stage.update()}}}),Object.defineProperty(this,"label",{get:function(){return ee[$]},set:function(e){zon&&zogy("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"text",{get:function(){return null!=ee[$]?ee[$].text:void 0},set:function(e){zon&&zogy("Tabs() - selected is read only - try selectedIndex")}}),Object.defineProperty(this,"buttons",{get:function(){return te},set:function(e){zon&&zogy("Tabs() - buttons is read only")}}),Object.defineProperty(this,"labels",{get:function(){return ee},set:function(e){zon&&zogy("Tabs() - labels is read only")}}),this._enabled=!0,Object.defineProperty(Z,"enabled",{get:function(){return Z._enabled},set:function(e){Ge(Z,e)}}),void 0!==KEYFOCUS&&(To.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return To.KEYFOCUS==Z},set:function(e){To.KEYFOCUS=Z}}),r&&To.KEYFOCUS&&be(),this.on("mousedown",function(){r&&be()});var ve=Z.getBounds();zot(ve)||0==ve.width?Z.setBounds(0,0,s,c):Z.width=s,zot(H)&&(H=null!=U.selectedIndex?U.selectedIndex:0),Z.selectedIndex=H,!1!==G&&To.styleTransforms(this,U),this.clone=function(){for(var e=To.copy(n,!0),t=0;t<e.length;t++)e[t].label=e[t].label.clone();return Z.cloneProps(new To.Tabs(s,c,e,u,d,h,g,p,f,m,z,y,a,l,b,v,o,r,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L,_,Y,i,D,X,R,W,F,H,V,N,G,this.group,q))},this.doDispose=function(e,t,o){Z.keyEvent&&window.removeEventListener("keydown",Z.keyEvent),To.loop(Z.buttons,function(e){e.dispose()}),Z.keyEvent=null,o||this.zimContainer_dispose(!0),b=le=selected=n=ee=label=K=te=null}},To.extend(To.Tabs,To.Container,["clone","dispose"],"zimContainer",!1),To.Tabs.prototype.dispose=function(e){return this.doDispose(null,null,e)},To.Pad=function(e,n,t,o,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I){var M;if(M=zob(To.Pad,arguments,"width, cols, rows, keys, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, spacing, currentEnabled, corner, labelColor, gradient, gloss, backing, rollBacking, wait, waitTime, waitBackgroundColor, rollWaitBackgroundColor, waitColor, rollWaitColor, waitModal, waitEnabled, selectedIndex, style, group, inherit",this))return M;z_d("66"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pad",this.group=E;var O=!1===S?{}:To.getStyle(this.type,this.group,I);if(zot(e)&&(e=null!=O.width?O.width:150),zot(n)&&(n=null!=O.cols?O.cols:3),zot(t)&&(t=null!=O.rows?O.rows:n),zot(o))if(null!=O.keys)o=O.keys;else{o=[];for(var j=1;j<=t*n;j++)o.push(j)}zot(g)&&(g=null==O.currentEnabled||O.currentEnabled),zot(h)&&(h=null!=O.spacing?O.spacing:1);var L,_=this;this.cols=n,this.rows=t;var Y,D=e/n-h,X=[],R=0;this.labels=[],this.buttons=[];for(j=0;j<t;j++){for(var W=[],F=0;F<n;F++)W.push(null!=o[R]?o[R]:""),R++;var H=null!=O.corner?O.corner:p;H&&!Array.isArray(H)&&(H=[H,H,H,H]),Y=X[j]=new To.Tabs({width:e,height:D,tabs:W,backgroundColor:null!=O.backgroundColor?O.backgroundColor:r,rollBackgroundColor:null!=O.rollBackgroundColor?O.rollBackgroundColor:i,selectedBackgroundColor:null!=O.selectedBackgroundColor?O.selectedBackgroundColor:a,color:null!=O.color?O.color:s,rollColor:null!=O.rollColor?O.rollColor:c,selectedColor:null!=O.selectedColor?O.selectedColor:u,spacing:null!=O.spacing?O.spacing:h,currentEnabled:null!=O.currentEnabled?O.currentEnabled:g,corner:H,backing:null!=O.backing?O.backing.clone():y,rollBacking:null!=O.rollBacking?O.rollBacking.clone():b,base:null,keyEnabled:!1,gradient:null!=O.gradient?O.gradient:m,gloss:null!=O.gloss?O.gloss:z,wait:null!=O.wait?O.wait:v,waitTime:null!=O.waitTime?O.waitTime:w,waitBackgroundColor:null!=O.waitBackgroundColor?O.waitBackgroundColor:C,rollWaitBackgroundColor:null!=O.rollWaitBackgroundColor?O.rollWaitBackgroundColor:x,waitColor:null!=O.waitColor?O.waitColor:k,rollWaitColor:null!=O.rollWaitColor?O.rollWaitColor:T,waitModal:null!=O.waitModal?O.waitModal:A,waitEnabled:null!=O.waitEnabled?O.waitEnabled:P,group:E,style:!1}),this.labels=this.labels.concat(Y.labels),this.buttons=this.buttons.concat(Y.buttons),this.addChild(Y),Y.selectedIndex=-1,Y.y=(D+h)*j,Y.znum=j,Y.on("change",V)}function V(e){var t=e.target;_.selected=t.selected,_.text=t.text,_.label=t.label;for(var e=t.selectedIndex,o=0;o<X.length;o++)X[o].selectedIndex=-1;t.selectedIndex=e,L=t.znum*n+e,_.dispatchEvent("change"),To.OPTIMIZE||!zns&&OPTIMIZE||!_.stage||_.stage.update()}this.tabs=X,Object.defineProperty(this,"selectedIndex",{get:function(){return L},set:function(e){L=e;for(var t=0;t<X.length;t++)X[t].selectedIndex=-1;e=Math.floor(L/n);0<=e&&e<_.tabs.length&&(_.tabs[e].selectedIndex=L%n)}}),this._enabled=!0,Object.defineProperty(_,"enabled",{get:function(){return _._enabled},set:function(e){Ge(_,e)}}),zot(B)&&(B=null!=O.selectedIndex?O.selectedIndex:0),_.selectedIndex=B,!1!==S&&To.styleTransforms(this,O),this.clone=function(){return _.cloneProps(new To.Pad(e,n,t,o,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,this.group,I))},this.dispose=function(e,t,o){To.loop(X,function(e){e.dispose()}),this.labels=this.buttons=tabs=this.tabs=null,Y=X=_.rowTabs=null,o||this.zimContainer_dispose(!0)}},To.extend(To.Pad,To.Container,["clone","dispose"],"zimContainer",!1),To.DPad=function(e,o,t,n,r,i,a,l,s,c,u,d,h,g,p,f,m){if(b=zob(To.DPad,arguments,"axis, width, backgroundColor, borderWidth, borderColor, indicatorColor, indicatorPressColor, indicatorScale, indicatorRadius, innerCircle, innerScale, activeRadius, clamp, logo, style, group, inherit",this))return b;z_d("66.2"),this.zimContainer_constructor(null,null,null,null,!1),this.type="DPad",this.group=f;var z=!1===p?{}:To.getStyle(this.type,this.group,m);zot(e)&&(e=null!=z.axis?z.axis:"all"),zot(o)&&(o=null!=z.width?z.width:100),zot(t)&&(t=null!=z.backgroundColor?z.backgroundColor:"#666666"),zot(r)&&(r=null!=z.borderColor?z.borderColor:null),zot(n)&&(n=null!=z.borderWidth?z.borderWidth:null),r<0||n<0?r=n=null:null!=r&&null==n&&(n=1),zot(i)&&(i=null!=z.indicatorColor?z.indicatorColor:"#dddddd"),zot(a)&&(a=null!=z.indicatorPressColor?z.indicatorPressColor:"#eeeeee"),zot(l)&&(l=null!=z.indicatorScale?z.indicatorScale:1),zot(s)&&(s=null!=z.indicatorRadius?z.indicatorRadius:null),zot(c)&&(c=null==z.innerCircle||z.innerCircle),zot(u)&&(u=null!=z.innerScale?z.innerScale:.5),zot(d)&&(d=null!=z.activeRadius?z.activeRadius:o),zot(h)&&(h=null==z.clamp||z.clamp),zot(g)&&(g=null!=z.logo&&z.logo);var y=this;this.axis=e;this.outer=new To.Circle(o/2,t,r,n).addTo(this);var b=this.inner=new To.Circle(o*u/2,"rgba(0,0,0,.2)").center(this);g&&(this.logo=new To.Label({text:"D",bold:!0}).center(b).mov(1,2).alp(.3));var v=(new To.Container).addTo(this),w=.2*(o-n)*l,b=8;"vertical"==e?b=2:"horizontal"==e?(b=2,v.rotation=90):"both"==e&&(b=4),To.loop(b,function(e,t){new To.Triangle(w,w,w,i).addTo(v).reg(null,zot(s)?.475*(o-n):s).rot(360*e/t)});var C,x,k=0,T=0;this.on("mousedown",function(e){e.target.stage,x=e,v.loop(function(e){e.color=a}),y.ticker=To.Ticker.add(function(){var e;k=(e=x).stageX/To.scaX,T=e.stageY/To.scaY,C=y.globalToLocal(k,T),(e=new createjs.Event("change")).dirX=2*((C.x+d)/(2*d)-.5),e.dirY=2*((C.y+d)/(2*d)-.5),h&&(e.dirX=To.constrain(e.dirX,-1,1),e.dirY=To.constrain(e.dirY,-1,1)),y.dirX=e.dirX,y.dirY=e.dirY,y.dispatchEvent(e)})}),this.on("pressmove",function(e){x=e}),this.on("pressup",function(e){To.Ticker.remove(y.ticker),y.dirX=y.dirY=0,v.loop(function(e){e.color=i}),y.stage&&y.stage.update()}),this._enabled=!0,Object.defineProperty(y,"enabled",{get:function(){return y._enabled},set:function(e){Ge(y,e)}}),To.styleTransforms(this,z),this.clone=function(){return y.cloneProps(new To.DPad(e,o,t,n,r,i,a,l,s,c,u,d,h,g,p,this.group,m))},this.dispose=function(e,t,o){return this.ticker&&To.Ticker.remove(this.ticker),o||this.zimContainer_dispose(!0),!0}},To.extend(To.DPad,To.Container,["clone","dispose"],"zimContainer",!1),To.Radial=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L,_,Y){if(H=zob(To.Radial,arguments,"labels, size, font, height, coreRadius, coreColor, startAngle, totalAngle, angles, flip, shiftRadial, icons, rollIcons, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, selectedIndex, style, group, inherit",this))return H;z_d("66.4"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Radial",this.group=_;var D=!1===L?{}:To.getStyle(this.type,this.group,Y);zot(e)&&(e=null!=D.labels?D.labels:["A","B","C","D","E"]),zot(t)&&(t=null!=D.size?D.size:30),zot(o)&&(o=null!=D.font?D.font:"verdana"),zot(a)&&(a=null!=D.startAngle?D.startAngle:null),zot(l)&&(l=null!=D.totalAngle?D.totalAngle:360),zot(s)&&(s=null!=D.angles?D.angles:null),zot(c)&&(c=null==D.flip||D.flip),zot(u)&&(u=null!=D.shiftRadial?D.shiftRadial:0),zot(d)&&(d=null!=D.icons?D.icons:null),zot(h)&&(h=null!=D.rollIcons?D.rollIcons:null),zot(g)&&(g=null!=D.rotateIcons&&D.rotateIcons),zot(p)&&(p=null!=D.iconsShiftRadial?D.iconsShiftRadial:0),zot(n)&&(n=null!=D.height?D.height:60),zot(r)&&(r=null!=D.coreRadius?D.coreRadius:100),zot(i)&&(i=null!=D.coreColor?D.coreColor:"#333"),zot(b)&&(b=null!=D.backdropColor?D.backdropColor:To.clear),zot(f)&&(f=null!=D.backgroundColor?D.backgroundColor:"#666"),zot(m)&&(m=null!=D.rollBackgroundColor?D.rollBackgroundColor:"#777"),zot(z)&&(z=null!=D.selectedBackgroundColor?D.selectedBackgroundColor:"#444"),zot(y)&&(y=null!=D.selectedRollBackgroundColor?D.selectedRollBackgroundColor:z),zot(v)&&(v=null!=D.color?D.color:"white"),zot(w)&&(w=null!=D.rollColor?D.rollColor:v),zot(C)&&(C=null!=D.selectedColor?D.selectedColor:v),zot(x)&&(x=null!=D.selectedRollColor?D.selectedRollColor:w),zot(k)&&(k=null!=D.borderColor?D.borderColor:"#333"),zot(T)&&(T=null!=D.borderWidth?D.borderWidth:2),zot(B)&&(B=null!=D.gapAsAngle&&D.gapAsAngle),zot(P)&&(P=null!=D.gap?D.gap:B?3:6),zot(A)&&(A=null!=D.gradient?D.gradient:null),!0===A&&(A=.1),zot(S)&&(S=null!=D.spacing?D.spacing:6),zot(E)&&(E=null!=D.spacingInner?D.spacingInner:S),zot(I)&&(I=null!=D.spacingOuter?D.spacingOuter:S),zot(M)&&(M=null!=D.currentEnabled&&D.currentEnabled),zot(O)&&(O=null==D.currentSelected||D.currentSelected);var X=this,R=this.innerRadius=r+E,W=this.outerRadius=R+n;this.setBounds(-W,-W,2*W,2*W);var F,H=this.backdrop=new To.Circle(W+I,b).center(this);if(0<r&&(this.core=new To.Circle(r,i).center(this)),s&&s.length<e.length-1)return zon&&zogy("Radial() - not enough angles provided"),this;if(e&&0<e.length||d&&0<d.length){if(e&&0<e.length&&(F=e.length),d&&0<d.length&&(F=0<F?Math.min(d.length,F):d.length),h&&h.length<F)for(var V=0;V<F-h.length;V++)h.push(new To.Circle(1,To.clear));var N=H.width,G=this.buttons=new To.Container(-N/2,-N/2,N,N).centerReg(this),q=P;B||(P=P/W*180/Math.PI,q=q/R*180/Math.PI);for(var U=(l-P*F+(360==l?0:P))/F,Q=a||0,Z=0;Z<F;Z++){s&&(U=s[Z]);var K=new To.Shape(-N/2,-N/2,N,N).centerReg(G);K.num=Z,K.zimSelected=!1,K.angle=U;var J=K.graphics;K.backgroundColor=To.Pick.choose(f),K.rollBackgroundColor=To.Pick.choose(m),K.selectedBackgroundColor=To.Pick.choose(z),K.selectedRollBackgroundColor=To.Pick.choose(y),K.color=To.Pick.choose(v),K.rollColor=To.Pick.choose(w),K.selectedColor=To.Pick.choose(C),K.selectedRollColor=To.Pick.choose(x),K.colorCommand=J.f(K.backgroundColor).command,(zot(T)||0<T)&&(zot(k)&&zot(T)||(zot(k)&&(k="black"),K.borderColorCommand=J.s(k).command,K.borderWidthCommand=J.ss(T).command));var $,ee=(Q-90-U/2)*Math.PI/180,te=(Q-90+U/2)*Math.PI/180,oe=(Q-90+(U+P-q)/2)*Math.PI/180,ne=(Q-90-(U+P-q)/2)*Math.PI/180;J.arc(0,0,W,ee,te,!1),J.arc(0,0,R,oe,ne,!0).cp(),A&&(J.s().ss().rf(["rgba(0,0,0,"+A+")","rgba(255,255,255,"+A+")"],[0,1],0,0,R,0,0,W),J.arc(0,0,W,ee,te,!1),J.arc(0,0,R,oe,ne,!0).cp()),K.cursor="pointer",K.zimOverEvent=K.on("mouseover",function(e){e=e.target;e.colorCommand.style=e==X.selected&&O?e.selectedRollBackgroundColor:e.rollBackgroundColor,e.label&&(e.label.color=e==X.selected&&O?e.selectedRollColor:e.rollColor),h&&(e.holder.removeAllChildren(),h[e.num].loc(1,0,e.holder)),X.stage&&X.stage.update()}),K.zimOutEvent=K.on("mouseout",function(e){e=e.target;e.colorCommand.style=e==X.selected&&O?e.selectedBackgroundColor:e.backgroundColor,e.label&&(e.label.color=e==X.selected&&O?e.selectedColor:e.color),h&&(e.holder.removeAllChildren(),d&&d[e.num].loc(1,0,e.holder)),X.stage&&X.stage.update()}),K.zimDownEvent=K.on((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(e){var t=e.target,e=t!==X.selected;X.lastSelected=X.selected,re=t.num,O?e?(X.selected&&(X.selected.colorCommand.style=X.selected.backgroundColor,X.selected.label&&(X.selected.label.color=X.selected.color)),X.selected=t,X.label=t.label,X.label&&(X.text=X.label.text),X.icon=t.icon,t.colorCommand.style=t.selectedRollBackgroundColor,t.label&&(t.label.color=t.selectedRollColor)):M||(re=-1,X.selected=null,X.label=null,X.text=null,X.icon=null,t.colorCommand.style=t.rollBackgroundColor,t.label&&(t.label.color=t.rollColor)):(X.selected=t,X.label=t.label,X.label&&(X.text=X.label.text),X.icon=t.icon),X.dispatchEvent("change"),To.OPTIMIZE||!zns&&OPTIMIZE||!X.stage||X.stage.update()}),d&&0<d.length&&(ne=R+n/2+p,(ne=K.holder=new To.Container(3,ne).addTo(this).reg(1,ne).rot(Q)).mouseChildren=!1,ne.mouseEnabled=!1,K.icon=d[Z],d[Z].loc(1,0,ne),g||(d[Z].rotation=-Q)),e&&0<e.length&&($="LabelOnArc"!=e[Z].type?($="Label"==e[Z].type?e[Z]:new To.Label({text:e[Z],size:t,font:o,color:v,style:L,inherit:Y}),new To.LabelOnArc({label:$,color:v,size:t,spacing:-5,flip:c&&90<Q&&Q<270,radius:R+(n-$.height)/2+2+u,style:L,inherit:Y})):e[Z],e[Z]=$,(K.label=$).center(this).rot(Q),$.mouseChildren=!1,$.mouseEnabled=!1),Z!=e.length-1&&(Q+=(U+(s?s[Z+1]:U))/2+P)}zot(a)||(X.rotation+=X.buttons.getChildAt(0).angle/2)}var re=null;Object.defineProperty(this,"selectedIndex",{get:function(){return re},set:function(e){var t;X.buttons&&(t=X.buttons.getChildAt(e)),t!==X.selected&&(X.selected&&(X.selected.colorCommand.style=X.selected.backgroundColor,X.selected.label&&(X.selected.label.color=X.selected.color)),(X.selected=t)&&(O&&(t.colorCommand.style=t.selectedRollBackgroundColor),t.label&&(O&&(t.label.color=t.selectedColor),X.text=t.label.text))),To.OPTIMIZE||!zns&&OPTIMIZE||!X.stage||X.stage.update()}}),zot(j)&&(j=null!=D.selectedIndex?D.selectedIndex:0),X.selectedIndex=j,To.styleTransforms(this,D),this.clone=function(){return X.cloneProps(new To.Radial(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L,this.group,Y))}},To.extend(To.Radial,To.Container,"clone","zimContainer",!1),To.RadialMenu=function(e,i,a,l,s,t,o,n,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,r,S,E,I,M,O,j,L,_,Y){var D="menu, size, font, height, coreRadius, coreColor, title, titleIcon, startAngle, totalAngle, flip, shiftRadial, rotateIcons, iconsShiftRadial, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, backdropColor, color, rollColor, selectedColor, selectedRollColor, borderColor, borderWidth, gradient, gap, gapAsAngle, spacing, spacingInner, spacingOuter, currentEnabled, currentSelected, open, under, style, group, inherit",X=D.split(", "),R=!1;if(e&&e.constructor==={}.constructor)for(var W in e)if(0<=X.indexOf(W)){R=!0;break}if(e&&R&&(N=zob(To.RadialMenu,arguments,D,this)))return N;z_d("66.6"),this.zimContainer_constructor(null,null,null,null,!1),this.type="RadialMenu",this.group=_;var F=!1===L?{}:To.getStyle(this.type,this.group,Y);zot(e)&&(e=null!=F.menu?F.menu:{A:{A1:["AA1","AA2","AA3","AA4"],A2:[],A3:[]},B:["B1","B2","B3","B4","B5","B6"],C:[]}),zot(i)&&(i=null!=F.size?F.size:30),zot(a)&&(a=null!=F.font?F.font:"verdana"),zot(c)&&(c=null!=F.startAngle?F.startAngle:null),zot(u)&&(u=null!=F.totalAngle?F.totalAngle:360),zot(d)&&(d=null==F.flip||F.flip),zot(g)&&(g=null!=F.rotateIcons&&F.rotateIcons),zot(h)&&(h=null!=F.shiftRadial?F.shiftRadial:0),zot(p)&&(p=null!=F.iconsShiftRadial?F.iconsShiftRadial:0),zot(l)&&(l=null!=F.height?F.height:60),zot(s)&&(s=null!=F.coreRadius?F.coreRadius:100),zot(t)&&(t=null!=F.coreColor?F.coreColor:"#333"),zot(o)&&(o=null!=F.title?F.title:"MENU"),zot(n)&&(n=null!=F.titleIcon?F.titleIcon:null),zot(b)&&(b=null!=F.backdropColor?F.backdropColor:To.clear),zot(f)&&(f=null!=F.backgroundColor?F.backgroundColor:"#666"),zot(m)&&(m=null!=F.rollBackgroundColor?F.rollBackgroundColor:"#777"),zot(z)&&(z=null!=F.selectedBackgroundColor?F.selectedBackgroundColor:"#444"),zot(y)&&(y=null!=F.selectedRollBackgroundColor?F.selectedRollBackgroundColor:z),zot(v)&&(v=null!=F.color?F.color:"white"),zot(w)&&(w=null!=F.rollColor?F.rollColor:v),zot(C)&&(C=null!=F.selectedColor?F.selectedColor:v),zot(x)&&(x=null!=F.selectedRollColor?F.selectedRollColor:w),zot(k)&&(k=null!=F.borderColor?F.borderColor:"#333"),zot(T)&&(T=null!=F.borderWidth?F.borderWidth:2),zot(B)&&(B=null!=F.gapAsAngle&&F.gapAsAngle),zot(P)&&(P=null!=F.gap?F.gap:B?3:6),zot(r)&&(r=null!=F.spacing?F.spacing:6),zot(A)&&(A=null!=F.gradient?F.gradient:null),!0===A&&(A=.1),zot(S)&&(S=null!=F.spacingInner?F.spacingInner:r),zot(E)&&(E=null!=F.spacingOuter?F.spacingOuter:r),zot(I)&&(I=null!=F.currentEnabled&&F.currentEnabled),zot(M)&&(M=null==F.currentSelected||F.currentSelected),zot(O)&&(O=null!=F.open&&F.open),zot(j)&&(j=null==F.under||F.under);var H=this,D=(zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",V=null,N=this.core=new To.Circle({radius:s,color:t,style:L,inherit:Y}).addTo(this);n&&(this.titleIcon=n.center(N)),o&&(this.title=new To.Label({text:o,size:i,font:a,color:v,style:L,inherit:Y}).center(N)),N.cursor="pointer",N.on(D,function(e){H.leafNode=!1,0==Q.length?Z():(To.loop(Q,function(e){e.selectedIndex=-1,e.removeFrom(),Q=[]}),H.outerLevel=0,H.selected=H.outerMenu=H.selectedMenu=H.text=null),!I&&H.selected==V||H.dispatchEvent("change"),V=H.selected,H.stage&&H.stage.update()}),this.closeRings=function(e){zot(e)&&(e=H.outerLevel);var o=H.outerLevel-e;To.loop(Q,function(e,t){o-1<t&&(e.removeFrom(),e.selectedIndex=-1,Q.pop())},!0),H.outerLevel=o,H.outerMenu=Q[Q.length-1],H.outerMenu&&(H.outerMenu.selectedIndex=-1),H.selected=H.selectedMenu=H.text=null,Q[Q.length-2]?(H.selectedMenu=Q[Q.length-2],H.selectedIndex=H.selectedMenu.selectedIndex):H.selectedIndex=-1,H.selected!=V&&H.dispatchEvent("change"),V=H.selected,H.stage&&H.stage.update()};var G,q,U={};H.outerLevel=0,e.constructor=={}.constructor&&(e={core:e},G=H.tree=new To.Hierarchy(e),q=G.getLinearIDs()),H.lastRadial=null;var Q=this.radials=[];function Z(e){var o,t,n,r;e?o=e.ringLevel:(o=0,r=s),To.loop(Q,function(e,t){o-1<t&&(e.removeFrom(),e.selectedIndex=-1,Q.pop())},!0),e&&(t=e.selected),t?(n=t.id,r=e.outerRadius,K(n,o+1,r)):e||K("id0",o+1,r),H.selected=t,H.selected?(H.selectedMenu=Q[H.selected.menu.ringLevel-1],H.selectedIndex=H.selected.num,H.selected.label?H.text=H.selected.label.text:H.text=null):I&&e?(H.selectedIndex=e.selectedIndex,H.label=e.label,H.text=e.text,H.icon=e.icon,H.selectedMenu=e):(H.text=null,H.selectedIndex=-1,H.selectedMenu=null),H.stage&&H.stage.update()}function K(e,t,o){var n,r;t&&(H.outerLevel=t),U[e]||(t=(r=G.getData(e)).list)&&!To.isEmpty(t)&&(o={labels:G.getLinearList(t),coreRadius:o,size:i,font:a,startAngle:c,totalAngle:u,flip:d,rotateIcons:g,shiftRadial:h,iconsShiftRadial:p,height:l,coreColor:To.clear,backdropColor:b,backgroundColor:f,rollBackgroundColor:m,selectedBackgroundColor:z,selectedRollBackgroundColor:y,color:v,rollColor:w,selectedColor:C,selectedRollColor:x,borderColor:k,borderWidth:T,gapAsAngle:B,gap:P,gradient:A,spacingInner:S,spacingOuter:E,currentSelected:M,currentEnabled:I,style:L,inherit:Y},r.styles&&(o=To.merge(o,r.styles)),n=U[e]=new To.Radial(o),q=G.getLinearIDs(t),n.buttons.loop(function(e,t){e.menu=n,e.id=q[t]}),n.ringLevel=H.outerLevel,n.selectedIndex=-1,n.on("change",function(e){H.leafNode=!1,Z(e.target),!I&&H.selected==V||H.dispatchEvent("change"),V=H.selected})),U[e]?(Q.push(U[e]),U[e].center(H),j&&U[e].bot()):(H.leafNode=!0,--H.outerLevel),H.outerMenu=n}O&&Z(),To.styleTransforms(this,F),this.clone=function(){return H.cloneProps(new To.RadialMenu(e,i,a,l,s,t,o,n,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,r,S,E,I,M,O,j,L,this.group,Y))}},To.extend(To.RadialMenu,To.Container,"clone","zimContainer",!1),To.ColorPicker=function(e,o,n,r,i,t,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v){if(C=zob(To.ColorPicker,arguments,"width, colors, cols, spacing, greyPicker, alphaPicker, startBackgroundColor, draggable, shadowColor, shadowBlur, buttonBar, circles, indicator, backgroundColor, keyArrows, container, selectedIndex, selectedColor, style, group, inherit",this))return C;z_d("67"),this.zimContainer_constructor(null,null,null,null,!1),this.type="ColorPicker",this.group=b;var w=!1===y?{}:To.getStyle(this.type,this.group,v);zot(e)&&(e=null!=w.width?w.width:500),zot(o)&&(o=null!=w.colors?w.colors:null),zot(o)&&(S=!0),zot(n)&&(n=null!=w.cols?w.cols:10),zot(r)&&(r=null!=w.spacing?w.spacing:2);var C=!S&&0<o.length&&o.length<=n;zot(t)&&(t=null!=w.alphaPicker?w.alphaPicker:!C),zot(i)&&(i=null!=w.greyPicker?w.greyPicker:!C),zot(s)&&(s=null!=w.shadowColor?w.shadowColor:"rgba(0,0,0,.3)"),zot(c)&&(c=null!=w.shadowBlur?w.shadowBlur:14),zot(u)&&(u=null!=w.buttonBar?w.buttonBar:!C),zot(l)&&(l=u?null==w.draggable||w.draggable:null!=w.draggable&&w.draggable),zot(d)&&(d=null!=w.circles&&w.circles),zot(h)&&(h=null!=w.indicator&&w.indicator,u||(h=null==w.indicator||w.indicator)),zot(g)&&(g=null!=w.backgroundColor?w.backgroundColor:"black"),zot(a)&&(a=null!=w.startBackgroundColor?w.startBackgroundColor:null),zot(p)&&(p=null==w.keyArrows||w.keyArrows);var x=this;if(zot(f)){if(!zdf)return;f=zdf.stage}else{if(!f.getBounds)return;if(zot(f.getStage))return}x.container=f;var k="#e472c4",T="#50c4b7",A=1,P=1,B=new createjs.Shape;this.addChild(B),B.x+=r,B.y+=r;var S=!1,E=[];if(zot(o)){S=!0;for(var I=6,I=Math.ceil(Math.pow(216,.5)),M=(e-r)/18-r,O=Math.floor(Math.pow(I*I,1/3)),j=[],L=0;L<6;L++)for(var _=0;_<6;_++)for(var Y=0;Y<6;Y++)j.push("#"+W(3*L)+W(3*_)+W(3*Y));for(o=[],L=0;L<j.length;L++)H=Math.floor(L/6),o[18*((F=L%6)+6*(O=18<=H?1:0))+(H-6*O*3)]=j[L];n=18,E=[T,k]}else M=(e-r)/n-r;var D,X=Math.ceil(o.length/n),C=1,R=String(o[o.length-1]);function W(e){return(e=Math.floor(e).toString(16))+""+e}zot(a)||((q=a.match(/rgba\((.*)\)/))&&(C=(H=q[1].split(",")).pop(),a="rgb("+H.join(",")+")"),R=String(a)),S&&(D=T);var F,H,V,N,G=B.graphics,O=0,I=null!=w.borderColor?w.borderColor:null,q=null!=w.borderWidth?w.borderWidth:null;for(!zot(I)&&zot(q)&&(q=1),q&&zot(I)&&(I="#333"),q&&G.s(I).ss(q),L=0;L<o.length;L++)H=L%n,F=Math.floor(L/n),V=H*(M+r),N=F*(M+r),d?G.f(o[L]).dc(V+M/2,N+M/2,M/2):G.f(o[L]).r(V,N,M,M);var U=N+M+r;x.colors=o;var Q=U;if(i){for(L=0;L<16;L++)E.push("#"+W(L)+W(L)+W(L));for(L=0;L<E.length;L++)H=Math.floor(L/n),V=(F=L%n)*(M+r),N=H*(M+r)+U,d?G.f(E[L]).dc(V+M/2,N+M/2,M/2):G.f(E[L]).r(V,N,M,M);U=N+M+r;var Z=n,K=Math.ceil(E.length/n)}function J(e){zot(e)||e<0?h.visible=!1:(h.visible=!0,"#000"==R||"#000000"==R||"black"==R?(h.color="#222",h.alpha=1):(h.color="black",h.alpha=.5),h.x=B.x+e%n*(M+r)+M/2,h.y=B.x+Math.floor(e/n)*(M+r)+M/2)}x.greys=E,h&&((h=this.indicator=d?new To.Circle(M/2*.5,null,null,null,null,null,null,null,!1):new To.Rectangle(.5*M,.5*M,null,null,null,null,null,null,!1)).alpha=.5,h.centerReg(),this.addChild(h),h.mouseEnabled=!1,J(o.indexOf(R)));var $,ee,te,oe,ne,re;t&&((ne=new To.Container({style:!1})).setBounds(0,0,600,70),this.addChild(ne),ne.x=0,ne.y=U,q=this.alphaBacking=new To.Rectangle(580,50,"#222",null,null,0,null,null,!1),ne.addChild(q),To.centerReg(q,ne),q=this.alphaBut=new To.Button({width:20,height:30,backgroundColor:"darkorange",rollBackgroundColor:"orange",label:"",corner:0,hitPadding:20,style:!1}),($=this.alphaSlider=new To.Slider({min:0,max:1,step:.05,button:q,barLength:330,barWidth:2,barColor:"#999",vertical:!1,useTicks:!1,inside:!1,style:!1})).currentValue=zot(C)?1:C,ne.addChild($),$.x=40,$.y=ne.height/2,ee=this.alphaText=new To.Label({text:"Alpha: "+To.decimals(C),size:30,color:"orange",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",rollColor:"orange",group:this.group}),ne.addChild(ee),ee.x=$.x+$.bar.width+40,ee.y=ne.height/2-ee.height/2,ne.scaleX=ne.scaleY=e/600,$.on("change",function(){ee.text="Alpha: "+ze($.currentValue),re&&(re.alpha=P=$.currentValue),u?x.dispatchEvent("set"):x.dispatchEvent("change"),x.stage&&x.stage.update()}),U+=ne.height-10),u?((ie=new To.Container({style:!1})).setBounds(0,0,600,100),this.addChild(ie),ie.x=0,ie.y=U+10,te=this.swatchText=new To.Label({align:"center",text:R.toUpperCase(),labelWidth:120,size:30,color:"orange",rollColor:"orange",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group}),ie.addChild(te),To.centerReg(te),te.x=90,te.y=48,l&&(oe=this.grip=new To.Shape({style:!1}),ie.addChild(oe),oe.graphics.f("rgba(256,256,256,.25)").r(0,0,5,20).r(10,0,5,20).r(20,0,5,20).r(30,0,5,20),oe.x=70,oe.y=65,te.y=40,oe.mouseEnabled=!1),ne=this.closeBut=new To.Button({width:90,height:90,label:"X",backgroundColor:"#222",rollBackgroundColor:"#444",corner:0,style:!1}),ie.addChild(ne),ne.x=600-ne.width-10,ne.y=0,ne.on((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){x.dispatchEvent("close")}),oe=this.okBut=new To.Button({width:150,height:90,label:"OK",backgroundColor:"#222",rollBackgroundColor:"#444",corner:0,style:!1}),ie.addChild(oe),oe.x=ne.x-oe.width-10,oe.y=0,oe.on((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",ce),ne=this.swatchBacking=new To.Shape({style:!1}),ie.addChild(ne),(G=ne.graphics).f("black").r(.5,.5,50,89).f("#666").r(50,.5,50,89).f("white").r(100,.5,49.5,89),ne.x=oe.x-150-10,ne.y=0,re=this.swatch=new To.Rectangle(150,90,R,null,null,null,null,null,!1),ie.addChild(re),re.x=ne.x,re.y=0,re.on((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",ce),re.cursor="pointer",re.alpha=P=C,ie.scaleX=ie.scaleY=e/600,U+=ie.height):B.cursor="pointer",t||u||(U-=10-r);var ie=U+10;this.setBounds(0,0,e,ie);var ae,le,se=this.background=new To.Rectangle(e,ie,g,null,null,null,null,null,!1);function ce(){if(R!=D||P!=A){if(S&&i){var e=[T=k,k=D];for(L=0;L<2;L++){var t=B.graphics;H=Math.floor(L/n),V=(F=L%n)*(M+r),N=H*(M+r)+Q,E[L]=e[L],t.f(se.color).r(V-1,N-1,M+2,M+2).f(e[L]).r(V,N,M,M)}To.OPTIMIZE||!zns&&OPTIMIZE||!x.stage||x.stage.update()}D=R,A=P,x.dispatchEvent("change")}else x.dispatchEvent("close")}this.addChildAt(se,0),-1!=s&&0<c&&(se.shadow=new createjs.Shadow(s,8,8,c)),l&&(se.on("mousedown",function(e){e.target.stage,ae=e.stageX/To.scaX-x.x,le=e.stageY/To.scaY-x.y,se.cursor="move"}),se.on("pressmove",function(e){x.x=e.stageX/To.scaX-ae,x.y=e.stageY/To.scaY-le,x.stage&&x.stage.update()}),se.on("pressup",function(e){se.cursor="default",x.stage&&x.stage.update()}));var ue,de,he,ge=n*(M+r),pe=X*(M+r);function fe(){x.keyFocus=!0;var e=document.activeElement;e&&e.blur()}function me(){x.zimAccessibility&&x.zimAccessibility.changeTitle(x,null,!0)}function ze(e){return Math.round(e*Math.pow(10,2))/Math.pow(10,2)}i&&(ue=Z*(M+r),de=K*(M+r)),B.on((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(e){var t=To.hitTestGrid(B,ge,pe,n,X,e.stageX,e.stageY,0,0,r,r);zot(t)||(R=o[t],u?(re.color=R,te.text=String(o[t]).toUpperCase(),R!=D&&x.dispatchEvent("set")):ce()),i&&(t=null,zot(t=To.hitTestGrid(B,ue,de,Z,K,e.stageX,e.stageY,0,pe,r,r))||(R=E[t],u?(re.color=R,te.text=E[t].toUpperCase(),R!=D&&x.dispatchEvent("set")):ce())),h&&J(o.indexOf(R)),u?x.stage&&x.stage.update():h&&x.stage&&x.stage.update(),me()}),Object.defineProperty(this,"selectedColor",{get:function(){return R},set:function(e){e=e.toLowerCase(),D=R=e,u&&(re.color=R,te.text=R,x.stage&&x.stage.update()),h&&J(o.indexOf(R)),me()}}),Object.defineProperty(this,"currentValue",{get:function(){return R},set:function(e){x.selectedColor=e}}),Object.defineProperty(this,"currentValueEvent",{get:function(){return R},set:function(e){e!=x.selectedColor&&(x.selectedColor=e,x.dispatchEvent("change"))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return o.indexOf(R)},set:function(e){D=R=o[e],u&&(re.color=R,te.text=R,x.stage&&x.stage.update()),h&&J(o.indexOf(R)),me()}}),Object.defineProperty(this,"selectedAlpha",{get:function(){return t?ze($.currentValue):1},set:function(e){t&&(A=$.currentValue=e,re&&(re.alpha=A),ee&&(ee.text="Alpha: "+ze($.currentValue)),x.stage&&x.stage.update())}}),Object.defineProperty(this,"colors",{get:function(){return i?o.concat(E):o},set:function(e){zon&&zogy("ColorPicker() colors is read only - make a new ColorPicker to change")}}),void 0!==KEYFOCUS&&(To.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return To.KEYFOCUS==x},set:function(e){zns?To.KEYFOCUS=x:KEYFOCUS=x}}),p&&To.KEYFOCUS&&fe(),this.on("mousedown",function(){p&&fe()}),this.keyDownEvent=function(e){var t;function o(){t<0&&(t=x.colors.length-1),t>x.colors.length-1&&(t=0),x.selectedIndex=t,x.dispatchEvent("change"),x.stage&&x.stage.update()}x.stage&&(x.zimAccessibility&&x.focus||!x.zimAccessibility&&x.keyFocus)&&(t=x.selectedIndex,37==e.keyCode||40==e.keyCode?(t--,o()):38!=e.keyCode&&39!=e.keyCode||(t++,o()))},window.addEventListener("keydown",this.keyDownEvent),this.hide=function(){var e;return x.removeFrom(),x.toggled=!1,x.zimAccessibility&&((e=x.zimAccessibility).resize(x),(he||x.zimTabTag.nextSibling).focus(),setTimeout(function(){e.talk("ColorPicker has been closed.")},50)),x},this.show=function(){var e;return x.center(x.container),x.zimAccessibility&&(e=x.zimAccessibility,setTimeout(function(){e.activatedObject&&(he=e.activatedObject.zimTabTag)},50),e.resize(x),e.tabIndex=x.zimTabIndex),x.toggled=!0,x},this.toggle=function(e){return!0!==e&&(!1===e||x.container.contains(x))?x.hide():x.show(),x},zot(m)&&(m=null!=w.selectedIndex?w.selectedIndex:0),x.selectedIndex=m,zot(z)&&(z=null!=w.selectedColor?w.selectedColor:null),null!=z&&(x.selectedColor=z),!1!==y&&To.styleTransforms(this,w),this.clone=function(){return x.cloneProps(new To.ColorPicker(e,S?null:o,n,r,i,t,a,l,s,c,u,d,h,g,p,f,m,z,y,this.group,v))},this.dispose=function(e,t,o){return window.removeEventListener("keydown",x.keyDownEvent),$&&$.dispose(),o||this.zimContainer_dispose(!0),!0}},To.extend(To.ColorPicker,To.Container,["clone","dispose"],"zimContainer",!1),To.TextEditor=function(i,n,e,t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j){if(L=zob(To.TextEditor,arguments,"width, color, backgroundColor, fieldColor, fieldHeight, textSize, sizeList, optionList, colorList, fontList, live, button, titleBar, titleBarColor, titleBarBackgroundColor, titleBarHeight, wrap, limit, scroll, placeholder, password, borderColor, borderWidth, margin, corner, shadowColor, shadowBlur, draggable, boundary, frame, fontListHeight, fontListViewNum, style, group, inherit",this))return L;z_d("67.1"),this.group=O;var L=!1===M?{}:To.getStyle("TextEditor",this.group,j);if(zot(i)&&(i=null!=L.width?L.width:400),zot(e)&&(e=null!=L.backgroundColor?L.backgroundColor:To.lighter),zot(h)&&(h=null!=L.titleBar?L.titleBar:"Text Editor"),zot(P)&&(P=null==L.draggable||L.draggable),zot(f)&&(f=null!=L.titleBarHeight?L.titleBarHeight:30),zot(t)&&(t=null!=L.fieldColor?L.fieldColor:e.darken(.05)),zot(u)&&(u=null==L.live||L.live),zot(m)&&(m=null==L.wrap||L.wrap),zot(y)&&(y=null==L.scroll||L.scroll),zot(x)&&(x=null!=L.margin?L.margin:10),zot(z)&&(z=null!=L.limit?L.limit:null),zot(h)&&(h=null!=L.titleBar?L.titleBar:null),zot(a)&&(a=null!=L.sizeList?L.sizeList:null),zot(s)&&(s=null!=L.colorList?L.colorList:null),zot(l)&&(l=null!=L.optionList?L.optionList:null),zot(c)&&(c=null!=L.fontList?L.fontList:null),zot(t)&&(t=null!=L.fieldColor?L.fieldColor:null),zot(o)&&(o=null!=L.fieldHeight?L.fieldHeight:null),zot(r)&&(r=null!=L.textSize?L.textSize:null),zot(E)&&(E=null!=L.fontListHeight?L.fontListHeight:100),zot(I)&&(I=null!=L.fontListViewNum?L.fontListViewNum:3),zot(S)){if(!zdf)return void(zon&&zog("zim.TextEditor - please provide a reference to zim Frame"));S=zdf}this.zimPanel_constructor(i,300,h,g,p,f,e,w,C,k,!0,null,null,null,T,A,P,B,null,M,O,j);var _=this;zot(d)&&(d=new To.Button({width:50,height:50,label:"",icon:(new Shape).sca(.4).f("white").p("AikFsQg5jmhphxIA1gXQBeBGA3CwQC8mRCpjOIBfAoQkPFGiSFpg"),color:To.white,corner:10,backgroundColor:To.green.darken(.2),borderColor:To.white,borderWidth:2,rollBackgroundColor:To.green,shadowBlur:3}).pos(x,f+2*x,To.RIGHT,To.TOP,_)),(_.button=d).on((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){u||(D.text=Y.text);_.hide(),_.dispatchEvent("set")}),zot(o)&&(o=null!=L.fieldHeight?L.fieldHeight:d.height+2*x);var Y=_.textArea=new To.TextArea({color:n,backgroundColor:t,width:i-d.width-3*x,height:zot(o)?d.height+2*x:o,expand:10,password:v,placeholder:b,frame:S}).loc(x,f+x+(o&&o<d.height+2*x?(d.height-o)/2+x:0),null,null,!1);m||(Y.tag.style.whiteSpace="nowrap"),z&&Y.tag.setAttribute("maxLength",z),y&&(Y.tag.style.overflowY="auto");var D=new To.Label;_.on("pressmove",function(){Y.resize()}),_.on("close",function(){_.inputEvent&&Y.off("input",_.inputEvent),Y.removeFrom()}),_.panelHeight=f+x+Math.max(o,d.height+2*x)+x;var X,R,W,F,H,V,N,G,q,U=To.mobile(),Q=U?35:30;function Z(){Y.tag.style.display="block",R.hide(),_.stage&&_.stage.update()}function K(){D&&(Y.text=D.text),n&&(n.color=D.color),W&&W.toggle(1==D.bold),F&&F.toggle(1==D.italic),H&&(H.noAnimate=!0,"center"==D.align?H.selectedIndex=1:"right"==D.align?H.selectedIndex=2:H.selectedIndex=0),V&&(V.currentValue=D.size),q&&(q.currentValue=D.font),_.inputEvent&&Y.off("input",_.inputEvent),_.inputEvent=Y.on("input",function(e){u&&(D.text=Y.text),_.dispatchEvent("input"),_.dispatchEvent("update"),_.stage&&_.stage.update()})}(a||l||s)&&(new To.Rectangle(i,Q+x,"rgba(0,0,0,.05)").loc(0,_.panelHeight,_),X=[],s&&(N=Array.isArray(s),(R=_.colorPicker=new To.ColorPicker({colors:N?s:null,cols:N?Math.min(s.length,12):null,alphaPicker:!1,greyPicker:!N,container:S.stage})).on("close",Z),R.on("change",function(){D.color=n.color=R.selectedColor,_.dispatchEvent("update"),Z()}),_.closeColorPicker=function(){Z()},(n=_.swatch=new To.Rectangle(Q,Q,D.color,To.dark,1).cur()).on("mousedown",function(){_.dispatchEvent("color"),Y.tag.style.display="none",R.selectedColor=n.color,R.show(),_.stage&&_.stage.update()}),X.push(n)),l&&(!0===l&&(l=["bold","italic","align"]),zot(STYLE)&&(STYLE={}),zot(STYLE.group)&&(STYLE.group={}),STYLE.group.zimEditor={width:Q,height:Q,corner:0,borderColor:To.tin,shadowBlur:-1,backgroundColor:To.light,rollBackgroundColor:To.light,toggleBackgroundColor:To.green,toggleColor:To.grey},To.loop(l,function(e){var o,n;"bold"==e.toLowerCase()?((W=_.bold=new To.Button({label:new To.Label({text:"B",color:To.grey,size:16,bold:!0}),toggle:"B",group:"zimEditor"})).on("click",function(){D.bold=W.toggled,_.dispatchEvent("update"),_.stage&&_.stage.update()}),X.push(W),D.bold&&W.toggle()):"italic"==e.toLowerCase()?((F=_.italic=new To.Button({label:new To.Label({text:"I",color:To.grey,size:16,bold:!0,italic:!0}),toggle:"I",group:"zimEditor"})).on("click",function(){D.italic=F.toggled,_.dispatchEvent("update"),_.stage&&_.stage.update()}),X.push(F),D.italic&&F.toggle()):"align"==e.toLowerCase()&&(o=new To.Tile(new To.Rectangle(Q-10,Q-10,To.grey).centerReg(),3,1,10,10),n=U?["","",""]:["","",""],To.loop(3,function(e){var t=o.getChildAt(e);new To.Label(n[e],2*Q/3,null,To.white).center(t).expand(10)}),e=0,"right"==D.align?e=2:"center"!=D.align&&"middle"!=D.align||(e=1),(H=_.align=new To.Selector({tile:o,corner:0,borderWidth:1,borderColor:To.grey,backgroundColor:To.clear,selectedIndex:e})).on("change",function(){0==H.selectedIndex?D.align="left":1==H.selectedIndex&&(D.align="center"),2==H.selectedIndex&&(D.align="right"),_.dispatchEvent("update"),_.stage&&_.stage.update()}),X.push(H))}),delete STYLE.group.zimEditor),a&&((V=_.sizePicker=new To.Stepper({list:!0===a?null:a,stepperType:!0===a?null:"list",min:!0===a?5:null,max:!0===a?500:null,width:150,shadowBlur:-1,borderColor:To.dark,borderWidth:2,corner:0,backgroundColor:To.green,downForward:!1}).siz(null,Q)).arrowPrev.expand(0),V.textBox.color=To.lighter,V.on("change",function(){D.size=V.currentValue,_.dispatchEvent("update"),_.stage&&_.stage.update()}),V.currentValue=D.size,X.push(V)),N=new To.Tile(X,X.length,1,10,10,!0).loc(x,_.panelHeight+x/2,_),_.panelHeight=_.panelHeight+x+N.height+x),c&&(Array.isArray(c)?G=c:(G=["Arial","Courier New","Georgia","Helvetica","Palatino","Tahoma","Verdana"],U||(G=G.concat(["Comic Sans MS","Impact"])),G.sort()),(q=_.fonts=new To.List({width:i-2*x,height:E,viewNum:I,backgroundColor:To.moon,color:To.grey,rollColor:To.dark,rollBackgroundColor:To.green.lighten(.5),selectedBackgroundColor:To.mist,selectedRollBackgroundColor:To.green.lighten(.6),selectedColor:To.dark,backdropColor:To.light,scrollBarColor:To.dark,shadowBlur:-1,list:G}).center(_).loc(null,_.panelHeight)).on("change",function(){D.font=q.currentValue,_.dispatchEvent("update"),_.stage&&_.stage.update()}),_.panelHeight=_.panelHeight+x+q.height+x),_.show=function(e,t,o,n){if(_.parent)return e==_.label||(_.label=e),_;var r;if(D=e,Y.addTo(_),D&&D.stage)r=D.stage;else if(n)r=n.stage;else{if(!zdf)return _;r=zdf.stage}return zot(t)&&zot(o)?D&&D.y>r.height/2?_.loc(r.width/2-i/2,D.y-_.panelHeight-.05*r.height,r):D&&D.y<=r.height/2?_.loc(r.width/2-i/2,D.y+D.height+.05*r.height,r):_.center(r):_.loc(t,o),_.y<20&&(_.y=20),_.y+_.height>_.stage.height&&(_.y=_.stage.height-_.height-20),K(),_.stage.update(),_},_.hide=function(){if(s&&R.hide(),Y&&Y.removeFrom(),!zot(_.stage)){var e=_.stage;return _.removeFrom(),e.update(),_}},Object.defineProperty(_,"label",{get:function(){return D},set:function(e){D=e,K()}}),!1!==M&&To.styleTransforms(this,L),this.clone=function(){return _.cloneProps(new To.TextEditor(i,n,e,t,o,r,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,this.group,j))},this.dispose=function(e,t,o){_.stage;return _.inputEvent&&Y.off("input",_.inputEvent),R&&R.dispose(),n&&n.dispose(),q&&q.dispose(),d&&d.dispose(),Y&&Y.dispose(),H&&H.dispose(),W&&W.dispose(),F&&F.dispose(),V&&V.dispose(),o||this.zimPanel_dispose(),_.stage&&_.stage.update(),!(_.textArea=_.color=_.colorPicker=_.font=_.button=_.selector=_.bold=_.italic=_.size=null)}},To.extend(To.TextEditor,To.Panel,["clone","dispose"],"zimPanel",!1),To.Keyboard=function(n,p,f,r,i,a,l,t,m,z,y,o,b,s,c,u,d,h,v,g,w,C,x,k,T,e,A){if(S=zob(To.Keyboard,arguments,"labels, backgroundColor, color, shiftBackgroundColor, shiftHoldBackgroundColor, placeBackgroundColor, placeColor, cursorColor, shadeAlpha, borderColor, borderWidth, margin, corner, draggable, placeClose, shadowColor, shadowBlur, container, data, place, special, rtl, hardKeyboard, layout, style, group, inherit",this))return S;z_d("67.2"),this.zimContainer_constructor(1e3,400,null,null,!1),this.type="Keyboard",this.group=e;var P=!1===T?{}:To.getStyle(this.type,this.group,A);zot(n)&&(n=null!=P.labels?P.labels:[]),Array.isArray(n)||(n=[n]),zot(p)&&(p=null!=P.backgroundColor?P.backgroundColor:"#333"),zot(f)&&(f=null!=P.color?P.color:"white"),zot(r)&&(r=null!=P.shiftBackgroundColor?P.shiftBackgroundColor:"orange"),zot(i)&&(i=null!=P.shiftHoldBackgroundColor?P.shiftHoldBackgroundColor:"red"),zot(a)&&(a=null!=P.placeBackgroundColor?P.placeBackgroundColor:"#50c4b7"),zot(l)&&(l=null!=P.placeColor?P.placeColor:f),zot(t)&&(t=null!=P.cursorColor?P.cursorColor:"#50c4b7"),zot(m)&&(m=null!=P.shadeAlpha?P.shadeAlpha:.2),zot(z)&&(z=null!=P.borderColor?P.borderColor:"rgba(0,0,0,.1)"),zot(y)&&(y=null!=P.borderWidth?P.borderWidth:null),z<0||y<0?z=y=null:null!=z&&null==y&&(y=1),zot(o)&&(o=null!=P.margin?P.margin:5),zot(b)&&(b=null!=P.corner?P.corner:30),zot(s)&&(s=null!=P.draggable&&P.draggable),zot(c)&&(c=null==P.placeClose||P.placeClose),zot(u)&&(u=null!=P.shadowColor?P.shadowColor:"rgba(0,0,0,.2)"),zot(d)&&(d=null!=P.shadowBlur?P.shadowBlur:14),zot(v)&&(v=null!=P.data?P.data:[[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["shift","z","x","c","v","b","n","m","backspace"],["?123"]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC"]],[["+","x","%","=","<",">","{","}","[","]"],["","","","$","","~","`","","",""],["2/2","_","\\","|","","","","","backspace"],["ABC"]]]),v[3]||(v[3]={e:["","","","","","",""],u:["","","","",""],i:["","","","","",""],o:["","","","","","","",""],a:["","","","","","","",""],n:["",""]});var B=this;zot(g)&&(g=null==P.place||P.place),zot(C)&&(C=null!=P.rtl&&P.rtl),zot(x)&&(x=null==P.hardKeyboard||P.hardKeyboard),zot(k)&&(k=null!=P.layout?P.layout:"qwerty"),"qwerty"!=(k=k.toLowerCase())&&("arabic"==k?v=[[["","","","","","","","","","",""],["","","","","","","","","","",""],["","","","","","","","","","","back"],["?123",""]],[["1","2","3","4","5","6","7","8","9","0","*"],["!","@","#","$","/","^","&","*","(",")","*"],["1/2","-","'",'"',":",";",",","?","*","backspace"],["ABC","*"]],[["+","x","%","=","<",">","{","}","[","]","*"],["","","","$","","~","`","","","","*"],["2/2","_","\\","|","","","","","*","backspace"],["ABC","*"]],{"":["","","",""],"":[""],"":["",""],"":[""],"":["","","","","","","",""],"*":["","","","","","","",""],n:["",""]}]:"hebrew"==k?v=[[["","","","","","","","","backspace"],["","","","","","","","","",""],["","","","","","","","",""],["?123",","]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC",","]],[["+","x","%","=","<",">","{","}","[","]"],["","","","$","","~","`","","",""],["2/2","_","\\","|","","","","","backspace"],["ABC",","]],{e:["","","","","","",""],u:["","","","",""],i:["","","","","",""],o:["","","","","","","",""],a:["","","","","","","",""],n:["",""]}]:"azerty"==k?v=[[["a","z","e","r","t","y","u","i","o","p"],["q","s","d","f","g","h","j","k","l","m"],["shift","w","x","c","v","b","n","","backspace"],["?123",","]],[["1","2","3","4","5","6","7","8","9","0"],["!","@","#","$","/","^","&","*","(",")"],["1/2","-","'",'"',":",";",",","?","backspace"],["ABC",","]],[["+","x","%","=","<",">","{","}","[","]"],["","","","$","","~","`","","",""],["2/2","_","\\","|","","","","","backspace"],["ABC",","]],{e:["","","","","","",""],u:["","","","",""],i:["","","","","",""],o:["","","","","","","",""],a:["","","","","","","",""],n:["",""]}]:"turkish"==k&&(v=[[["q","w","e","r","t","y","u","","o","p","",""],["a","s","d","f","g","h","j","k","l","","i"],["shift","z","x","c","v","b","n","m","","","backspace"],["?123","*"]],[["1","2","3","4","5","6","7","8","9","0","*"],["!","@","#","$","/","^","&","*","(",")","*"],["1/2","-","'",'"',":",";",",","?","*","backspace"],["ABC","*"]],[["+","x","%","=","<",">","{","}","[","]","*"],["","","","$","","~","`","","","","*"],["2/2","_","\\","|","","","","","*","backspace"],["ABC","*"]],{e:["","","","","","",""],u:["","","","",""],i:["","","","","",""],o:["","","","","","","",""],a:["","","","","","","",""],n:["",""]},{"":"I",i:""},{I:"","":"i"}])),B.data=v;var S="zim display - Keyboard(): Please pass in a reference to a container with bounds set";if(zot(h)){if(!zdf)return void zogy(S);h=zdf.stage}else{if(!h.getBounds)return void zogy(S);if(zot(h.stage))return void zogy("zim display - Keyboard(): The container must have a stage property")}-1!=u&&0<d&&(B.shadow=new createjs.Shadow(u,3,3,d));var E,I=zdf?zdf.stage:null;B.labels=n;var M=10;To.loop(v[0],function(e){e.length>M&&(M=e.length)});var O=M,S=["@","",".","/","away"];zot(w)||S.splice(1,0,w);var j=To.copy(v[0]);j[3]=j[3].concat(S);var L=To.copy(v[1]);L[3]=L[3].concat(S);var _=To.copy(v[2]);_[3]=_[3].concat(S);var Y,D,X,R,W,F,H,V,N,G,q,U,Q=[],Z=(1e3-5*(O-1))/O,K={def:"default",shift:"shift",number1:"number1",number2:"number2"},J=K.def,$=!1,ee=0,te=[];function oe(e){var t,o,n=!1;if(J===K.def){for(R.color=e?i:r,t=0;t<Q.length-6-(zot(w)?0:1);t++)0<(o=Q[t]).label.text.length&&(1===o.na.length?(v[4]&&v[4][o.label.text]?o.label.text=v[4][o.label.text]:o.label.text=o.label.text.toUpperCase(),o.label.centerReg(o).mov(0,6)):o.label.centerReg(o));e||(n=!0,setTimeout(function(){n&&($=!0,R.color=i,Y.updateCache(),B.stage&&B.stage.update())},500),U=B.on("pressup",function(e){B.off("pressup",U),n=!1})),J=K.shift}else{for(R.color=p,$=!1,t=0;t<Q.length-6;t++)0<(o=Q[t]).label.text.length&&(1===o.na.length?(v[5]&&v[5][o.label.text]?o.label.text=v[5][o.label.text]:o.label.text=o.label.text.toLowerCase(),o.label.centerReg(o).mov(0,3)):o.label.centerReg(o));J=K.def}Y.updateCache(),B.stage&&B.stage.update()}function ne(e){var t,o,n,r,i,a,l=0,s=0,c=!1,u=!1;zot(e)&&(e=K.def),e===K.def?t=j:e===K.number1?t=L:e===K.number2&&(t=_),Y=new To.Container(1e3,430,null,null,!1).addTo(B);for(var d=0;d<t.length;d++){(d<=1||e==K.def&&2==d&&"shift"!=t[2][0])&&(l=(Z/2+2.5)*(O-t[d].length));for(var h=0;h<t[d].length;h++){var c=!1,g=null,u=!1;"backspace"==t[d][h]?(g=V,u=i=!0):"back"==t[d][h]?(g=V,u=!(i=!1)):"shift"==t[d][h]?(i=!0,g=H):(3==d||e!=K.def&&2==d)&&0==h?u=i=!0:""==t[d][h]?c=!(i=!1):"away"==t[d][h]?(g=N,u=i=!0):i=!1,i?r=1.5*Z+2.5:c?(r=(Z+5)*((zot(w)?4:3)+O-10+1-v[0][3].length)-5,-1!=v[0][3].indexOf("backspace")&&(r-=Z/2)):r=Z,n=new To.Rectangle(r,Z,p,z,y,b,null,null,!1).cur().addTo(Y),u&&n.addChild(new To.Rectangle(r,Z,"black",null,null,b,null,null,!1).alp(m)),n.label=o=g?new To.Label({text:"",backgroundColor:"ignore",font:null!=P.font?P.font:null,style:!1}):new To.Label({lineWidth:10,lineHeight:25,font:null!=P.font?P.font:null,text:t[d][h],color:f,align:"center",style:!1}),g&&((g=g.clone()).scaleTo(n,70,70),g.centerReg(n)),a?(a=!1,l+=67.33):(o.centerReg(n).mov(0,isNaN(o.text)?3:7),n.x=l,n.y=s,n.na=t[d][h],2==d&&0==h&&e==K.number1&&(n.toggle="1/2"),2==d&&0==h&&e==K.number2&&(n.toggle="2/2"),3==d&&0==h&&e==K.def&&(n.toggle="?123"),3==d&&0==h&&e!=K.def&&(n.toggle="ABC"),n.toggle&&o.mov(0,3),Q.push(n),"shift"==n.na&&(R=n),l=n.x+n.width+5)}s+=Z+5,l=0}Y.cache(y?-y:0,y?-y:0,y?Y.width+2*y:Y.width,y?Y.height+2*y:Y.height)}function re(){B.mouseYAmount&&(B.y=B.parent.globalToLocal(0,B.mouseYAmount-q).y)}function ie(){I.off("pressmousemove",B.tickerMouseEvent),To.Ticker.remove(re)}function ae(){if(W&&X){for(var e=W.label.x+W.label.getBounds().x,t=0;t<ee;t++)e+=W.widthArray[t]||0;X.heightOnly=W.getBounds().height*(W.backing&&zot(W.padding)?.9:1)-(W.paddingVertical&&W.background?2*W.paddingVertical:0),X.center(W),X.x=e}}function le(){if(F)return B;if(!W)return B;var e,t,o=c?["<",">","x"]:["<",">"];te=[],t=W.localToLocal(0,0,B),F=new To.Container({style:!1}).addTo(B).pos({x:t.x,y:t.y+W.height+15,reg:!0}).cur();for(var n=0;n<o.length;n++)e=new To.Rectangle(Z,Z,a,z,y,b,null,null,!1),"x"==o[n]&&new To.Rectangle(Z,Z,"black",null,null,b,null,null,!1).alp(m).addTo(e),(e=new To.Label({lineWidth:10,text:o[n],backing:e,font:null!=P.font?P.font:null,color:l,align:"center",valign:"center",style:!1})).pos(0,0,To.LEFT,To.TOP,F).cache(),e.x=e.x+n*(Z+5),te.push(e);t=W.localToLocal(0,0,B),F.x=t.x,F.y=t.y+W.height+15,F.on("click",function(e){0==te.indexOf(e.target)?0<ee&&ee--:1==te.indexOf(e.target)?ee<W.text.length&&ee++:se();ae()}),B.stage&&B.stage.update()}function se(){if(!F)return B;F.removeAllEventListeners(),B.removeChild(F),F=null}function ce(e){var t,o;W&&("del"===e?(W&&(W.text=[W.text.slice(0,ee-1),W.text.slice(ee)].join("")),ee--,de()):(J===K.shift&&(e=e.toUpperCase()),o=W.text,(t=W.clone().removeFrom()).text=e,t=t.label.getMeasuredWidth(),W.widthArray?W.widthArray.splice(ee,0,t):W.widthArray=[W.breedte],ee<W.text.length?W.text=[W.text.slice(0,ee),e,W.text.slice(ee)].join(""):W.text+=e,W&&W.label.getBounds().width<E?(ee++,ae()):W.text=o),J!==K.shift||$||(B.removeChild(Y),ne(),J=K.def),ae(),(o=new createjs.Event("keydown")).letter=e,B.dispatchEvent(o),B.stage&&B.stage.update())}function ue(e){if(B.stage){var t,o=0,n=!1;(W=e.target).widthArrayCheck||de(),E=W.label.lineWidth||1e4,(t=W.globalToLocal(e.stageX/To.scaX,e.stageY/To.scaY)).x-=W.label.x,t.y-=W.label.y;for(var r=0;r<W.widthArray.length;r++)if(o+=W.widthArray[r],t.x<o-W.widthArray[r]/2+W.label.getBounds().x){ee=r,n=!0;break}n||(ee=W.text.length),ae(),g&&!F&&0<W.text.length&&le(),F&&W&&(0<W.text.length?(t=W.localToLocal(0,0,B),F.x=t.x,F.y=t.y+W.height+15):se())}}function de(){if(W){var e=new Label("");W.widthArray=[];for(var t=0;t<W.text.length;t++)(e=W.clone().removeFrom()).text=W.text[t],W.widthArray.push(e.label.getMeasuredWidth());e.text=W.text,W.widthArrayCheck=!0,ae()}}function he(e){var t,o=!0;function n(){W&&0<W.text.length?(0<B.selectedIndex&&ce("del"),e?r():B.on("pressup",r)):ce("del")}function r(){o=!1,t&&t.clear(),B.off("pressup",r)}n(),t=To.timeout(300,function e(){(!W||W.text.length<1||0==B.currentIndex)&&(o=!1),o&&(n(),t=t&&To.timeout(200,e,null,"ms")),W&&W.text.length<1&&r()},null,"ms"),B.stage&&B.stage.update()}function ge(){for(var e=0;e<n.length;e++)n[e].clickEvent=n[e].on("click",ue)}function pe(){if(1<n.length)for(var e=0;e<n.length;e++)n[e].off("click",n[e].clickEvent)}function fe(){if(!X&&(W=n[0],E=W&&W.label.lineWidth?W.label.lineWidth:1e4,W)){(X=new To.Rectangle(3,W.height-(W.paddingVertical&&W.background?2*W.paddingVertical:0),t,null,null,null,null,null,!1).center(W)).x=0,X.visible=!1,X.animate({obj:{alpha:0},rewind:!0,loop:!0,loopWait:750,time:250,id:"knipperTekst",timeUnit:"ms"});for(var e=0;e<n.length;e++)n[e].widthArray=[0];de()}}function me(){To.stopAnimate("knipperTekst"),W&&W.removeChild(X),W=X=null}!function(){(H=new To.Shape({style:!1})).graphics.f(f).p("AhIFoIAAjYIixAAID5n3ID6H3IixAAIAADYgAjHBxICeAAIAADYIBTAAIAAjYICeAAIjImSg"),H.setBounds(-25.5,-36,51,72),V=new To.Container({style:!1});var e=new To.Shape({style:!1});e.graphics.f(f).p("ACgC+IigigIifCgQgGAGgJAAQgJAAgGgGQgGgGgBgJQABgJAGgGICgigIigifQgGgGgBgJQABgJAGgGQAGgGAJAAQAIAAAHAGICfCgICgigQAGgGAJAAQAJAAAGAGQAGAGABAJQgBAJgGAGIigCfICgCgQAGAGABAJQgBAJgGAGQgGAGgJAAQgJAAgGgGg"),e.setTransform(82.6,32),e.addTo(V),(e=new To.Shape({style:!1})).graphics.f(f).s().p("AkhFAQgcAAgUgUIkHj6QgVgUAAgeQAAgdAVgVIEHj6QAUgTAcAAINKAAQAdAAAUAUQAUAUAAAdIAAH1QAAAdgUATQgUAVgdAAgAk0kOIkGD8QgIAHAAALQAAALAIAIIEGD7QAIAHALAAINKAAQALAAAIgIQAHgHAAgLIAAn1QAAgLgHgIQgIgIgLAAItKAAQgLAAgIAHg"),e.setTransform(62.2,32),e.addTo(V),V.setBounds(0,0,125,64),(N=new To.Container({style:!1})).setBounds(0,0,147,86);for(var t,o=[{p:"Ai+heIF9AAIi/C9g",transform:[73.4,76]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.4,43.2]},{p:"AnNAzIAAhlIObAAIAABlg",transform:[73,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.8,43.2]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128.2,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.5,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.8,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[87.1,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.4,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.7,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[46,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.3,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.6,29.5]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[128,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[114.3,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[100.6,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[86.9,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[73.2,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[59.5,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[45.8,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[32.1,15.8]},{p:"AgyAzIAAhlIBlAAIAABlg",transform:[18.4,15.8]},{p:"AphEnQgzAAgkgkQglglAAgzIAAlVQAAgzAlglQAkgkAzAAITDAAQAzAAAkAkQAlAlAAAzIAAFVQAAAzglAlQgkAkgzAAgAqjjtQgcAcAAAnIAAFVQAAAnAcAbQAbAcAnAAITDAAQAnAAAcgcQAbgbAAgnIAAlVQAAgngbgcQgcgcgnAAIzDAAQgnAAgbAcg",transform:[73.4,29.5]}],n=0;n<o.length;n++)(t=new To.Shape({style:!1})).graphics.f(f).s().p(o[n].p),t.setTransform(o[n].transform[0],o[n].transform[1]),t.addTo(N)}(),ne(J),s&&function(){G=new To.Rectangle(1.5*Z+2.5+2.5,Z,p,z,y,b,null,null,!1).addTo(B,0).cur();for(var e=0;e<4;e++)new To.Rectangle(.4*G.width,4,f,null,null,null,null,null,!1).centerReg(G).alp(.2).y-=15*e-22;G.x=8.5*Z+40,G.y=-Z-5,G.na="drag"}(),this.on("mousedown",function(e){I=B.stage,D&&B.removeChild(D);F&&te.indexOf(e.target)<0&&se();zot(e.target.na)||(s&&e.target===G?(B.tickerMouseEvent=I.on("stagemousemove",function(e){B.mouseYAmount=e.stageY}),To.Ticker.add(re),B.on("pressup",ie),q=e.stageY-B.localToGlobal(0,0).y):zot(w)||e.target.na!==w?"shift"===e.target.na?oe():"?123"===e.target.toggle?(B.removeChild(Y),ne(K.number1)):"ABC"===e.target.toggle?(B.removeChild(Y),J=K.def,ne(),$&&oe(!0)):"1/2"===e.target.toggle?(B.removeChild(Y),ne(K.number2)):"2/2"===e.target.toggle?(B.removeChild(Y),ne(K.number1)):"away"===e.target.na?(B.hide(),B.dispatchEvent("close")):v[3]&&v[3][e.target.na]?function(t){var i,a=v[3][t],l=!1,s=!1;i=To.timeout(500,function(){var e,t,o,n=0;if(i.clear(),!l){s=!0,(D=new To.Container(1e3,Z,null,null,!1).addTo(B,0)).y=-Z-5;for(var r=0;r<a.length;r++)o=J===K.shift?a[r].toUpperCase():a[r],e=new To.Label({lineWidth:10,lineHeight:25,text:o,font:null!=P.font?P.font:null,color:f,align:"center",style:!1}),t=new To.Rectangle(Z,Z,p,z,y,b,null,null,!1).addTo(D),o=new To.Rectangle(Z,Z,"white",null,null,b,null,null,!1).alp(.2),t.addChild(o),e.center(t),t.na=a[r],t.x=n,n+=Z+5;B.stage&&B.stage.update()}},null,"ms");var o=B.on("pressup",function(e){l=!0,B.off("pressup",o),s||ce(t)})}(e.target.na):"return"===e.target.na?ce("\n"):"backspace"===e.target.na||"back"===e.target.na?he():""===e.target.na?ce(" "):ce(e.target.na):B.dispatchEvent("special"),I.update())}),B.addChar=function(e){!zot(e)&&e.match(/^.$/)&&ce(e)},B.removeChar=function(){he(!0)},B.setBounds(1e3,400-26*(O-10)),ge(),fe(),Object.defineProperty(this,"selectedLabel",{get:function(){return W},set:function(e){ue({target:e}),B.hidePlace()}}),Object.defineProperty(this,"selectedIndex",{get:function(){return ee},set:function(e){ee=e,ae()}}),this.show=function(e){return B.addTo(h),zot(e)||ue({target:n[e]}),X&&(X.visible=!0),B.toggled=!0,B},this.hide=function(){return B.removeFrom(h),X&&(X.visible=!1),I.update(),B.toggled=!1,B},this.toggle=function(e){return!0!==e&&(!1===e||B.parent)?B.hide():B.show(),B},this.showPlace=function(){return le(),B},this.hidePlace=function(){return se(),B},this.addLabels=function(e){Array.isArray(e)||(e=[e]);for(var t=e.length-1;0<=t;t--)0<=n.indexOf(e[t])||"Label"!=e[t].type?e.splice(t,1):e[t].widthArray=[0];return pe(),n=n.concat(e),ge(),fe(),X&&(X.visible=!0),B},this.removeLabels=function(e){Array.isArray(e)||(e=[e]),pe();for(var t=0;t<e.length;t++){var o=n.indexOf(e[t]);0<=o&&n.splice(o,1)}return ge(),0==n.length?W&&me():W&&-1==n.indexOf(W)&&(me(),fe()),B};var ze=new To.Rectangle(this.width,this.height,To.clear,null,null,null,null,null,!1).addTo(this).expand().bot();ze.on("mousedown",function(){}),ze.on("click",function(){}),this.resize=function(){var e;return B.scaleTo(I,100-2*o/I.width*100,50-2*o/I.height*100),B.y=I.height-B.height-o,B.x=I.width/2-B.width/2,W&&F&&(e=W.localToLocal(0,0,B),F.x=e.x,F.y=e.y+W.height+15),B.stage&&B.stage.update(),B},this.resize(),B.selectedLabel&&(B.selectedIndex=B.selectedLabel.text.length),x&&(this.keydownEvent=function(e){var t;B.stage&&(zot(t=B)||(35==e.keyCode&&(t.selectedIndex=t.selectedLabel.text.length),36==e.keyCode&&(t.selectedIndex=0),37==e.keyCode&&(t.selectedIndex=t.selectedIndex-1),39==e.keyCode&&(t.selectedIndex=t.selectedIndex+1),46==e.keyCode&&t.selectedIndex<t.selectedLabel.text.length&&(t.selectedIndex=t.selectedIndex+1,t.removeChar()),8==e.keyCode&&(e.preventDefault(),t.removeChar()),t.addChar(e.key),B.stage&&B.stage.update()))},window.addEventListener("keydown",this.keydownEvent)),!1!==T&&To.styleTransforms(this,P),this.clone=function(){var e=new To.Keyboard(n,p,f,r,i,a,t,m,o,b,s,c,u,d,h,v,g,w,C,x,k,T,this.group,A);return B.cloneProps(e)},this.dispose=function(e,t,o){ze.removeAllEventListeners(),ze=null,B.keydownEvent&&window.removeEventListener("keydown",B.keydownEvent);for(var n=0;n<B.labels.length;n++)B.labels[n].removeAllEventListeners();return X&&X.dispose(),B.labels=W=null,I&&I.off("pressmousemove",B.tickerMouseEvent),o||B.zimContainer_dispose(!0),!0}},To.extend(To.Keyboard,To.Container,["clone","dispose"],"zimContainer",!1),To.Organizer=function(e,t,n,o,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A){if(I=zob(To.Organizer,arguments,"width, list, useAdd, useRemove, usePosition, autoAdd, autoRemove, autoPosition, addForward, removeForward, backgroundColor, rollBackgroundColor, selectedBackgroundColor, selectedRollBackgroundColor, color, rollColor, selectedColor, selectedRollColor, spacing, corner, keyEnabled, gradient, gloss, backdropColor, style, group, inherit",this))return I;z_d("67.3"),this.group=T;var P,B,S,E,I,M,O,j,L=!1===k?{}:To.getStyle("Organizer",this.group,A);zot(e)&&(e=null!=L.width?L.width:t&&t.vertical?t.width:300),zot(n)&&(n=null==L.useAdd||L.useAdd),zot(o)&&(o=null==L.useRemove||L.useRemove),zot(r)&&(r=null==L.usePosition||L.usePosition),zot(i)&&(i=null!=L.autoAdd?L.autoAdd:n),zot(a)&&(a=null!=L.autoRemove?L.autoRemove:o),zot(l)&&(l=null!=L.autoPosition?L.autoPosition:r),zot(s)&&(s=null==L.addForward||L.addForward),zot(c)&&(c=null==L.removeForward||L.removeForward),zot(u)&&(u=null!=L.backgroundColor?L.backgroundColor:"#777"),zot(d)&&(d=null!=L.rollBackgroundColor?L.rollBackgroundColor:"#555"),zot(h)&&(h=null!=L.selectedBackgroundColor?L.selectedBackgroundColor:"#333"),zot(p)&&(p=null!=L.color?L.color:"white"),zot(f)&&(f=null!=L.rollColor?L.rollColor:p),zot(m)&&(m=null!=L.selectedColor?L.selectedColor:p),zot(z)&&(z=null!=L.selectedRollColor?L.selectedRollColor:p),zot(y)&&(y=null!=L.spacing?L.spacing:1),zot(b)&&(b=null!=L.corner?L.corner:0),zot(w)&&(w=null!=L.gradient?L.gradient:.2),zot(C)&&(C=null!=L.gloss?L.gloss:null),zot(x)&&(x=null!=L.backdropColor?L.backdropColor:null),Array.isArray(b)||(b=[b,b,b,b]),(n||r||o)&&(B={width:P=(e+y)/((n?1:0)+(r?4:0)+(o?1:0)),height:P,label:"",shadowColor:-1,gradient:w,corner:b,backgroundColor:u,rollBackgroundColor:d},S=[],(E=new To.Shape).graphics.f(p).p("AAAA4Ih6B8Ig5g4IB8h8Ih7h6IA4g5IB6B8IB7h8IA5A5Ih8B6IB8B7Ig5A5g"),n&&S.push(new To.Button({icon:E.sca(.55).rot(-45).reg(1),inherit:B})),r&&((I=new To.Shape).graphics.f(p).p("AiJieIETCeIkTCfg"),S.push(new To.Button({icon:I.sca(.6).rot(t&&!t.vertical?180:-90).reg(-2),inherit:B})),S.push(new To.Button({icon:I.clone().sca(.6).rot(t&&!t.vertical?0:90).reg(-2),inherit:B})),(I=new To.Shape).graphics.f(p).p("AiFCLIAAkVIBXAAIAAEVgAgiAAICoiHIAAEQg"),S.push(new To.Button({icon:I.sca(.62).rot(t&&!t.vertical?0:90).reg(0),inherit:B})),S.push(new To.Button({icon:I.clone().sca(.62).rot(t&&!t.vertical?180:-90).reg(0),inherit:B}))),o&&S.push(new To.Button({icon:E.clone().rot(0).sca(.55),inherit:B})),0==S.length&&(S=[""]),this.zimTabs_constructor(e,P,S,u,d,h,g,p,f,m,z,!1,y,!0,!1,b,null,!0,w,C,null,null,null,null,null,null,null,null,null,null,x),(M=this).list=t,M.type="Organizer",O=!(M.setButtons=function(){var e;r&&(S[0+(e=n?1:0)]&&(S[0+e].icon.rotation=M.list&&!M.list.vertical?180:-90),S[1+e]&&(S[1+e].icon.rotation=M.list&&!M.list.vertical?0:90),S[2+e]&&(S[2+e].icon.rotation=M.list&&!M.list.vertical?0:90),S[3+e]&&(S[3+e].icon.rotation=M.list&&!M.list.vertical?180:-90))}),j=t,M.change(function(e){(!O&&M.list||M.list&&M.list!=j)&&(M.list!=j&&j&&j.noChange(),M.list.change(function(e){M.orgItem=M.list.selected,M.orgIndex=M.list.selectedIndex}),O=!0,j=M.list);e=e.target.selectedIndex;n||e++,r||n&&!(0<e)||(e=5);var t,o=zot(M.list.selectedIndex)||M.list.selectedIndex<0;switch(o&&(M.currentValue=null),M.lastIndex=M.list.selectedIndex,e){case 0:i&&(t=Math.max(0,M.list.selectedIndex),M.add(t)),M.orgType="add";break;case 1:if(o)break;l&&(t=M.list.selectedIndex,M.up(t)),M.orgType="up";break;case 2:if(o)break;l&&(t=M.list.selectedIndex,M.down(t)),M.orgType="down";break;case 3:if(o)break;l&&(t=M.list.selectedIndex,M.toTop(t)),M.orgType="top";break;case 4:if(o)break;l&&(t=M.list.selectedIndex,M.toBottom(t)),M.orgType="bottom";break;case 5:if(o)break;a&&(t=M.list.selectedIndex,M.remove(t)),M.orgType="remove"}}),this.add=function(e,t,o){return zot(e)&&(e=M.lastIndex),zot(t)&&(t=""),e=s?Math.min(M.list.length,Math.max(0,M.list.selectedIndex)+1):Math.max(0,M.list.selectedIndex),M.list.addAt(t,e,o),M.list.selectedIndexPlusPosition=e,M.orgItem=M.list.selected,M.orgIndex=M.list.selectedIndex,M},this.up=function(e){zot(e)&&(e=M.lastIndex);var t=M.list.items[e];return zot(t)||(M.list.removeAt(1,e),M.list.addAt(t,e-1),M.list.selectedIndexPlusPosition=Math.max(0,e-1),M.orgItem=M.list.selected,M.orgIndex=M.list.selectedIndex),M},this.down=function(e){zot(e)&&(e=M.lastIndex);var t=M.list.items[e];return zot(t)||(M.list.removeAt(1,e),M.list.addAt(t,e+1),M.list.selectedIndexPlusPosition=Math.min(M.list.length-1,e+1),M.orgItem=M.list.selected,M.orgIndex=M.list.selectedIndex),M},this.toTop=function(e){zot(e)&&(e=M.lastIndex);var t=M.list.items[e];return zot(t)||(M.list.removeAt(1,e),M.list.addAt(t,0),M.list.first(),M.orgItem=M.list.selected,M.orgIndex=M.list.selectedIndex),M},this.toBottom=function(e){zot(e)&&(e=M.lastIndex);var t=M.list.items[e];if(!zot(t))return M.list.removeAt(1,e),M.list.addAt(t,M.list.length),M.list.last(),M.orgItem=M.list.selected,M.orgIndex=M.list.selectedIndex,M},!(this.remove=function(e){if(zot(e)){if(!(0<=M.list.selectedIndex))return M;e=M.list.selectedIndex}var t=e==M.list.selectedIndex;return M.removedItem=M.list.items[e],M.list.removeAt(1,e),t?c||(e=Math.max(0,e-1)):e=M.list.selectedIndex,M.list.selectedIndexPlusPosition=Math.min(M.list.length-1,e),M.orgItem=M.list.selected,M.orgIndex=M.list.selectedIndex,M})!==k&&To.styleTransforms(this,L),this.clone=function(){return M.cloneProps(new To.Organizer(e,t,n,o,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,M.group,A))},this.dispose=function(e,t,o){return S=null,o||M.zimTabs_dispose(!0),!0})},To.extend(To.Organizer,To.Tabs,["clone","dispose"],"zimTabs",!1),To.Scrambler=function(l,r,i,e,t,o,n,a,s,c,u,d,h,g){if(w=zob(To.Scrambler,arguments,"tile, keys, keyProperty, scramble, time, wait, num, shadowColor, shadowBlur, swap, swapLock, style, group, inherit",this))return w;z_d("67.35"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Scrambler",this.group=h;var p,f,m,z,y,b,v,w=!1===d?{}:To.getStyle(this.type,this.group,g);function C(e){var n=e.target;n.stopAnimate();var e=n.boundsToGlobal(),r=l.hitTestGrid(l.width,l.height,l.cols,l.rows,e.x+e.width/2,e.y+e.height/2,null,null,l.spacingH,l.spacingV,null,"open");zot(r)||To.loop(l,function(e){var t,o;e!=n&&!1!==e.paused&&(t=e.boundsToGlobal(),zot(t=l.hitTestGrid(l.width,l.height,l.cols,l.rows,t.x+t.width/2,t.y+t.height/2,null,null,l.spacingH,l.spacingV,null,"open"))||(r[2]==t[2]&&(e.x>=n.x&&e.x<=n.x+m/2||e.x<=n.x&&e.x>=n.x-m/2)&&(o=e.x,e.mouseEnabled=!1,e.top().ord(-1),e.animate({props:{x:y},time:.2,id:"zimScrambler",timeUnit:"seconds",call:function(){e.mouseEnabled=!0,c&&!p.complete&&p.test()&&(p.complete=!0,p.dispatchEvent("complete"))}}),y=o),r[1]==t[1]&&(e.y>=n.y&&e.y<=n.y+z/2||e.y<=n.y&&e.y>=n.y-z/2)&&(o=e.y,e.mouseEnabled=!1,e.top().ord(-1),e.animate({props:{y:b},time:.201,override:!1,id:"zimScrambler",timeUnit:"seconds",call:function(){e.mouseEnabled=!0,c&&!p.complete&&p.test()&&(p.complete=!0,p.dispatchEvent("complete"))}}),b=o)))},!0)}function x(){p.upEvent&&l.off("pressup",p.upEvent),p.moveEvent&&l.off("pressmove",p.moveEvent),l.noDrag(),0<o+t&&p.noMouse()}function k(r,i,a){To.stopAnimate("zimScrambler"),To.loop(l.items,function(e,t,o){var n=p.starts[r[t]];i?e.animate({props:{x:n.x,y:n.y},time:i,ease:a?"quadInOut":"quadOut",wait:a,timeUnit:"seconds",id:"zimScrambler"}):(e.loc(n),p.stage?e.drag({boundary:l}):t==o-1&&p.added(function(){l.drag({boundary:l})}))})}zot(l)&&(l=null!=w.tile?w.tile:l),zot(r)&&(r=null!=w.keys?w.keys:null),zot(i)&&(i=null!=w.keyProperty?w.keyProperty:null),zot(e)&&(e=null==w.scramble||w.scramble),zot(t)&&(t=null!=w.time?w.time:0),zot(o)&&(o=null!=w.wait?w.wait:0),zot(n)&&(n=null!=w.num?w.num:1),zot(a)&&(a=null!=w.shadowColor?w.shadowColor:"rgba(0,0,0,.3)"),zot(s)&&(s=null!=w.shadowBlur?w.shadowBlur:5),zot(c)&&(c=null!=w.swap&&w.swap),zot(u)&&(u=null!=w.swapLock&&w.swapLock),u&&(c=!0),zot(l)||(l.addTo(this),(p=this).complete=!0,f=Ao(t),Ao(o),m=(l.width+l.spacingH)/l.cols,z=(l.height+l.spacingV)/l.rows,l.on("mousedown",function(e){if(u){var r=l.current;if(p.testItem(e.target,r.indexOf(e.target)))return e.target.noMouse(),void e.target.noDrag()}var t;y=e.target.x,b=e.target.y,-1!=a&&0<s&&(t=new createjs.Shadow(a,3,3,s),e.target.backing?e.target.backing.shadow=t:e.target.shadow=t),p.upEvent&&l.off("pressup",p.upEvent),p.upEvent=l.on("pressup",function(e){var t,o,n=!0;u&&(o=e.target.boundsToGlobal(),n=!zot(t=l.hitTestGrid(l.width,l.height,l.cols,l.rows,o.x+o.width/2,o.y+o.height/2,null,null,l.spacingH,l.spacingV,null,"open"))&&(o=r[t[0]],e.target!=o&&!p.testItem(o,t[0]))),c&&n&&C(e),e.target.mouseEnabled=!1,e.target.animate({props:{x:y,y:b},time:.1,id:"zimScrambler",timeUnit:"seconds",call:function(){!p.complete&&p.test()&&(p.complete=!0,p.dispatchEvent("complete")),-1!=a&&0<s&&(e.target.backing?e.target.backing.shadow=null:e.target.shadow=null),e.target.mouseEnabled=!0}})},null,!0),c||(p.moveEvent&&l.off("pressmove",p.moveEvent),p.moveEvent=l.on("pressmove",function(e){C(e)}))}),this.test=function(){var e=l.current;return To.loop(e,function(e,t){return!zot(e)&&(!!p.testItem(e,t)&&void 0)})},this.testItem=function(e,t){if(!zot(e)){if(zot(t)&&(t=l.current.indexOf(e)),r){if((zot(i)?e.key:e[i])!=r[t])return!1}else if(l.items[t]!=e)return!1;return!0}},this.starts=[],this.order=[],To.loop(l.rows*l.cols,function(e){p.order.push(e)}),v=p.order.slice(),l.loop(function(e){e.mouseChildren=!1,p.starts.push({x:e.x,y:e.y})}),this.inactive=!1,this.scramble=function(o,e,n){function t(){for(var e=!0,t=0;e&&t<50;)t++,To.shuffle(p.order),e=To.loop(p.order,function(e,t){e=l.getChildAt(e);if(r){if((zot(i)?e.key:e[i])!=r[t])return!1}else if(l.items[t]!=e)return!1});k(p.order,o/n),To.timeout(o,function(){p.dispatchEvent("scrambled")})}zot(e)&&(e=0),zot(o)&&(o=0),!zot(n)&&0!=o||(n=1),x(),To.timeout(e,function(){0<o?To.interval(o/n,t,n,!0):t()}),setTimeout(function(){p.complete=!1,l.loop(function(e){e.mouse()}),p.mouse(),l.drag({boundary:l})},"s"==f?1e3*(e+o):e+o)},e?p.scramble(t,o,n):p.added(function(){l.drag({boundary:l})}),this.solve=function(e,t,o){zot(o)&&(o=!0),zot(t)&&(t=0),zot(e)&&(e=0),t+e==0&&o&&p.noMouse(),setTimeout(function(){p.order=v.slice(),x(),k(p.order,e,0)},"s"==f?1e3*t:t),o||setTimeout(function(){p.mouse(),l.drag({boundary:l})},"s"==f?1e3*(t+e):t+e)},this._enabled=!0,Object.defineProperty(p,"enabled",{get:function(){return p._enabled},set:function(e){Ge(p,e),To.OPTIMIZE||!zns&&OPTIMIZE||!p.stage||p.stage.update()}}),!(this.dispose=function(e,t,o){return l.removeAllEventListeners(),o||(p.zimContainer_dispose(!0),p.stage&&p.stage.update()),!0})!==d&&To.styleTransforms(this,w),this.clone=function(){return p.cloneProps(new To.Scrambler(l.clone(),r,i,e,t,o,n,a,s,c,u,d,p.group,g))})},To.extend(To.Scrambler,To.Container,["clone","dispose"],"zimContainer",!1),To.Connectors=function(e,t,o,a,l,s,n,c,u,d,h,g,p,r,f,m,z,y,b,v,w,i,C,x,k,T,A,P,B,S,E,I){if(H=zob(To.Connectors,arguments,"width, height, points, node, line, linear, linearWrap, linearOrder, num, snapH, snapV, dropType, deleteNode, dblclick, fullMove, min, max, boundary, expand, nodeRollColor, nodeRollBorderColor, nodeSelectedColor, nodeSelectedBorderColor, baseColor, baseBorderColor, baseRollover, rootLock, grandChildren, dblclickTime, style, group, inherit",this))return H;z_d("67.39"),this.group=E;var M=!1===S?{}:To.getStyle("Connectors",this.group,I);zot(e)&&(e=null!=M.width?M.width:null),zot(t)&&(t=null!=M.height?M.height:null),this.zimContainer_constructor(null,null,null,null,!1),this.type="Connectors",zot(o)&&(o=null!=M.points?M.points:[[0,0],[100,0],[100,100],[0,100]]),zot(a)&&(a=null!=M.node?M.node:new To.Circle(10,To.grey,To.grey)),a.removeFrom(),a.color!=To.clear||a.hitArea||a.expand(0),zot(l)&&(l=null!=M.line?M.line:new To.Line({length:10,thickness:3,color:To.tin,strokeObj:{caps:"round"}})),zot(u)&&(u=null!=M.num?M.num:10),zot(s)&&(s=null!=M.linear&&M.linear),zot(n)&&(n=null==M.linearWrap||M.linearWrap),zot(v)&&(v=null!=M.nodeRollColor?M.nodeRollColor:a.color.match("rgb")?a.color:a.color.lighten(.2)),zot(w)&&(w=null!=M.nodeRollBorderColor?M.nodeRollBorderColor:a.borderColor),zot(i)&&(i=null!=M.nodeSelectedColor?M.nodeSelectedColor:To.white),zot(C)&&(C=null!=M.nodeSelectedBorderColor?M.nodeSelectedBorderColor:a.borderColor),zot(x)&&(x=null!=M.baseColor?M.baseColor:a.color),zot(k)&&(k=null!=M.baseBorderColor?M.baseBorderColor:a.borderColor),zot(T)&&(T=null!=M.baseRollover&&M.baseRollover),zot(m)&&(m=null!=M.min?M.min:a.radius?2*a.radius:Math.min(a.width,a.height)),zot(z)&&(z=null!=M.max?M.max:null),zot(b)&&(b=null!=M.expand?M.expand:To.mobile()?10:0),zot(g)&&(g=null!=M.dropType?M.dropType:"any"),zot(p)&&(p=null==M.deleteNode||M.deleteNode),zot(r)&&(r=null==M.dblclick||M.dblclick),zot(f)&&(f=null==M.fullMove||M.fullMove),zot(B)&&(B=null!=M.dblclickTime?M.dblclickTime:.5);var O,j,L,_,Y,D,X,R,W,F,H=Ao(B);function V(e,t,r,o){if(e.addChild){g="on",P=!(A=!0),(r=e).connectorMoveEvent||(O.bases||(O.bases=[]),O.bases.push(r),r.connectorMoveEvent=r.on("pressmove",function(){r.positionConnectors(r,!0,!0)}),r.connectorUpEvent=r.on("pressup",function(){r.positionConnectors(r,!0,!0)}),T&&(r.connectorOverEvent=r.on("mouseover",function(){$(r)}),r.connectorOutEvent=r.on("mouseout",function(){ee(r)})),r.positionConnectors=function(o,n,r){To.loop(o.connectors,function(e){var t=o.parent.localToLocal(o.x-o.baseStart.x+e.nodeStart.x,o.y-o.baseStart.y+e.nodeStart.y,e.parent);e.x=t.x,e.y=t.y,ae(e,n,r)}),o.stage&&o.stage.update()},r.setConnectorColors=function(t,o,e,n){return zot(t)||(r.connectorColor=t),zot(o)||(r.connectorBorderColor=o),zot(e)||(r.connectorRollColor=e),zot(n)||(r.connectorRollBorderColor=n),To.loop(r.connectors,function(e){zot(t)||(e.color=t),zot(o)||(e.borderColor=o)}),r},r.setConnectorColors(x,k,v,w));var n=r.getBounds();l.endHead,Array.isArray(t)||(t=[t,t]);var i=[];return 2==t.length&&(t=[t[0],t[1],t[0],t[1]]),l.lineOrientation!=To.HORIZONTAL&&"auto"!=l.lineOrientation||To.loop([t[0],t[1]],function(e,o){var t;-1!=e&&-2!=e||(t=r.localToLocal(0==o?n.x:n.x+n.width,n.y,O),i.push([t.x,t.y,To.HORIZONTAL])),-1!=e&&-3!=e||(t=r.localToLocal(0==o?n.x:n.x+n.width,n.y+n.height,O),i.push([t.x,t.y,To.HORIZONTAL])),0<e&&To.loop(e,function(e,t){t=r.localToLocal(0==o?n.x:n.x+n.width,n.y+n.height*(e+1)/(t+1),O);i.push([t.x,t.y,To.HORIZONTAL])})}),l.orientation!=To.VERTICAL&&"auto"!=l.lineOrientation||To.loop([t[2],t[3]],function(e,o){var t;-1!=e&&-2!=e||(t=r.localToLocal(n.x,0==o?n.y:n.y+n.height,O),i.push([t.x,t.y,To.VERTICAL])),-1!=e&&-3!=e||(t=r.localToLocal(n.x+n.width,0==o?n.y:n.y+n.height,O),i.push([t.x,t.y,To.VERTICAL])),0<e&&To.loop(e,function(e,t){t=r.localToLocal(n.x+n.width*(e+1)/(t+1),0==o?n.y:n.y+n.height,O);i.push([t.x,t.y,To.VERTICAL])})}),r.connectors=[],r.baseStart=new To.Point(r.x,r.y),To.loop(i,function(e){e=V(e[0],e[1],r,e[2]);te(r,e)}),setTimeout(function(){r.positionConnectors(r,!0,!0)},50),O}t=a.clone().loc(e,t,Y).drag({boundary:y}).expand(b);return t.orientation=o,t.on("mouseover",q),t.on("mouseout",U),t.on("mousedown",Q),t.on("pressmove",Z),t.on("pressup",K),p&&t.hold(G),t.creations=[],t}function N(){To.loop(o,function(e){V(e[0],e[1])}),s&&Y.loop(function(e,t,o){0==t?(e.before=n?Y.getChildAt(o-1):null,e.after=Y.getChildAt(t+1)):t==o-1?(e.after=n?Y.getChildAt(0):null,e.before=Y.getChildAt(t-1)):(e.before=Y.getChildAt(t-1),e.after=Y.getChildAt(t+1)),c&&0<t&&e.noMouse()})}function G(e){var t=e.target.stage,e=e.target;O.bases||A&&!e.creator.creator||(e.adding?le(e.creator):le(e),t&&t.update())}function q(e){e=e.target;e.selected||(e.color=e.base?e.base.connectorRollColor:v,e.borderColor=e.base?e.base.connectorRollBorderColor:w,O.stage&&O.stage.update())}function U(e){e=e.target;e.selected||(e.color=e.base?e.base.connectorColor:j,e.borderColor=e.base?e.base.connectorBorderColor:L,O.stage&&O.stage.update())}function Q(e){var t,o=e.target;s||A&&!o.creator||!r||(0==W&&(F=setTimeout(function(){var t;W=0,X&&(t=O.stage?O.stage.frame:zdf,Y.loop(function(e){if(e.hitTestPoint(t.mouseX,t.mouseY)&&e.selected)return!1})&&ie())},B)),W++),o.startX=o.x,o.startY=o.y,!s&&0<X.length&&To.loop(X,function(e){e.startX=e.x,e.startY=e.y}),o.creations.length>=u||o.selected||o.creator&&!P||(o.adding=!0,(t=V(o.x,o.y).bot()).creations=o.creations,t.creatorLine=o.creatorLine,t.creator=o.creator,t.orientation=o.orientation,t.startX=o.startX,t.startY=o.startY,o.base&&(t.base=o.base,t.baseStart=o.baseStart,t.nodeStart=o.nodeStart,t.connectors=o.connectors,o.base=o.baseStart=o.nodeStart=o.connectors=null,t.base.connectors&&t.base.connectors.splice(t.base.connectors.indexOf(o),1,t),t.color=t.base.connectorColor,t.borderColor=t.base.connectorBorderColor),t.before=o.before,t.after=o.after,t.before&&(t.before.after=t),t.after&&(t.after.before=t),!t.creator||-1!=(e=t.creator.creations.indexOf(o))&&t.creator.creations.splice(e,1,t),To.loop(t.creations,function(e){e.creator=t}),o.creator=t,o.creatorLine=l.clone().setPoints(o.x,o.y,o.x,o.y).addTo(_).alp(0),o.creatorLine.lineOrientation=o.orientation,(o.creatorLine.node=o).creatorLine.creatorNode=t,o.creations=[],t.creations.push(o))}function Z(e){var t=e.target;t.creatorLine&&t.creatorLine.alp(1),!s&&0<X.length&&-1==X.indexOf(t)&&ie(),ae(t,!1,!0),O.bases&&To.loop(O.bases,function(e){t.creator&&t.creator.base==e||(!e.connectorsOn&&t.hitTestBounds(e)&&$(e),e.connectorsOn&&!t.hitTestBounds(e)&&ee(e))}),O.stage.update()}function K(e){var n=e.target;O.bases&&To.loop(O.bases,function(e){e!=n.base&&e.connectorsOn&&ee(e)});var t=!1;if(!s&&1<W&&(clearTimeout(F),o=n.adding?n.creator:n,n.adding&&le(o.creations[o.creations.length-1]),o.selected||ne(o,!(O.stage?O.stage.frame:zdf).ctrlKey),t=!(W=0)),s||O.base||(d&&(n.x=Math.round(n.x/d)*d),h&&(n.y=Math.round(n.y/h)*h)),m&&To.dist(n.x,n.y,n.startX,n.startY)<m||z&&To.dist(n.x,n.y,n.startX,n.startY)>z)return n.adding?le(n):(n.loc(n.startX,n.startY),t||ae(n)),O.stage.update(),void O.dispatchEvent("noconnection");var e=!1,o=!1;if(s){t=n.creator;if(O.connectionStart=t,O.connectionEnd=n,t.before&&n.hitTestCircle(t.before)&&!c)n.loc(t.before).removeFrom(),t.before.after=null,t.before.before||t.before.noMouse(),t.before=null,t.after||t.noMouse(),o=!0,e=re();else if(t.after&&n.hitTestCircle(t.after))n.loc(t.after).removeFrom(),t.after.before=null,t.after.after||t.after.noMouse(),c&&t.after.mouse(),t.after=null,t.before||t.noMouse(),c&&t.noMouse(),o=!0,e=re();else{if(t&&!(0<n.creations.length))return le(n),O.stage.update(),void O.dispatchEvent("noconnection");n.loc(n.startX,n.startY).bot()}}else if("off"==g){if(!Y.loop(function(e){if(n!=e)return n.hitTestCircles(e)?(n.adding?le(n):(n.loc(n.startX,n.startY),ae(n)),A&&oe(n),!f&&n.creator&&0<u&&n.creator.creations.length>=u&&n.creator.noMouse(),O.dispatchEvent("connection"),O.stage.update(),!1):void 0}))return void J(n)}else if("on"==g||"single"==g){var r,i=0;if(Y.loop(function(e,t,o){if(n!=e&&n.hitTestCircles(e)&&(r=e,!O.bases||!(n.orientation!=e.orientation||n.creator&&n.creator.base&&n.creator.base==e.base))){if("on"==g)return!1;i++,i+=e.creations.length}})&&("single"!=g||1!=i))return void J(n);if(n.loc(r),n.creator&&n.orientation==To.VERTICAL&&Math.round(n.y)==Math.round(n.creator.startY)||n.creator&&n.orientation==To.HORIZONTAL&&Math.round(n.x)==Math.round(n.creator.startX))return;r.base&&r.base.connectors&&te(r.base,n),e=!0}!f&&n.creator&&0<u&&n.creator.creations.length>=u&&n.creator.noMouse(),n.adding=!1,ae(n,!0,!0),To.loop(X,function(e){e.startX=e.x,e.startY=e.y}),n.startX=n.x,n.startY=n.y,A&&oe(n),o?O.dispatchEvent("connection"):O.dispatchEvent("noconnection"),e&&O.dispatchEvent("complete"),O.stage.update()}function J(e){var t;e.adding||!P?le(e):(e.loc(e.startX,e.startY),ae(e)),A&&oe(e),e.base&&e.base.connectors&&(t=e.base,e=e,t.connectors.splice(t.connectors.indexOf(e),1),e.nodeStart=null,e.base=null),O.stage.update(),O.dispatchEvent("noconnection")}function $(t){To.loop(t.connectors,function(e){e.color=t.connectorRollColor,e.borderColor=t.connectorRollBorderColor}),t.connectorsOn=!0,t.stage.update()}function ee(t){To.loop(t.connectors,function(e){e.color=t.connectorColor,e.borderColor=t.connectorBorderColor}),t.connectorsOn=!1,t.stage.update()}function te(e,t){e.connectors.push(t),t.nodeStart=t.parent.localToLocal(t.x,t.y,e.parent),t.nodeStart.x-=e.x-e.baseStart.x,t.nodeStart.y-=e.y-e.baseStart.y,t.base=e}function oe(e){e.creator&&(e.creator.creator?oe(e.creator):e.creator&&e.creator.creations.length>=u?e.creator.noMouse():e.creator.mouse())}function ne(e,t){t&&To.loop(e.creations,function(e){ne(e,t)}),e.selected=!0,e.color=e.base?e.base.connectorColor:i,e.borderColor=e.base?e.base.connectorBorderColor:C,X.push(e),e.top(),R=R||O.stage.on("stagemousedown",function(e){var t=O.stage?O.stage.frame:zdf;Y.loop(function(e){if(e.hitTestPoint(t.mouseX,t.mouseY))return!1})&&ie()})}function re(){if(Y.loop(function(e){if(e.before||e.after)return!1}))return Y.loop(function(e){e.noMouse()}),!0}function ie(){To.loop(X,function(e){e.selected=!1,e.color=e.base?e.base.connectorColor:j,e.borderColor=e.base?e.base.connectorBorderColor:L}),X=[],O.stage.off("stagemousedown",R),R=null,O.stage.update()}function ae(t,o,n){var e=0<X.length?X:[t];To.loop(e,function(e){e!=t&&e.loc(e.startX+t.x-t.startX,e.startY+t.y-t.startY),e.creator&&e.creatorLine.setPoints(e.x,e.y,e.creator.x,e.creator.y,o,n),To.loop(e.creations,function(e){e.creatorLine.setPoints(e.x,e.y,e.creator.x,e.creator.y,o,n)})})}function le(e){var t;return To.loop(e.creations,function(e){le(e)},!0),e.creatorLine&&(e.creatorLine.removeFrom(),-1!=(t=e.creator.creations.indexOf(e))&&e.creator.creations.splice(t,1),e.creator.mouseEnabled||A&&!e.creator.creator||e.creator.mouse()),e.removeFrom(),e.removeAllEventListeners(),e=null,O}function se(e){e.off("pressmove",e.connectorMoveEvent),e.off("pressup",e.connectorUpEvent),e.connectorOverEvent&&e.off("mouseover",e.connectorOverEvent),e.connectorOutEvent&&e.off("mouseout",e.connectorOutEvent),e.connectors=null,e.baseStart=null,e.positionConnectors=e.setConnectorColors=null,e.connectorColor=e.connectorBorderColor=e.connectorRollColor=e.connectorRollBorderColor=null,O.bases.splice(O.bases.indexOf(e),1),O.stage&&O.stage.update()}B*="s"==H?1e3:1,zot(d)&&(d=null!=M.snapH?M.snapH:null),zot(h)&&(h=null!=M.snapV?M.snapV:null),zot(A)&&(A=null!=M.rootLock&&M.rootLock),zot(P)&&(P=null==M.grandChildren||M.grandChildren),s&&o.length<=1?zon&&zogy("Connector() - linear needs more than one point"):((O=this).node=a,O.line=l,j=a.color,L=a.borderColor,To.faint,_=O.lines=new To.Container(e,t).addTo(O),Y=O.nodes=new To.Container(e,t).addTo(O),"Blob"!=o.type&&"Squiggle"!=o.type||(D=[],To.loop(o.points,function(e){D.push([e[0],e[1]])}),o=D),O.points=o,this.addNode=function(e,t,o){if(!s)return V(e,t)},N(),O.keyEvent=function(e){p&&46==e.keyCode&&(To.loop(X,function(e){e&&e.parent&&le(e)}),O.stage&&O.stage.update())},window.addEventListener("keydown",O.keyEvent),X=[],W=0,this.selectNode=function(e,t){ne(e,t)},this.removeNode=function(e){le(e)},this.removeConnectors=function(){To.loop(Y,function(e){le(e)},!0),N(),O.stage.update()},this.removeBase=function(e){To.loop(e.connectors,function(e){le(e)}),se(e)},this.addBase=function(e,t){V(e,t)},Object.defineProperty(this,"selectedList",{get:function(){return X},set:function(e){zon&&zogy("Selectors() - selectedList is read only")}}),!(this.dispose=function(e,t,o){return O.nodes.loop(function(e){e.removeFrom(),e.removeAllEventListeners(),e=null},!0),O.lines.loop(function(e){e.removeFrom(),e=null},!0),window.removeEventListener("keydown",O.keyEvent),O.keyEvent=null,O.bases&&To.loop(O.bases,function(e){se(e)}),o||(O.zimContainer_dispose(!0),O.stage&&O.stage.update()),!0})!==S&&To.styleTransforms(this,M),this.clone=function(){return O.cloneProps(new To.Collectors(e,t,o,a,l,s,n,c,u,d,h,g,p,r,f,m,z,y,b,v,w,i,C,x,k,T,A,P,B,S,O.group,I))})},To.extend(To.Connectors,To.Container,["clone","dispose"],"zimContainer",!1),To.Marquee=function(e,t,o,i,n,r,a,l,s,c,u,d,h,g,p,f,m){if(P=zob(To.Marquee,arguments,"width, height, items, time, transition, speed, direction, marginLeft, marginRight, marqueeType, borderColor, borderWidth, refresh, mix, style, group, inherit",this))return P;z_d("67.4"),this.group=f;var z=!1===p?{}:To.getStyle("Marquee",this.group,m),y=this;zot(e)&&(e=null!=z.width?z.width:300),zot(t)&&(t=null!=z.height?z.height:100);var b=Ao(i);zot(i)&&(i=null!=z.time?z.time:"s"==b?5:5e3),zot(n)&&(n=null!=z.transition?z.transition:"slide"),zot(u)&&(u=null!=z.borderColor?z.borderColor:"#333"),zot(d)&&(d=null!=z.borderWidth?z.borderWidth:1),u<0||d<0?u=d=null:null!=u&&null==d&&(d=1),zot(l)&&(l=null!=z.marginLeft?z.marginLeft:25),zot(s)&&(s=null!=z.marginRight?z.marginRight:25),zot(r)&&(r=null!=z.speed?z.speed:"s"==b?.5:500),Po(r,b),zot(a)&&(a=null!=z.direction?z.direction:"right"),zot(h)&&(h=null!=z.refresh?z.refresh:"s"==b?1800:18e5),zot(g)&&(g=null==z.mix||z.mix),this.zimContainer_constructor(e+l+s,t,null,null,!1),this.type="Marquee",this.speed=r;var v,w=new To.Rectangle(e-1,t-1,To.clear).addTo(y).mov(l+.5,.5),C=this.content=new To.Container(e,t).loc(l,0,y).setMask(w),x=this.pages=new To.Pages(null,n,r,null,C).addTo(C),k=!1;this.add=function(e,t,o,n,r){zot(r)&&(r=!0),e.scaleTo(C,100,100),t&&e.cur().on("click",function(){zgo(t,o)}),x.addPage(e),r&&x.center(),e.marqueeViews=0,e.marquee=y,k||(k=!0,y.selectedIndex=0,y.selected=x.pages[y.selectedIndex].page,y.lastSelected=null,y.selected.marqueeOn&&y.selected.marqueeOn(),y.interval=To.interval(i,function(){y.go()})),n||O(),I&&I.top()},this.remove=function(e){var t;y.selected==e?1!=y.pages.pages.length&&((t=y.selectedIndex+1)==y.pages.pages.length&&(t=0),y.pages.go(t,null,null,0),setTimeout(function(){y.pages.removePage(e),e.dispose&&e.dispose(),O()},20)):(y.pages.removePage(e),e.dispose&&e.dispose(),O())},zot(o)||Array.isArray(o)||(o=[o]),o&&0<o.length&&(g&&To.shuffle(o),To.loop(o,function(e){y.add(e,null,null,!0)})),0<h&&(v=To.timeout(h*("s"==b?1e3:1),function(){location.reload()},null,"ms")),y.go=function(o){var e;y.selected.marqueeViews+=1,y.selected.marqueeOff&&y.selected.marqueeOff(),o?(y.selected=o,To.loop(x.pages,function(e,t){e.page==o&&(y.selectedIndex=t)}),y.interval.interval=y.selected.marqueeTime||i,y.interval.pause(M.toggled,null,!0)):(e=y.selectedIndex+1,y.selectedIndex=e%x.pages.length,y.selected=x.pages[y.selectedIndex].page,y.interval.time=y.selected.marqueeTime||i),y.dispatchEvent("page"),y.selected.marqueeOn&&y.selected.marqueeOn(),x.go(y.selected,a,n,r)},x.on("pagetransitioned",function(){y.dispatchEvent("pagetransitioned"),y.indicator&&(y.indicator.selectedIndex=y.selectedIndex)});var T=!1,A=y.left=new To.Container(l-4,t-4),P=(new To.Shape).sca(.6);P.graphics.f(To.light).mt(0,0).p("AAhCLIAAkVIBXAAIAAEVgAh3CLIAAkVIBXAAIAAEVg");b=(new To.Shape).sca(.6).reg(-2,0);b.graphics.f(To.light).mt(0,0).p("AiJieIETCeIkTCfg");var B,S,E,I,M=y.button=new To.Button({label:"",icon:P,toggleIcon:b,width:45,height:45,corner:0,shadowBlur:0}).scaleTo(A,100).pos(0,0,!1,!0,A);function O(){var e;zot(l)||0==l||(e=4*l/25,A.pos(l-A.width-e,e/2,!1,!0,y),y.indicator&&(y.indicator.dispose(),y.indicator.removeFrom()),B=B||new To.Proportion(8,16,A.width+e,A.width/2+e,-1),y.indicator=new To.Indicator({width:(x.pages.length<=2?x.pages.length:x.pages.length-1)*(A.width-3),height:B.convert(x.pages.length),num:x.pages.length,shadowBlur:-1,interactive:!0,scale:1.2,indicatorType:c}),y.indicator.fit(0,0,t-M.height,M.width),y.indicator.rot("down"==a?-90:90).center(A).pos(null,A.width-e/2,null,!0),y.indicator.selectedIndex=y.selectedIndex,y.indicator.on("change",function(){y.go(x.pages[y.indicator.selectedIndex].page)}))}M.on("click",function(){y.interval&&y.interval.pause(M.toggled),T=M.toggled,y.stage.update()}),O(),!zot(s)&&0<s&&void 0!==zdf&&zdf&&(P=4*s/25,b=y.right=new To.Container(45,270),(S=y.icon=zdf.makeIcon(To.grey,To.lighter,To.silver).sca(.5).pos(0,0,!0,!0,b).mov(0,0).cur()).on("mouseover",function(){E.animate({props:{scaleX:1},time:500,ease:"backOut",override:!0,timeUnit:"ms"}),S.stage.update()}),S.on("mouseout",function(){E.animate({props:{scaleX:0},time:300,ease:"backIn",override:!0,timeUnit:"ms"}),S.stage.update()}),S.on("mousedown",function(){zgo("https://zimjs.com/marquee","_blank")}),E=y.label=new To.Label({text:"MARQUEE",color:To.dark,backgroundColor:To.lighter,shiftVertical:1,paddingVertical:5}).rot(-90).pos(0,13,!0,!1,b).reg(-10).sca(0,1).mov(0),b.fit(0,0,s-P,t-P),b.pos(s-b.width-P,P/2,!0,!0,y)),y.stage&&y.stage.update(),this.pause=function(e,t){zot(e)&&(e=!0),e!=T&&(T=e,y.interval.pause(e,t),y.button.toggle(e))},Object.defineProperty(this,"paused",{get:function(){return T},set:function(e){zon&&zogy("Marquee() - paused is read only - use pause()")}}),Object.defineProperty(this,"time",{get:function(){return i},set:function(e){i=e,y.interval.time=i}}),this.load=function(n,e){var t=[];g&&To.shuffle(n),To.loop(n,function(e){Array.isArray(e)?t.push(e[0]):t.push(e)});var o=y.stage?y.stage.frame:zdf;return y.marqueeLoader=o.loadAssets(t,e),y.loadEvent=y.marqueeLoader.on("assetload",function(e){var t,o=n[e.asset.id];o=Array.isArray(o)?(t=o[0],o[1]):(t=o,"_self"),y.add(e.asset,t,o),O()}),y},zot(u)||((I=new To.Rectangle(e-1,t-1,To.clear,u,d).loc(w,null,y)).mouseEnabled=!1),!1!==p&&To.styleTransforms(this,z),this.clone=function(){return y.cloneProps(new To.Marquee(e,t,o,i,n,r,a,c,u,d,h,g,p,this.group,m))},this.dispose=function(e,t,o){return v&&v.clear(),y.interval&&y.interval.clear(),y.loadEvent&&y.marqueeLoader.off("assetload",y.loadEvent),x.dispose(),x=null,o||this.zimContainer_dispose(!0),!0}},To.extend(To.Marquee,To.Container,["clone","dispose"],"zimContainer"),To.Loader=function(t,o,n,h,r,i,a,l,s,e,c,u,d,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j){if(L=zob(To.Loader,arguments,"width, height, label, type, backgroundColor, rollBackgroundColor, color, rollColor, borderColor, borderRollColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, dashed, backing, rollBacking, rollPersist, icon, rollIcon, toggle, toggleBacking, rollToggleBacking, toggleIcon, rollToggleIcon, toggleEvent, frame, multiple, accept, style, group, inherit",this))return L;z_d("67.5"),this.group=O;var L=!1===M?{}:To.getStyle("Loader",this.group,j);if(zot(t)&&(t=null!=L.width?L.width:250),zot(o)&&(o=null!=L.height?L.height:70),zot(h)&&(h=null!=L.type?L.type:"image"),h=h.toLowerCase(),zot(r)&&(r=null!=L.backgroundColor?L.backgroundColor:"rgba(0,0,0,.05)"),zot(i)&&(i=null!=L.rollBackgroundColor?L.rollBackgroundColor:"rgba(0,0,0,.1)"),zot(a)&&(a=null!=L.color?L.color:"rgba(0,0,0,.5)"),zot(l)&&(l=null!=L.rollColor?L.rollColor:a),zot(s)&&(s=null!=L.borderColor?L.borderColor:"rgba(0,0,0,.3)"),zot(c)&&(c=null!=L.borderWidth?L.borderWidth:1),zot(z)&&(z=null==L.dashed||L.dashed),zot(u)&&(u=null!=L.corner?L.corner:0),zot(E)&&(E=null==L.multiple||L.multiple),zot(n)&&(n=null!=L.label?L.label:new To.Label({text:"UPLOAD PIC",color:a,rollColor:l,valign:"center",align:"center",backing:"ignore",shadowColor:"ignore",shadowBlur:"ignore",backgroundColor:"ignore",group:this.group})),zot(S)){if(!zdf)return void(zon&&zog("zim.Loader - please provide a reference to zim Frame"));S=zdf}this.zimButton_constructor(t,o,n,r,i,a,l,s,e,c,u,d,g,p,f,m,z,y,b,v,w,C,x,null,null,null,null,k,T,A,P,B,null,null,null,null,null,null,null,null,null,null,null,null,!1),this.type="Loader";var _=this,Y=S.stage;n=_.label;var D=_.tag=document.createElement("input");document.body.appendChild(D),D.setAttribute("type","file"),D.setAttribute("aria-hidden",!0),E&&D.setAttribute("multiple","multiple"),I&&D.setAttribute("accept",I),D.hidden=!0,D.zimDisplay=D.style.display||"inline-block",D.style.cssText="border:thin solid grey; z-index:2; width:"+t+"px; height:"+o+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none; cursor:pointer; opacity: 0; filter: alpha(opacity=0);",this.addEventListener("mousedown",function(){D.click()}),D.addEventListener("change",V);var X=new createjs.DOMElement(D);Y.addChild(X),X.alpha=0;var R,W,F,H=S.retina&&window.devicePixelRatio||1;function V(e){var i,a,l,s,c,u,d=(e.dataTransfer&&e.dataTransfer.files&&0<e.dataTransfer.files.length?e.dataTransfer:e.target).files;"text"==h||"json"==h?(i=[],"json"==h.toLowerCase()&&(l=[])):c=[];for(var t,o,n=0;n<d.length;n++)t=d[n],o=void 0,(o=new FileReader).onload=function(e){var t,o,n,r;"text"==h||"json"==h?(t=e.target.result,i.push(t),"json"==h&&(o=JSON.parse(t),l.push(o)),1==i.length&&(a=t,"json"==h&&(s=o)),i.length==d.length&&((n=new createjs.Event("loaded")).texts=i,n.text=a,n.lastText=t,n.total=i.length,"json"==h&&(n.jsons=l,n.json=s,n.lastJSON=o),_.dispatchEvent(n),D.value="")):((r=new Image).onload=function(){var e,t=new To.Bitmap(r);c.push(t),1==c.length&&(u=t),c.length==d.length&&((e=new createjs.Event("loaded")).bitmaps=c,e.bitmap=u,e.lastBitmap=t,e.total=c.length,_.dispatchEvent(e),D.value="")},r.src=e.target.result)},"text"==h||"json"==h?o.readAsText(t):o.readAsDataURL(t)}this.resize=function(){return _.stage?(D.setAttribute("aria-hidden",!1),D.hidden=!1,D.style.display=D.zimDisplay,R=setTimeout(function(){var e=_.getConcatenatedMatrix().decompose(),t=_.localToGlobal(0,0);S.retina?(X.x=S.x/Y.scaleX+t.x/H,X.y=S.y/Y.scaleY+t.y/H,To.sca(X,e.scaleX/H/Y.scaleX,e.scaleY/H/Y.scaleY)):(X.x=S.x+t.x*S.scale,X.y=S.y+t.y*S.scale,To.sca(X,S.scale*e.scaleX,S.scale*e.scaleY)),Y.update()},50),_):(D.setAttribute("aria-hidden",!0),D.hidden=!0,void(D.style.display="none"))},this.resize(),_.on("added",function(){D.style.display="block",D.hidden=!1,D.style.display="block",_.resize()}),_.added(function e(){_.resize();W=setTimeout(function(){D.style.display="block",D.hidden=!1,D.style.display="block"},50);_.on("added",e,null,!0)}),_.on("removed",function(){R&&clearTimeout(R),W&&clearTimeout(W),D&&(D.style.display="none",D.hidden=!0,D.style.display="none")}),(new XMLHttpRequest).upload&&(F=function(e){D.removeEventListener("change",V),V(e),setInterval(function(){D.addEventListener("change",V)},100)},D.addEventListener("drop",F)),!(this.save=function(e,t,o,n,r,i,a,l,s,c,u){var d,h,g;if(d=zob(_.save,arguments,"content, filename, x, y, width, height, cached, cachedBounds, type, data, quality"))return d;if(zot(e)&&(e=S.stage),zot(s)&&(s="png"),zot(t)?t="saved_"+String(To.makeID("numbers",5))+"."+s:1==(d=t.split(".")).length||-1==(p=(h=["png","jpg","jpeg"]).indexOf(d[d.length-1].toLowerCase()))?t+="."+s:s=h[p],zot(o)&&(o=0),zot(n)&&(n=0),zot(r)&&(r=(e.getBounds&&e.getBounds()?e.getBounds():S).width),zot(i)&&(i=(e.getBounds&&e.getBounds()?e.getBounds():S).height),e.cache(o,n,r,i),c){var p=e.cacheCanvas.toDataURL("image/"+s,u);return a?l&&e.cache(l.x,l.y,l.width,l.height):e.uncache(),p}return/Edge\/(\d)+/.test(navigator.userAgent)?((g=window.open()).document.write("<html><head><title>saved</title></head><body style='margin:0px;padding:0px;overflow:hidden'><img src="+e.cacheCanvas.toDataURL("image/"+s)+"></body></html>"),g.document.close()):("jpg"==s&&(s="jpeg"),(g=document.createElement("a")).setAttribute("download",t),g.setAttribute("href",e.cacheCanvas.toDataURL("image/"+s,u)),document.body.appendChild(g),g.click(),document.body.removeChild(g)),a?l&&e.cache(cashedBounds.x,cashedBounds.y,cashedBounds.width,cashedBounds.height):e.uncache(),_})!==M&&To.styleTransforms(this,L),this.clone=function(){var e=new To.Loader(t,o,zot(n)?null:n.clone(),r,i,a,l,s,c,u,d,g,p,f,m,zot(y)?null:y.clone(),zot(b)?null:b.clone(),v,zot(w)?null:w.clone(),zot(C)?null:C.clone(),x,zot(k)?null:k.clone(),zot(T)?null:T.clone(),zot(A)?null:A.clone(),zot(P)?null:P.clone(),B,S,M,this.group);return _.cloneProps(e)},Object.defineProperty(this,"frame",{get:function(){return S},set:function(e){e!=S&&(S.off("update",_.updateEvent),S.off("resize",_.resizeEvent),S=e,_.resizeEvent=S.on("resize",_.resize),_.updateEvent=S.on("update",_.resize),_.resize())}}),this.resizeEvent=S.on("resize",_.resize),this.updateEvent=S.on("update",_.resize),this.dispose=function(e,t,o){var n;return _.stage&&(n=_.stage),S.off("update",_.updateEvent),S.off("resize",_.resizeEvent),D.removeEventListener("change",V),F&&D.removeEventListener("drop",F),D&&D.parentNode&&D.parentNode.removeChild(D),D=null,o||(this.zimButton_dispose(),n&&n.update()),!0}},To.extend(To.Loader,To.Button,["clone","dispose"],"zimButton",!1),To.TextArea=function(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,e,k){if(B=zob(To.TextArea,arguments,"width, height, size, padding, color, backgroundColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, dashed, id, placeholder, readOnly, spellCheck, password, inputType, wrap, maxLength, frame, expand, style, group, inherit",this))return B;z_d("67.6"),this.group=e;var T=!1===x?{}:To.getStyle("TextArea",this.group,k);if(zot(t)&&(t=null!=T.width?T.width:250),zot(o)&&(o=null!=T.height?T.height:70),zot(n)&&(n=null!=T.size?T.size:20),zot(r)&&(r=null!=T.padding?T.padding:5),zot(i)&&(i=null!=T.color?T.color:"#666"),zot(a)&&(a=null!=T.backgroundColor?T.backgroundColor:"rgba(256,256,256,.1)"),zot(l)&&(l=null!=T.borderColor?T.borderColor:"rgba(0,0,0,.1)"),zot(s)&&(s=null!=T.borderWidth?T.borderWidth:null),l<0||s<0?l=s=null:null!=l&&null==s&&(s=1),zot(c)&&(c=null!=T.corner?T.corner:0),!zot(d)&&zot(u)&&(u=null!=T.shadowColor?T.shadowColor:"rgba(0,0,0,.3)"),!zot(u)&&zot(d)&&(d=null!=T.shadowBlur?T.shadowBlur:10),zot(z)&&(z=null!=T.password&&T.password),zot(y)&&(y=null!=T.inputType&&T.inputType),zot(b)&&(b=null==T.wrap||T.wrap),zot(v)&&(v=null!=T.maxLength?T.maxLength:null),zot(m)&&(m=null==T.spellCheck||T.spellCheck),zot(f)&&(f=null!=T.readOnly&&T.readOnly),zot(p)&&(p=null!=T.placeholder?T.placeholder:null),this.maxLength=v,zot(C)&&(C=null!=T.expand?T.expand:20),!0===C&&(C=20),zot(w)){if(!zdf)return void(zon&&zog("zim.TextArea - please provide a reference to zim Frame"));w=zdf}this.zimContainer_constructor(t,o,null,null,!1),this.type="TextArea";var A=this,P=w.stage,B=this.background=new To.Rectangle(t,o,a,l,s,c,h,null,!1).expand(C);-1!=u&&0<d&&(B.shadow=new createjs.Shadow(u,3,3,d)),A.addChild(B);var S=A.tag=y||z?document.createElement("input"):document.createElement("textarea");(w.tag||document.body).appendChild(S),zot(g)||(S.setAttribute("id",g),S.setAttribute("name",g)),z?S.setAttribute("type","password"):y&&S.setAttribute("type",y),S.readOnly=f,S.spellcheck=m,p&&S.setAttribute("placeholder",p),S.zimDisplay=S.style.display||"inline-block",S.style.cssText="background-color:rgba(0,0,0,.01); color:"+i+"; resize:none; z-index:3; width:"+(t-2*r)+"px; height:"+(o-2*r)+"px; overflow:hidden; outline:none;font-size:"+n+"px; font-family:"+(null!=T.font?T.font:"arial")+"; border:none; position:absolute; left:0px; top:0px; display:none;",A.taInput=function(){!zot(A.maxLength)&&A.text.length>A.maxLength&&(A.text=A.text.substring(0,A.maxLength)),A.dispatchEvent("input")},A.taFocus=function(){w.zil&&window.removeEventListener("keydown",w.zil[0]),A.dispatchEvent("focus")},A.taBlur=function(){w.zil&&window.addEventListener("keydown",w.zil[0]),A.dispatchEvent("blur")},S.addEventListener("change",A.taChange),S.addEventListener("input",A.taInput),S.addEventListener("focus",A.taFocus),S.addEventListener("blur",A.taBlur);var E=new createjs.DOMElement(S);E.alpha=0,this.on("mousedown",function(){setTimeout(function(){S.focus()},100)}),this.setFocus=function(e){return zot(e)&&(e=!0),e?S.focus():S.blur(),A};var I,M,O=w.retina&&window.devicePixelRatio||1;this.resize=function(){return I=setTimeout(function(){var e=A.getConcatenatedMatrix().decompose(),t=A.localToGlobal(r,r);w.retina?(w.tag?(E.x=t.x/O,E.y=t.y/O):(E.x=w.x/P.scaleX+t.x/O,E.y=w.y/P.scaleY+t.y/O),To.sca(E,e.scaleX/O/P.scaleX,e.scaleY/O/P.scaleY)):(w.tag?(E.x=t.x*w.scale,E.y=t.y*w.scale):(E.x=w.x+t.x*w.scale,E.y=w.y+t.y*w.scale),To.sca(E,w.scale*e.scaleX,w.scale*e.scaleY)),E.alpha=1,A.stage&&P.update()},20),A},this.resize(),A.added(function e(){P.addChild(E);M=setTimeout(function(){S.style.display=S.zimDisplay},50);A.resize();A.on("added",e,null,!0)}),A.on("removed",function(){I&&clearTimeout(I),M&&clearTimeout(M),P.removeChild(E),S&&(S.style.display="none")}),Object.defineProperty(this,"currentValue",{get:function(){return S.value},set:function(e){S.value=e}}),Object.defineProperty(this,"text",{get:function(){return S.value},set:function(e){S.value=e}}),Object.defineProperty(this,"focus",{get:function(){return document.activeElement==S},set:function(e){A.setFocus(e)}}),Object.defineProperty(this,"readOnly",{get:function(){return S.readOnly},set:function(e){S.readOnly=e}}),void 0!==KEYFOCUS&&(To.KEYFOCUS=KEYFOCUS),Object.defineProperty(this,"keyFocus",{get:function(){return To.KEYFOCUS==A},set:function(e){To.KEYFOCUS=A}}),To.KEYFOCUS||(A.keyFocus=!0),A.taMousedown=function(){A.keyFocus=!0},S.addEventListener("mousedown",A.taMousedown),b||(S.style.whiteSpace="pre"),!1!==x&&To.styleTransforms(this,T),this.clone=function(){var e=new To.TextArea(t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,this.group,k);return A.cloneProps(e)},Object.defineProperty(this,"frame",{get:function(){return w},set:function(e){e!=w&&(w.off("update",A.updateEvent),w.off("resize",A.resizeEvent),w=e,A.resizeEvent=w.on("resize",A.resize),A.updateEvent=w.on("update",A.resize),O=w.retina&&window.devicePixelRatio||1,P=w.stage,A.resize())}}),this.resizeEvent=w.on("resize",A.resize),this.updateEvent=w.on("update",A.resize),this.dispose=function(e,t,o){var n;return A.stage&&(n=A.stage),w.off("update",A.updateEvent),w.off("resize",A.resizeEvent),S&&S.parentNode&&S.parentNode.removeChild(S),S.removeEventListener("change",A.taChange),S.removeEventListener("input",A.taInput),S.removeEventListener("focus",A.taFocus),S.removeEventListener("blur",A.taBlur),S.removeEventListener("mousedown",A.taMousedown),S=null,o||(this.zimContainer_dispose(!0),n&&n.update()),!(A.background=null)}},To.extend(To.TextArea,To.Container,["clone","dispose"],"zimContainer",!1),To.Tag=function(t,o,n,r,i,a,l,s,c,u,e,d){if(h=zob(To.Tag,arguments,"width, height, id, frame, backgroundColor, padding, paddingHorizontal, paddingVertical, expand, style, group, inherit",this))return h;z_d("67.7"),this.group=e;var h=!1===u?{}:To.getStyle("Tag",this.group,d);if(zot(t)&&(t=null!=h.width?h.width:250),zot(o)&&(o=null!=h.height?h.height:70),zot(n)&&(n=null!=h.id?h.id:"zimTag_"+To.rand(1e4)),zot(r)){if(!zdf)return void(zon&&zog("zim.TextArea - please provide a reference to zim Frame"));r=zdf}zot(i)&&(i=null!=h.backgroundColor?h.backgroundColor:"rgba(0,0,0,0)"),zot(a)&&(a=null!=h.padding?h.padding:10),zot(l)&&(l=null!=h.paddingHorizontal?h.paddingHorizontal:a),zot(s)&&(s=null!=h.paddingVertical?h.paddingVertical:a),zot(c)&&(c=null!=h.expand?h.expand:20),!0===c&&(c=20),this.zimContainer_constructor(t,o,null,null,!1),this.type="Tag",this.tagID=n,this.id=n;var g=this,p=r.stage,f=(g.background=new To.Rectangle(t+l,o+s,i).center(this).expand(c||0),g.tag=document.createElement("div"));document.body.appendChild(f),f.setAttribute("id",n),f.setAttribute("name",n),f.zimDisplay=f.style.display||"inline-block",f.style.cssText="resize:none; z-index:3; width:"+t+"px; height:"+o+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none;";var m=new createjs.DOMElement(f);m.alpha=0;var z,y,b=r.retina&&window.devicePixelRatio||1;this.resize=function(){return z=setTimeout(function(){var e=g.getConcatenatedMatrix().decompose(),t=g.localToGlobal(0,0);r.retina?(m.x=r.x/p.scaleX+t.x/b,m.y=r.y/p.scaleY+t.y/b,To.sca(m,e.scaleX/b/p.scaleX,e.scaleY/b/p.scaleY)):(m.x=r.x+t.x*r.scale,m.y=r.y+t.y*r.scale,To.sca(m,r.scale*e.scaleX,r.scale*e.scaleY)),m.alpha=1,g.stage&&p.update()},50),g},this.resize(),g.added(function e(){p.addChild(m);y=setTimeout(function(){f.style.display=f.zimDisplay},50);g.resize();g.on("added",e,null,!0)}),g.on("removed",function(){z&&clearTimeout(z),y&&clearTimeout(y),p.removeChild(m),f&&(f.style.display="none")}),this.add=function(e){return f.innerHTML+=e,g},Object.defineProperty(this,"innerHTML",{get:function(){return f.innerHTML},set:function(e){f.innerHTML=e}}),Object.defineProperty(this,"style",{get:function(){return f.style},set:function(e){f.style=e}}),!1!==u&&To.styleTransforms(this,h),this.clone=function(){var e=new To.Tag(t,o,n,r,i,a,l,s,c,u,this.group,d);return g.cloneProps(e)},Object.defineProperty(this,"frame",{get:function(){return r},set:function(e){e!=r&&(r.off("update",g.updateEvent),r.off("resize",g.resizeEvent),r=e,g.resizeEvent=r.on("resize",g.resize),g.updateEvent=r.on("update",g.resize),g.resize())}}),this.resizeEvent=r.on("resize",g.resize),this.updateEvent=r.on("update",g.resize),this.dispose=function(e,t,o){var n;return g.stage&&(n=g.stage),r.off("update",g.updateEvent),r.off("resize",g.resizeEvent),f&&f.parentNode&&f.parentNode.removeChild(f),f=null,o||(this.zimContainer_dispose(!0),n&&n.update()),!0}},To.extend(To.Tag,To.Container,["clone","dispose"],"zimContainer",!1),To.addTo=function(e,t,o,n){var r,i;if(r=zob(To.addTo,arguments,"obj, container, index, localToLocal"))return r;if(z_d("47.5"),!zot(e)){if(zot(t)){if(!zdf)return void zog("zim methods - addTo(): please provide container");t=zdf.stage}return zot(n)&&(n=!0),e.parent||(n=!1),n&&(i=e.parent.localToLocal(e.x,e.y,t)),zot(o)||isNaN(o)?t.addChild(e):t.addChildAt(e,o),n&&(e.x=i.x,e.y=i.y),e}zog("zim methods - addTo(): please provide object")},To.removeFrom=function(e,t){if(z_d("47.6"),!zot(e))return zot(t)?e.parent&&e.parent.removeChild(e):t.removeChild(e),e;zog("zim methods - removeFrom(): please provide object")},To.added=function(e,t,o,n){if(z_d("47.7"),!zot(e)&&!zot(t)&&"function"==typeof t){var r=Ao(o);if(zot(o)&&(o="s"==r?.1:100),!e.stage){var i,o=o*("s"==r?1e3:1);n&&(Po(n),i=n*("s"==r?1e3:1));var a=Date.now(),l=0,s=setInterval(function(){5<l?clearInterval(s):(l++,e.stage&&(t(e.stage,e),clearInterval(s),clearInterval(c)))},10),c=setInterval(function(){0<i&&a-Date.now()>i&&clearInterval(c),e.stage&&(t(e.stage,e),clearInterval(c))},o);return c}t(e.stage,e)}},To.centerReg=function(e,t,o,n){if(r=zob(To.centerReg,arguments,"obj, container, index, add"))return r;if("AC"==e.type&&zdf)return zdf.ac("centerReg",arguments),e.addTo(t,o);if(z_d("48"),zot(e)||!e.getBounds||!e.getBounds())return zog("zim methods - centerReg(): please provide object with bounds set"),e;zot(n)&&(n=!0),zot(t)&&e.parent&&n&&(t=e.parent,zot(o)&&(o=e.parent.getChildIndex(e)),e.parent.removeChild(e)),zot(t)||t!=e.parent||(zot(o)&&(o=e.parent.getChildIndex(e)),e.parent.removeChild(e));var r=e.getBounds();return e.regX=r.x+r.width/2,e.regY=r.y+r.height/2,n?To.center(e,t,o):e},To.center=function(e,t,o,n){if(c=zob(To.center,arguments,"obj, container, index, add"))return c;if("AC"==e.type&&zdf)return zdf.ac("center",arguments),e.addTo(t,o);if(To.centerCheck||(z_d("48.1"),To.centerCheck=!0),zot(e)||!e.getBounds)return zog("zim.center(): please provide object with bounds"),e;if(zot(t)&&(e.parent?t=e.parent:zdf&&(t=zdf.stage)),zot(t)||!t.getBounds)return zog("zim.center(): please provide container with bounds"),e;var r=e.getBounds(),i=t.getBounds();zot(n)&&(n=!0);var a=!1;if(zot(i)&&(t.setBounds(0,0),i=t.getBounds(),a=!0),n&&t.addChild&&(zot(o)||"number"==typeof o&&isNaN(o)?t.contains(e)||t.addChild(e):t.addChildAt(e,o)),zot(r))return e.x=i.x+i.width/2,e.y=i.y+i.height/2,e;var l=!1,s=!1;0==t.scaleX&&(l=!0,t.scaleX=1e-5),0==t.scaleY&&(s=!0,t.scaleY=1e-5);var c=e.localToLocal(e.regX,e.regY,t),r=To.boundsToGlobal(e),r=To.boundsToGlobal(t,r,!0);return l&&(t.scaleX=0),s&&(t.scaleY=0),e.x=i.x+i.width/2-r.width/2+(c.x-r.x),e.y=i.y+i.height/2-r.height/2+(c.y-r.y),!n&&t.getStage&&t.stage&&e.parent&&(r=t.localToLocal(e.x,e.y,e.parent),e.x=r.x,e.y=r.y),a&&t.setBounds(null),e},To.place=function(o,e){if(z_d("49"),!zot(o))return zot(e)&&(e="obj"),To.lastPlace=o,To.drag({obj:o,currentTarget:!0,dragCursor:"crosshair"}),o.on("mousedown",function(){To.lastPlace=o}),zdf&&zdf.on("keydown",function(e){var t;o!=To.lastPlace||37<=(t=e.keyCode)&&t<=40&&(e=e.shiftKey?10:1,o.mov(37==t?-1*e:39==t?e:0,38==t?-1*e:40==t?e:0),n(),o.stage&&o.stage.update())}),zog("place "+e+" - to get new position"),o.on("click",n),o;function n(){zog(e+".x = "+Math.round(o.x)+"; "+e+".y = "+Math.round(o.y)+";"),zog(e+".loc("+Math.round(o.x)+", "+Math.round(o.y)+");")}},To.placeReg=function(t,o){if(z_d("49.5"),!zot(t)){var e=t.stage;if(zot(e))return zog("zim.placeReg() - add object to stage before calling placeReg()"),t;zot(o)&&(o="obj");var n=t.parent.localToGlobal(t.x,t.y),r=new To.Shape(-25,-25,50,50,null,!1).addTo(e).pos({x:n.x,y:n.y,reg:!0});return r.graphics.s("white").mt(-25,0).lt(25,0).mt(0,-25).lt(0,20),r.compositeOperation="difference",r.expand(0),To.drag({obj:r}),zog("place cursor to get new registration point location"),e.on("stagemouseup",function(){var e=t.globalToLocal(r.x,r.y);zog(o+".regX = "+Math.round(e.x)+"; "+o+".regY = "+Math.round(e.y)+";"),zog(o+".reg("+Math.round(e.x)+", "+Math.round(e.y)+");")}),t}},To.pos=function(h,e,t,o,n,r,i,a,l,s,c){if(f=zob(To.pos,arguments,"obj, x, y, horizontal, vertical, container, index, add, reg, regX, regY"))return f;if("AC"==h.type&&zdf)return zdf.ac("pos",arguments),h.addTo(r,i);z_d("41.5");var u=!1;"right"==o&&(u=!0);var d=!1;"bottom"==n&&(d=!0);var g=To.POSREG;if(null!=window.POSREG&&(g=window.POSREG),zot(l)&&(l=g),!zot(h)){zot(l)&&zot(s)&&(s=!1),zot(l)&&zot(c)&&(c=!1),!zot(l)&&zot(s)&&(s=l),!zot(l)&&zot(c)&&(c=l),zot(a)&&(a=!0),zot(r)||r.addChild||(r=null),h.getBounds||h.getBounds()||(s=c=!1),zot(r)&&(h.parent?r=h.parent:zdf&&(r=zdf.stage)),!h.parent&&zot(e)&&(e=0),!h.parent&&zot(t)&&(t=0);var p=!1;h.getBounds()||(h.setBounds(0,0),p=!0);var f=!1;if(r&&!r.getBounds()&&(r.setBounds(0,0),f=!0),!zot(r)&&r.addChild&&a&&(z=r.getBounds().clone(),b(),g=r.getBounds(),z.width==g.width&&z.height==g.height&&z.x==g.x&&z.y==g.y||(h.removeFrom(),r.setBounds(z.x,z.y,z.width,z.height),f=!0,b())),!s&&!c&&!("center"!=o&&"middle"!=o||"center"!=n&&"middle"!=n))return h.center(r),h.mov(e,t),p&&h.setBounds(null),f&&r.setBounds(null),h;if("center"==o||"middle"==o?(s?h.x=r.width/2:(y=h.y,h.center(),h.y=y),h.mov(e),o=e=null):!0===o&&(u=!0),"center"==n||"middle"==n?(c?h.y=r.height/2:(m=h.x,h.center(),h.x=m),h.mov(0,t),n=t=null):!0===n&&(d=!0),h.parent&&h.parent.getBounds){if(r=h.parent,zot(e)&&1==u&&(e=0),zot(t)&&1==d&&(t=0),zot(e)||(h.x=e),zot(t)||(h.y=t),zot(e)&&zot(t)&&!u&&!d)return p&&h.setBounds(null),f&&r.setBounds(null),h;var m,z=0,y=0;h.getBounds()&&(m=function(){var e=h.getBounds(),t=e.x,o=e.y,n=e.width,r=e.height,i=h._props.matrix;i=h.getMatrix(i),(t||o)&&i.appendTransform(0,0,1,1,0,0,0,-t,-o);var a=n*i.a,l=n*i.b,s=r*i.c,c=r*i.d,u=i.tx,d=i.ty,e=u,n=u,r=d,i=d;(t=a+u)<e?e=t:n<t&&(n=t);(t=a+s+u)<e?e=t:n<t&&(n=t);(t=s+u)<e?e=t:n<t&&(n=t);(o=l+d)<r?r=o:i<o&&(i=o);(o=l+c+d)<r?r=o:i<o&&(i=o);(o=c+d)<r?r=o:i<o&&(i=o);return{x:e,y:r,width:n-e,height:i-r}}(),zot(e)||(z=(u?new To.Point(m.x+m.width,m.y+m.height):new To.Point(m.x,m.y)).x-e),zot(t)||(y=(d?new To.Point(m.x+m.width,m.y+m.height):new To.Point(m.x,m.y)).y-t),m=r.getBounds(),zot(e)||(u?h.x=s?m.width+m.x-e:m.width+m.x-e-z:(h.x=s?e:e-z,h.x+=m.x)),zot(t)||(d?h.y=c?m.height+m.y-t:m.height+m.y-t-y:(h.y=c?t:t-y,h.y+=m.y)))}return p&&h.setBounds(null),f&&r.setBounds(null),h}function b(){zot(i)||"number"==typeof i&&isNaN(i)?r.contains(h)||r.addChild(h):r.addChildAt(h,i)}},To.loc=function(e,t,o,n,r,i,a,l){var s;return(s=zob(To.loc,arguments,"obj, target, y, container, index, add, localToLocal, x"))?s:"AC"==e.type&&zdf?(zdf.ac("loc",arguments),e.addTo(n,r)):(z_d("41.55"),zot(e)?void 0:("number"==typeof t&&(l=t,t=null),zot(t)||(zot(t.x)||(l=t.x),zot(t.y)||(o=t.y)),zot(l)&&zot(t)&&(l=e.x),zot(o)&&zot(t)&&(o=e.y),zot(i)&&(i=!0),zot(n)&&(e.parent?n=e.parent:zdf&&(n=zdf.stage)),i&&n&&(e.parent&&n==e.parent?zot(r)||n.addChildAt(e,r):zot(r)||isNaN(r)?n.addChild(e):n.addChildAt(e,r)),zot(a)&&(a=!0),t&&t.parent&&e.parent&&a&&(l=(s=t.parent.localToLocal(l,o,e.parent)).x,o=s.y),e.x=l,e.y=o,e))},To.mov=function(e,t,o){var n;return(n=zob(To.mov,arguments,"obj, x, y"))?n:"AC"==e.type&&zdf?(zdf.ac("mov",arguments),e):(z_d("41.6"),zot(e)?void 0:(zot(t)||(e.x+=t),zot(o)||(e.y+=o),e))},To.sca=function(e,t,o){return"AC"==e.type&&zdf?(zdf.ac("sca",arguments),e):(z_d("41.97"),zot(e)||zot(e.scaleX)||(zot(t)&&(t=e.scaleX),zot(o)&&(o=t),e.scaleX=t,e.scaleY=o),e)},To.alp=function(e,t){if(z_d("41.7"),!zot(e))return zot(t)||(e.alpha=e.hovOriginal=t,e.tag&&e.tag.style&&("Loader"!=e.type&&(e.tag.style.opacity=t),e.tag.style.display=e.tag.zimDisplay=0==t?"none":"inline-block")),e},To.vis=function(e,t){if(z_d("41.71"),!zot(e))return e.visible=t,e.tag&&e.tag.style&&(e.tag.style.display=e.tag.zimDisplay=t?"inline-block":"none"),e},To.ble=function(e,t){if(z_d("41.72"),!zot(e))return zot(t)&&(t="difference"),e.compositeOperation=t,"Blob"!=e.type&&"Squiggle"!=e.type||e.update(),e},To.hov=function(e,t,o){if(z_d("41.75"),!zot(e))return zot(t)&&(t=1),zot(o)&&(o="number"==typeof t?"alpha":"color"),e.hovMouseover&&(e.off("mouseover",e.hovMouseover),e.off("mouseout",e.hovMouseout)),-1==t?(e.cur("default"),zot(e.hovOld)||(e[e.hovType]=e.hovOld),e.hovOld=null,e.stage&&e.stage.update()):(e.cur(),e.hovOld=e[o],e.hovNew=t,e.hovType=o,e.hovMouseover=e.on("mouseover",function(){e[o]=e.hovNew,e.stage&&e.stage.update()}),e.hovMouseout=e.on("mouseout",function(){e[o]=e.hovOld,e.stage&&e.stage.update()})),e},To.rot=function(e,t,o,n){var r,i;if(z_d("41.8"),!zot(e))return"AC"==e.type&&zdf?zdf.ac("rot",arguments):zot(t)||(!e.parent||zot(o)&&zot(n)?e.rotation=t:(zot(o)&&(o=e.x),zot(n)&&(n=e.y),e.x,e.y,i=e.parent.localToLocal(o,n,e),r=new To.Point(e.x,e.y),e.reg(i.x,i.y),e.rotation=t,e.x=o,e.y=n,i=e.parent.localToLocal(r.x,r.y,e),e.reg(i.x,i.y),e.x=r.x,e.y=r.y)),e},To.siz=function(e,t,o,n){if(z_d("41.85"),!zot(e))return"AC"==e.type&&zdf?zdf.ac("siz",arguments):(zot(n)&&(n=!1),zot(t)||zot(o)?zot(t)?zot(o)||(n?e.heightOnly=o:e.height=o):n?e.widthOnly=t:e.width=t:(e.widthOnly=t,e.heightOnly=o)),e},To.ske=function(e,t,o){if(z_d("41.9"),!zot(e))return"AC"==e.type&&zdf?zdf.ac("ske",arguments):(zot(t)||(e.skewX=t),zot(o)||(e.skewY=o)),e},To.reg=function(e,t,o,n){if(z_d("41.95"),!zot(e)){if("AC"==e.type&&zdf)return zdf.ac("reg",arguments),e;var r=e.regX,i=e.regY;return zot(t)||(e.regX=t),zot(o)||(e.regY=o),n&&e.parent&&(i=e.localToLocal(r,i,e.parent),e.x-=i.x-e.x,e.y-=i.y-e.y),e}},To.top=function(e){return z_d("41.62"),zot(e)||!e.parent||e.parent.setChildIndex(e,e.parent.numChildren-1),e},To.bot=function(e){return z_d("41.63"),zot(e)||!e.parent||e.parent.setChildIndex(e,0),e},To.ord=function(e,t){if(z_d("41.64"),!zot(e)&&e.parent)return zot(t)&&(t=0),e.parent.setChildIndex(e,e.parent.getChildIndex(e)+t),e},To.cur=function(e,t){return z_d("41.1"),zot(e)?zog("zim methods - cur(): please provide object"):(zot(t)&&(t="pointer"),e.cursor=t),e},To.sha=function(e,t,o,n,r){return z_d("41.2"),zot(e)?(zog("zim methods - sha(): please provide object"),e):(zot(t)&&(t="rgba(0,0,0,.3)"),t.blur?e.shadow=t:(zot(o)&&(o=e.width?.08*e.width:5),zot(n)&&(n=e.height?.08*e.height:5),zot(r)&&(r=e.width?.16*e.width:10),e.shadow=new createjs.Shadow(t,o,n,r)),e)},To.dep=function(e,t){if(z_d("41.65"),!zot(e))return zot(t)&&(t=0),e.depth=t,e},To.nam=function(e,t){if(z_d("41.67"),!zot(e)&&!zot(t))return e.name=t,To.zimObjectIDs[t]=e},To.movement=function(e,t,o){z_d("47.75");var n=e.stage||zdf.stage;function r(){n=e.stage,e.zimMovementStage=n,e.zimMovementEvent&&n.off("stagemousemove",e.zimMovementEvent),e.zimMovementEvent=n.on("stagemousemove",function(e){t(e)}),e.on("mouseout",function(){e.zimMovementEvent&&n.off("stagemousemove",e.zimMovementEvent)},null,!0)}return To.mobile()?(e.zimMovementEvent&&n.off("pressmove",e.zimMovementEvent),e.zimMovementEvent=e.on("pressmove",function(e){t(e)})):(e.zimMouseoverEvent&&e.off("mouseover",e.zimMouseoverEvent),e.zimMouseoverEvent=e.on("mouseover",r),o&&r()),e},To.noMovement=function(e){if(z_d("47.9"),!zot(e))return e.zimMouseoverEvent&&e.off("mouseover",e.zimMouseoverEvent),e.zimMovementEvent&&e.zimMovementStage&&e.zimMovementStage.off("stagemousemove",e.zimMovementEvent),e},To.tap=function(a,l,s,c,e,t,u,d,h,g){var o;if(o=zob(To.tap,arguments,"obj, call, distance, time, once, dbl, dblTime, call2, call3, call4"))return o;if(z_d("47.8"),!zot(a)&&!zot(l)&&"function"==typeof l){zot(s)&&(s=t?10:5);var p=Ao(c);zot(c)&&(c="s"==p?8:8e3),zot(e)&&(e=!1),zot(t)&&(t=!1),zot(u)&&(u=g?"s"==p?.5:500:"s"==p?1:1e3);var f,m=!(a.cursor="pointer"),z=!1;return t?a.zimDblClickDownEvent=a.on("mousedown",function(e){if(f=!1,m)m=!1;else{if(m=!0,e.target.stage,"List"==e.currentTarget.type){if("WindowBacking"==e.target.type)return;if(e.currentTarget.globalToLocal(e.stageX/To.scaX,e.stageY/To.scaY).y<=0)return}var t,o,n=e.stageX/To.scaX,r=e.stageY/To.scaY,i=Date.now();z=!0,a.zimDoubleTimeout&&clearTimeout(a.zimDoubleTimeout),a.zimDoubleTimeout=setTimeout(function(){m=z=!1,a.zimDblClickUpEvent&&a.off("pressup",a.zimDblClickUpEvent),f&&g&&(Math.abs(n+r-t/To.scaX-o/To.scaY)<s?a.excludeTap||g(e):d&&d(e))},"s"==p?1e3*u:u),a.zimDblClickUpEvent=a.on("pressup",function(e){if(t=e.stageX,o=e.stageY,f=!0,m)h&&h(e);else if(z){if(Math.abs(n+r-e.stageX/To.scaX-e.stageY/To.scaY)<s&&Date.now()-i<("s"==p?1e3*c:c)){if(a.excludeTap)return;clearTimeout(a.zimDoubleTimeout),l(e)}else d&&d(e);e.remove()}})}},null,e):a.zimClickDownEvent=a.on("mousedown",function(e){if(e.target.stage,"List"==e.currentTarget.type){if("WindowBacking"==e.target.type)return;if(e.currentTarget.globalToLocal(e.stageX/To.scaX,e.stageY/To.scaY).y<=0)return}var t=e.stageX/To.scaX,o=e.stageY/To.scaY,n=Date.now();a.zimClickUpEvent=a.on("pressup",function(e){if(Math.abs(t+o-e.stageX/To.scaX-e.stageY/To.scaY)<s&&Date.now()-n<("s"==p?1e3*c:c)){if(a.excludeTap)return;l(e)}else d&&d(e);e.remove()})},null,e),a}},To.noTap=function(e){if(z_d("47.9"),!zot(e))return e.cursor&&(e.cursor="default"),e.zimClickDownEvent&&e.off("mousedown",e.zimClickDownEvent),e.zimClickUpEvent&&e.off("pressup",e.zimClickUpEvent),e.zimDoubleTimeout&&clearInterval(e.zimDoubleTimeout),e},To.hold=function(r,i,a,l,e){if(z_d("47.87"),!zot(r)&&!zot(i)&&"function"==typeof i){zot(a)&&(a=5);var s,c=Ao(l);return zot(l)&&(l="s"==c?1.5:1500),zot(e)&&(e=!1),r.cursor="pointer",r.zimClickHoldDownEvent=r.on("mousedown",function(e){if(zot((s=e.target.stage).frame)&&(s.frame=zdf),!zot(s.frame)&&s.frame.mousemoveEvent||(zot(s.frame)&&(s.frame={}),s.frame.mouseX=e.stageX/To.scaX,s.frame.mouseY=e.stageY/To.scaY,s.frame.mouseholdEvent&&s.off("stagemousemove",s.frame.mouseholdEvent),s.frame.mouseholdEvent=s.on("stagemousemove",function(e){s.frame.mouseX=e.stageX/To.scaX,s.frame.mouseY=e.stageY/To.scaY})),"List"==e.currentTarget.type){if("WindowBacking"==e.target.type)return;if(e.currentTarget.globalToLocal(e.stageX/To.scaX,e.stageY/To.scaY).y<=0)return}var t=e.stageX/To.scaX,o=e.stageY/To.scaY;Date.now();clearInterval(r.zimHoldInterval);var n=0;r.zimHoldInterval=setInterval(function(){if(n<10)Math.abs(t+o-s.frame.mouseX-s.frame.mouseY)>a&&clearInterval(r.zimHoldInterval);else{if(Math.abs(t+o-s.frame.mouseX-s.frame.mouseY)<a){if(r.excludeHold)return;i(e)}clearInterval(r.zimHoldInterval)}n++},l/10*("s"==c?1e3:1)),r.zimClickHoldUpEvent=r.on("pressup",function(e){clearInterval(r.zimHoldInterval),s&&s.frame.mouseholdEvent&&s.off("stagemousemove",s.frame.mouseholdEvent)},null,!0)},null,e),r}},To.noHold=function(e){if(z_d("47.88"),!zot(e))return e.cursor&&(e.cursor="default"),e.off("mousedown",e.zimClickHoldDownEvent),e.off("pressup",e.zimClickHoldUpEvent),e.stage&&e.stage.frame.mouseEvent&&e.stage.off("stagemousemove",e.stage.frame.mouseEvent),clearInterval(e.zimHoldTimeout),e},To.change=function(e,t,o){if(z_d("47.85"),!zot(e)&&!zot(t)&&"function"==typeof t)return zot(o)&&(o=!1),e.zimChangeEvent=e.on("change",function(e){t(e)},null,o),e},To.noChange=function(e){if(z_d("47.95"),!zot(e))return e.off("mousedown",e.zimChangeEvent),e},To.drag=function(l,r,a,o,e,t,i,n,s,c,u,d,h,g,p,f,m,z){if(y=zob(To.drag,arguments,"obj, boundary, overCursor, dragCursor, all, swipe, localBounds, onTop, surround, slide, slideDamp, slideSnap, reg, removeTweens, startBounds, rect, currentTarget, offStage"))return y;if(z_d("31"),!zot(l)&&l.on){var y=To.DRAGALL;if(null!=window.DRAGALL&&(y=window.DRAGALL),zot(e)&&zot(m)&&(e=y),zot(e)&&zot(m)?m=!1:zot(e)?zot(m)&&(m=!1):m=e,"Tag"!=l.type&&"TextArea"!=l.type&&"Loader"!=l.type||(m=!0),r&&r.getBounds&&l.numChildren&&1<l.numChildren&&1==l.mouseChildren&&!e){var b=Array.prototype.slice.call(arguments);return b[4]=!0,l.loop(function(e){b[0]=e,To.drag.apply(null,b)}),l}l.zimDown&&l.noDrag(),l.cursor=zot(a)?"pointer":a,zot(t)&&(t=!1),zot(i)&&(i=!1),zot(n)&&(n=!0),zot(s)&&(s=!1),zot(c)&&(c=!1),zot(u)&&(u=.3),zot(d)&&(d=!0);var v,w,C,x,k,T,A,P,B,S,E,I,M,O,j;!0!==d&&["horizontal","vertical","auto"].indexOf(d)<0&&(d=!1),zot(h)&&(h=!1),zot(g)&&(g=!0),zot(p)&&(p=!0),zot(r)&&!zot(f)&&(r=f),l.dragPaused=!1,c||(l.zimDragTicker=function(){}),l._draggable=!0,To.setSwipe(l,t),l.zimBoundary=r,l.zimLocalBounds=i;var L,_,Y,D,X,R,W=l.downCheck=!1;return l.zimAdded=l.on("added",F,null,!0),l.zimRemoved=l.on("removed",function(){l.zimDragTicker&&To.Ticker.remove(l.zimDragTicker)},null,!0),l.parent&&F(),l.pointers={},l.zimDown=l.on("mousedown",function(e){var t;l.stage&&!l.dragPaused&&(R=l.stage,l.zmu||(l.zmu=R.frame.on("mouseupplus",function(e){l.downCheck&&(c||(l.downCheck=!1),V(e,!0))})),l.dragMouseX=Math.round(e.stageX/To.scaX)+R.x,l.dragMouseY=Math.round(e.stageY/To.scaY)+R.y,t="id"+Math.abs(e.pointerID+1),l.pointers[t]=!0,X=m?e.currentTarget:e.target,!l.zimBoundary||X.getBounds()?(l.downCheck=!0,l.stage.mouseMoveOutside=!0,To.Ticker.has(l.zimDragTicker)||To.Ticker.add(l.zimDragTicker,l.stage),g&&createjs.Tween.removeTweens(X),X.parent&&(n&&(t=X.parent.numChildren-1,"Keyboard"==X.parent.getChildAt(t).type&&t--,X.parent.setChildIndex(X,t),X.ZIMoutlineShape&&X.outline()),e=X.parent==l.stage?new To.Point(e.stageX/To.scaX,e.stageY/To.scaY):X.parent.globalToLocal(e.stageX/To.scaX,e.stageY/To.scaY),h&&(X.x=e.x,X.y=e.y),L=e.x-X.x,_=e.y-X.y,l.zimBoundary&&(i?(Y=To.boundsToGlobal(X.parent,l.zimBoundary),s&&(D=l.zimBoundary)):(Y=l.zimBoundary,s&&(D=To.boundsToGlobal(X.parent,l.zimBoundary,!0)))),l.cursor=zot(o)?"pointer":o,c&&(l.slideStartX=l.x,l.slideStartY=l.y,j=l.zimDragMoving,x=0,k=[e.x],T=[e.y],O=M=-1e4,l.zimDragMoving=!0),"Pen"==l.type&&(l.zimDragCheck=!0,W=!1))):zog("zim.drag() - drag object needs bounds set"))},!0),l.zimMove=l.on("pressmove",function(e){var t;l.downCheck&&!l.dragPaused&&(t=(z?e.rawX:e.stageX)/To.scaX+R.x,e=(z?e.rawY:e.stageY)/To.scaY+R.y,l.dragMouseX=Math.round(t),l.dragMouseY=Math.round(e),H(X,t,e),X.ZIMoutlineShape&&X.outline(),"Pen"==l.type&&!W&&l.drawing?W=!0:"Tag"!=l.type&&"TextArea"!=l.type&&"Loader"!=l.type||l.resize())},!0),l.zimPosition=H,l.zimUp=l.on("pressup",function(e){V(e)},!0),l}function F(){var e,t,o,n;l.off("added",l.zimAdded),(r=l.zimBoundary)&&r.getBounds&&"Blob"!=r.type&&(l.zimLocalBounds=!1,r="Stage"!=r.type&&"StageGL"!=r.type?r.boundsToGlobal():new To.Boundary(0,0,r.width,r.height),e=l.boundsToGlobal(),t=l.localToGlobal(l.regX,l.regY),o=new To.Point(t.x-e.x,t.y-e.y),n=l.borderWidth||0,r.x+=o.x+n/2,r.y+=o.y+n/2,r.width-=e.width+n,r.height-=e.height+n,l.zimBoundary=r),_=L=0,l.zimBoundary&&"Blob"!=l.zimBoundary.type&&(i?(Y=To.boundsToGlobal(l.parent,l.zimBoundary),s&&(D=l.zimBoundary)):(Y=l.zimBoundary,s&&(D=To.boundsToGlobal(l.parent,l.zimBoundary,!0)))),Y&&p&&(t=l.parent.localToGlobal(l.x,l.y),H(l,t.x,t.y)),c&&setTimeout(function(){function n(e,t,o,n,r){Math.abs(e.x-M)<.1&&Math.abs(e.y-O)<.1?(l.zimDragMoving=!1,e.x=n,e.y=r,e.slideStartX=null,e.slideStartY=null,j&&(e.dispatchEvent("slidestop"),To.Ticker.remove(l.zimDragTicker)),"Pen"==l.type&&(l.zimDragCheck=!1,W&&l.drawing&&l.stopCheck())):(M=t,O=o)}v=new To.Damp(l.x,u),w=new To.Damp(l.y,u),l.zimDragImmediate=function(e,t){S=t,A=E=P=I=0,zot(B=e)||v.immediate(e),zot(t)||w.immediate(t)},C=3,x=0,k=[],T=[],A=l.x,P=l.y,B=l.x,S=l.y,E=l.x,I=l.y,O=M=-1e4,l.zimDragMoving=!0,l.stage,l.zimDragTicker=function(){var e,t,o;zot(l.slideStartX)||(X=X||l,l.downCheck?(t=X.parent?X.parent.globalToLocal(l.dragMouseX,l.dragMouseY):new To.Point(0,0),x++,k.push(t.x),T.push(t.y),I=C<=x?(E=k.shift(),T.shift()):(E=k[0],T[0])):l.zimDragMoving&&(e=B+A-E,t=S+P-I,Y&&(e=(o=N(X,e,t)).x,t=o.y),d?(X.x=v.convert(e),X.y=w.convert(t),n(X,X.x,X.y,e,t)):(o=N(X,v.convert(e),w.convert(t)),X.x=o.x,X.y=o.y,n(X,X.x,X.y,X.x,X.y))))}},50),zot(l.zimMaskDynamic)||l.zimMaskApply()}function H(e,t,o){var n,r;zot(e)&&(e=X||l),e.parent&&((zot(t)||zot(o))&&(n=e.parent.localToGlobal(e.x,e.y),L=_=0,l.zimBoundary&&(i?(Y=To.boundsToGlobal(e.parent,l.zimBoundary),s&&(D=e.zimBoundary)):(Y=l.zimBoundary,s&&(D=To.boundsToGlobal(e.parent,l.zimBoundary,!0)))),t=n.x,o=n.y,c&&(B=e.x,S=e.y,X=e,v&&v.immediate(B),w&&w.immediate(S))),o=R&&R.type?e.parent.globalToLocal(t,o):e.parent.globalToLocal(t*To.scaX,o*To.scaY),c&&d?"vertical"==d?(r=N(e,o.x-L,o.y-_),e.x=r.x,e.y=o.y-_):"horizontal"==d?(r=N(e,o.x-L,o.y-_),e.x=o.x-L,e.y=r.y):(e.x=o.x-L,e.y=o.y-_):(r=N(e,o.x-L,o.y-_),e.x=r.x,e.y=r.y),!c||j||e.slideStartX==e.x&&e.slideStartY==e.y||(j=!0))}function V(e,t){var o,n="id"+Math.abs(e.pointerID+1);if(delete l.pointers[n],l.downCheck&&!l.dragPaused){if(l.cursor=zot(a)?"pointer":a,c)X.dispatchEvent("slidestart"),o=X.parent?(n=z?e.rawX:e.stageX,o=z?e.rawY:e.stageY,X.parent.globalToLocal(n/To.scaX,o/To.scaY)):new To.Point(0,0),l.downCheck=!1,A=o.x,P=o.y,B=X.x,S=X.y,t&&(E=A=0,I=P=0),v.immediate(X.x),w.immediate(X.y);else{var r,i=0;for(r in l.pointers)i++;0==i&&To.Ticker.remove(l.zimDragTicker),"Pen"==l.type&&(l.zimDragCheck=!1,W&&l.drawing&&l.stopCheck())}l.stage&&l.stage.update()}}function N(e,t,o){if(!e.parent)return{x:t,y:o};if(Y)if(s){var n=e.getBounds().width,r=e.getBounds().height,i=e.getBounds().x,a=e.getBounds().y;n<D.width?t=D.x+(D.width-n)/2+(e.regX-i):(t-(e.regX-i)>D.x&&(t=D.x+(e.regX-i)),t-(e.regX-i)+n<D.x+D.width&&(t=D.x+D.width+(e.regX-i)-n)),e.height<D.height?o=D.y+(D.height-r)/2+(e.regY-a):(o-(e.regY-a)>D.y&&(o=D.y+(e.regY-a)),o-(e.regY-a)+r<D.y+D.height&&(o=D.y+D.height+(e.regY-a)-r))}else{if("Blob"==Y.type)return Y.shape.hitTestPoint(t,o)?{x:t,y:o}:{x:l.x,y:l.y};r=e.parent.localToGlobal(t,o);t=Math.max(Y.x,Math.min(Y.x+Y.width,r.x)),o=Math.max(Y.y,Math.min(Y.y+Y.height,r.y)),t=(r=e.parent.globalToLocal(t,o)).x,o=r.y}return{x:t,y:o}}},To.noDrag=function(e,t){if(z_d("32"),!zot(e)&&e.on){if(zot(t)&&(t=!0),t&&e.numChildren&&1<e.numChildren)for(var o=0;o<e.numChildren;o++)n(e.getChildAt(o));return n(e),e}function n(e){e.cursor=null,e._draggable=!1,To.setSwipe(e,!0),e.off("added",e.zimAdded),e.off("removed",e.zimRemoved),e.off("mousedown",e.zimDown),e.off("pressmove",e.zimMove),e.off("pressup",e.zimUp),e.zmu&&(e.stage?e.stage.frame:zdf).off("mouseupplus",e.zmu),To.Ticker&&(e.zimDragSlide&&To.Ticker.remove(e.zimDragSlide),e.zimDragTicker&&To.Ticker.remove(e.zimDragTicker)),e.zimDragMoving=e.zimAdded=e.zimRemoved=e.zimDown=e.zimMove=e.zimUp=e.zimBoundary=e.zimDragSlide=null,e.slideStartX=e.slideStartY=e.zimDragImmediate=null,e.dragMouseX=e.zimPosition=e.dragMouseY=e.zimDown=e.zimUp=null,e.zimDragTicker=e.zimDragSlide=null}},To.dragBoundary=function(e,t,o){if(z_d("33"),!zot(e)&&e.on&&!zot(t))return e.zimBoundary=t,e.zimDragMoving=!0,e.zimPosition&&e.zimPosition(),e},To.dragRect=To.dragBoundary,To.mouse=function(e){return z_d("33.1"),e.zimLastMouse&&(e.mouseChildren=e.zimLastMouse),e.mouseEnabled=!0,e},To.noMouse=function(e){return z_d("33.15"),e.zimLastMouse=e.mouseChildren,e.mouseChildren=!1,e.mouseEnabled=!1,e},To.wire=function(e,t,o,n,r,i,a,l){if(s=zob(To.wire,arguments,"source, target, prop, twoWay, setSource, filter, call, input"))return s;if(z_d("33.2"),zot(To.Ticker)&&zon)return zog("wire() - requires ZIM Frame"),e;if(zot(t)&&zon)return zog("wire() - requires a target"),e;var s=To.DEFAULTWIRE;return null!=window.DEFAULTWIRE&&(s=window.DEFAULTWIRE),zot(l)&&(l=s&&"currentValue"!=s&&"selectedIndex"!=s||s&&e.hasOwnProperty(s)?s:e.hasOwnProperty("currentValue")?"currentValue":e.hasOwnProperty("selectedIndex")?"selectedIndex":o),zot(o)&&(o=l),e.addChild&&(e.zimWire=!0),t.addChild&&(t.zimWired=!0),To.Ticker.addWire(e,[t,o,n,r,i,a,l]),e},To.noWire=function(e,t,o,n){var r;return(r=zob(To.noWire,arguments,"source, target, prop, input"))?r:(z_d("33.25"),zot(To.Ticker)&&zon?zog("noWire() - requires ZIM Frame"):To.Ticker.removeWire(e,t,o,n),e)},To.wired=function(e,t,o,n,r,i,a,l){var s;return(s=zob(To.wired,arguments,"target, source, prop, twoWay, setSource, filter, call, input"))?s:(z_d("33.3"),zot(To.Ticker)&&zon?zog("wired() - requires ZIM Frame"):To.wire(t,e,o,n,r,i,a,l),e)},To.noWired=function(e,t,o,n){var r;return(r=zob(To.noWire,arguments,"target, source, prop, input"))?r:(z_d("33.35"),zot(To.Ticker)&&zon?zog("noWired() - requires ZIM Frame"):To.Ticker.removeWire(t,e,o,n),e)},To.bind=function(e,t,o,n,r,i){var a;return(a=zob(To.bind,arguments,"obj, id, props, extra, filter, bindObj"))?a:(z_d("33.17"),c?zot(t)?zon&&zogy("bind() - needs a unique id"):(i||c).add(t,e,o,n,r):zon&&zogy("bind() - needs a Bind() object created first"),e)},To.noBind=function(e,t,o,n,r){var i;return(i=zob(To.noBind,arguments,"obj, props, removeConnectionData, call, bindObj"))?i:(z_d("33.18"),c&&(r||c).remove(e,t,o,n),e)},To.transform=function(u,t,e,o,n,r,i,a,l,d,s,c,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B){var S;if(S=zob(To.transform,arguments,"obj, move, stretchX, stretchY, scale, rotate, allowToggle, visible, onTop, showStretch, showRotate, showScale, showReg, showBorder, borderColor, borderWidth, dashed, customCursors, handleSize, regSize, snapDistance, snapRotation, cache, events, ghostColor, ghostWidth, ghostDashed, ghostHidden, frame"))return S;if(z_d("33.5"),zot(u)||!u.getBounds)return zog("zim methods - transform(): please provide object with bounds set"),u;if(!u.getBounds())return zog("zim methods - transform(): please setBounds() on object"),u;if(!u.parent)return zog("zim methods - transform(): object should be on stage first"),u;zot(t)&&(t=!0),zot(e)&&(e=!0),zot(o)&&(o=!0),0==u.width&&(e=!1),0==u.height&&(o=!1),zot(n)&&(n=!0),zot(r)&&(r=!0);var E=To.mobile();zot(i)&&(i=!0),zot(a)&&(a=!0),zot(l)&&(l=!0),zot(d)&&(d=!!E),zot(s)&&(s=!!E),zot(c)&&(c=!0),zot(h)&&(h=!0),zot(g)&&(g=!0),zot(p)&&(p="brown"),zot(f)&&(f=1),zot(k)&&(k=null),zot(T)&&(T=null),k<0||T<0?k=T=null:null!=k&&null==T&&(T=1),zot(A)&&(A=!0),zot(P)&&(P=!1),zot(B)&&(B=zdf),zot(z)&&(z=!E),zot(y)&&(y=E?20:10),zot(b)&&(b=16),zot(v)&&(v=10),zot(w)&&(w=5),zot(C)&&(C=!0),zot(x)&&(x=!1),"Tag"!=u.type&&"TextArea"!=u.type&&"Loader"!=u.type||(x=!0),u.mouseChildren=!1;var I=u.getConcatenatedMatrix().decompose(),M=u.stage||B.stage;zot(B.eventRemove)&&(M.enableMouseOver(),B.ctrlKey=!1,B.shiftKey=!1,window.addEventListener("keydown",function(e){B.altKey=e.altKey,B.ctrlKey=e.ctrlKey}),window.addEventListener("keyup",function(e){B.altKey=e.altKey,B.ctrlKey=e.ctrlKey}));var O=u.getBounds(),j=new To.Shape({style:!1}),L=new To.Shape({style:!1}),_=new To.Shape({style:!1});L.mouseEnabled=!1,_.controlType="reg";var Y,D,X,R,W,F,H,V,N,G=u.parent,q=j.graphics,U=L.graphics,Q=_.graphics,Z=new To.Container({style:!1});Z.type="TransformControls";var K,J,$,ee,te,oe,ne,re,ie=new To.Container({style:!1}),ae=new To.Container({style:!1}),le=new To.Container({style:!1}),se=new To.Container({style:!1});function ce(e){e==oe&&new To.Triangle(16,12,12,"white").addTo(e).mov(0,-13.5),new To.Triangle(16,12,12,"white").addTo(e).mov(13.5).rot(90),e==oe&&new To.Triangle(16,12,12,"white").addTo(e).mov(0,13.5).rot(180),new To.Triangle(16,12,12,"white").addTo(e).mov(-13.5).rot(-90),e==oe&&new To.Triangle(10,7,7,"black").addTo(e).mov(0,-13),new To.Triangle(10,7,7,"black").addTo(e).mov(13).rot(90),e==oe&&new To.Triangle(10,7,7,"black").addTo(e).mov(0,13).rot(180),new To.Triangle(10,7,7,"black").addTo(e).mov(-13).rot(-90),C&&e.cache(-20,-20,40,40)}function ue(){var e=u;for($=J=1,te=ee=K=0;e.parent;)K+=e.rotation,J*=e.scaleX,$*=e.scaleY,ee+=e.skewX,te+=e.skewY,e=e.parent}zot(u.zimMaskDynamic)||u.zimMaskApply(),z&&(oe=new To.Container({style:!1}),ne=new To.Container({style:!1}),ce(oe),ce(ne),re={"nw-resize":45,"ne-resize":-45,"n-resize":90,"e-resize":0}),ue();for(var de=K,he=["nw-resize","ne-resize","nw-resize","ne-resize"],ge=[2,3,0,1],pe=0;pe<4;pe++)c?((be=new To.Rectangle(y,y,"#e472c4","#333",2,null,null,null,!1)).centerReg(ie),C&&be.cache(-1,-1,y+2,y+2)):((be=new To.Rectangle(y,y,"rgba(0,0,0,0)","rgba(0,0,0,0)",2,null,null,null,!1)).centerReg(ie),be.expand(0)),be.rotation=K,H=z?"none":he[pe],be.drag({overCursor:H,dragCursor:H,onTop:!1}),be.controlType="corner",be.cu=he[pe];for(pe=0;pe<ge.length;pe++)ie.getChildAt(pe).op=ie.getChildAt(ge[pe]);for(var fe=["n-resize","e-resize","n-resize","e-resize"],ge=[1,1,0,0],pe=0;pe<4;pe++){var me=pe%2==0?u.width/2:y,ze=pe%2==0?y:u.height/2;d?((be=new To.Rectangle(y,y,"#AAA","#333",2,null,null,null,!1)).centerReg(pe%2==0?le:ae),C&&be.cache(-1,-1,y+2,y+2)):((be=new To.Rectangle(me,ze,"rgba(0,0,0,0)",null,null,null,null,null,!1)).centerReg(pe%2==0?le:ae),be.expand(0)),be.rotation=K,H=z?"none":fe[pe],be.drag({overCursor:H,dragCursor:H,onTop:!1}),be.controlType="side",be.cu=fe[pe]}for(pe=0;pe<ge.length;pe++){var ye=pe%2==0?le:ae;ye.getChildAt(Math.floor(pe/2)).op=ye.getChildAt(ge[pe])}for(var be,ve=["ne-resize","nw-resize","ne-resize","nw-resize"],pe=0;pe<4;pe++)s?((be=new To.Circle(y,"#e472c4",null,null,null,null,null,null,!1)).addTo(se),C&&be.cache(-y,-y,2*y,2*y)):((be=new To.Circle(y,"rgba(0,0,0,0)",null,null,null,null,null,null,!1)).addTo(se),be.expand(0)),H=z?"none":ve[pe],be.drag({overCursor:H,dragCursor:H,onTop:!1}),be.controlType="rotate",be.cu=ve[pe];var we=1.8;function Ce(){var e=y*we*To.sign(J),t=y*we*To.sign($);se.getChildAt(0).reg(e,t),se.getChildAt(1).reg(-e,t),se.getChildAt(2).reg(-e,-t),se.getChildAt(3).reg(e,-t),M.update()}function xe(){q.c(),U.c(),Q.c(),Y=u.localToGlobal(O.x,O.y),D=u.localToGlobal(O.x+O.width,O.y),X=u.localToGlobal(O.x+O.width,O.y+O.height),R=u.localToGlobal(O.x,O.y+O.height);var e=u.localToGlobal(O.x+O.width/2,O.y),t=u.localToGlobal(O.x+O.width,O.y+O.height/2),o=u.localToGlobal(O.x+O.width/2,O.y+O.height),n=u.localToGlobal(O.x,O.y+O.height/2);W=u.localToGlobal(u.regX,u.regY),F=u.localToGlobal(O.x+O.width/2,O.y+O.height/2),N=[Y,D,X,R],V=[e,t,o,n],g&&(q.s(p),m&&q.sd([10,5],0),q.ss(f).mt(Y.x,Y.y).lt(D.x,D.y).lt(X.x,X.y).lt(R.x,R.y).lt(Y.x,Y.y).cp()),zot(k)||(U.s(k),A&&U.sd([10,5],0),U.ss(T).mt(Y.x,Y.y).lt(D.x,D.y).lt(X.x,X.y).lt(R.x,R.y).lt(Y.x,Y.y).cp()),j.setBounds(Y.x,Y.y,D.x-Y.x,R.y-Y.y),h&&(Q.s("#eee").ss(f).f("rgba(0,0,0,.1)").dc(0,0,b),Q.s("#222").ss(f).dc(0,0,.3*b)),ue();for(var r=Math.min(50,Math.abs(ee))*To.sign(ee),i=Math.min(50,Math.abs(te))*To.sign(te),a=K*To.sign(J*$)*To.sign(u.scaleX*u.scaleY),l=0;l<N.length;l++){var s=N[l];ie.getChildAt(l).loc(s.x,s.y).ske(r,i).rot(a),se.getChildAt(l).loc(s.x,s.y).rot(a);var c=V[l],s=l%2==0?le:ae;s.getChildAt(Math.floor(l/2)).loc(c.x,c.y).ske(r,i).rot(a),d||s.getChildAt(Math.floor(l/2)).sca(l%2==0?J/2:1,l%2==0?1:$/2)}_.x=W.x,_.y=W.y}se.alpha=.5,Ce(),xe();var ke=new To.Shape(1e3,1e3,null,null,null,!1);function Te(){ke.x=0,ke.y=0,ke.graphics.c().f("rgba(0,0,0,.01)").mt(Y.x,Y.y).lt(D.x,D.y).lt(X.x,X.y).lt(R.x,R.y).lt(Y.x,Y.y).cp(),ke.reg(W.x,W.y),ke.x=W.x,ke.y=W.y}Te(),Z.on("dblclick",function(e){B.ctrlKey&&u.transformControls.visible&&(u.scaleX=1,u.scaleY=1,u.rotation=0,xe(),Te(),M.update()),$e(e,!0)});var Ae=Z.on("mousedown",Be),Pe=u.on("mousedown",Be);function Be(e){e=M.getObjectUnderPoint(e.stageX,e.stageY,1);E||e&&(u.contains&&u.contains(e)||!u.contains&&u==e)?u.transformControls.visible||(z?(it=!1,ke.mouseEnabled=!1):B.canvas.style.cursor="move",u.transformControls.show(),u.dispatchEvent("transformshow")):!u.transformControls.visible||e&&Z.contains(e)||(u.transformControls.hide(),u.dispatchEvent("transformhide"))}var Se,Ee,Ie,Me,Oe,je,Le,_e,Ye,De,Xe,Re,We,Fe=M.on("stagemousedown",function(e){var t=M.getObjectUnderPoint(e.stageX,e.stageY,1),e=t&&t.parent&&t.parent.layer&&t.parent.layer==u;!u.transformControls.visible||t&&(Z.contains(t)||e)||(u.dispatchEvent("transformhide"),u.transformControls.hide())});i||(Z.off("mousedown",Ae),u.off("mousedown",Pe),M.off("stagemousedown",Fe));var He,Ve,Ne,Ge,qe=!1,Ue=!1,Qe=u.cursor,Ze=new To.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20);function Ke(e){var t,o,n;Ue=!0,l&&nt(),He&&M.off("stagemousemove",He),Se=e.target.x,Ee=e.target.y,De=u.x,Xe=u.y,Ie=u.scaleX,Me=u.scaleY,"rotate"==e.target.controlType&&(qe=!0,Oe=u.rotation,t=e.stageX/To.scaX,o=e.stageY/To.scaY,n=G.localToGlobal(De,Xe),Re=n.x,We=n.y,je=180*Math.atan2(o-We,t-Re)/Math.PI),_e=B.ctrlKey||"rotate"==e.target.controlType?(Le=Math.abs(Se-u.x),Math.abs(Ee-u.y)):(Le=Math.abs(Se-e.target.op.x),Math.abs(Ee-e.target.op.y)),"rotate"!=e.target.controlType&&(Ye=e.target.op.parent.localToLocal(e.target.op.x,e.target.op.y,u.parent)),Ze.stage?M.setChildIndex(Ze,M.getChildIndex(Z)):Ze.addTo(M,M.getChildIndex(Z)+1),Ze.x=e.stageX/To.scaX,Ze.y=e.stageY/To.scaY,Ze.cursor=z?"none":e.target.cu,z&&(u.getConcatenatedMatrix().decompose(I),I.rotation||(I.rotation=0),ne.rotation=I.rotation*To.sign(J*$)*To.sign(u.scaleX*u.scaleY)+re[e.target.cu]+de,"side"!=e.target.controlType&&J*$<0&&(ne.rotation+=90),Ge.addTo(M,1).pos({x:e.stageX/To.scaX,y:e.stageY/To.scaY,reg:!0})),ke.visible=!1,u.cursor="none"}function Je(e){var t=1;B.ctrlKey&&"corner"==e.target.controlType?t=_e<Le?(e.target.x-De)/(Se-De):(e.target.y-Xe)/(Ee-Xe):_e<Le?Se-e.target.op.x&&(t=(e.target.x-e.target.op.x)/(Se-e.target.op.x)):Ee-e.target.op.y&&(t=(e.target.y-e.target.op.y)/(Ee-e.target.op.y)),"corner"==e.target.controlType?(u.scaleX=t*Ie,u.scaleY=t*Me):(u.scaleX="e-resize"==e.target.cu?t*Ie:Ie,u.scaleY="n-resize"==e.target.cu?t*Me:Me),xe(),Ze.x=e.stageX/To.scaX,Ze.y=e.stageY/To.scaY,z&&(Ge.x=e.stageX/To.scaX,Ge.y=e.stageY/To.scaY),B.ctrlKey&&"side"!=e.target.controlType||(t=e.target.op.parent.localToLocal(e.target.op.x,e.target.op.y,u.parent),u.x-=(t.x-Ye.x)*To.sign(J)*To.sign(u.scaleX),u.y-=(t.y-Ye.y)*To.sign($)*To.sign(u.scaleY)),xe(),u.transformControls.events&&et(e,e.target.controlType)}function $e(e,t){Ce();var o=e?e.target.controlType:"move";t&&(o="reset"),z&&Ge.removeFrom(M),et(e,o,!0),M.update()}function et(e,t,o,n){null==n&&(n=!0);var r=!1;Ne=null,"move"==t?(u.x==at.x&&u.y==at.y||((Ne=new createjs.Event("transformed")).transformType="move"),n&&(r=ke.hitTestPoint(e.stageX/To.scaX,e.stageY/To.scaY))):"corner"==t?(u.scaleX==at.scaleX&&u.scaleY==at.scaleY||((Ne=new createjs.Event("transformed")).transformType="size"),n&&(r=ie.hitTestPoint(e.stageX/To.scaX,e.stageY/To.scaY))):"side"==t?(u.scaleX==at.scaleX&&u.scaleY==at.scaleY||((Ne=new createjs.Event("transformed")).transformType="stretch"),n&&(r=ae.hitTestPoint(e.stageX/To.scaX,e.stageY/To.scaY)||le.hitTestPoint(e.stageX/To.scaX,e.stageY/To.scaY))):"rotate"==t?(u.rotation!=at.rotation&&((Ne=new createjs.Event("transformed")).transformType="rotate"),n&&(r=se.hitTestPoint(e.stageX/To.scaX,e.stageY/To.scaY))):"reg"==t?u.regX==at.regX&&u.regY==at.regY||((Ne=new createjs.Event("transformed")).transformType="reg"):(Ne=new createjs.Event("transformed")).transformType="reset"==t?"reset":"unknown",n&&!r&&(Ze.removeFrom(M),B.canvas.style.cursor="default",u.cursor=Qe),Ne&&(Ne.pressup=o,"Tag"!=u.type&&"TextArea"!=u.type&&"Loader"!=u.type||u.resize(),u.dispatchEvent(Ne))}function tt(e){Ue||(Ze.stage?M.setChildIndex(Ze,M.getChildIndex(Z)):Ze.addTo(M,M.getChildIndex(Z)+1),Ge.addTo(M,1),Ze.x=e.stageX/To.scaX,Ze.y=e.stageY/To.scaY,Ge.x=e.stageX/To.scaX,Ge.y=e.stageY/To.scaY,u.getConcatenatedMatrix().decompose(I),I.rotation||(I.rotation=0),ne.rotation=I.rotation*To.sign(J*$)*To.sign(u.scaleX*u.scaleY)+re[e.target.cu]+de,"side"!=e.target.controlType&&J*$<0&&(ne.rotation+=90),M.update(),He&&M.off("stagemousemove",He),He=M.on("stagemousemove",function(e){Ze.x=e.stageX/To.scaX,Ze.y=e.stageY/To.scaY,M.update()}))}function ot(e){M.off("stagemousemove",He),Ue||(u.cursor=Qe,Ze.removeFrom(M),Ge.removeFrom(M),M.update())}function nt(){var e;l&&(e=G.numChildren-1,"Keyboard"==G.getChildAt(e).type&&e--,G.setChildIndex(u,e),rt())}function rt(){if(G==M)Z.removeFrom(),M.addChildAt(Z,M.getChildIndex(u)+1);else{for(var e=G;e.parent&&e.parent!=M;)e=e.parent;u.stage&&(Z.parent==M&&M.removeChild(Z),M.addChildAt(Z,M.getChildIndex(e)+1))}}z&&(Ze.mouseEnabled=!1,Ze.mouseChildren=!1,Ze.addChild(ne),ie.on("mouseover",tt),ie.on("mouseout",ot),ae.on("mouseover",tt),ae.on("mouseout",ot),le.on("mouseover",tt),le.on("mouseout",ot),se.on("mouseover",tt),se.on("mouseout",ot),(Ge=new To.Circle(30,"rgba(0,0,0,0)",null,null,null,null,null,null,!1).expand(20)).cursor="none"),ie.on("mousedown",Ke),ie.on("pressmove",Je),ie.on("pressup",$e),ae.on("mousedown",Ke),ae.on("pressmove",Je),ae.on("pressup",$e),le.on("mousedown",Ke),le.on("pressmove",Je),le.on("pressup",$e),se.on("mousedown",Ke),se.on("pressmove",function(e){var t=180*Math.atan2(e.stageY/To.scaY-We,e.stageX/To.scaX-Re)/Math.PI;B.shiftKey?u.rot(45*Math.round((Oe+(t-je)*To.sign(J)*To.sign(u.scaleX))/45)):u.rot(Oe+(t-je)*To.sign(J)*To.sign(u.scaleX));xe(),Ze.x=e.stageX/To.scaX,Ze.y=e.stageY/To.scaY,z&&(u.getConcatenatedMatrix().decompose(I),I.rotation||(I.rotation=0),ne.rotation=I.rotation*To.sign(J*$)*To.sign(u.scaleX*u.scaleY)+re[e.target.cu]+de,"side"!=e.target.controlType&&J*$<0&&(ne.rotation+=90),Ge.x=e.stageX/To.scaX,Ge.y=e.stageY/To.scaY);xe(),u.transformControls.events&&(t=e.target.controlType,et(e,t,null,!1))}),se.on("pressup",$e),_.drag(),_.on("mousedown",nt),_.on("pressup",function(e){if(!B.ctrlKey){for(var t=0;t<N.length;t++)if(To.dist(_.x,_.y,N[t].x,N[t].y)<v){_.x=N[t].x,_.y=N[t].y;break}To.dist(_.x,_.y,F.x,F.y)<v&&(_.x=F.x,_.y=F.y)}var o,n=u.rotation,r=u.globalToLocal(_.x,_.y);o=G==M?new To.Point(_.x,_.y):G.globalToLocal(_.x,_.y),u.reg(r.x,r.y),u.rotation=0,u.x=u.x+o.x-u.x,u.y=u.y+o.y-u.y,u.rotation=n,xe(),Te(),$e(e),M.update()});var it=!0;H=z?"none":"move",ke.drag({overCursor:H,dragCursor:H,onTop:!1}),ke.controlType="move",z&&(ke.on("mouseover",function(e){if(Ue||!z||!it)return;oe.addTo(Z).pos({x:e.stageX/To.scaX,y:e.stageY/To.scaY,reg:!0}),M.update(),Ve&&M.off("stagemousemove",Ve);Ve=M.on("stagemousemove",function(e){oe.x=e.stageX/To.scaX,oe.y=e.stageY/To.scaY,M.update()})}),ke.on("mouseout",function(){if(M.off("stagemousemove",Ve),Ue)return;oe.removeFrom(Z),M.update()})),ke.on("mousedown",nt),ke.on("pressmove",function(e){var t;u.transformControls.visible&&(t=G==M?new To.Point(ke.x,ke.y):G.globalToLocal(ke.x,ke.y),u.x=t.x,u.y=t.y,xe(),u.transformControls.events&&et(e,"move"))}),ke.on("pressup",function(e){u.transformControls.visible&&$e(e)});var at,lt=M.on("stagemouseup",function(){Ue=!1,ke.mouseEnabled=!0,it||(Ne=new createjs.Event("transformed"),u.x!=at.x||u.y!=at.y?Ne.transformType="move":Ne.transformType="select",Ne.pressup=!0,u.dispatchEvent(Ne)),it=!0,ke.visible=!0,qe&&!B.ctrlKey&&1<w&&(u.rotation=Math.round(u.rotation/w)*w,xe()),Te(),ke.mouseEnabled=!0,qe=!1,M.update()});function st(){at={x:u.x,y:u.y,rotation:u.rotation,regX:u.regX,regY:u.regY,scaleX:u.scaleX,scaleY:u.scaleY}}st();var ct,ut=u.on("mousedown",st);Z.on("mousedown",st);Z.addChild(j),t&&Z.addChild(ke),n&&Z.addChild(ie),e&&Z.addChild(ae),o&&Z.addChild(le),r&&Z.addChild(se),Z.addChild(_),t&&(u.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),ct=u.on("pressmove",function(e){xe(),Te(),Ce(),u.transformControls.events&&et(e,"move")}));var dt=i;return u.transformControls={visible:a,events:x,ghost:!zot(k),ghostEnabled:!zot(k),show:function(){return l&&nt(),rt(),u.toggled=!0,u.transformControls.visible=!0,L.parent&&L.removeFrom(),M.update(),u},hide:function(){var e;return u.transformControls.ghost&&(e=M.getChildIndex(Z)),M.removeChild(Z),u.transformControls.ghost&&u.transformControls.ghostEnabled&&M.addChildAt(L,e),u.toggled=!1,u.transformControls.visible=!1,z&&(He&&M.off("stagemousemove",He),Ve&&M.off("stagemousemove",Ve),Ue=!1,Ze.removeFrom(M),Ge.removeFrom(M)),t||(u.cursor=Qe),M.update(),u},remove:function(e){e||u.transformControls.hide(),i=!1,t&&(u.noDrag(),u.off("pressmove",ct))},add:function(e){e||u.transformControls.show(),i=dt,t&&(u.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),ct=u.on("pressmove",ct))},allowToggleOn:function(){i=dt=!0,Ae=Z.on("mousedown",Ae),Pe=u.on("mousedown",Pe),Fe=M.on("stagemousedown",Fe)},allowToggleOff:function(){i=dt=!1,Z.off("mousedown",Ae),u.off("mousedown",Pe),M.off("stagemousedown",Fe)},disable:function(){Z.mouseChildren=!1,Z.mouseEnabled=!1,t&&(u.noDrag(),u.off("pressmove",ct))},enable:function(){Z.mouseChildren=!0,Z.mouseEnabled=!0,t&&(u.drag({overCursor:"pointer",dragCursor:"pointer",onTop:!1,removeTweens:!1}),ct=u.on("pressmove",ct))},recordData:function(e){var t={type:u.type,index:G.getChildIndex(u),x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY,rotation:u.rotation,skewX:u.skewX,skewY:u.skewY,regX:u.regX,regY:u.regY,controls:u.transformControls.visible};return e?JSON.stringify(t):t},setData:function(e,t){if(!zot(e)){t&&(e=JSON.parse(e));e.controls;delete e.controls;var o,n=e.index;for(o in zot(n)&&(n=0),delete e.index,e)u[o]=e[o];return setTimeout(function(){xe(),Te(),Ce(),G.setChildIndex(u,n),u.transformControls.visible&&"Layer"!=u.type?u.transformControls.show():u.transformControls.hide(),!u.transformControls.ghost||u.transformControls.ghostEnabled||u.transformControls.visible||M.addChild(L)},90),u}},hideGhost:function(){u.transformControls.ghost=!1,L.removeFrom()},showGhost:function(){if(u.transformControls.ghost=!0,u.transformControls.ghostEnabled&&!u.transformControls.visible){for(var e=G;e.parent&&e.parent!=M;)e=e.parent;L.stage?M.setChildIndex(L,M.getChildIndex(e)+1):M.addChildAt(L,M.getChildIndex(e)+1)}},addGhost:function(){0<T?(u.transformControls.ghostEnabled=!0,u.transformControls.showGhost()):zon&&zogy("transform() - ghostWidth must be > 0 when making transform")},removeGhost:function(){u.transformControls.ghostEnabled=!1,u.transformControls.hideGhost()},resize:function(e){return G=u.parent,xe(),Te(),Ce(),a&&u.transformControls.show(),e&&((e=new createjs.Event("transformed")).pressup=!0,e.transformType="resize",u.dispatchEvent(e)),u},dispose:function(){u.transformControls.hide(),i=!1,t&&(u.noDrag(),u.off("pressmove",ct)),u.transformControls.hideGhost(),ke.removeAllEventListeners(),se.removeAllEventListeners(),_.removeAllEventListeners(),ae.removeAllEventListeners(),le.removeAllEventListeners(),ie.removeAllEventListeners(),Z.removeAllEventListeners(),Pe&&u.off("mousedown",Pe),Ae&&u.off("mousedown",Ae),Fe&&M.off("stagemousedown",Fe),He&&M.off("stagemousemove",He),Ve&&M.off("stagemousemove",Ve),lt&&M.off("stagemouseup",lt),ut&&u.off("mousedown",ut),ct&&u.off("pressmove",ct),Z=Ze=Ge=null,u.transformControls=null},controls:Z,scaleControls:ie,stretchXControls:ae,stretchYControls:le,rotateControls:se},u.toggle=function(e){return!0!==e&&(!1===e||u.transformControls.visible)?u.transformControls.hide():u.transformControls.show(),u},u.transformControls.ghost&&(u.transformControls.toggleGhost=function(e){return!0!==e&&(!1===e||u.transformControls.visible)?u.transformControls.hideGhost():u.transformControls.showGhost(),u}),a?u.transformControls.show():!P&&u.transformControls.ghost&&u.transformControls.showGhost(),u},To.gesture=function(g,e,t,n,o,p,f,r,i,a,l,m,s,c,u,d){var h,z,y,b;if(x=zob(To.gesture,arguments,"obj, move, scale, rotate, boundary, minScale, maxScale, snapRotate, localBounds, slide, slideEffect, regControl, onTop, surround, circularBounds, rect"))return x;if(z_d("34.5"),!zot(g)&&g.on){zot(e)&&(e=!0),zot(t)&&(t=!0),zot(n)&&(n=!0),zot(i)&&(i=!1),zot(r)&&(r=1),zot(a)&&(a=!1),zot(l)&&(l=5),zot(m)&&(m=!1),zot(s)&&(s=!0),zot(c)&&(c=!1),c&&n&&(c=d=null,zon&&zogy("gesture() - does not support surround when rotate is true")),zot(u)&&(u=!1),zot(o)&&!zot(d)&&(o=d);var v,w,C,x,k,T,A,P,B,S,E,I,M=Ao();return zot(g.zimMaskDynamic)||g.zimMaskApply(),g.zimTouch||(v=new To.Damp(g.scaleX,.05),w=new To.Damp(g.scaleY,.05),C=g.scaleX/g.scaleY,g.zimTouch={move:e,scale:t,rotate:n,pointers:{},checkBounds:function(e,t){var o,n;return g.zimTouch.boundary&&(o=g.zimTouch.boundary,n=g.parent.localToLocal(e,t,g.parent),t=c?(e=Math.min(o.x,Math.max(o.x+o.width,n.x)),Math.min(o.y,Math.max(o.y+o.height,n.y))):(e=Math.max(o.x,Math.min(o.x+o.width,n.x)),Math.max(o.y,Math.min(o.y+o.height,n.y))),e=(n=g.parent.globalToLocal(e,t)).x,t=n.y),{x:e,y:t}}},o&&(g.zimTouch.boundary=o,i&&(g.zimTouch.boundary=To.boundsToGlobal(g.parent,o)),g.zimTouch.boundaryStartX=g.zimTouch.boundary.x,g.zimTouch.boundaryStartY=g.zimTouch.boundary.y,g.zimTouch.boundaryStartW=g.zimTouch.boundary.width,g.zimTouch.boundaryStartH=g.zimTouch.boundary.height,x=g.zimTouch.checkBounds(g.x,g.y),g.x=x.x,g.y=x.y),a&&(y=10,b=5,z=0,h=[],g.zimTouch.slideInterval=To.interval(y/("s"==M?1e3:1),function(){h[z++%b]=[g.x,g.y]}),g.zimTouch.slideInterval.pause(),g.animate({x:g.x,y:g.y},10/("s"==M?1e3:1),"quadOut")),g.zimTouch.mousedown=g.on("mousedown",function(e){zot(I)?I=1:I++;g.stage;s&&(t=g.parent.numChildren-1,"Keyboard"==g.parent.getChildAt(t).type&&t--,g.parent.setChildIndex(g,t),g.ZIMoutlineShape&&g.outline()),m||(E=null,T=g.scaleX,A=g.scaleY,P=g.rotation,B=g.regX,S=g.regY,g.reg(0,0),k=g.getMatrix(),g.regX=B,g.regY=S);var t="id"+Math.abs(e.pointerID+1),e=g.parent.globalToLocal(e.stageX/To.scaX,e.stageY/To.scaY);g.zimTouch.pointers[t]={startX:e.x,startY:e.y,x:e.x,y:e.y},(g.zimTouch.move||g.zimTouch.rotate)&&(g.zimTouch.total=0,To.loop(g.zimTouch.pointers,function(e){g.zimTouch.total++})),a&&1==g.zimTouch.total&&g.zimTouch.slideInterval.pause(!1),O()}),g.zimTouch.pressmove=g.on("pressmove",function(e){g.stage;var t="id"+Math.abs(e.pointerID+1),o=g.parent.globalToLocal(e.stageX/To.scaX,e.stageY/To.scaY);g.zimTouch.pointers[t]&&(g.zimTouch.pointers[t].x=o.x,g.zimTouch.pointers[t].y=o.y);var n,r,i=0,a=0,l=0,s=0;To.loop(g.zimTouch.pointers,function(e,t){i+=t.x-t.startX,a+=t.y-t.startY,l+=t.x,s+=t.y}),n=i/g.zimTouch.total,r=a/g.zimTouch.total,i=g.zimTouch.startX+n,a=g.zimTouch.startY+r,l/=g.zimTouch.total,s/=g.zimTouch.total;var c,u,d,h={x:g.x,y:g.y,scaleX:g.scaleX,scaleY:g.scaleY,rotation:g.rotation};g.zimTouch.move&&(u=g.zimTouch.checkBounds(i,a),h.x=u.x,h.y=u.y),2==g.zimTouch.pair.length?(c=g.zimTouch.pair[0],e=g.zimTouch.pair[1],g.zimTouch.scale&&(t=Math.sqrt(Math.pow(e.startX-c.startX,2)+Math.pow(e.startY-c.startY,2)),o=Math.sqrt(Math.pow(e.x-c.x,2)+Math.pow(e.y-c.y,2)),u=g.zimTouch.startSX+(o/t-1),o=g.zimTouch.startSY+(o/t-1),h.scaleX=u,h.scaleY=o,h.scaleX=v.convert(u),h.scaleY=w.convert(o),t=!zot(p)&&Math.min(u,o)<p,o=!zot(f)&&Math.max(u,o)>f,(t||o)&&(t?1<C?(h.scaleY=p,h.scaleX=p*C):(h.scaleX=p,h.scaleY=p/C):o&&(1<C?(h.scaleX=f,h.scaleY=f/C):(h.scaleY=f,h.scaleX=f*C)),v.immediate(h.scaleX),w.immediate(h.scaleY))),g.zimTouch.rotate&&(d=Math.atan2(c.startY-e.startY,c.startX-e.startX)*(180/Math.PI),d=Math.atan2(c.y-e.y,c.x-e.x)*(180/Math.PI)-d,h.rotation=g.zimTouch.startR+d),m?(g.scaleX=h.scaleX,g.scaleY=h.scaleY,g.rotation=h.rotation,g.zimTouch.move&&(g.x=h.x,g.y=h.y)):(g.reg(0,0),d=g.parent.localToGlobal(l,s),l=d.x,s=d.y,d=zot(E)?g.globalToLocal(l,s):g.globalToLocal(E.x,E.y),k.clone().translate(d.x,d.y).rotate(h.rotation-P).scale(h.scaleX/T,h.scaleY/A).translate(-d.x,-d.y).decompose(g),g.zimTouch.move&&(g.x+=n,g.y+=r),E=g.localToGlobal(d.x,d.y),g.reg(B,S)),g.zimTouch.scale&&g.dispatchEvent("scale"),g.zimTouch.rotate&&g.dispatchEvent("rotate")):(g.x=h.x,g.y=h.y),g.zimTouch.move&&g.dispatchEvent("move"),"Tag"!=g.type&&"TextArea"!=g.type&&"Loader"!=g.type||g.resize(),g.ZIMoutlineShape&&g.outline(),g.getStage&&g.stage&&g.stage.update()}),g.on("mousedown",function(){var e=1;g.stage.on("stagemousedown",function(){e++}),g.stage.on("stagemouseup",function(){0==--e&&setTimeout(function(){g.zimTouch&&(g.zimTouch.total=0),g.zimTouch&&(g.zimTouch.pointers={}),I=null},50)})},null,!0),g.zimTouch.pressup=g.on("pressup",function(e){var t,o="id"+Math.abs(e.pointerID+1);delete g.zimTouch.pointers[o],(g.zimTouch.move||g.zimTouch.rotate)&&g.zimTouch.total--,n&&!zot(r)&&0==g.zimTouch.total&&(0<r?g.rotation=Math.round(g.rotation/r)*r:0==r&&(g.rotation=Math.round(g.rotation))),a&&0==g.zimTouch.total&&1==I&&(g.zimTouch.slideInterval.pause(),t=h[(z+1)%h.length],e=h[z%h.length],o=g.x+(t[0]-e[0])*l,t=g.y+(t[1]-e[1])*l,e=g.zimTouch.checkBounds(o,t),t=b*y*l*Math.min((g.x-e.x)/(g.x-o)||1,(g.y-e.y)/(g.y-t)||1),g.animate({x:e.x,y:e.y},t/("s"==M?1e3:1),"quadOut",function(){g.dispatchEvent("slidestop")})),0==g.zimTouch.total&&(I=null),g.getStage&&g.stage&&g.stage.update(),O()}),o&&(j(),g.on("move",j))),g}function O(){g.zimTouch.pair=[],To.loop(g.zimTouch.pointers,function(e,t,o){t.startX=t.x,t.startY=t.y,o<=1&&g.zimTouch.pair.push(t)}),g.zimTouch.startX=g.x,g.zimTouch.startY=g.y,g.zimTouch.startSX=g.scaleX,g.zimTouch.startSY=g.scaleY,g.zimTouch.startR=g.rotation}function j(){var e,t=g.localToGlobal(g.regX,g.regY);o=u?(o=g.parent.localToGlobal(g.x-g.width/2,g.y-g.height/2),e=g.parent.localToGlobal(g.x+g.width/2,g.y+g.height/2),{x:o.x,y:o.y,width:e.x-o.x,height:e.y-o.y}):g.boundsToGlobal();var o={x:g.zimTouch.boundaryStartX+t.x-o.x,y:g.zimTouch.boundaryStartY+t.y-o.y,width:g.zimTouch.boundaryStartW-o.width,height:g.zimTouch.boundaryStartH-o.height};g.gestureBoundary(o,!1)}},To.noGesture=function(e,t,o,n){var r;return(r=zob(To.noGesture,arguments,"obj, move, scale, rotate"))?r:(z_d("34.6"),!zot(e)&&e.on&&e.zimTouch?(zot(t)&&(t=!0),zot(o)&&(o=!0),zot(n)&&(n=!0),e.zimTouch.move=!t,e.zimTouch.scale=!o,e.zimTouch.rotate=!n,e.zimTouch.move||e.zimTouch.scale||e.zimTouch.rotate||(e.off("mousedown",e.zimTouch.mousedown),e.off("pressmove",e.zimTouch.pressmove),e.off("pressup",e.zimTouch.pressup),delete e.zimTouch),e):void 0)},To.gestureBoundary=function(e,t,o){if(z_d("34.7"),!zot(e)&&e.on&&!zot(t)&&e.zimTouch){e.zimTouch.localBounds&&e.parent?e.zimTouch.boundary=To.boundsToGlobal(e.parent,t):e.zimTouch.boundary=t,zot(o)&&(o=!0),o&&(e.zimTouch.boundaryStartX=t.x,e.zimTouch.boundaryStartY=t.y,e.zimTouch.boundaryStartW=t.width,e.zimTouch.boundaryStartH=t.height);t=e.zimTouch.checkBounds(e.x,e.y);return e.x=t.x,e.y=t.y,e}},To.effect=function(e,t,o,n,r,i){if(z_d("33.16"),zot(t))return e;zot(e.effects)&&(e.effects={}),Array.isArray(t)||(t=[t]);for(var a,l=0,s=0;s<t.length;s++){var c=t[s];c.type||(c instanceof createjs.BlurFilter?c.type="BlurEffect":c instanceof createjs.ColorFilter?c.type="ColorEffect":c instanceof createjs.AlphaMaskFilter?c.type="AlphaEffect":c instanceof createjs.ColorMatrixFilter?c.type="MultiEffect":zot(c.type)&&(c.type="custom"+l++));var u=c.type.replace(/effect/i,"");e.effects[u.toLowerCase()]=c}for(a in e.filters=[],e.effects)e.filters.push(e.effects[a]);return e.cache(o,n,r,i),e},To.updateEffects=function(e,t){return z_d("33.163"),e.updateCache&&(t?e.cache():e.updateCache()),e},To.noEffect=function(e,t,o){if(z_d("33.165"),zot(o)&&(o=!1),zot(t)){var n;e.effects.multi&&(n=e.effects.multi),e.effects={},n&&(e.effects.multi=n)}else{e.effects||(e.effects={}),Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var i=t[r].replace(/effect/i,"");delete e.effects[i.toLowerCase()]}}for(var a in e.filters=[],e.effects)e.filters.push(e.effects[a]);return o||0<e.filters.length?e.updateCache&&e.updateCache():e.uncache&&e.uncache(),e},To.addPhysics=function(e,t,o,n,r,i,a,l,s,c,u,d,h){if(C=zob(To.addPhysics,arguments,"obj, dynamic, contract, shape, friction, linear, angular, density, bounciness, maskBits, categoryBits, physics, restitution"))return C;if(z_d("34.8"),zot(d)){if("undefined"==typeof zimPhysics)return zon&&zog("ZIM Physics module must be imported"),e;zot(zimDefaultPhysics)&&(zimDefaultPhysics=new To.Physics),d=zimDefaultPhysics}e.physics=d;var g,p,f,m,z,y,b,v,w,C,x="rectangle";function k(){zimContactListener=new b2ContactListener,T=new To.Dictionary(!0),A=new To.Dictionary(!0),zimContactListener.BeginContact=function(e){var t=T.at(e.m_fixtureB.GetBody());t&&t(e.m_fixtureA.GetBody().zimObj,e.m_fixtureA.GetBody());(t=T.at(e.m_fixtureA.GetBody()))&&t(e.m_fixtureB.GetBody().zimObj,e.m_fixtureB.GetBody())},zimContactListener.EndContact=function(e){var t=A.at(e.m_fixtureB.GetBody());t&&t(e.m_fixtureA.GetBody().zimObj,e.m_fixtureA.GetBody());(t=A.at(e.m_fixtureB.GetBody().zimObj,e.m_fixtureB.GetBody()))&&t(e.m_fixtureB.GetBody())},g.physics.world.SetContactListener(zimContactListener)}return"Circle"==e.type||"Dial"==e.type?x="circle":"Triangle"==e.type&&(x="triangle"),zot(n)&&(n=x),zot(s)&&(s=h),g=e,p=t,f=o,m=n,z=r,y=i,b=a,v=l,w=s,C=c,x=u,z_d("69.97"),zot(f)&&(f=0),"rectangle"==m?g.body=g.physics.makeRectangle(g.width-f,g.height-f,p,z,b,v,w,C,x,y):"circle"==m?g.body=g.physics.makeCircle(g.width/2-f,p,z,b,v,w,C,x,y):"triangle"==m&&(zot(g.a)&&(g.a=g.width,g.b=g.c=Math.sqrt(Math.pow(g.a/2,2)+Math.pow(g.height,2))),g.body=g.physics.makeTriangle(g.a-f,g.b-f,g.c-f,p,z,b,v,w,C,x,y)),g.body.x=g.x,g.body.y=g.y,g.body.rotation=g.rotation,g.physics.addMap(g.body,g),g.impulse=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0);var r=g.body.GetWorldCenter();return zot(o)&&(o=r.x*g.physics.scale),zot(n)&&(n=r.y*g.physics.scale),g.body.ApplyImpulse(new b2Vec2(e,t),new b2Vec2(o/g.physics.scale,n/g.physics.scale)),g},g.force=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0);var r=g.body.GetWorldCenter();return zot(o)&&(o=r.x*g.physics.scale),zot(n)&&(n=r.y*g.physics.scale),g.body.ApplyForce(new b2Vec2(e,t),new b2Vec2(o/g.physics.scale,n/g.physics.scale)),g},g.setLinearVelocity=function(e,t){return g.body.SetLinearVelocity(new b2Vec2(e,t)),g},g.setAngularVelocity=function(e){return g.body.SetAngularVelocity(e),g},g.spin=function(e){return zot(e)&&(e=10),g.body.ApplyTorque(1e3*e),g},g.torque=function(e){return zot(e)&&(e=10),g.body.ApplyTorque(e),g},g.follow=function(e,t,o,n,r,i,a,l,s,c,u,d){var h;return(h=zob(g.follow,arguments,"damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, borderOriginal"))?h:(g.physics.follow(g,e,t,o,n,r,i,a,l,s,c,u,d),g)},g.noFollow=function(){return g.physics.follow(null),g},g.control=function(e,t,o,n,r){var i;return(i=zob(g.control,arguments,"type, speed, speedY, horizontal, vertical"))?i:(g.physics.control(g,e,t,o,n,r),g)},g.noControl=function(){return g.physics.noControl(g),g},g.sleep=function(){return zog(g.body),g.body.SetAwake(!1),g},g.wake=function(){return g.body.SetAwake(!0),g},g.contact=function(e){return zimContactListener||k(),T.add(g.body,e),g},g.noContact=function(){return T.remove(g.body),g},g.contactEnd=function(e){return zimContactListener||k(),A.add(g.body,e),g},g.noContactEnd=function(){return A.remove(g.body),g},Object.defineProperty(g,"dynamic",{get:function(){return 2==g.body.GetType()},set:function(e){g.body.SetType(1==e?2:0)}}),e},To.removePhysics=function(e){return z_d("34.85"),zot(e.physics)||(e==e.physics.followObj&&e.physics.follow(null),e.follow=e.noFollow=e.control=e.noControl=e.sleep=e.wake=null,e.impulse=e.force=e.spin=e.torque=null,e.physics.remove(e.body),e.physics=null),e},To.hitTestPoint=function(e,t,o,n){if(To.zimhtp||(z_d("35"),To.zimhtp=!0),!e.stage||zot(t)||zot(o))return!1;e.stage;if(!zot(e)&&e.globalToLocal){if(zot(n)&&(n=!0),n){var r=e.getBounds();if(r){n=e.globalToLocal(t,o);if(n.x>r.x+r.width||n.x<r.x)return!1;if(n.y>r.y+r.height||n.y<r.y)return!1}}o={x:t,y:o},o=e.image||e.spriteSheet||"Shape"==e.type?e.globalToLocal(o.x,o.y):e.globalToLocal(o.x*To.scaX,o.y*To.scaY);return e.hitTest(o.x,o.y)}},To.hitTestReg=function(e,t,o){if(To.zimhtr||(z_d("36"),To.zimhtr=!0),!e.stage||!t.stage)return!1;e.stage;if(!zot(e)&&!zot(t)&&e.localToLocal&&t.localToLocal){zot(o)&&(o=!0);var n=t.localToGlobal(t.regX,t.regY),t=e.getBounds();if(o&&t){o=e.globalToLocal(n.x,n.y);if(o.x>t.x+t.width||o.x<t.x)return!1;if(o.y>t.y+t.height||o.y<t.y)return!1}return n=e.image||e.spriteSheet||"Shape"==e.type?e.globalToLocal(n.x,n.y):e.globalToLocal(n.x*To.scaX,n.y*To.scaY),e.hitTest(n.x,n.y)}},To.hitTestRect=function(t,e,o,n){if(To.zimhtr||(z_d("37"),To.zimhtr=!0),!t.stage||!e.stage)return!1;t.stage;if(!zot(t)&&!zot(e)&&t.hitTest&&e.getBounds){zot(o)&&(o=0),zot(n)&&(n=!0);var r=e.getBounds();if(r){if(n)if(t.getBounds()&&!To.hitTestBounds(t,e))return!1;var i,a,l=r.x+r.width/2,n=r.y+r.height/2,s=e.localToGlobal(l,n);if(u(s))return!0;for(var c=0;c<=o;c++){if(i=r.width*(c+1)/(o+1),a=r.height*(c+1)/(o+1),u(e.localToGlobal(r.x+i,r.y)))return!0;if(u(e.localToGlobal(r.x+r.width,r.y+a)))return!0;if(u(e.localToGlobal(r.x+r.width-i,r.y+r.height)))return!0;if(u(e.localToGlobal(r.x,r.y+r.height-a)))return!0}}else zon&&zogy("hitTestRect():\n please setBounds() on param b object")}function u(e){return e=t.image||t.spriteSheet||"Shape"==t.type?t.globalToLocal(e.x,e.y):t.globalToLocal(e.x*To.scaX,e.y*To.scaY),t.hitTest(e.x,e.y)?1:void 0}},To.hitTestCircle=function(t,e,o,n){if(To.zimhtc||(z_d("38"),To.zimhtr=!0),z_d("38"),t.stage&&e.stage){t.stage;if(!zot(t)&&!zot(e)&&t.hitTest&&e.getBounds){zot(o)&&(o=8),zot(n)&&(n=!0);var r=e.getBounds();if(r){var i=t.getBounds();if(n&&i&&!To.hitTestBounds(t,e))return!1;var a=r.x+r.width/2,l=r.y+r.height/2,s=e.localToGlobal(a,l);if(g(s))return!0;for(var c,u,d=(r.width+r.height)/2/2,h=0;h<o;h++)if(u=h/o*2*Math.PI,c=a+d*Math.cos(u),u=l+d*Math.sin(u),g(e.localToGlobal(c,u)))return!0;return!1}zon&&zogy("hitTestCircle():\n please setBounds() on param b object")}}function g(e){return e=t.image||t.spriteSheet||"Shape"==t.type?t.globalToLocal(e.x,e.y):t.globalToLocal(e.x*To.scaX,e.y*To.scaY),t.hitTest(e.x,e.y)?1:void 0}},To.hitTestCircleRect=function(e,t,o){if(To.zimhtcr||(z_d("38.2"),To.zimhtcr=!0),e.stage&&t.stage){var n=e.stage;if(!zot(e)&&!zot(t)&&e.getBounds&&t.getBounds){var r=e.getBounds(),i=t.getBounds();if(r&&i){zot(o)&&(o=0);var a=(e.radius||(r.width+r.height)/2)+o;a*=e.getConcatenatedMatrix().decompose().scaleX/n.scaleX;i=t.boundsToGlobal(),r=e.localToGlobal(0,0),o=r.x,n=r.y,t=i.x,e=i.y,r=i.x+i.width,i=i.y+i.height,o=(o<t?t:r<o?r:o)-o,n=(n<e?e:i<n?i:n)-n;return o*o+n*n<=a*a}zon&&zogy("hitTestCircleRect():\n please setBounds() on both objects")}}},To.hitTestCircles=function(e,t,o){if(To.zimhtcs||(z_d("38.5"),To.zimhtcs=!0),e.stage&&t.stage){var n=e.stage;if(!zot(e)&&!zot(t)&&e.hitTest&&e.getBounds&&t.getBounds){var r=e.getBounds(),i=t.getBounds();if(r&&i){zot(o)&&(o=0);var a=e.localToGlobal(r.x+r.width/2,r.y+r.height/2),l=t.localToGlobal(i.x+i.width/2,i.y+i.height/2),s=e.getConcatenatedMatrix(),c=t.getConcatenatedMatrix(),e=Math.sqrt(s.a/n.scaleX*s.a/n.scaleX+s.c/n.scaleX*s.c/n.scaleX),t=Math.sqrt(s.b/n.scaleY*s.b/n.scaleY+s.d/n.scaleY*s.d/n.scaleY),s=Math.sqrt(c.a/n.scaleX*c.a/n.scaleX+c.c/n.scaleX*c.c/n.scaleX),n=Math.sqrt(c.b/n.scaleY*c.b/n.scaleY+c.d/n.scaleY*c.d/n.scaleY),l=Math.sqrt(Math.abs(Math.pow(a.x-l.x,2)+Math.pow(a.y-l.y,2)));return r.width*Math.max(e,t)/2+i.width*Math.max(s,n)/2>=l-o}zon&&zogy("hitTestCircles():\n please setBounds() on both objects")}}},To.hitTestBounds=function(e,t,o,n){if(To.zimhtb||(z_d("39"),To.zimhtb=!0),e.stage&&t.stage&&!zot(e)&&!zot(t)&&e.getBounds&&t.getBounds){var r=!1;n&&n.graphics&&(r=!0);var i=e.getBounds(),a=t.getBounds();if(i&&a){zot(o)&&(o=0);e=To.boundsToGlobal(e),t=To.boundsToGlobal(t);return r&&((r=n.graphics).c(),r.ss(1).s("blue"),r.r(e.x,e.y,e.width,e.height),r.s("green"),r.r(t.x,t.y,t.width,t.height),n.stage.update()),To.rectIntersect(e,t,o)}zon&&zogy("hitTestBounds():\n please setBounds() on both objects")}},To.hitTestPath=function(e,t,o,n){if(To.zimhtpa||(z_d("37.5"),To.zimhtpa=!0),e.stage&&t.stage){e.stage;if(!zot(e)&&!zot(t)&&e.hitTest&&("Squiggle"==t.type||"Blob"==t.type)){var r=e.getBounds();zot(o)&&(o=2),zot(n)&&(n=!1);var i=t.interpolate(o,null,!0,null,!0);if(n){t.hitPathPoints?t.hitPathPoints.removeAllChildren():t.hitPathPoints=(new To.Container).addTo(),t.hitPathPoints.top();for(var a=0;a<i.length;a++){var l=i[a];l=t.localToGlobal(l.x,l.y),new To.Circle(3).loc(l.x,l.y,t.hitPathPoints)}}if(r){n=To.boundsAroundPoints(i);if(!To.rectIntersect(e.boundsToGlobal(r),t.boundsToGlobal(n)))return}for(var s,a=0;a<i.length;a++){l=i[a];if(l=t.localToGlobal(l.x,l.y),s=l,s=e.image||e.spriteSheet||"Shape"==e.type?e.globalToLocal(s.x,s.y):e.globalToLocal(s.x*To.scaX,s.y*To.scaY),e.hitTest(s.x,s.y)?1:void 0)return!0}return!1}}},To.hitTestGrid=function(e,t,o,n,r,i,a,l,s,c,u,d,h){if(To.zimhtg||(z_d("41"),To.zimhtg=!0),!e.stage)return!1;zot(e)||d||(i=(g=e.globalToLocal(i,a)).x,a=g.y),zot(l)&&(l=0),zot(s)&&(s=0),zot(c)&&(c=0),zot(u)&&(u=0);var g=(t+=c)/n,t=(o+=u)/r,o=Math.min(n-1,Math.max(0,Math.floor((i-l+c/2)/g))),r=Math.min(r-1,Math.max(0,Math.floor((a-s+u/2)/t)));if("open"!=h){if(g*(o+1)-c<i-l||i-l<g*o)return;if(t*(r+1)-u<a-s||a-s<t*r)return}n=r*n+o;return zot(h)||"index"==h?n:"col"==h?o:"row"==h?r:"array"==h||"open"==h?[n,o,r]:void 0},To.animate=function(c,e,t,u,d,h,a,o,n,r,i,l,s,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L,_,Y,D,X,R,W,F,H,V,N,G,q,U,Q,Z,K,J){if(c&&(c.props||c.obj)&&($=zob(To.animate,arguments,"target, props, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, loopPick, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, rewindTime, rewindEase, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, cjsProps, css, protect, override, from, set, id, events, sequenceTarget, dynamic, drag, clamp, startPaused, clean, obj, seriesWait, sequenceWait, rate, pauseOnBlur, easeAmount, easeFrequency, timeUnit, timeCheck")))return $;if("AC"==c.type&&zdf)return zdf.ac("animate",arguments),c;if(To.animateCheck||(z_d("45"),To.animateCheck=!0),c){var $=To.ANIMATE;if(null!=window.ANIMATE&&($=window.ANIMATE),!$)return c;zot(J)&&(J=!0);var ee=Ao(null,K,null,null,!zot(J)&&!J);0<i&&(r=!0);var te=arguments,oe=Array.prototype.slice.call(arguments);if(zot(e)&&!zot(V)&&(e=V),zot(V=e))return zon&&zog("animate() - need props"),c;if("BeadsContainer"==c.type&&zot(T)&&(T=0),zot(U)&&(U=!0),"Tone"==c.type&&(U=!1),U&&(zot(To.blurCheck)&&To.setBlurDetect(),To.pauseAnimateOnBlur=!0),zot(T)||!c.addChild){t=To.Pick.choose(t),u=To.Pick.choose(u),a=To.Pick.choose(a),i=To.Pick.choose(i),l=To.Pick.choose(l),z=To.Pick.choose(z),y=To.Pick.choose(y),x=zot(x)?t:To.Pick.choose(x),B=To.Pick.choose(B),j=To.Pick.choose(j),L=To.Pick.choose(L);var ne=["loopCount","loopWait","rewind","rewindWait"];for(ue in E)0<=ne.indexOf(ue)&&(E[ue]=To.Pick.choose(E[ue]))}$={override:!zot(c)&&!zot(c.zimX)&&!zot(V.x)||!zot(c)&&!zot(c.zimY)&&!zot(V.y)};if(zot(r)||($.loop=r),zot(i)||($.count=i),zot(l)||($.loopWait=l),zot(s)||($.loopCall=s),zot(f)||($.loopWaitParams=f),zot(p)||($.loopWaitCall=p),zot(g)||($.loopParams=g),zot(m)||($.loopPick=m),zot(z)||($.rewind=z),zot(y)||($.rewindWait=y),zot(b)||($.rewindCall=b),zot(v)||($.rewindParams=v),zot(w)||($.rewindWaitCall=w),zot(C)||($.rewindWaitParams=C),zot(e)||($=To.merge($,E)),E=$,To.loop(V,function(e,t){var o;"string"==typeof e&&(1<(o=e.split(".")).length&&"."!=e.substr(0,1)&&(V["."+e]=t,delete V[e],e="."+e),1<o.length&&"string"==typeof t&&("+"!=(o=t.substr(0,1))&&"-"!=o&&(V[e]="+"+t)))}),c.zimTweenOriginals={},!zot(T)&&c.addChild){for(var re=[],ie=0;ie<c.numChildren;ie++)re.push(c.getChildAt(ie));D=c,c=re}var ae=["extra","zoom","speed","layer","fade"],le={zoom:"Pen"==c.type?"size":"scale",speed:"percentSpeed",layer:"layer",fade:"alpha"};if(c instanceof Array){B&&c.reverse();for(ie=0;ie<c.length;ie++){var se,ce=c[ie];if(j)for(ue in ce.zimObj={},V)se=0<=ae.indexOf(ue)?V[ue]:To.Pick.choose(V[ue]),ce.zimObj[ue]=ce[ue],"string"==typeof se&&(se=(ce.zimLastObj&&!zot(ce.zimLastObj[ue])?ce.zimLastObj:ce)[ue]+Number(se.replace(/\s/g,""))),ce.zimLastObj&&(ce.zimLastObj[ue]=(z?ce.zimTweenOriginals:V)[ue]),ce[ue]=se;else for(var ue in ce.zimObj={},V)ae.indexOf(ue),ce.zimObj[ue]=V[ue];var de=0==ie&&0!=T?"s"==ee?.02:20:ie*T;To.animate(ce,ce.zimObj,t,u,ie==c.length-1?d:null,ie==c.length-1?h:null,a,o,n,null,null,null,null,null,null,null,m,null,null,null,null,null,null,x,k,null,A,P,null,S,To.copy(E),I,M,O,null,L,_,Y,D,X,R,W,F,H,V,N,de,q,U,Q,Z,K,J)}return D}var he,ge,pe,fe=t,me=x;if(zot(fe)&&(fe="s"==ee?1:1e3),zot(x)&&(x=me=fe),zot(u)&&(u="quadInOut"),zot(a)&&(a=0),zot(y)&&(y=0),zot(E)&&(E={override:!zot(c.zimX)&&!zot(V.x)||!zot(c.zimY)&&!zot(V.y)}),zot(h)&&(h=c),zot(S)&&(S=!0),zot(I)&&(I=!1),zot(M)&&(M=!1),zot(j)&&(j=!1),zot(L)&&(L={}),L.scale&&(L.scaleX=L.scaleY=L.scale,delete L.scale),zot(O)||(E.override=O),zot(R)&&(R=!1),zot(F)&&(F=!!R),zot(X)&&(X=!1),zot(W)&&(W=!0),zot(H)&&(H=!0),zot(q)&&(q=1),c.futureRate=q,V instanceof Array){var ze,ye,be=1;return 0==V.length?this:(function(){c&&!c.seriesTweens&&(c.seriesTweens=[],c.seriesCalls=[],c.seriesParams=[]);for(var e,o,t=0;t<V.length;t++)(e=V[t]).target?(e.target.seriesTweens||(e.target.seriesTweens=[]),e.target.seriesCalls||(e.target.seriesCalls=[]),e.target.seriesParams||(e.target.seriesParams=[]),e.target.seriesTweens.push(e.props),e.target.seriesCalls.push(e.call),e.target.seriesParams.push(e.params)):(c.seriesTweens.push(e.props),c.seriesCalls.push(e.call),c.seriesParams.push(e.params));for(c.seriesCalls.push(d),c.seriesParams.push(h),e=V[0],(o=c||e.target).zimSeriesOriginals={},t=V.length-1;0<=t;t--)zot((e=V[t]).props)&&!zot(e.obj)&&(e.props=e.obj),e.obj=e.props,To.loop(e.obj,function(e,t){o.zimSeriesOriginals[e]="path"==e?V[e]:to(o,e)});var n,r,i=new To.Dictionary;for(ze=new To.Dictionary,t=0;t<V.length;t++)if(e=V[t],c=c||e.target,zot(e.target)&&(e.target=c),zot(e.ease)&&(e.ease=u),!zot(e.target)){0==t&&(e.target.zimSeriesArgs=te),zot(e.props)&&!zot(e.obj)&&(e.props=e.obj),e.obj=e.props,e.loop&&(zot(e.loopCount)||e.loopCount<=0)&&(e.loopCount=0,V.splice(t+1,V.length)),zot(e.obj.scale)||(e.obj.scaleX=e.obj.scaleY=e.obj.scale,delete e.obj.scale),e.from&&((s=i.at(e.target))?(e.set?(n=To.copy(e.obj),r=To.merge(s,e.set),e.obj=lo(e.target,e.obj,r),e.set=To.merge(e.set,n)):(e.set=To.copy(e.obj),e.obj=lo(e.target,e.obj,s)),e.from=!1):i.add(e.target,lo(e.target,e.obj,e.set)));var a,l={};for(a in e.obj)l[a]=e.set&&e.set[a]||e.target[a];zot(ze.at(e.target))&&ze.add(e.target,{});var s=To.merge(ze.at(e.target),l);ze.remove(e.target),ze.add(e.target,s),e.masterSet=To.copy(e.set)}zot(c.zimTweens)&&(c.zimTweens={})}(),no(),ve(),c);function ve(){c.zimLastObj&&To.loop(c.zimLastObj,function(e){zot(c.zimTweenOriginals[e])||(c[e]=c.zimTweenOriginals[e],c.zimLastObj[e]=c.zimTweenOriginals[e])});for(var e,t,o,n=a,r=0,i=0;i<V.length;i++)zot((o=V[i]).target)||(zot(o.time)&&(o.time=fe),n+=o.wait||0,e=o.time,t=zot(o.rewindTime)?e:o.rewindTime,o.rewind&&(e=e+t+(o.rewindWait||0)),o.loop&&(e*=o.loopCount,e+=(o.loopCount-1)*(o.loopWait||0)),zot(o.params)&&(o.params=o.target),ye=o.target,n<0&&(r+=n,n=0),o={target:o.target,obj:To.copy(o.obj),seriesWait:r,wait:n,waitedCall:o.waitedCall,waitedParams:o.waitedParams,time:o.time,ease:o.ease,from:o.from,rewind:o.rewind,call:o.call,params:o.params,loop:o.loop,loopCount:o.loopCount,loopWait:o.loopWait,loopCall:o.loopCall,loopParams:o.loopParams,loopWaitCall:o.loopWaitCall,loopWaitParams:o.loopWaitParams,loopPick:o.loopPick,rewindWait:o.rewindWait,rewindCall:o.rewindCall,rewindParams:o.rewindParams,rewindWaitCall:o.rewindWaitCall,rewindWaitParams:o.rewindWaitParams,rewindTime:o.rewindTime,rewindEase:o.rewindEase,set:To.copy(o.masterSet),events:Y,rate:c.futureRate,pauseOnBlur:o.pauseOnBlur,easeAmount:o.easeAmount,easeFrequency:o.easeFrequency,override:!1,id:_},i==V.length-1&&function(e){var t=e.call,o=e.params;E.loop&&(!E.count||be<E.count)?e.call=function(){function e(){for(var e=0;e<ze.objects.length;e++)ze.objects[e].set&&ze.objects[e].set(ze.values[e]);E.loopWaitCall&&"function"==typeof E.loopWaitCall&&E.loopWaitCall(E.loopWaitParams),ve()}E.loopCall&&"function"==typeof E.loopCall&&E.loopCall(E.loopParams),E.loopWait?(zot(c.zimTweens)&&(c.zimTweens={}),(he=c.zimTweens[_]=c.zimTween=createjs.Tween.get(c,{override:E.override}).wait(E.loopWait,!0).call(e)).timeScale=c.futureRate):e()}:e.call=function(){t&&"function"==typeof t&&t(o),zot(h)&&(h=ye),d&&"function"==typeof d&&d(h),wo(_),c.zimLastObj=null},be++}(o),To.animate(o),r+=n+e,n=0)}}if(V&&(V.x&&(c.zimX=!0),V.y&&(c.zimY=!0)),!zot(V.shape)&&V.shape.type==c.type&&("Blob"==c.type||"Squiggle"==c.type)){var we=c.pointObjects,Ce=V.shape.pointObjects;if(we.length!=Ce.length)zon&&zogy("animate() - shapes must be of same number of points"),delete V.shape;else{V.shape;delete V.shape;var xe=zot(V.blobShift)?0:V.blobShift;delete V.blobShift;for(var ke=!0,ie=0;ie<we.length;ie++)for(var Te,Ae,Pe=we[ie],Be=Ce[(2e4*we.length+ie+xe)%we.length],Se=0;Se<4;Se++)1!=Se&&(Te=Pe[Se],Be[Se],(Ae=To.copy(oe))[0]=Te,Ae[1]={x:Be[Se].x,y:Be[Se].y,rotation:Be[Se].rotation},ke&&(Ae[37]=!0,Te.animateEvent&&Te.off("animation",Te.animateEvent),Te.animateEvent=Te.on("animation",function(){c.update()})),ke=!1,To.animate.apply(To.animate,Ae));if(To.isEmpty(V))return c}}if(!zot(c)){c.tweenStates||(c.tweenStates={all:!0});var Ee,Ie,Me=!1;if(V.note){if(Array.isArray(V.note))To.loop(V.note,function(e,t){"string"==typeof e&&(V.note[t]=To.Synth.note(e))});else if(V.note.min)V.note.min=To.Synth.note(V.note.min),V.note.max=To.Synth.note(V.note.max);else if(V.note.array)To.loop(V.note.array,function(e,t){"string"==typeof e&&(V.note.array[t]=To.Synth.note(e))});else if("function"==typeof V.note){if(zon)return zog("animate() - use frequency in ZIM VEE functions not note"),c}else V.note=To.Synth.note(V.note);V.frequency=V.note,delete V.note}"Sprite"!=c.type&&c.hasOwnProperty("paused")||(Object.defineProperty(c,"paused",{get:function(){return c.animatePaused},set:function(e){c.animatePaused=e}}),c.paused=!0,c.animating=!1),c.endTween=function(n,e){return c.stopAnimate(e),"all"!=n&&"main"!=n&&"none"!=n&&(n="all"),c.seriesTweens?(To.loop(c.seriesTweens,function(t,e,o){To.loop(t,function(e){"string"==typeof t[e]&&(t[e]=c[e]+Number(t[e].replace(/\s/g,""))),oo(c,e,t[e])}),"all"==n&&c.seriesCalls[e]&&c.seriesCalls[e](c.seriesParams[e])}),"none"==n||(e=c.seriesCalls[c.seriesCalls.length-1])&&e(c.seriesParams[c.seriesParams.length-1]),c.seriesTweens=null,c.seriesCalls=null,c.seriesParams=null):(To.loop(c.zimLastObj,function(e){"string"==typeof c.zimLastObj[e]&&(c.zimLastObj[e]=c[e]+Number(c.zimLastObj[e].replace(/\s/g,""))),oo(c,e,c.zimLastObj[e])}),"none"!=n&&d&&d(h)),c.stage&&c.stage.update(),c},effectCheck=!1,To.loop(V,function(e,t){c.zimTweenOriginals[e]="path"==e?V[e]:to(c,e),e.match("hue")?(V.hueBatch=t,delete V.hue,effectCheck=!0):e.match("saturation")?(V.saturationBatch=t,delete V.saturation,effectCheck=!0):e.match("brightness")?(V.brightnessBatch=t,delete V.brightness,effectCheck=!0):e.match("contrast")?(V.contrastBatch=t,delete V.contrast,effectCheck=!0):e.match(/^.effects/)&&(effectCheck=!0)}),c.resetTween=function(e){zot(e)&&(e=!0),c.pauseAnimate(),c.percent=null,c.startPercent=null;var o=c.zimSeriesOriginals||c.zimTweenOriginals;return To.loop(o,function(e){var t;"path"==e?(c.percentComplete=0,c.zimPath=o[e],t=(c.zimStartPercent,c.zimPath.getCurvePoint(c.zimStartPercent/100)),c.loc(t.x,t.y)):oo(c,e,o[e])}),c.zimLastObj=null,c.stage&&c.stage.update(),c.stopAnimate(),c.zimPath&&(oe[1].path=c.zimPath),zot(c.zimStartRotation)||(c.rotation=c.zimStartRotation),c.zimStartRotation=null,zot(c.zimStartScaleX)||(c.scaleX=c.zimStartScaleX),c.zimStartScaleX=null,zot(c.zimStartScaleY)||(c.scaleY=c.zimStartScaleY),c.zimStartScaleY=null,To.animate.apply(null,c.zimSeriesArgs||oe),c.pauseAnimate(e),c},c.replayTween=function(){return c.resetTween(!1),c},(V.path||X)&&(c.requestedPercentComplete?Qt=c.requestedPercentComplete:c.percentComplete&&(Ee=c,Ie="percentComplete",!Object.getOwnPropertyDescriptor(Ee,Ie).get)&&(Qt=c.percentComplete),c.requestedPercentComplete=null,zot(Qt)&&(Qt=0),c.pathRatio=0,c.zimStartRotation=c.rotation,c.percent=null,c.startPercent=null),I&&(S=!1),zot(c.zimTweens)&&(c.zimTweens={}),I||(c.stage?Ne=c.stage:zdf?Ne=zdf.stage:I=!0),c.setColorRange&&!zot(V.color)&&(De=V.color,delete V.color,V.colorRange=1,c.setColorRange(c.color,De),c.colorRange=0);var Oe,je,Le,_e={};for(ie in V)0<=ae.indexOf(ie)||(_e[ie]=To.copy(V[ie]),V[ie]=To.Pick.choose(V[ie]));for(Oe in zot(V.scale)||(V.scaleX=V.scaleY=To.Pick.choose(V.scale),delete V.scale),V){if(!c.zimBusy)break;c.zimBusy[Oe]&&delete V[Oe]}if(!To.isEmpty(V)){for(ie in"Sprite"!=c.type&&(c.paused=!1,c.animating=!0),(M||E.loop||E.rewind)&&(c.zimMouseEnabledCheck||(c.zimMouseEnabledCheck=!0,c.zimLastMouseEnabled=c.mouseEnabled),c.mouseEnabled=!1,setTimeout(function(){for(var e in c.zimBusy||(c.zimBusy={}),V)c.zimBusy[e]=!0;c.zimMouseEnabledCheck=null,c.mouseEnabled=c.zimLastMouseEnabled},70)),no(),ae.shift(),L)L[ie]=To.Pick.choose(L[ie]);for(ie in E)"waitedCall"!=ie&&"waitedParams"!=ie&&"loopCall"!=ie&&"rewindCall"!=ie&&"loopWaitCall"!=ie&&"rewindWaitCall"!=ie&&(E[ie]=To.Pick.choose(E[ie]));io(),function(){var e;for(ie in L){if("string"==typeof L[ie]){if("+"==L[ie].substr(0,1))continue;e=(c.zimLastObj&&!zot(c.zimLastObj[ie])?c.zimLastObj:c)[ie],L[ie]=e+Number(L[ie].replace(/\s/g,""))}c.zimLastObj[ie]=(z?c.zimTweenOriginals:V)[ie]}}(),c.seriesTweens&&(c.seriesTweens[0]=V),!void(j&&!Me&&(V=lo(c,V,L,!0))),c.getBounds&&zot(c.percentCompleteCheck)&&(c.percentCompleteCheck=!0,Object.defineProperty(c,"percentComplete",{get:function(){return this.zimTween&&this.zimTween.duration?this.zimTween.position/this.zimTween.duration*100:0},set:function(e){this.zimTween?ao(e,nt=!0):this.requestedPercentComplete=e}}),Object.defineProperty(c,"percentCompleteNoAngle",{get:function(){return this.zimTween&&this.zimTween.duration?this.zimTween.position/this.zimTween.duration*100:0},set:function(e){this.zimTween?ao(e,!1):this.requestedPercentComplete=e}})),Object.defineProperty(c,"rate",{get:function(){return c.futureRate},set:function(o){c.futureRate=o,To.loop(c.zimTweens,function(e,t){t.timeScale=o})},configurable:!0}),!zot(V.path)&&V.path.segmentPoints&&(zot(V.orient)&&(V.orient=!0),V.orient&&zot(V.flip)&&(V.flip=!0),"Pen"==c.type&&(c.infinite=!0),c.zimOnPath=!0,zot(c.pathRatio)&&(c.pathRatio=0),V.orient&&(V.orient=V.path,V.startOrient=V.rotation),je=V.path,R?(delete V.path,delete V.percent,(zon&&c.startPercent&&0<c.startPercent||c.percent&&100!=c.percent)&&zog("ZIM.animate() - startPercent and percent currently not supported with drag on path"),(Xe=je.getCurvePoint(c.pathRatio,Ye,Ge))&&(Xe.z,Ct=c.parent.globalToLocal(Xe.x,Xe.y),c.x=Ct.x,c.y=Ct.y)):(zot(c.startPercent)&&(c.startPercent=To.Pick.choose(zot(V.startPercent)?0:V.startPercent)),zot(c.percent)&&(c.percent=To.Pick.choose(zot(V.percent)?100:V.percent)),delete V.path,delete V.percent),Le=!je.lockControls,delete V.path,V.pathRatio=1);c.percentComplete;var Ye,De,Xe,Re,We,Fe,He,Ve,Ne,Ge,qe,Ue,Qe,Ze,Ke,Je,$e,et,tt,ot,nt,rt,it,at,lt,st,ct,ut=!0,dt=!1,ht=!0,gt=!0;zot(V.redirect)||(gt=V.redirect,delete V.redirect),je&&(Le||(Ge=To.copy(je.segmentPoints),Ye=To.copy(je.segmentRatios)),c.currentPercent=c.startPercent+c.percent*c.pathRatio,De=(1e6+c.currentPercent)%100/100,Xe=je.getCurvePoint(De,Ye,Ge),c.parent&&Xe&&(Ct=c.parent.globalToLocal(Xe.x,Xe.y),c.x=Ct.x,c.y=Ct.y),R&&(u="linear",c.cursor="pointer",Re=c.percentComplete,We=!1,F||c.paused,He=Fe=!0,Ve=Re,Ge=To.copy(je.segmentPoints),qe=0,To.loop(Ge,function(e){qe+=To.distanceAlongCurve(e)}),Ue=Math.round(qe/Ge.length/10),Qe=je.interpolate(Ue,null,!0,null,!0),Ke=Ze=(Re||0)/100*qe,je.zimAnimateChanged=!1,To.copy(je.segmentRatios),c.zimAnimatePathChange=je.on("change",function(){je.zimAnimateChanged=!0}),c.zimAnimatePathDown=je.on("mousedown",function(){We=!0,1==c.paused&&(dt=!0)}),c.zimAnimatePathUp=je.on("pressup",function(){dt=!1}),c.zimAnimateDragDown=c.on("mousedown",function(e){Ne=e.target.stage,c.amu||(c.amu=Ne.frame.on("mouseupplus",function(){dt=!1})),Ne.mouseMoveOutside=!0,ht=!(ut=!1),setTimeout(function(){ut=!0},50),dt=!0,je.zimAnimateChanged&&(Ge=To.copy(je.segmentPoints),qe=0,To.loop(Ge,function(e){qe+=To.distanceAlongCurve(e)}),Ue=Math.round(qe/Ge.length/10),Qe=je.interpolate(Ue,null,!0,null,!0),To.copy(je.segmentRatios)),je.zimAnimateChanged=!1,Re=c.percentComplete,$e.immediate(Re);e=Re;z&&(e=he.position>he.duration/2?2*(100-Re):2*Re),Ke=Ze=(e||0)/100*qe}),Je=!1,c.zimAnimateDragPress=c.on("pressmove",function(e){Je=!0,function(e){var t=je.globalToLocal(e.rawX/To.scaX,e.rawY/To.scaY),e=Ze;"Blob"==je.type&&(ot[0]<ot[4]?He=!0:ot[0]>ot[4]&&(He=!1),e<10&&!He?(Ke=Ze=e=qe-5,$e.immediate(Ke/qe*100),ot=[qe-1,qe-2,qe,qe-3,qe-4]):qe-10<e&&He&&(Ke=Ze=e=5,$e.immediate(Ke/qe*100),ot=[0,0,0,0,0]));var a=t.x,l=t.y,s=e;Qe.sort(function(e,t){var o=e.x,n=e.y,r=e.r*qe,i=t.x,e=t.y,t=t.r*qe;return Math.sqrt(Math.pow(a-o,2)+Math.pow(l-n,2)+Math.pow(s-r,2))-Math.sqrt(Math.pow(a-i,2)+Math.pow(l-e,2)+Math.pow(s-t,2))}),Ke=Qe[0].r*qe,Re=Ke/qe*100,Re=To.constrain(Re,0,99.95),z&&(Re/=2,he.position>he.duration/2&&(Re=100-Re))}(e)}),c.animateReturn=function(){z?(He=Fe=!1,c.percentComplete<50&&(c.percentComplete=100-c.percentComplete),c.pauseAnimate(!1)):zon&&zogy("animate() - animateReturn() needs rewind set to true")},c.zimAnimateDragUp=c.on("pressup",function(){0==c.paused&&(dt=!1),ut=!1,setTimeout(function(){ut=!0},50),ot[0]<ot[4]?He=!0:ot[0]>ot[4]&&(He=!1),!c.paused&&z&&gt&&He!=Fe&&(c.percentComplete=100-c.percentComplete,Fe=He)}),$e=new To.Damp(Re,.15),nt=!(ot=[tt=et=0,0,0,0,0]),c.zimDragAnimateTicker=To.Ticker.add(function(){var e;R&&(++tt%20&&(ot.push(Ke),ot.shift()),Ze=Ke,We&&(Re=c.percentComplete),dt||ht&&1==c.paused?(We||nt||"Blob"==je.type&&Math.abs(et-Re)>(z?45:90)?(We=!1,e=Re,$e.immediate(e),nt=!1):e=$e.convert(Re),.1<Math.abs(et-e)?(c.percentCompleteNoAngle=e,et=e):(c.percentCompleteNoAngle=e,Je=ht=!1)):ht=!1)},Ne))),V.orient&&(!0===V.orient&&(xt=c.parent.localToGlobal((zot(V.x)?c:V).x,(zot(V.y)?c:V).y),V.orient={x:xt.x,y:xt.y}),rt=V.orient,delete V.orient,it=c.rotation,c.rotation=je.getPointAngle(0)+it,rt!=je&&(kt=rt.parent?rt.parent.localToLocal(rt.x,rt.y,c.parent):c.parent.globalToLocal(rt.x,rt.y),c.rotation=To.angle(c.x,c.y,kt.x,kt.y)+it)),V.flip&&(at=V.flip,delete V.flip,lt=c.scaleX),V.flipVertical&&(st=V.flipVertical,delete V.flipVertical,ct=c.scaleY);var pt=c.x,ft=c.y,mt=0;E.loop&&(zot(E.count)||(mt=E.count,delete E.count,be=1));var zt,yt=0;E.loopWait&&(yt=E.loopWait,l=E.loopWait,delete E.loopWait),E.loopCall&&(zt=E.loopCall,delete E.loopCall);var bt,vt=c;E.loopParams&&(vt=E.loopParams,delete E.loopParams),TIMECHECK&&J&&(fe&&Po(fe,ee),me&&Po(me,ee),a&&Po(a,ee),It&&Po(It,ee),yt&&Po(yt,ee),l&&Po(l,ee),E.rewindWait&&Po(E.rewindWait,ee),N&&Po(N,ee),G&&Po(G,ee)),"s"==ee&&(fe&&(fe*=1e3),me&&(me*=1e3),a&&(a*=1e3),It&&(It*=1e3),yt&&(yt*=1e3),l&&(l*=1e3),E.rewindWait&&(E.rewindWait*=1e3),N&&(N*=1e3),G&&(G*=1e3)),E.loopWaitCall&&(bt=E.loopWaitCall,delete E.loopWaitCall);var wt=c;E.loopWaitParams&&(wt=E.loopWaitParams,delete E.loopWaitParams);var Ct,xt,kt,Tt,At,Pt,Bt,St,Et,It,Mt,Ot,jt,Lt,_t;-1!=["ballisticIn","ballisticOut","ballisticInOut","snapIn","snapOut","snapInOut","slowmoIn","slowmoOut","slowmoInOut"].indexOf(u)&&(Ct=[.4,.75,.9,.95],xt=[.99,-.69,.53,.014],kt=[1.18,.69,1,.96],"ballisticIn"==u?u=zik(To.zimEase(Ct)):"ballisticOut"==u?u=zik(To.zimEase(Ct).reverse()):"ballisticInOut"==u?u=zik(To.zimEase(Ct,null,!0)):"snapIn"==u?u=zik(To.zimEase(xt)):"snapOut"==u?u=zik(To.zimEase(xt).reverse()):"snapInOut"==u?u=zik(To.zimEase(xt,null,!0)):"slowmoIn"==u?u=zik(To.zimEase(kt)):"slowmoOut"==u?u=zik(To.zimEase(kt).reverse()):"slowmoInOut"==u&&(u=zik(To.zimEase(kt,null,!0)))),E.rewind&&(u&&(u instanceof Function?Tt=zik(u.reverse()):-1==(Tt=u).indexOf("InOut")&&(-1!=Tt.indexOf("Out")?Tt=Tt.replace("Out","In"):-1!=Tt.indexOf("In")&&(Tt=Tt.replace("In","Out")))),k&&(Tt=k)),At=u instanceof Function?u:(Bt="get"+u.charAt(0).toUpperCase()+u.slice(1),St=zik(Q),Et=zik(Z),zot(St)&&zot(Et)||!createjs.Ease[Bt]?createjs.Ease[u]:(!zot(Et)&&zot(St)&&(St=1),!zot(St)&&zot(Et)&&(Et=.3*1.5),createjs.Ease[Bt](St,Et))),Tt&&(Pt=Tt instanceof Function?Tt:(Bt="get"+Tt.charAt(0).toUpperCase()+Tt.slice(1),St=zik(Q),Et=zik(Z),zot(St)&&zot(Et)||!createjs.Ease[Bt]?createjs.Ease[Tt]:(!zot(Et)&&zot(St)&&(St=1),!zot(St)&&zot(Et)&&(Et=.3*1.5),createjs.Ease[Bt](St,Et)))),E.rewind?(It=0,delete E.rewind,z=!0,y=E.rewindWait,E.rewindWait&&(It=E.rewindWait,delete E.rewindWait),E.rewindCall&&(Mt=E.rewindCall,zot(Ot=E.rewindParams)&&(Ot=c),delete E.rewindCall,delete E.rewindParams),E.rewindWaitCall&&(jt=E.rewindWaitCall,zot(Lt=E.rewindWaitParams)&&(Lt=c),delete E.rewindWaitCall,delete E.rewindWaitParams),0<N||0<G||0<a?0<N||0<G?(c.waiting=!0,(he=c.zimTweens[_]=c.zimTween=createjs.Tween.get(c,{override:E.override}).wait(0<N?N:0,!0).wait(0<G?G:0,!0).call(function(e){e.waiting=!1,G=N=0,go(he)})).timeScale=c.futureRate):go():(ro(),po())):0<N||0<G||0<a?0<N||0<G?(c.waiting=!0,(he=c.zimTweens[_]=c.zimTween=createjs.Tween.get(c,{override:E.override}).wait(0<N?N:0,!0).wait(0<G?G:0,!0).call(function(){G=N=0,c.waiting=!1,fo(he)})).timeScale=c.futureRate):fo():(ro(),mo()),he.startPaused=F,he.rewinding=!1,zot(q)||(he.timeScale=To.Pick.choose(q)),!I&&S&&(Qt&&(c.pathRatio=c.percentComplete&&100!=Math.round(c.percentComplete)?c.percentComplete/100:0,c.percentCompleteNoAngle=100!=Math.round(Qt)?Qt:0),_t=Y&&!zot(D)&&D.dispatchEvent?To.Ticker.add(function(){effectCheck&&c.updateEffects(),(je||rt||at||st)&&Dt(),D.dispatchEvent("animation")},Ne):Y&&c.dispatchEvent?To.Ticker.add(function(){effectCheck&&c.updateEffects(),(je||rt||at||st)&&Dt(),c.dispatchEvent("animation")},Ne):To.Ticker.add(function(){effectCheck&&c.updateEffects(),(je||rt||at||st)&&Dt()},Ne));var Yt=[1,1,1],Dt=function(){var e,t,o,n;!c.parent||he.passive||he.startPaused||(R&&z&&(Ve<50&&50<c.percentComplete||50<Ve&&c.percentComplete<50)&&(Fe=c.percentComplete<50),Ve=c.percentComplete,je&&(Le&&(Ge=je.segmentPoints,Ye=je.segmentRatios),(e=R?je.getCurvePoint(c.pathRatio,Ye,Ge):(c.currentPercent=c.startPercent+c.percent*c.pathRatio,e=(1e6+c.currentPercent)%100/100,1==c.pathRatio&&(e+=0<c.percent?1:0),je.getCurvePoint(e,Ye,Ge)))&&(e.z,t=c.parent.globalToLocal(e.x,e.y),c.x=t.x,c.y=t.y)),t=90==it||270==it||-90==it,at&&ut&&(pt>c.x&&To.sign(t?c.scaleY:c.scaleX)==To.sign(lt)&&(t?c.scaleY*=-1:c.scaleX*=-1),pt<c.x&&To.sign(t?c.scaleY:c.scaleX)!=To.sign(lt)&&(t?c.scaleY*=-1:c.scaleX*=-1)),st&&ut&&(ft>c.y&&To.sign(t?c.scaleX:c.scaleY)==To.sign(ct)&&(t?c.scaleX*=-1:c.scaleY*=-1),ft<c.y&&To.sign(t?c.scaleX:c.scaleY)!=To.sign(ct)&&(t?c.scaleX*=-1:c.scaleY*=-1)),rt&&0!=(o=je==rt?To.angle(pt,ft,c.x,c.y)+it:(o=rt.parent?rt.parent.localToLocal(rt.x,rt.y,c.parent):c.parent.globalToLocal(rt.x,rt.y),To.angle(c.x,c.y,o.x,o.y)+it))&&(c.paused&&!Je||(at&&0<pt-c.x&&(o+=180),n=o,!at&&0<pt-c.x&&(n=o-180),c.rotation=n==it?c.rotation:n)),R&&(n=c.x-pt+c.y-ft,2<Math.abs(n)&&(Yt.push(To.sign(n)),Yt.shift(),he.forward=function(e){if(Array.isArray(e)){for(var t=0,o=0,n=e.length;o<n;o++)t+=e[o];return t}}(Yt))),pt=c.x,ft=c.y)};je&&(c.handlePath=Dt),zot(c.zimMaskDynamic)||c.zimMaskApply();var Xt,Rt=!1;vo(),c.stopAnimate&&c.stopAnimate.real||(c.stopAnimate=function(e,t,o,n,r){if(!r||!R){if(zot(e)&&(c.tweenStates={}),t)return c.endTween(null,e),c;if(zot(n)&&(n=!0),null==c.pan&&(c.paused=!0,c.animating=!1),"Pen"==c.type&&c.zimOnPath&&(c.stop(),c.zimOnPath=!1),zot(o)&&(o=!0),n&&R&&(je&&je.off("change",c.zimAnimatePathChange),c.off("mousedown",c.zimAnimateDragDown),c.off("pressmove",c.zimAnimateDragPress),c.off("pressup",c.zimAnimateDragUp),c.amu&&Ne.frame.off("mouseupplus",c.amu),To.Ticker.remove(c.zimDragAnimateTicker)),zot(e)){if(!o)return c;for(var i in c.zimBusy=null,createjs.Tween.removeTweens(c),c.zimTweens)Co(i);c.zimTweens=null,c.zimIdSets=null,c.zimTween=null,To.idSets&&To.idSets[ge||i]&&(delete To.idSets[ge||i],To.isEmpty(To.idSets)&&delete To.idSets),To.animatedObjects.remove(c)}else{Array.isArray(e)||(e=[e]);var a=ko(e);for(i in c.zimTweens)c.zimTweens[i].requestID&&cancelAnimationFrame(c.zimTweens[i].requestID),o&&0<=a.indexOf(i)&&wo(i),!o&&a.indexOf(i)<0&&wo(i)}return c}c.pauseAnimate()},c.stopAnimate.real=!0,c.pauseAnimate=function(e,t,o,n){if("pauseOnBlur"==t?t=null:zot(t)&&(c.tweenStates={all:!1===e}),"Pen"==c.type&&(!1===e?c.zimOnPath&&(c.infinite=!0):c.stop()),Vt&&!n)return c.pause(e,t),c;if(zot(e)&&(e=!0),dt=!1,c.paused=e,c.animating=!e,zot(o)&&(o=!0),zot(t)&&!o)return c;if(zot(t))for(var r in c.zimTweens)xo(r,e);else{Array.isArray(t)||(t=[t]);var i=ko(t);for(r in c.zimTweens)o&&0<=i.indexOf(r)&&(xo(r,e),c.tweenStates[r]=!e),!o&&i.indexOf(r)<0&&(xo(r,e),c.tweenStates[r]=!e)}return"Sprite"==c.type&&(c.running||c.stop()),c}),F&&c.pauseAnimate(!0,_,null,!0),V.extra&&(Xt=V.extra,delete V.extra,Array.isArray(Xt)||(Xt=[Xt]));for(var Wt,Ft,Ht,Vt,Nt,Gt,qt,Ut,Qt,Zt,Kt,ie=0;ie<ae.length;ie++){var Jt=ae[ie];V[Jt]&&(zot(Xt)&&(Xt=[]),!0===(Ft=V[Wt=Jt])?Xt.push({outputProp:le[Wt]}):Array.isArray(Ft)?Xt.push({outputProp:le[Wt],outputMin:Ft[0],outputMax:Ft[1],inputMin:Ft[2],inputMax:Ft[3]}):Xt.push({outputProp:le[Wt],outputMax:Ft}),delete V[Jt])}if(Xt){c.zimStartScaleX=c.scaleX,c.zimStartScaleY=c.scaleY,he.extraTickers=[];for(ie=0;ie<Xt.length;ie++){var Se,$t=Xt[ie];for(Se in zot($t.inputObj)&&($t.inputObj=c),zot($t.inputProp)&&($t.inputProp="y"),zot($t.inputMin)&&($t.inputMin=0),zot($t.inputMax)&&($t.inputMax="x"==$t.inputProp?Ne.width:Ne.height),zot($t.outputObj)&&($t.outputObj=c),zot($t.outputProp)&&($t.outputProp="scale"),zot($t.outputMin)&&($t.outputMin=0),zot($t.outputMax)&&($t.outputMax=$t.outputMin+1),zot($t.constrain)&&($t.constrain=!0),$t)V[Se]=To.Pick.choose(V[Se]);"percentSpeed"==$t.outputProp&&(X=!0),Ht=new To.Proportion($t.inputMin,$t.inputMax,$t.outputMin,$t.outputMax,$t.factor,$t.outputRound);var eo=function(){var n=$t,r=Ht;return function(){var e,t=n.outputObj,o=n.inputObj[n.inputProp];"x"!=n.inputProp&&"y"!=n.inputProp||n.inputObj.parent&&(o=n.inputObj.parent.localToGlobal(o,o)[n.inputProp]),e=n.constrain?To.constrain(r.convert(o),n.outputMin,n.outputMax):r.convert(o),Number.isNaN(e)&&(e=null!=n.outputMin?n.outputMin:0),"scale"==n.outputProp?(t.scaleX=To.sign(t.scaleX)*e,t.scaleY=To.sign(t.scaleY)*e):"scaleX"==n.outputProp?t.scaleX=To.sign(t.scaleX)*e:"scaleY"==n.outputProp?t.scaleY=To.sign(t.scaleY)*e:"layer"==n.outputProp?!t.parent||(o=To.constrain(Math.round(e),0,t.parent.numChildren-1))!=t.parent.getChildIndex(t)&&t.parent.setChildIndex(t,o):"percentSpeed"==n.outputProp?t[n.outputProp]=100*e:t[n.outputProp]=e}}();eo(),he.extraTickers.push(To.Ticker.add(eo,Ne))}}return(X||c.zimAnimateDragDown)&&(X&&(Vt=!0,c.pauseAnimate(!0,_,null,!0),c.paused=!1,c.animating=!0,he.currentTime=0,Nt=he,zot(c.percentSpeed)&&(c.percentSpeed=he.startPaused?0:100),Gt=1e3/60,he.currentTime=0,qt=!G&&!N&&!a&&!mt&&E.loop,W&&E.loop&&!mt&&(W=!1),Ut=t+(z?x||t:0)+(y||0)+(l||0),Ut*="s"==ee?1e3:1,Qt=1,E.loop&&mt&&(Qt=mt),W&&(Zt=Ut*Qt),function e(){var t;he.requestID=requestAnimationFrame(e),!X||he.startPaused&&0==c.percentSpeed||(he.startPaused=!1,he!=Nt&&((Nt=he).currentTime=0,c.pauseAnimate(!0,_,null,!0),c.paused=!1,c.animating=!0,qt=!G&&!N&&!a&&!mt&&E.loop),qt&&(he.currentTime+=1e4*Ut,he.setPosition(he.currentTime,!0),qt=!1),t=he.currentTime+Gt*c.percentSpeed/100,Zt&&0==a&&(t=To.constrain(t,0,Zt)),he.currentTime=t,he.setPosition(he.currentTime),(je||rt||at||st)&&Dt(),Ne.update())}()),c.pause=function(e,t){if(zot(e)&&(e=!0),zot(t)&&(t=0),e){if(c.zimAnimateDragDown&&(R=!1,c.cursor="default",je&&je.off("change",c.zimAnimatePathChange),c.off("mousedown",c.zimAnimateDragDown),c.off("pressmove",c.zimAnimateDragPress),c.off("pressup",c.zimAnimateDragUp),!X))return;Kt=c.percentSpeed,0<t?To.animate({target:c,props:{percentSpeed:0},override:!1,ticker:!1,time:t,call:function(){c.percentSpeed=0,c.paused=!0,c.animating=!1,X=!1,c.dispatchEvent("pause")}}):(he.startPaused=!1,c.percentSpeed=0,c.paused=!0,c.animating=!1,X=!1,setTimeout(function(){c.dispatchEvent("pause")},10))}else{if(c.zimAnimateDragDown&&(R=!0,c.cursor="pointer",je&&(c.zimAnimatePathChange=je.on("change",c.zimAnimatePathChange)),c.zimAnimateDragDown=c.on("mousedown",c.zimAnimateDragDown),c.zimAnimateDragPress=c.on("pressmove",c.zimAnimateDragPress),c.zimAnimateDragUp=c.on("pressup",c.zimAnimateDragUp),!X&&0!=F))return;dt=!1,he.currentTime=he.position,0<t?To.animate({target:c,props:{percentSpeed:Kt},override:!1,ticker:!1,time:t,call:function(){c.percentSpeed=Kt,c.paused=!1,c.animating=!0,X=!0}}):(c.percentSpeed=Kt,c.paused=!1,c.animating=!0,X=!0)}return c}),c}}}function to(e,t){if("."!=t.substr(0,1))return e[t];for(var o=t.split("."),n=e,r=1;r<o.length;r++)n=n[o[r]];return n}function oo(e,t,o){if("."==t.substr(0,1)){for(var n=t.split("."),r=e,i=1;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=o}else e[t]=o}function no(){zot(_)?_=To.makeID(10):(_=String(_),pe=_),zot(c.zimIdSets)&&(c.zimIdSets={}),zot(c.zimIdSets[_])?zot(c.zimTweens[_])||(ge=_,_=To.makeID(10),c.zimIdSets[ge]=[ge],c.zimTweens[ge].zimIdSet=ge,c.zimIdSets[ge].push(_)):(ge=_,_=To.makeID(10),c.zimIdSets[ge].push(_))}function ro(){io(),j&&!Me&&(V=lo(c,V,L,!0))}function io(){var e;for(ie in c.zimLastObj||(c.zimLastObj={}),V){if("string"==typeof V[ie]){if("+"==V[ie].substr(0,1))continue;e=(c.zimLastObj&&!zot(c.zimLastObj[ie])?c.zimLastObj:c)[ie],V[ie]=e+Number(V[ie].replace(/\s/g,""))}c.zimLastObj[ie]=(z?c.zimTweenOriginals:V)[ie]}}function ao(e,t){c.zimTween.startPaused=!1,X?zot(c.zimTween.currentTime)||(c.zimTween.currentTime=c.zimTween.currentTime-c.zimTween.position+e*c.zimTween.duration/100):c.zimTween.setPosition(Math.round(e*c.zimTween.duration/100)),t&&je&&!1!==V.orient&&je.getCurvePoint&&(c.rotation=je.getCurvePoint(e/100,null,null,!0).angle+(it||0)),nt&&void 0!==Re&&(Re=e),c.handlePath&&c.handlePath()}function lo(e,t,o,n){Me=!0,je&&(!zot(e.percentComplete)||o&&!zot(o.percentComplete))&&zot((o=o||{}).pathRatio)&&(o.pathRatio=zot(o.percentComplete)?e.percentComplete/100:o.percentComplete/100);var r={};for(ie in t)o&&!zot(o[ie])?r[ie]=o[ie]:r[ie]=e[ie],n&&(e[ie]=t[ie]);return r}function so(){if((0<yt&&(c.waiting=!1),E.loop)&&(A&&"function"==typeof A&&(o=zot(P)?c:P,A(o)),zt&&"function"==typeof zt&&zt(vt),m)){var e,t,o=To.Pick.choose(c.futureRate);if(zot(c.futureRate)||(he.timeScale=o),zot(_e.scale)||(e=To.Pick.choose(_e.scale)),!j&&he.step&&he.step.prev&&he.step.prev.props)for(var n in he.step.prev.props)0<=ae.indexOf(n)||("string"==typeof(t=To.Pick.choose(_e[n]))&&"+"!=t.substr(0,1)&&(t=(c.zimLastObj&&!zot(c.zimLastObj[n])?c.zimLastObj:c)[n]+Number(t.replace(/\s/g,""))),c.zimLastObj[n]=z?c.zimTweenOriginals[n]:t,zot(_e[n])||(he.step.prev.props[n]=t),"scaleX"!=n||zot(e)||(he.step.prev.props.scaleX=e),"scaleY"!=n||zot(e)||(he.step.prev.props.scaleY=e))}}function co(){bt&&"function"==typeof bt&&bt(wt)}function uo(){0<It&&(c.waiting=!1),Mt&&"function"==typeof Mt&&Mt(Ot)}function ho(){0<It&&(c.waiting=!0),jt&&"function"==typeof jt&&jt(Lt)}function go(e){ro(),0<a&&(c.waiting=!0),(he=c.zimTweens[_]=c.zimTween=createjs.Tween.get(c,{override:E.override}).wait(a,!0).call(function(){c.waiting=!1,o&&"function"==typeof o&&o(zot(n)?c:n),a=0,po(he)})).timeScale=c.futureRate,e&&zo(e,he)}function po(e){var t=bo();c.set&&!j&&c.set(L),(he=c.zimTweens[_]=c.zimTween=createjs.Tween.get(c,E).to(V,fe,At).call(ho).wait(It,!0).call(uo).to(t,me,Pt).call(yo).wait(yt,!0).call(so)).timeScale=c.futureRate,e&&zo(e,he),vo()}function fo(e){ro(),0<a&&(c.waiting=!0),(he=c.zimTweens[_]=c.zimTween=createjs.Tween.get(c,{override:E.override}).wait(a,!0).call(function(){a=0,c.waiting=!1,o&&"function"==typeof o&&o(zot(n)?c:n),mo(he)})).timeScale=c.futureRate,e&&zo(e,he)}function mo(e){c.set&&!j&&c.set(L),(he=c.zimTweens[_]=c.zimTween=createjs.Tween.get(c,E).to(V,fe,At).call(yo).wait(yt,!0).call(so)).timeScale=c.futureRate,e&&zo(e,he),vo()}function zo(e,t){t.zimIdSet=e.zimIdSet,t.zimObj=e.zimObj,t.zimTicker=e.zimTicker,t.zimExtraTickers=e.zimExtraTickers,t.requestID=e.requestID}function yo(){if(c.seriesTweens&&c.seriesTweens.shift(),c.seriesCalls&&c.seriesCalls.shift(),c.seriesParams&&c.seriesParams.shift(),c.paused&&"Sprite"!=c.type)d&&"function"==typeof d&&d(h);else{if(E.loop){if(!(0<mt))return 0<yt&&(c.waiting=!0),void co();if(be<mt)return 0<yt&&(c.waiting=!0),co(),void be++;z?c.set&&c.set(bo()):c.set&&c.set(V)}var e;H?wo(_):c.pauseAnimate(!0,_),!E.loop&&A&&"function"==typeof A&&(e=zot(P)?c:P,A(e)),d&&"function"==typeof d&&d(h)}}function bo(){var e,t={};for(e in V)if(I&&c.style)zot(L[e])||j?t[e]=c.style[e]:t[e]=L[e];else if(zot(L[e])||j)if("."==e.substr(0,1)){for(var o=e.split("."),n=c,r=1;r<o.length;r++)n=n[o[r]];t[e]=n}else t[e]=c[e];else t[e]=L[e];return t}function vo(){he.zimObj=V,he.zimTicker=_t,he.zimPaused=Rt,ge&&(he.zimIdSet=ge),pe&&(zot(To.idSets)&&(To.idSets={}),zot(To.idSets[pe])?To.idSets[pe]=[c]:To.idSets[pe].indexOf(c)<0&&To.idSets[pe].push(c)),To.animatedObjects||(To.animatedObjects=new To.Dictionary(!0)),To.animatedObjects.add(c,!0)}function wo(e){var t,o;c.tweenStates&&c.tweenStates[e]&&delete c.tweenStates[e],zot(c.zimTweens)||zot(c.zimTweens[e])||(c.zimX=null,c.zimY=null,function(e){if(c.zimBusy){for(var t in e)delete c.zimBusy[t];To.isEmpty(c.zimBusy)&&(c.zimBusy=null)}}(c.zimTweens[e].zimObj),c.zimTweens[e].paused=!0,Co(e),!zot(t=c.zimTweens[e].zimIdSet)&&c.zimIdSets&&((o=c.zimIdSets[t])&&o.splice(o.indexOf(e),1),o&&0==o.length&&(delete c.zimIdSets[t],To.isEmpty(c.zimIdSets)&&delete c.zimIdSets)),"Pen"==c.type&&c.zimOnPath&&(c.stop(),c.zimOnPath=!1),delete c.zimTweens[e],To.isEmpty(c.zimTweens)&&c.stopAnimate(null,null,null,!1,!0),c.zimTweens&&c.zimTweens[e]||c.zimIdSets&&c.zimIdSets[t||e]||To.idSets&&To.idSets[t||e]&&(To.idSets[t||e],0<=(o=To.idSets[t||e].indexOf(c))&&To.idSets[t||e].splice(o,1),To.idSets[t||e].length<=0&&(delete To.idSets[t||e],To.isEmpty(To.idSets)&&delete To.idSets)))}function Co(o){!function(){var e=c.zimTweens[o].zimTicker;if(c.zimTweens[o].extraTickers)for(var t=0;t<c.zimTweens[o].extraTickers.length;t++)To.Ticker.remove(c.zimTweens[o].extraTickers[t]);c.zimTweens[o].requestID&&cancelAnimationFrame(c.zimTweens[o].requestID),e&&setTimeout(function(){e&&To.Ticker.remove(e),e=null},200)}()}function xo(e,t){var o=c.zimTweens[e];(o.paused=t)!=o.zimPaused&&((o.zimPaused=t)?o.zimTicker&&(o.zimAnimateTimeout=setTimeout(function(){To.Ticker.remove(o.zimTicker)},200)):(o.startPaused=!1,clearTimeout(o.zimAnimateTimeout),o.zimTicker&&(o.zimTicker=To.Ticker.add(o.zimTicker,Ne))))}function ko(e){for(var t=[],o=0;o<e.length;o++)c.zimIdSets&&!zot(c.zimIdSets[e[o]])?t=t.concat(c.zimIdSets[e[o]]):t.push(e[o]);return t}},To.stopAnimate=function(e,t){if(z_d("45.12"),zot(e)){if(To.animatedObjects)for(var o=To.animatedObjects.length-1;0<=o;o--)To.animatedObjects.objects[o].stopAnimate(null,t)}else if(Array.isArray(e)||(e=[e]),To.idSets)for(var n=0;n<e.length;n++){var r=e[n];if(To.idSets[r])for(o=To.idSets[r].length-1;0<=o;o--)To.idSets[r][o].stopAnimate(r,t)}},To.stopZimAnimate=function(e){z_d("45.1"),To.stopAnimate(e)},To.pauseAnimate=function(e,t){if(z_d("45.22"),zot(e)&&(e=!0),zot(t)||"pauseOnBlur"==t){if(To.animatedObjects)for(var o=To.animatedObjects.length-1;0<=o;o--)To.animatedObjects.objects[o].pauseAnimate(e,t)}else if(Array.isArray(t)||(t=[t]),To.idSets)for(var n=0;n<t.length;n++){var r=t[n];if(To.idSets[r])for(o=To.idSets[r].length-1;0<=o;o--)To.idSets[r][o].pauseAnimate(e,r)}},To.pauseZimAnimate=function(e,t){z_d("45.2"),To.pauseAnimate(e,t)},To.wiggle=function(r,i,a,l,s,c,u,e,d,h,g,p,f,t,m){if(o=zob(To.wiggle,arguments,"target, property, baseAmount, minAmount, maxAmount, minTime, maxTime, totalTime, type, ease, integer, id, startType, ticker, wait"))return o;if(z_d("45.25"),zot(r)||zot(a)||zot(l))return r;zot(s)&&(s=l);var o=Ao(c,null,40);zot(c)&&(c="s"==o?1:1e3),zot(u)&&(u=c),Po(u,o,40),zot(h)&&(h="quadInOut"),zot(g)&&(g=!1),zot(p)&&(p=To.makeID()),zot(d)&&(d="both"),zot(f)&&(f="both"),zot(t)&&(t=!0),zot(m)&&(m=0),Po(e,o,40),zot(e)||(r.wiggleTimeout=setTimeout(function(){r.stopAnimate(p),r.dispatchEvent("wigglestop")},e*("s"==o?1e3:1)));var z,y=0;function b(){var e,t=To.rand(To.Pick.choose(c),To.Pick.choose(u),!1),o={},n={};n[i]=To.Pick.choose(a),e="negative"==d||0==y&&"negative"==f?-To.rand(To.Pick.choose(l),To.Pick.choose(s),g):"positive"==d||0==y&&"positive"==f?To.rand(To.Pick.choose(l),To.Pick.choose(s),g):0==y?To.rand(To.Pick.choose(l),To.Pick.choose(s),g,!0):To.rand(To.Pick.choose(l),To.Pick.choose(s),g)*To.sign(z)*-1,o[i]=To.Pick.choose(a)+e,0==y&&(t/=2),z=e,y++,"negative"==d||"positive"==d?To.animate({target:r,obj:o,set:n,ease:h,time:2*t,wait:zik(m),rewind:!0,override:!1,call:b,id:p,ticker:!!r.stage,timeCheck:!1}):To.animate({target:r,obj:o,ease:h,time:t,wait:zik(m),override:!1,call:b,id:p,ticker:!!r.stage,timeCheck:!1})}return r.addTo&&!r.stage?r.added(b):b(),r},To.loop=function(e,t,o,n,r,i){var a;if(a=zob(To.loop,arguments,"obj, call, reverse, step, start, end"))return a;if(To.zimLoopCheck||z_d("45.3"),To.zimLoopCheck=!0,!zot(e)&&!zot(t)){zot(o)&&(o=!1),(zot(n)||n<=0)&&(n=1);var l="number"==typeof e?"number":e.constructor===Array?"array":e.constructor==={}.constructor?"object":e instanceof NodeList?"nodelist":"string"==typeof e?"string":e instanceof HTMLCollection?"htmlcollection":"invalid";if("container"!=l||e.addChild)if("number"==l||"string"==l||"array"==l||"nodelist"==l||"htmlcollection"==l){if(0!=(c=g((u="number"==l?e:e.length)-1))){if(o){for(var s=r;i<=s;s-=n)if(void 0!==(h="number"==l?t(s,c,r,i,e):t("array"==l||"string"==l?e[s]:e.item(s),s,c,r,i,e)))return h}else for(s=r;s<=i;s+=n)if(void 0!==(h="number"==l?t(s,c,r,i,e):t("array"==l||"string"==l?e[s]:e.item(s),s,c,r,i,e)))return h;return!0}}else if("object"==l){var c,u=0,d=[];for(s in e)u++,d.push(s);if(0!=(c=g(u-1))){if(o){for(s=r;i<=s;s-=n)if(void 0!==(h=t(d[s],e[d[s]],s,c,r,i,e)))return h}else for(s=r;s<=i;s+=n)if(void 0!==(h=t(d[s],e[d[s]],s,c,r,i,e)))return h;return!0}}else if(0!=(c=g(e.numChildren-1))){if(o){for(s=r;i<=s;s-=n)if(void 0!==(h=t(e.getChildAt(s),s,c,r,i,e)))return h}else for(var h,s=r;s<=i;s+=n)if(void 0!==(h=t(e.getChildAt(s),s,c,r,i,e)))return h;return!0}}function g(e){return zot(r)&&(r=o?e:0),zot(i)&&(i=o?0:e),o&&r<i||!o&&i<r||(r<0&&i)<0||e<r&&e<i?0:(r=Math.max(0,Math.min(r,e)),i=Math.max(0,Math.min(i,e)),Math.floor((o?r-i:i-r)/n)+1)}},To.scaleTo=function(e,t,o,n,r,i){if(u=zob(To.scaleTo,arguments,"obj, boundObj, percentX, percentY, type, boundsOnly"))return u;if("AC"==e.type&&zdf)return zdf.ac("scaleTo",arguments),e;if(z_d("43"),zot(t)&&(t=zdf&&zdf.stage?zdf.stage:null),zot(e)||!e.getBounds||!e.getBounds())return zog("zim methods - scaleTo(): please provide an object (with setBounds) to scale"),e;if(zot(t)||!t.getBounds||!t.getBounds())return zog("zim methods - scaleTo(): please provide a boundObject (with setBounds) to scale to"),e;zot(o)&&(o=-1),zot(n)&&(n=-1),-1==o&&-1==n&&(o=n=100,zot(r)&&(r="fill")),zot(r)&&(r="fit"),"smallest"==r?r="fit":"biggest"==r||"outside"==r||"largest"==r?r="fill":"both"!=r&&"stretch"!=r||(r="full"),zot(i)&&(i=!1);var a=t.getBounds().width*o/100*(i?1:t.scaleX),l=t.getBounds().height*n/100*(i?1:t.scaleY);"Stage"!=t.type&&"StageGL"!=t.type||(a=t.width*o/100,l=t.height*n/100);var s=To.boundsToGlobal(e),c=s.height/e.scaleX,u=s.width/e.scaleY;return(isNaN(c)||isNaN(u))&&(c=e.getBounds().height,u=e.getBounds().width),-1!=o&&-1!=n||"full"==r?"full"==r?(e.scaleX=-1!=o?a/u:e.scaleX,e.scaleY=-1!=n?l/c:e.scaleY):(s="fill"==r?Math.max(a/u,l/c):Math.min(a/u,l/c),To.sca(e,s)):-1==o?To.sca(e,l/c):To.sca(e,a/u),e},To.fit=function(e,t,o,n,r,i){if(p=zob(To.fit,arguments,"obj, left, top, width, height, type"))return p;if("AC"==e.type&&zdf)return zdf.ac("fit",arguments),e;if(z_d("46"),!zot(e)&&e.getBounds){if(e.getBounds()){if(zot(t)){if(!e.stage)return void zog("zim methods - fit(): please add boundary dimensions or add obj to stage first");if(!e.stage.getBounds())return void zog("zim methods - fit(): please add boundary dimensions or add obj with bounds to stage first");o=t=0,n=e.stage.getBounds().width,r=e.stage.getBounds().height}!0===i?i="fit":!1===i&&(i="fill"),zot(i)&&(i="fit"),e.scaleX=e.scaleY=1;var a,l,s,c,u,d=n,h=r,g=e.getBounds().width,p=e.getBounds().height;return"full"==i?(e.scaleX=s=d/g,e.scaleY=c=h/p,a=d,l=h):("fit"==i?u=g/p<=d/h?h/p:d/g:"fill"==i&&(u=g/p<=d/h?d/g:h/p),s=c=u),a=g*(e.scaleX=s),l=p*(e.scaleY=c),e.x=(e.regX-e.getBounds().x)*s+t+(d-a)/2,e.y=(e.regY-e.getBounds().y)*c+o+(h-l)/2,{x:e.x,y:e.y,width:a,height:l,scale:u,scaleX:s,scaleY:c,bX:t,bY:o,bWidth:n,bHeight:r}}zog("zim methods - fit(): please setBounds() on object")}},To.boundsCheck=!1,To.boundsToGlobal=function(e,t,o,n,r){if(To.boundsCheck||(z_d("40"),To.boundsCheck=!0),!zot(e)&&e.getBounds){if(zot(o)&&(o=!1),r&&!e.getBounds&&!e.getBounds())return e;var i,a,l,s=e.getBounds();if(s||!zot(t)){t&&(s=t),r=r&&r.type&&("Stage"==r.type||"StageGL"==r.type)?(i=e.localToLocal(s.x,s.y,r),a=e.localToLocal(s.x+s.width,s.y,r),l=e.localToLocal(s.x+s.width,s.y+s.height,r),e.localToLocal(s.x,s.y+s.height,r)):o?(i=e.globalToLocal(s.x,s.y),a=e.globalToLocal(s.x+s.width,s.y),l=e.globalToLocal(s.x+s.width,s.y+s.height),e.globalToLocal(s.x,s.y+s.height)):(i=e.localToGlobal(s.x,s.y),a=e.localToGlobal(s.x+s.width,s.y),l=e.localToGlobal(s.x+s.width,s.y+s.height),e.localToGlobal(s.x,s.y+s.height));o=Math.min(i.x,a.x,l.x,r.x),e=Math.min(i.y,a.y,l.y,r.y),s=Math.max(i.x,a.x,l.x,r.x),r=Math.max(i.y,a.y,l.y,r.y);return new createjs.Rectangle(o,e,s-o,r-e)}zog("zim methods - boundsToGlobal():\n please setBounds() on object (or a rectangle)")}},To.resetBounds=function(e,t,o,n,r){var i,a,l;return z_d("40.5"),r=zot(n)?(a=t,l=i=0,o):(i=t,a=n,l=o,r),zot(r)&&(r=a),zot(t)?e.setBounds(null):e.setBounds(i,l,a,r),e},To.copyMatrix=function(e,t){return z_d("45.5"),e.x=t.x,e.y=t.y,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.regX=t.regX,e.regY=t.regY,e.rotation=t.rotation,e.skewX=t.skewX,e.skewY=t.skewY,e},To.duplicate=function(e,t){z_d("45.6");var o,n=e.clone(t);for(o in e)e.hasOwnProperty(o)&&null==n[o]&&"parent"!=o&&"zimTouch"!=o&&(n[o]=e[o]);return n},To.expand=function(e,t,o,n,r){var i,a;if(s=zob(To.expand,arguments,"padding, paddingVertical, paddingRight, paddingBottom"))return s;if(z_d("50"),zot(e)||!e.getBounds||!e.getBounds())return zog("zim methods - expand(): please provide object with bounds set"),e;zot(t)&&(t=20),zot(o)&&(o=t),a=zot(n)&&zot(r)?(i=n=t,r=o):(zot(n)&&(n=t),zot(r)&&(r=o),i=t,o);var l=e.getBounds(),s=new createjs.Shape;return s.graphics.f("0").r(l.x-i,l.y-a,l.width+i+n,l.height+a+r),e.hitArea=s,e},To.setSwipe=function(i,e){if(z_d("34"),!zot(i)&&i.on)return i.zimNoSwipe=!e||null,i instanceof createjs.Container&&function e(t){var o=t.numChildren;var n;for(var r=0;r<o;r++)(n=t.getChildAt(r)).zimNoSwipe=i.zimNoSwipe,n instanceof createjs.Container&&e(n)}(i),i},To.setMask=function(o,n,r){if(z_d("50.1"),zot(o)&&zog("zim methods - setMask(): please provide obj"),zot(n))return e(),o;var i,a=o.stage||(zdf?zdf.stage:null);function e(){o.zimMask&&o.zimMask.parent&&o.zimMask.parent.removeChild(o.zimMask),o.zimMask=null,o.zimMaskTicker&&To.Ticker.remove(o.zimMaskTicker),o.mask=null}function t(){if(r&&(!a||!n.stage))return o;var e,t;i&&i.dispose&&i.dispose(),i=null,o.zimMask=n.zimMask=i=n.shape.clone(),To.copyMatrix(i,n),n.addChildAt(i,0),i.alpha=0,o.parent&&(e=n.getConcatenatedMatrix().decompose(),t=o.parent.getConcatenatedMatrix().decompose(),i.scaleX=e.scaleX/t.scaleX,i.scaleY=e.scaleY/t.scaleY,i.rotation=(e.rotation||0)-(t.rotation||0),t=n.localToLocal(n.shape.x+n.regX,n.shape.y+n.regY,o.parent),i.x=t.x,i.y=t.y),o.mask=i}return o.zimMaskOriginal&&o.zimMaskOriginal!=n&&e(),zot(r)&&(r=!("Blob"!=n.type&&zot(n.zimDown)&&zot(n.transformControls)&&zot(n.zimTouch)&&zot(n.zimTweens)),n.zimMaskDynamic=r),(o.zimMaskOriginal=n).zimMaskApply=function(){o.zimMaskTicker&&To.Ticker.remove(o.zimMaskTicker),o.zimMaskTicker=To.Ticker.add(t)},n&&n.shape?(t(),r&&n.zimMaskApply()):(i=n,o.mask=i),o},To.outline=function(t,e,o,n){if(h=zob(To.outline,arguments,"obj, color, size, boundsOnly"))return h;if(z_d("47"),t.type&&"zimOultineShape"==t.type)return zon&&zogy("zim.outline() - warning, you are trying to outline an outline - do not outline in a loop"),t;if(zot(t)||!t.getBounds)return zog("zim methods - outline(): please provide object with bounds set"),t;if(!t.getBounds())return zog("zim methods - outline(): please setBounds() on object"),t;if(!t.parent)return zog("zim methods - outline(): object should be on stage first"),t;if(zot(e)&&(e="brown"),zot(o)&&(o=2),o<=0)return t.ZIMoutlineShape&&t.ZIMoutlineShape.parent.removeChild(t.ZIMoutlineShape),t.ZIMoutlineShapeC&&t.ZIMoutlineShapeC.parent.removeChild(t.ZIMoutlineShapeC),void(t.ZIMoutlineShape=t.ZIMoutlineShapeC=null);var r=t.getBounds(),i=t.ZIMoutlineShape=t.ZIMoutlineShape||new To.Shape;i.type="zimOutlineShape";var a=t.ZIMoutlineShapeC=t.ZIMoutlineShapeC||new To.Shape;a.type="zimOutlineShape";var l=t.parent;t.outlineToggled=!0,t.outlineToggle=function(e){return!0===e?(t.ZIMoutlineShape.visible=!0,t.ZIMoutlineShapeC.visible=!0):!1===e?(t.ZIMoutlineShape.visible=!1,t.ZIMoutlineShapeC.visible=!1):(t.ZIMoutlineShape.visible=!t.ZIMoutlineShape.visible,t.ZIMoutlineShapeC.visible=!t.ZIMoutlineShapeC.visible),t.outlineToggled=t.ZIMoutlineShape.visible,t};var s=t.localToLocal(r.x,r.y,l),c=t.localToLocal(r.x+r.width,r.y,l),u=t.localToLocal(r.x+r.width,r.y+r.height,l),d=t.localToLocal(r.x,r.y+r.height,l),h=t.localToLocal(0,0,l),r=i.graphics.c(),l=a.graphics.c();r.s(e).ss(o).mt(s.x,s.y).lt(c.x,c.y).lt(u.x,u.y).lt(d.x,d.y).lt(s.x,s.y).cp(),n||(l.s("white").ss(o+2),l.mt(-11,0).lt(11,0),l.mt(0,-11).lt(0,11),l.s(e).ss(o),l.mt(-10,0).lt(10,0),l.mt(0,-10).lt(0,10),l.cp(),a.x=h.x,a.y=h.y,a.rotation=t.rotation,r.s("white").ss(o+2).dc(t.x,t.y,16),r.s(e).ss(o).dc(t.x,t.y,16)),t.parent.removeChild(i),t.parent.removeChild(a);r=t.parent.getChildIndex(t);return t.parent.addChildAt(a,r+1),t.parent.addChildAt(i,r+1),i.mouseEnabled=!1,a.mouseEnabled=!1,t},To.STYLE=null,To.ignore="ignore",To.getStyle=function(e,t,o){To.STYLECHECK||(z_d("50.34"),To.STYLECHECK=!0);var n,r=["pos","addTo","center","centerReg","mov","drag","transform","gesture","outline","bounds","animate","wiggle","cache"],i=To.STYLE;for(n in void 0!==STYLE&&(i=STYLE),STYLE){var a=STYLE[n];n.match(/^[(A-Z)]/)&&(STYLE.type||(STYLE.type={}),STYLE.type[n]?STYLE.type[n]=To.merge(STYLE.type[n],a):STYLE.type[n]=a,delete STYLE[n])}if(i=zot(i)?{}:To.copy(i),zot(o))o={};else for(var l=0;l<r.length;l++)delete o[r[l]];var s,c=o,u=i.type;if(u&&delete i.type,!zot(t)&&!zot(i.group)){for(var d=t.split(","),h={},l=0;l<d.length;l++){var g=d[l].trim();zot(i.group[g])||(h=To.merge(h,i.group[g]))}delete i.group}for(s in zot(e)||zot(u)||zot(u[e])||(i=To.merge(i,u[e])),zot(t)||zot(h)||(i=To.merge(i,h)),i)!c[s]&&"ignore"!=(a=-1!=r.indexOf(s)||i.delayPick?i[s]:To.Pick.choose(i[s]))?(a&&a.constructor==={}.constructor&&(a=To.copy(a,!0,!1)),i[s]=a):delete i[s];return!1===(i=To.merge(i,c)).style?{}:i},To.styleTransforms=function(t,o){var e=["visible","x","y","scale","scaleX","scaleY","rotation","alpha","skewX","skewY","regX","regY","blendMode"];if(o){o.add&&t.addTo(),o.addTo&&t.addTo(!0===o.addTo?null:o.addTo),o.center&&t.center(!0===o.center?null:o.center),o.centerReg&&t.centerReg(!0===o.centerReg?null:o.centerReg);for(var n,r=0;r<e.length;r++)null!=o[e[r]]&&(t[e[r]]=To.Pick.choose(o[e[r]]));if(o.bounds&&o.bounds.constructor==={}.constructor&&t.setBounds(o.bounds.x||0,o.bounds.y||0,o.bounds.width||100,o.bounds.height||100),null!=o.x&&(o.loc?null==o.loc.x&&(o.loc.x=o.x):o.loc={x:o.x}),null!=o.y&&(o.loc?null==o.loc.y&&(o.loc.y=o.y):o.loc={y:o.y}),o.loc&&(o.loc.constructor==={}.constructor?t.loc(To.Pick.choose(o.loc.x),To.Pick.choose(o.loc.y)):t.loc(To.Pick.choose(o.loc))),o.pos&&(o.pos.constructor==={}.constructor?t.pos(To.Pick.choose(o.pos.x),To.Pick.choose(o.pos.y),To.Pick.choose(o.pos.right),To.Pick.choose(o.pos.bottom),To.Pick.choose(o.pos.container),To.Pick.choose(o.pos.index),o.pos.add,To.Pick.choose(o.pos.reg),To.Pick.choose(o.pos.regX),To.Pick.choose(o.pos.regY)):("left"!=(n=To.Pick.choose(o.pos))&&"top"!=n||t.pos(),"right"==n&&t.pos({right:!0}),"bottom"==n&&t.pos({bottom:!0}),"rightbottom"!=n&&"bottomright"!=n||t.pos({right:!0,bottom:!0}),"center"==n&&t.center())),(o.mov||o.move)&&(o.move&&(o.mov=o.move),o.mov.constructor==={}.constructor?t.mov(To.Pick.choose(o.mov.x),To.Pick.choose(o.mov.y)):t.mov(To.Pick.choose(o.mov))),o.outline&&setTimeout(function(){t.outline(o.outline.constructor==={}.constructor?o.outline:null),t.stage&&t.stage.update()},20),o.drag&&t.drag(o.drag.constructor==={}.constructor?o.drag:{currentTarget:!0}),o.gesture&&t.gesture(o.gesture.constructor==={}.constructor?o.gesture:null),o.transform&&setTimeout(function(){t.transform(o.transform.constructor==={}.constructor?o.transform:null)},20),o.animate){Array.isArray(o.animate)||(o.animate=[o.animate]);for(r=0;r<o.animate.length;r++)!function(){var e=o.animate[r];e.constructor==={}.constructor&&setTimeout(function(){t.animate(e)},20)}()}if(o.wiggle){Array.isArray(o.wiggle)||(o.wiggle=[o.wiggle]);for(r=0;r<o.wiggle.length;r++)!function(){var e=o.wiggle[r];e.constructor==={}.constructor&&setTimeout(function(){t.wiggle(e)},20)}()}o.expand&&t.expand(!0===o.expand?null:o.expand),o.cache&&(o.cache.constructor==={}.constructor?o.cache.x?t.cache(To.Pick.choose(o.cache.x),To.Pick.choose(o.cache.y),To.Pick.choose(o.cache.x),To.Pick.choose(o.cache.y)):t.cache(To.Pick.choose(o.cache.width),To.Pick.choose(o.cache.height)):t.cache())}},To.Style={remembered:{},clear:function(){return STYLE={},To.Style},clearTypes:function(){return delete(STYLE={}).types,To.Style},clearGroups:function(){return delete(STYLE={}).groups,To.Style},remember:function(e){return STYLE=STYLE||{},zot(e)&&(e="default"),To.Style.remembered[e]=To.copy(STYLE,!0),To.Style},clearRemembered:function(e){return zot(e)?To.Style.remembered={}:delete To.Style.remembered[e],To.Style},recall:function(e){return zot(e)&&(e="default"),STYLE=To.Style.remembered[e],To.Style},add:function(e){return STYLE=STYLE||{},STYLE=To.merge(STYLE,e),To.Style},addType:function(e,t){return(STYLE=STYLE||{}).type||(STYLE.type={}),STYLE.type[e]=t,To.Style},addGroup:function(e,t){return(STYLE=STYLE||{}).group||(STYLE.group={}),STYLE.group[e]=t,To.Style},remove:function(e){return delete(STYLE=STYLE||{})[e],To.Style},removeType:function(e){return(STYLE=STYLE||{}).type&&delete STYLE.type[e],To.Style},removeGroup:function(e){return(STYLE=STYLE||{}).group&&delete STYLE.group[e],To.Style}},To.TIME="seconds",To.TIMECHECK=!1,To.ANIMATE=!0,To.OPTIMIZE=!1,To.ACTIONEVENT="mousedown",To.DEFAULTWIRE="currentValue",To.KEYFOCUS=null,To.POSREG=!1,To.DRAGALL=!1,To.MOBILE="default",To.Ticker={stages:null,myUpdate:null,alwaysList:new To.Dictionary,list:new To.Dictionary,wire:new To.Dictionary,setFPS:function(e,t){zot(e)&&zot(t)?t=e=60:zot(e)?e=60:zot(t)&&(t=e),To.Ticker.framerate=createjs.Ticker.framerate=To.mobile()?e:t},setTimingMode:function(e){createjs.Ticker.timingMode=createjs.Ticker.RAF,"synched"==e&&(createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED),"timeout"==e&&(createjs.Ticker.timingMode=createjs.Ticker.TIMEOUT)},add:function(e,t,o){z_d("30");var n=To.Ticker;return n.has(e,t)?e:(!zot(t)&&t.update||(t=zdf.stage),zot(e)||"function"!=typeof e?void zog("zim.Ticker.add() - only add functions"):(n.list.at(t)?n.list.at(t).push(e):n.list.add(t,[e]),n.ticker||(n.ticker=createjs.Ticker.on("tick",n.call)),n.framerate||n.setFPS(),e))},addWire:function(e,t){if(z_d("30"),zot(t[0]))return e;var o=To.Ticker;o.wire.add(e,t);var n=t[0][t[1]];return t[4]&&(n=t[4](n,"from")),t[3]&&(e[t[6]]=t[7]=n),o.ticker||(o.ticker=createjs.Ticker.on("tick",o.call)),o.framerate||o.setFPS(),e},rawID:{},raw:function(o){z_d("30");var n=To.makeID(7,"letters");return function e(t){o(t),To.Ticker.rawID[n]=requestAnimationFrame(e)}(),n},removeRaw:function(e){cancelAnimationFrame(To.Ticker.rawID[e]),delete To.Ticker.rawID[e]},call:function(e){for(var t,o,n=To.Ticker,r=[],i=0;i<n.list.length;i++){t=n.list.objects[i],o=n.list.values[i];for(var a=0;a<o.length;a++)o[a](e);var l=!1;(n.alwaysList.at(t)||0<o.length&&(zot(n.update)&&!To.OPTIMIZE&&(zns||!OPTIMIZE)||n.update))&&(l=!0),l&&r.indexOf(t)<0&&r.push(t)}for(i=n.wire.length-1;0<=i;i--){var s,c=n.wire.objects[i],u=n.wire.values[i];u&&((s=c[u[6]])!=u[7]&&(u[4]&&(s=u[4](s,"to",u[7])),u[0][u[1]]=u[7]=s,u[5]&&u[5](s),(t=u[0].stage)&&r.indexOf(t)<0&&r.push(t)),u[2]&&u[0]&&(s=u[0][u[1]],u[7]!=s&&(u[4]&&(s=u[4](s,"from",u[7])),c[u[6]]=u[7]=s,u[5]&&u[5](s),(t=c.stage)&&r.indexOf(t)<0&&r.push(t))))}if(0==n.list.length)for(i=0;i<n.alwaysList.length;i++)t=n.alwaysList.objects[i],r.indexOf(t)<0&&r.push(t);for(var d=r.length,i=0;i<d;i++)r[i].update()},always:function(e){z_d("30");var t=To.Ticker;t.framerate||t.setFPS(),!zot(e)&&e.update||(e=zdf.stage),t.alwaysList.add(e,!0),t.ticker||(t.ticker=createjs.Ticker.on("tick",t.call))},alwaysOff:function(e){var t=To.Ticker;!zot(e)&&e.update||(e=zdf.stage),t.alwaysList.remove(e)},remove:function(e){var t=To.Ticker;if(zot(e)||"function"!=typeof e)zog("zim.Ticker - only remove functions");else{for(var o=0;o<t.list.length;o++){t.list.objects[o];var n=t.list.values[o].indexOf(e);-1<n&&t.list.values[o].splice(n,1),t.list.values[o].length}0<t.alwaysList.length||0<t.list.length||0<t.wire.length||(createjs.Ticker.off("tick",t.ticker),t.ticker=null)}},removeAll:function(e){for(var t,o=To.Ticker,n=0;n<o.list.length;n++)t=o.list.objects[n],!zot(e)&&e!==t||(o.list.values[n]=[]),o.list.values[n].length;0<o.alwaysList.length||0<o.list.length||0<o.wire.length||(createjs.Ticker.off("tick",o.ticker),o.ticker=null)},removeWire:function(e,t,o,n){var r=To.Ticker;if(zot(e)&&zot(t)&&zot(o)&&zot(n))r.wire.clear();else for(var i=r.wire.length-1;0<=i;i--){var a=r.wire.objects[i],l=r.wire.values[i];l&&(e&&a!=e||t&&l[0]!=t||o&&l[1]!=o||n&&l[6]!=n||(r.wire.objects.splice(i,1),r.wire.values.splice(i,1)))}0<r.alwaysList.length||0<r.list.length||0<r.wire.length||(createjs.Ticker.off("tick",r.ticker),r.ticker=null)},has:function(e,t){return!zot(t)&&t.update||(t=zdf.stage),To.Ticker.list&&To.Ticker.list.at(t)&&0<=To.Ticker.list.at(t).indexOf(e)},dispose:function(e){for(var t,o=To.Ticker,n=0,r=o.list.length-1;0<=r;r--)t=o.list.objects[r],zot(e)||e===t?(o.list.remove(e),o.alwaysList.remove(e)):n+=o.list.values[r].length;if(!(0<o.alwaysList.length))return 0==n&&(createjs.Ticker.off("tick",o.ticker),o.ticker=null),!0}},To.Ticker.setFPS(),Object.defineProperty(To.Ticker,"update",{get:function(){return To.Ticker.myUpdate},set:function(e){var t=To.Ticker;"boolean"!=typeof e&&(e=null),t.myUpdate=e,!1===t.myUpdate&&(cancelAnimationFrame(t.ticker),t.alwaysList=new To.Dictionary)}}),To.Pages=function(z,y,e,t,b,o,n,r,i){if(a=zob(To.Pages,arguments,"pages, transition, speed, transitionTable, holder, arrowDisableColor, style, group, inherit",this))return a;z_d("71"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Pages",this.group=r;var a=!1===n?{}:To.getStyle(this.type,this.group,i),l=Ao(e);if(zot(z)&&(z=null!=a.pages?a.pages:[]),this.pages=z,zot(y)&&(y=null!=a.transition?a.transition:"none"),zot(e)&&(e=null!=a.speed?a.speed:"s"==l?.2:200),zot(t)&&(t=null!=a.transitionTable?a.transitionTable:[]),this.transitionTable=t,zot(o)&&(o=null!=a.arrowDisableColor?a.arrowDisableColor:To.grey),this.arrowDisableColor=o,zot(b)&&(b=null!=a.holder?a.holder:null),zot(b)&&zdf&&(b=zdf.stage),b.getBounds&&b.getBounds()){this.speed=e,this.active=!0;var v=this;v.transitioning=!1;var w,C,x=b.getBounds().width,k=b.getBounds().height;"none"==y&&t==[]||m();for(var s,T=["left","right","up","down"],c=!0,u=0;u<z.length;u++)(g=z[u]).constructor!={}.constructor&&(g=z[u]={page:z[u]}),g.swipe&&(c=!1);for(var d,h,g,u=0;u<z.length;u++)(g=z[u]).constructor!=={}.constructor&&(g=z[u]={page:z[u]}),c&&(d=z[u-1],h=z[u+1],g.swipe=[d?d.page:null,h?h.page:null]),S(g.page,g.swipe);var p,A=this.page=z[0]?z[0].page:null;zot(this.page)||(this.index=0),this.addChild(A),E(A),this.swipe=new To.Swipe(b);var P=!1,f=this.swipe.on("swipe",function(e){var t;!v.active||"none"!=(t=e.currentTarget.direction)&&(e="","left"==t?e="right":"right"==t?e="left":"up"==t?e="down":"down"==t&&(e="up"),t=e,e=T.indexOf(t),s=A.zimSwipeArray[e],p=[s,t,null,null,!0],v.page=A,v.nextPage=s,v.direction=t,v.dispatchEvent("swipe"),setTimeout(function(){P||v.go(s,t,null,null,!0)},50))});this.addPage=function(e,t){S(e,t),v.pages.push({page:e}),A?e.parent&&e.parent.removeChild(e):(A=v.page=e,v.addChild(A))},this.removePage=function(o){I(o),v.currentPage==o&&(v.removeChild(o),b.stage&&b.stage.update()),To.loop(v.pages,function(e,t){e.page!=o&&e!=o||v.pages.splice(t,1)},!0),o.zimSwipeArray=null},this.setSwipeArray=function(e,t){zot(t)&&(t=[]);t={page:e,swipe:t};t.page.zimSwipeArray=t.swipe||[]},this.pause=function(){P=!0},this.unpause=function(){P&&v.go(p[0],p[1],p[2],p[3],p[4])};var B=!0;this.go=function(e,t,o,n,r){if("number"==typeof e){var i=v.pages[e];if(zot(i))return;e=i.page}setTimeout(function(){P=!1},200);for(var a=[{x:x},{x:-x},{y:k},{y:-k}],i=[{x:x/2,alpha:0},{x:-x/2,alpha:0},{y:k/2,alpha:0},{y:-k/2,alpha:0}],l=y,s=v.speed,c=0;c<v.transitionTable.length;c++)if(v.transitionTable[c][0]==A&&v.transitionTable[c][1]==e){l=v.transitionTable[c][2],zot(v.transitionTable[c][3])||(s=v.transitionTable[c][3]);break}if(zot(o)&&(o=l),zot(n)&&(n=s),v.speed=n,v.direction=t,""==e||null==e)v.page=A,v.dispatchEvent("nothing");else if("string"==typeof e)v.page=A,v.dispatchEvent(e);else{if(e!=A){zot(t)&&(t="right");n=T.indexOf(t);if(B){B=!1,e.x=0,e.y=0,e.alpha=e.zimOriginalAlpha;var u,d;0<=["pixelDark","pixelLight","pixelZIM","bubbleDark","bubbleLight","bubbleZIM","lineDark","lineLight","lineZIM"].indexOf(o)&&(u=o,d=!0,o="slide");var h,g,p;0<=["explodeDark","explodeLight","explodeZIM"].indexOf(o)&&(h=o,d=!0,o="fade"),"Emitter"==o.type&&(o=(d=o).horizontal||o.vertical?"slide":"fade"),v.transitioning=!0,"slide"==o?(e.x=-(0|a[n].x),e.y=-(0|a[n].y),e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),v.addChild(e),v.addChild(A),To.animate(A,a[n],v.speed,null,f,[A,e]),To.animate(e,[{x:0},{x:0},{y:0},{y:0}][n],v.speed)):"reveal"==o?(e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),v.addChild(e),v.addChild(A),To.animate(A,i[n],v.speed,null,f,[A,e])):"fade"==o?(e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),e.alpha=1,v.addChild(e),v.addChild(A),To.animate(A,{alpha:0},v.speed,null,f,[A,e])):"black"==o?(e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),e.alpha=1,v.addChild(e),v.addChild(A),w.alpha=0,v.addChild(w),To.animate(w,{alpha:1},v.speed/2,null,m,[w,A,e])):"clear"==o?(e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),e.alpha=0,v.addChild(e),v.addChild(A),To.animate(A,{alpha:0},v.speed/2),To.animate(e,{alpha:1},v.speed/2,null,f,[A,e],v.speed/2)):"white"==o?(e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),e.alpha=1,v.addChild(e),v.addChild(A),C.alpha=0,v.addChild(C),To.animate(C,{alpha:1},v.speed/2,null,m,[C,A,e])):"fan"==o?(e.cache(0,0,(x+1)/e.scaleX,(k+1)/e.scaleY),A.cache(0,0,(x+1)/A.scaleX,(k+1)/A.scaleY),e.alpha=1,"right"==t||"down"==t?(v.addChild(e),v.addChild(A),A.regY=A.height,A.mov(0,A.height),To.animate(A,{rotation:-90},v.speed,null,f,[A,e])):(v.addChild(A),v.addChild(e),e.regY=A.height,e.mov(0,A.height),e.rotation=-90,To.animate(e,{rotation:0},v.speed,null,f,[A,e]))):(v.transitioning=!1,v.addChild(e),v.removeChild(A),B=!0),d&&(a=n<2,u||"slide"==o?(p=u?("lineDark"==u||"lineLight"==u?g=new To.Rectangle(a?30:x+5,a?k+5:30,"lineDark"==u?To.dark:To.white).alp(.2):"lineZIM"==u?g=new To.Rectangle(a?50:x+5,a?k+5:50,[To.green,To.yellow,To.orange,To.pink,To.blue]).alp(.5):"pixelDark"==u||"pixelLight"==u?g=new To.Rectangle(40,40,To.clear,"pixelDark"==u?To.dark:To.white,2).alp(.7):"pixelZIM"==u?g=new To.Rectangle(40,40,[To.green,To.yellow,To.orange,To.pink,To.blue]).alp(.7):"bubbleDark"==u||"bubbleLight"==u?g=new To.Circle(30,To.clear,"bubbleDark"==u?To.dark:To.white,2).alp(.7):"bubbleZIM"==u&&(g=new To.Circle(30,[To.green,To.yellow,To.orange,To.pink,To.blue]).alp(.7)),g.centerReg({add:!1}),"lineDark"==u||"lineLight"==u||"lineZIM"==u?new To.Emitter({obj:g,life:.5,decayTime:.5,shrink:!1,force:0,gravity:0,width:0,startPaused:!0}):new To.Emitter({obj:g,num:6,life:.5,decayTime:.5,width:a?0:x,height:a?k:0,vertical:a,horizontal:!a,startPaused:!0})):d,i=[{x:0,y:k/2},{x:x,y:k/2},{x:x/2,y:0},{x:x/2,y:k}],a=[{x:x,y:k/2},{x:0,y:k/2},{x:x/2,y:k},{x:x/2,y:0}],p.centerReg(b).spurt(null,v.speed),p.x=i[n].x,p.y=i[n].y,To.animate(p,a[n],v.speed,null,function(){u&&p.dispose()})):!h&&"fade"!=o||((p=h?("explodeDark"==h||"explodeLight"==h?g=new To.Circle(150,"explodeDark"==h?To.dark:To.white).alp(.5):"explodeZIM"==h&&(g=new To.Circle(130,[To.green,To.yellow,To.orange,To.pink,To.blue]).alp(.7)),new To.Emitter({obj:g,num:5,gravity:0,force:{min:20,max:40},life:.5,shrink:!1,decayTime:.5,startPaused:!0})):d).centerReg(b).spurt(null,.35*v.speed),p.on("fizzed",function(){h&&p.dispose()}))),I(A),v.lastPage=A,v.page=e,v.index=-1;for(c=0;c<v.pages.length;c++)v.pages[c].page==v.page&&(v.index=c);"none"==o&&E(e),zot(r)&&(r=!1),v.fromSwipe=r,v.dispatchEvent("page"),A=e,v.setArrows(z.index),b.stage&&b.stage.update()}}function f(e){e[0].uncache(),e[1].uncache(),v.transitioning=!1,v.dispatchEvent("pagetransitioned"),v.removeChild(v.lastPage),"fan"==o&&("right"==t||"down"==t?(v.lastPage.rotation=0,v.lastPage.regY=0,v.lastPage.mov(0,-v.lastPage.height)):(v.page.rotation=0,v.page.regY=0,v.page.mov(0,-v.lastPage.height))),v.removeChild(w),v.removeChild(C),E(A),B=!0}function m(e){v.removeChild(v.lastPage),To.animate(e.shift(),{alpha:0},v.speed/2,null,f,e)}}},this.resize=function(){x=b.getBounds().width,k=b.getBounds().height,"none"==y&&t==[]||m()},this.puff=function(e){for(var t=0;t<z.length;t++)v.addChild(z[t].page);v.addChild(A),0<e&&setTimeout(function(){v.settle()},e*("s"==l?1e3:1))},this.settle=function(){v.removeAllChildren(),v.addChild(A),v.dispatchEvent("puffed")},this.disable=function(){v.active=!1},this.enable=function(){v.active=!0},this.arrows={},!(this.setArrows=function(e){var o,t;To.isEmpty(v.arrows)||(t=v.pages[v.index])&&t.swipe&&(o=t.swipe,t=[LEFT,RIGHT,DOWN,UP],To.loop(t,function(e,t){o[t]?To.loop(v.arrows[e],function(e){return!0===e.setDisabled?(e.activate(!1,v.arrowDisableColor),void(e.setDisabled=null)):void(e.enabled||e.activate(!0,e.arrowBackgroundColor))}):To.loop(v.arrows[e],function(e){return!1===e.setDisabled?(e.activate(!0,e.arrowBackgroundColor),void(e.setDisabled=null)):void(e.enabled&&e.activate(!1,v.arrowDisableColor))})}),v.stage&&v.stage.update())})!==n&&To.styleTransforms(this,a),this.dispose=function(e,t,o){return v.swipe.off("swipe",f),v.swipe.dispose(),o||this.zimContainer_dispose(!0),!0}}else zog("zim controls - Pages():\nholder object must have bounds set");function m(){(w=new createjs.Shape).graphics.f("black").r(0,0,x,k+1),(C=new createjs.Shape).graphics.f("white").r(0,0,x,k+1)}function S(e,t){e.zimHTMLList=new To.Dictionary,I(e),e.zimSwipeArray=t||[],e.zimOriginalAlpha=e.alpha,e.parent&&e.parent.removeChild(g.page)}function E(e){if(!zot(e))for(var t=0;t<e.zimHTMLList.length;t++)e.addChildAt(e.zimHTMLList.values[t].obj,e.zimHTMLList.values[t].depth)}function I(e){e.zimHTMLList.clear();for(var t,o=0;o<e.numChildren;o++)"TextArea"!=(n=e.getChildAt(o)).type&&"Loader"!=n.type&&"Tag"!=n.type||(t={obj:n,depth:e.getChildIndex(n)},e.zimHTMLList.add(n,t));for(var n,o=e.numChildren-1;0<=o;o--)"TextArea"!=(n=e.getChildAt(o)).type&&"Loader"!=n.type&&"Tag"!=n.type||e.removeChild(n)}},To.extend(To.Pages,To.Container,["clone","dispose"],"zimContainer",!1),To.Arrow=function(e,t,o,n,r,i,a,l,s,c,u){if(m=zob(To.Arrow,arguments,"backgroundColor, rollBackgroundColor, pages, direction, type, newPage, trans, speed, style, group, inherit",this))return m;z_d("71.2"),this.group=c;var d,h,g,p,f,m=!1===s?{}:To.getStyle("Arrow",this.group,u);function z(){var e=o.pages[o.index];if(e&&e.swipe){e=e.swipe;return"left"==n?e[0]:"right"==n?e[1]:"up"==n?e[2]:"down"==n?e[3]:void 0}}zot(n)&&(n=null!=m.direction?m.direction:"right"),zot(e)&&(e=null!=m.backgroundColor?m.backgroundColor:To.blue),this.arrowBackgroundColor=e,zot(t)&&(t=null!=m.rollBackgroundColor?m.rollBackgroundColor:To.blue.lighten(.2)),zot(r)&&(r=null!=m.type?m.type:"triangle"),zot(i)&&(i=null!=m.newPage?m.newPage:null),zot(a)&&(a=null!=m.trans?m.trans:null),zot(l)&&(l=null!=m.speed?m.speed:null),"triangle"==r?(d=new To.Triangle(45,45,45,e,null,null,null,null,-7).rot(90),p=new To.Triangle(45,45,45,t,null,null,null,null,-7).rot(90)):"thick"==r?(d=new To.Shape,h=d.graphics.f(e).command,g="AhFBdIiWAAIAAi4ICWAAIAAh7IEhDWIkhDXg",d.p(g).reg(-4),p=(new To.Shape).f(t).p(g).reg(-4)):"thin"==r?(d=new To.Shape,h=d.graphics.f(e).command,g="AhBCIIBZhbIjWAAIAAhVIDaAAIhdhfIA9g+IDDDFIAAAAIAAAAIjDDGg",d.p(g).reg(-4),p=(new To.Shape).f(t).p(g).reg(-4)):"angle"==r&&(d=new To.Shape,h=d.graphics.f(e).command,g="AiNC5IC4i5Ii4i5IAxgxIDqDqIjqDrg",d.p(g).reg(-3),p=(new To.Shape).f(t).p(g).reg(-3)),this.zimButton_constructor(50,50,"",clear,clear,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,d,p),this.type="Arrow",zot(o)||"Pages"!=o.type||(p=(zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",f=this,zot(o.arrows)&&(o.arrows={}),zot(o.arrows[n])&&(o.arrows[n]=[]),o.arrows[n].push(this),this.activate=function(e,t){zot(e)&&(e=!0),zot(t)&&(t=To.grey()),!1!==t&&(e?!(f.enabled=!0)!==t&&("triangle"==r?f.icon.color=f.arrowBackgroundColor:h.style=f.arrowBackgroundColor):(f.enabled=!1)!==t&&("triangle"==r?f.icon.color=t:h.style=t))},z()||this.activate(!1,o.arrowDisableColor),this.expand(),this.on(p,function(){var e;o.transitioning||(e=z())&&o.go(e,n,a,l)}),!1!==s&&To.styleTransforms(this,m),this.clone=function(){return f.cloneProps(new To.Arrow(e,t,o,n,r,i,a,l,s,this.group,u))})},To.extend(To.Arrow,To.Button,"clone","zimButton",!1),To.HotSpots=function(a,o,r){var e;if(e=zob(To.HotSpots,arguments,"spots, local, mouseDowns",this))return e;z_d("72"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpots",zot(o)&&(o=!0),zot(r)&&(r=!1);var l,i,s=(zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",c=this.hotSpots=[];zot(a)&&(a=[]);for(var t=0;t<a.length;t++)u(a[t]);function u(e){var t=null;if(!Array.isArray(e.rect)){if(!(t=e.rect))return void zog("zim controls - HotSpots(): HotSpot "+e.page+" "+e.rect+" button does not exist");e.rect=[t.x,t.y,t.width||1,t.height||1]}(i=new To.HotSpot(e.page,e.rect[0],e.rect[1],e.rect[2],e.rect[3],e.call,e.callOver,e.callOut,o,e.talk)).zimHSpage=e.page,i.button=t,c.push(i),i.on(s,d),t&&zot(e.callOver)&&zot(e.callOut)&&(i.spot.mouseEnabled=!1,i.spot.mouseChildren=!1,t.zimHScall=e.call,t.zimHSEvent=t.on(s,d,!0),r||(t.zimHSMDEvent=t.on("mousedown",function(e){e.stopImmediatePropagation()})),t.cursor="pointer")}function d(e){e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0),"function"==typeof e.currentTarget.zimHScall&&e.currentTarget.zimHScall(e)}this.add=this.addHotSpot=function(e,t,o,n,r,i){l={page:e,rect:t,call:o,callOver:n,callOut:r,talk:i},a.push(l),u(l)},this.show=function(){for(var e=0;e<c.length;e++)(i=c[e]).button||(i.spot.alpha=.2)},this.hide=function(){for(var e=0;e<c.length;e++)(i=c[e]).spot.alpha=0},this.remove=this.removeHotSpots=function(e,t){for(var o=a.length-1;0<=o;o--)l=a[o],i=c[o],t&&!Array.isArray(t)&&(t=[t.x,t.y,t.getBounds().width,t.getBounds().height]),(zot(e)&&zot(t)||zot(t)&&e==l.page||zot(e)&&To.arraysEqual(t,l.rect)||e==l.page&&To.arraysEqual(t,l.rect))&&(a.splice(o,1),i.button&&(i.button.off(s,i.button.zimHSEvent),i.button.zimHSEvent=null,r||(i.button.off("mousedown",i.button.zimHSMDEvent),i.button.zimHSMDEvent=null)),i.off(s,d),i.dispose(),c.splice(o,1))},this.dispose=function(e,t,o){for(var n=0;n<c.length;n++)(i=c[n]).button&&(i.button.off(s,i.button.zimHSEvent),i.button.zimHSCall=null,i.button.zimHSEvent=null,r||(i.button.off("mousedown",i.button.zimHSMDEvent),i.button.zimHSMDEvent=null)),i.off(s,d),i.dispose();return!0}},To.extend(To.HotSpots,To.Container,"dispose","zimContainer",!1),To.HotSpot=function(n,e,t,o,r,i,a,l,s,c){var u,d,h,g,p,f,m,z,y,b;if(h=zob(To.HotSpot,arguments,"obj, x, y, width, height, call, callOver, callOut, local, talk",this))return h;z_d("73"),this.zimContainer_constructor(null,null,null,null,!1),this.type="HotSpot",!zot(n)&&n.addChild?n instanceof createjs.Container!=0?zot(e)||zot(t)||zot(o)||zot(r)?zog("zim controls - HotSpot():\nPlease pass in x, y, width, height"):(zot(s)&&(s=!0),u=(zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",d=o,h=r,f=s?(g=new To.Point(e,t),p=o,r):(g=n.globalToLocal(e,t),p=(f=n.globalToLocal(e+d,t+h)).x-g.x,f.y-g.y),(m=new To.Shape(o,r)).talk=zot(c)?"HotSpot":c,m.alpha=0,m.graphics.f("black").dr(0,0,p,f),m.x=g.x,m.y=g.y,m.cursor="pointer",m.expand(0),this.spot=m,"function"==typeof i&&(z=m.on(u,function(e){i(e)})),"function"==typeof a&&(y=m.on("mouseover",function(e){a(e)})),"function"==typeof l&&(b=m.on("mouseout",function(e){l(e)})),n.addChild(m),this.show=function(){m.alpha=.5,n.stage&&n.stage.update()},this.hide=function(){m.alpha=0,n.stage&&n.stage.update()},this.dispose=function(e,t,o){return z&&m.off(u,y),y&&m.off("mouseover",y),b&&m.off("mouseout",b),n.removeChild(m),!(m=null)}):zog("zim controls - HotSpot():\nObjects passed in should be Containers"):zog("zim controls - HotSpot():\nPlease pass in container object for obj")},To.extend(To.HotSpot,To.Container,"dispose","zimContainer",!1),To.Guide=function(n,r,i,t,o,e,a,l){if(T=zob(To.Guide,arguments,"obj, vertical, percent, hideKey, pixelKey, style, group, inherit",this))return T;z_d("76"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Guide",this.group=a;var s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T=!1===e?{}:To.getStyle(this.type,this.group,l);function A(e,t,o){var n=new To.Container({style:!1});return n.shape=new To.Shape,n.shape.graphics.s(t).ss(1).f(e).r(0,0,u,d),n.shape.alpha=.9,n.addChild(n.shape),n.label=new createjs.Text("10","16px arial",o),n.label.textAlign="center",n.label.textBaseline="middle",n.addChild(n.label),n.mouseChildren=!1,n.mouseEnabled=!1,n}function P(e){var t,o;e?(t=n.globalToLocal(e.rawX/To.scaX,e.rawY/To.scaY),k=t):t={x:k.x,y:k.y},i?r?(o=Math.round(Math.abs(t.x-C.x)/v*100),m.label.text="x:"+Math.max(0,Math.min(o,100))+"%",m.y=Math.max(g,Math.min(t.y,f))):(o=Math.round(Math.abs(t.y-C.y)/w*100),m.label.text="y:"+Math.max(0,Math.min(o,100))+"%",m.x=Math.max(h,Math.min(t.x,p))):r?(o=Math.round(Math.abs(t.x-C.x)),m.label.text="x:"+Math.max(0,Math.min(o,Math.round(v))),m.y=Math.max(g,Math.min(t.y,f))):(o=Math.round(Math.abs(t.y-C.y)),m.label.text="y:"+Math.max(0,Math.min(o,Math.round(w))),m.x=Math.max(h,Math.min(t.x,p))),z&&z.update()}function B(){var e;b=!0,v=n.getBounds().width,w=n.getBounds().height,x=r?(e="ew-resize",new createjs.Rectangle(0,0,v,0)):(e="ns-resize",new createjs.Rectangle(0,0,0,w)),To.noDrag(C),setTimeout(function(){To.drag(C,x,e,e,null,null,!0)},500),z.mouseMoveOutside=!0,z.enableMouseOver(10),p=v-2*u/3,f=w-d-d,C.uncache();var t=C.graphics;r?(t.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,w),t.f().s("white").ss(2).mt(0,0).lt(0,w),t.s("#00c5af").sd([20,20]).mt(0,0).lt(0,w).sd(),C.cache(-10,0,20,w)):(t.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(v,0),t.f().s("white").ss(2).mt(0,0).lt(v,0),t.s("#d61fa0").sd([20,20]).mt(0,0).lt(v,0).sd(),C.cache(0,-10,v,20)),r?m.x=v:m.y=w,s.addChild(m)}function S(e){e=e||event,z&&(String.fromCharCode(e.keyCode)==t.toUpperCase()&&s.toggle(),String.fromCharCode(e.keyCode)==o.toUpperCase()&&(s.pixels=!s.pixels))}!zot(n)||null!=T.obj&&T.obj,zot(n)&&(n=zdf?zdf.stage:"stage"),zot(r)&&(r=null==T.vertical||T.vertical),"stage"==n||n.addChild&&n.getBounds&&n.getBounds()?(zot(i)&&(i=null==T.percent||T.percent),zot(t)&&(t=null!=T.hideKey?T.hideKey:"G"),zot(o)&&(o=null!=T.pixelKey?T.pixelKey:"P"),s=this,h=(u=80)/6+u/2,g=2*(d=26),r?((m=A("#00c5af","white","white")).shape.regX=u+u/6,m.shape.regY=d/2,m.label.x=-u/2-u/6):((m=A("#d61fa0","white","white")).shape.regX=u/2,m.shape.regY=d+d/4,m.label.y=3*-d/4),"stage"!=n&&n.addChild(s),y=To.added(s,function(){"stage"==n?(z=s.stage,n=z):z=n.stage;n.addChild(s),v=n.getBounds().width,w=n.getBounds().height,r?(m.y=w/2,m.label.text="x:"+(s.percent?"70%":Math.round(70*v/100))):(m.x=v/2,m.label.text="y:"+(s.percent?"70%":Math.round(70*w/100)));C=new To.Shape,s.addChild(C),r?C.x=.7*v:C.y=.7*w,b||(n.addChild(s),B());z.off("stagemousemove",c),c=z.on("stagemousemove",P),z.update()}),b=!1,k={x:0,y:0},Object.defineProperty(this,"pixels",{get:function(){return!i},set:function(e){i=!e,s.resize()}}),window.addEventListener("keydown",S),this.toggled=!0,this.toggle=function(e){return!0===e?s.visible=s.toggled=!0:!1===e?s.visible=s.toggled=!1:(s.visible=!s.visible,s.toggled=s.visible),z&&(z.off("stagemousemove",c),s.visible&&(c=z.on("stagemousemove",P,s)),z.update()),s},!(this.resize=function(){return!!s&&(z&&(B(),P()),!0)})!==e&&To.styleTransforms(this,T),this.dispose=function(e,t,o){return!!s&&(To.noDrag(C),clearInterval(y),s.removeAllChildren(),window.removeEventListener("keydown",S),s.parent&&s.parent.removeChild(s),!(s=null))}):zog("zim controls - Guide(): Please provide container with bounds for the obj (setBounds())")},To.extend(To.Guide,To.Container,"clone","zimContainer",!1),To.Grid=function(r,i,a,t,o,n,l,e,s,c,u){if(S=zob(To.Grid,arguments,"obj, color, percent, hideKey, pixelKey, allowToggle, cache, numbers, style, group, inherit",this))return S;z_d("78"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Grid",this.group=c;var d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S=!1===s?{}:To.getStyle(this.type,this.group,u);function E(e,t,o){var n=new To.Container({style:!1});return n.shape=new createjs.Shape,n.shape.graphics.s(t).ss(1).f(e).r(0,0,p,f),n.shape.alpha=.9,n.addChild(n.shape),n.label=new createjs.Text("10","16px arial",o),n.label.textAlign="center",n.label.textBaseline="middle",n.addChild(n.label),n.mouseChildren=!1,n.mouseEnabled=!1,n}function I(e){var t;e?(t=r.globalToLocal(e.rawX/To.scaX,e.rawY/To.scaY),T=t):t={x:T.x,y:T.y},a?(m.label.text="x:"+Math.max(0,Math.min(Math.round(t.x/A*100),100))+"%",m.x=Math.max(y,Math.min(t.x,v)),z.label.text="y:"+Math.max(0,Math.min(Math.round(t.y/P*100),100))+"%"):(m.label.text="x:"+Math.max(0,Math.min(Math.round(t.x),Math.round(A))),m.x=Math.max(y,Math.min(t.x,v)),z.label.text="y:"+Math.max(0,Math.min(Math.round(t.y),Math.round(P)))),z.y=Math.max(b,Math.min(t.y,w)),C&&C.update()}function M(){k=!0,r&&r.getBounds&&(A=r.getBounds().width,P=r.getBounds().height),C&&(C.mouseMoveOutside=!0,C.enableMouseOver(10)),v=A-2*p/3,w=P-f-f,B=d.grid=new To.Container({style:!1}),d.addChild(B);var e=new createjs.Shape;B.addChild(e);var t=e.graphics;t.s(i).ss(1);var o=new createjs.Shape;if(B.addChild(o),a){for(n=1;n<21;n++)t.mt(n*A/20,0).lt(n*A/20,P);for(n=1;n<20;n++)t.mt(0,n*P/20).lt(A,n*P/20);e.alpha=.3,(t=o.graphics).s(i).ss(1);for(n=1;n<10;n++)t.mt(n*A/10,0).lt(n*A/10,P);for(n=1;n<10;n++)t.mt(0,n*P/10).lt(A,n*P/10)}else{for(var n=0;n<A/h;n++)t.mt(n*h,0).lt(n*h,P);for(var n=0;n<P/h;n++)t.mt(0,n*h).lt(A,n*h);e.alpha=.3,(t=o.graphics).s(i).ss(1);for(var n=0;n<A/(10*h);n++)t.mt(n*(10*h),0).lt(n*(10*h),P);for(var n=0;n<P/(10*h);n++)t.mt(0,n*(10*h)).lt(A,n*(10*h))}t.s("#FFFFFF").ss(8),t.mt(A/2,P/2-40).lt(A/2,P/2+40),t.mt(A/2-40,P/2).lt(A/2+40,P/2),t.s("#000000").ss(4),t.mt(A/2,P/2-40).lt(A/2,P/2+40),t.mt(A/2-40,P/2).lt(A/2+40,P/2),t.s(i).ss(l?3:2),t.dr(0,0,A,P),o.alpha=.5,l&&B.cache(0,0,A,P),d.addChild(m),d.addChild(z),C&&C.update()}function O(e){e=e||event,C&&n&&(String.fromCharCode(e.keyCode)==t.toUpperCase()&&d.toggle(),String.fromCharCode(e.keyCode)==o.toUpperCase()&&(d.removeChild(B),B=null,d.pixels=!d.pixels))}!zot(r)||null!=S.obj&&S.obj,zot(r)&&(r=zdf?zdf.stage:"stage"),zot(i)&&(i=null!=S.color?S.color:"black"),"stage"==r||r.addChild&&r.getBounds&&r.getBounds()?(zot(a)&&(a=null==S.percent||S.percent),zot(t)&&(t=null!=S.hideKey?S.hideKey:"G"),zot(o)&&(o=null!=S.pixelKey?S.pixelKey:"P"),zot(n)&&(n=null==S.allowToggle||S.allowToggle),zot(l)&&(l=null==S.cache||S.cache),zot(e)&&(e=null==S.numbers||S.numbers),h=10,(d=this).mouseChildren=!1,this.mouseEnabled=!1,p=80,f=26,(m=d.numbersX=E("#dddddd",i,"#333333")).shape.regX=p/2,m.shape.regY=-f/4,m.label.y=3*f/4,(z=d.numbersY=E("#dddddd",i,"#333333")).shape.regX=-p/6,z.shape.regY=f/2,z.label.x=p/2+p/6,e||(m.visible=!1,z.visible=!1),y=p/6+p/2,b=2*f,m.x=y,z.y=b,m.label.text="x:0",z.label.text="y:0","stage"!=r&&r.addChild(d),x=To.added(d,function(){"stage"==r?(C=d.stage,r=C):C=r.stage;k||(M(),r.addChild(d));C.off("stagemousemove",g),g=C.on("stagemousemove",I),C.update()}),k=!1,T={x:0,y:0},Object.defineProperty(this,"pixels",{get:function(){return!a},set:function(e){a=!e,d.resize()}}),window.addEventListener("keydown",O),this.toggled=!0,this.toggle=function(e){return!0===e?d.visible=d.toggled=!0:!1===e?d.visible=d.toggled=!1:(d.visible=!d.visible,d.toggled=d.visible),C.off("stagemousemove",g),d.visible&&(g=C.on("stagemousemove",I,d)),C&&C.update(),d},!(this.resize=function(){return!!d&&(d.removeChild(B),B=null,C&&(M(),I(),setTimeout(function(){d.removeChild(B),B=null,M()},200)),!0)})!==s&&To.styleTransforms(this,S),this.dispose=function(e,t,o){return clearInterval(x),d.removeAllChildren(),window.removeEventListener("keydown",O),d.parent&&d.parent.removeChild(d),!(d=null)}):zog("zim controls - Grid(): Please provide container with bounds for the obj (setBounds())")},To.extend(To.Grid,To.Container,"clone","zimContainer",!1),To.Wrapper=function(e,A,v,w,a,P,C,B,S,E,x,I,k,T,M,t,O,j,L,_,Y,o,n,r){if(i=zob(To.Wrapper,arguments,"items, width, spacingH, spacingV, wrapperType, align, valign, alignInner, valignInner, flip, reverse, bottomFull, colSize, rowSize, height, minSpreadNum, minStretchNum, percentVoidH, offsetVoidH, percentVoidV, offsetVoidV, style, group, inherit",this))return i;z_d("78.5"),this.group=n;var i=!1===o?{}:To.getStyle("Wrapper",this.group,r);zot(A)&&(A=null!=i.width?i.width:300),zot(M)&&(M=null!=i.height?i.height:null),zot(v)&&(v=null!=i.spacingH?i.spacingH:null),zot(w)&&(w=null!=i.spacingV?i.spacingV:null),zot(a)&&(a=null!=i.wrapperType?i.wrapperType:"spacing"),zot(P)&&(P=null!=i.align?i.align:"left"),zot(C)&&(C=null!=i.valign?i.valign:"top"),zot(B)&&(B=null!=i.alignInner?i.alignInner:"left"),zot(S)&&(S=null!=i.valignInner?i.valignInner:"bottom"),zot(E)&&(E=null!=i.flip&&i.flip),zot(x)&&(x=null!=i.reverse&&i.reverse),zot(I)&&(I=null!=i.bottomFull&&i.bottomFull),zot(k)&&(k=null!=i.colSize?i.colSize:100),zot(T)&&(T=null!=i.rowSize?i.rowSize:null),zot(v)&&(v=0),zot(w)&&(w=0),zot(t)&&(t=null!=i.minSpreadNum?i.minSpreadNum:2),zot(O)&&(O=null!=i.minStretchNum?i.minStretchNum:3),zot(j)&&(j=null!=i.percentVoidH?i.percentVoidH:0),zot(L)&&(L=null!=i.offsetVoidH?i.offsetVoidH:0),zot(_)&&(_=null!=i.percentVoidV?i.percentVoidV:0),zot(Y)&&(Y=null!=i.offsetVoidV?i.offsetVoidV:0);var D,X,R=0,W=0,F=0,H=A;this.items=[],"spread"==a?D=!0:"stretch"==a&&(X=!0),this.zimContainer_constructor(A,200),this.type="Wrapper","middle"==P&&(P="center"),"middle"==C&&(C="center"),"middle"==B&&(B="center"),"middle"==S&&(S="center");var V=this;function N(r,t,o,e,n,i,a,l){var s=To.Pick.choose(P),c=To.Pick.choose(D),u=To.Pick.choose(X),d=To.Pick.choose(E),h=To.Pick.choose(B),g=To.Pick.choose(S);zot(s)&&(s="left"),zot(g)&&(g="top"),zot(h)&&(h="left"),d&&r.reverse();var p,f,m,z,y,b,v,w,C=((100-i)/100/2+a/100)*A,x=A*i/100,k=0,T=!1;n?((I||E)&&r.reverse(),p=H%n,f=H/2+a/100*H,m=0,d=Math.floor(H/n),0!=V.rows&&l&&(T=!0),To.loop(r,function(e,t){k=0,m="right"==h?n*t+0+n-e.wrapWidth:"center"==h||"middle"==h?n*t+0+(n-e.wrapWidth)/2:n*t+0;var o,t=e.x;e.pos(m),v=e.x-t,e.centerX+=v,e.marginLeft&&(k+=e.marginLeft),e.marginRight&&(k-=e.marginRight),"center"==s||"middle"==s?(o=Math.floor(H/n)-r.length,k+=(p+(o?o*n:0))/2):"right"==s&&(o=Math.floor(H/n)-r.length,k+=p+(o?o*n:0)),e.mov(k),e.centerX+=k}),"center"==s&&T&&(r.length+d)%2!=0&&(k=(f<=H/2?-1:1)*n/2,To.loop(r,function(e,t){e.mov(k),e.centerX+=k}))):c||u?(c?z=r.length?(H-e)/(r.length+1):0:u&&(z=0<r.length-1?(H-e)/(r.length-1):0),r.length<O&&0!=V.rows&&l&&(z=F,T=!0),F=z,y=0,(I||E)&&r.reverse(),To.loop(r,function(e,t,o){k=0;var n=e.x;e.pos(z*(t+(c?1:0))+y),v=e.x-n,e.centerX+=v,T||(e.marginLeft&&(k+=e.marginLeft),e.marginRight&&(k-=e.marginRight),e.mov(k),e.centerX+=k),y+=e.wrapWidth}),T&&(b=c?z:0,v=k=0,To.loop(r,function(e,t){var o,n;"right"==s?(n=e.x,e.pos(b,null,To.RIGHT),v=e.x-n,b+=e.wrapWidth+z):"center"==s&&(o=(H-(y+(r.length-1)*z))/2-(c?z:0),n=e.x,e.pos(b+o,null,To.RIGHT),v=e.x-n,b+=e.wrapWidth+z),e.marginLeft&&(k+=e.marginLeft),e.marginRight&&(k-=e.marginRight),e.mov(k),e.centerX+=v+k},!0))):"center"==s?To.loop(r,function(e){k=((I||E?0:A)-t.x)/2,(c||u)&&(e.marginLeft&&(k+=e.marginLeft),e.marginRight&&(k-=e.marginRight)),e.mov(k),e.centerX+=k}):(I||E)&&"left"==s?(w=r[r.length-1].marginLeft,To.loop(r,function(e){k=-t.x+(w||0),c&&(k+=W),e.mov(k),e.centerX+=k})):I||E||"right"!=s?c&&c&&To.loop(r,function(e){k=W*("right"==s?-1:1),e.mov(k),e.centerX+=k}):(w=r[r.length-1].marginRight,To.loop(r,function(e){k=A-t.x-(w||0),c&&(k-=W),e.mov(k),e.centerX+=k})),i&&(C=(.5+a/100)*H,x=A*i/100,To.loop(r,function(e){n||u||c?"right"==s?e.centerX>H-C&&e.mov(x):"center"==s?Math.round(e.centerX)==Math.round(H/2+a/100*H)?e.mov(x/2):Math.round(e.centerX)>Math.round(H/2+a/100*H)&&e.mov(x):e.centerX>C&&e.mov(x):I||E||"right"!=s?I||E||"center"!=s?(I||E)&&"right"==s?e.centerX>H-C&&e.mov(x):(I||E)&&"center"==s?e.centerX>H/2+a/100*H&&e.mov(x):e.centerX>C&&e.mov(x):e.centerX>A/2+a/100*H?e.mov(x/2):e.mov(-x/2):e.centerX<A-C&&e.mov(-x)})),c&&(W=(R+=z)/(V.rows+1)),"center"==g?To.loop(r,function(e){e.mov(0,(o-e.wrapHeight)/2*(I?-1:1))}):I||"bottom"!=g?I&&"top"==g&&To.loop(r,function(e){e.mov(0,-(o-e.wrapHeight)+(e.marginTop||0))}):To.loop(r,function(e){e.mov(0,o-e.wrapHeight-(e.marginBottom||0))})}this.add=function(e){return this.addAt(e,this.numChildren-1),V},this.addAt=function(e,o){return zot(e)||((zot(o)||o<0)&&(o=0),Array.isArray(e)||(e=[e]),To.loop(e,function(e,t){V.addChildAt(e,o+t)}),V.resize()),V},this.remove=function(e){return Array.isArray(e)||(e=[e]),To.loop(e,function(e){e&&e.removeFrom&&e.removeFrom()},!0),V.resize(),V},this.convert=function(e,t){var o=[];return e.loop(function(e){o.push(e),t&&e.cache()}),V.add(o),e.removeFrom(),V},this.resize=function(e,t){if(!V.preventResize){zot(e)||(A=e),zot(t)||(M=t),this.items2D=[],this.items=[],F=W=R=0,zot(j)&&(j=0),zot(L)&&(L=0);var l=To.Pick.choose(j),s=To.Pick.choose(L);H=A*(100-l)/100,this.setBounds(H,200);var c=0,u=0,d=0;V.cols=0,V.rows=0;var h=[],g=[0],p=null,f=0,m=null,z=To.Pick.choose(k);"column"!=a&&(z=null);var y=To.Pick.choose(T),b=0;To.loop(this,function(e,t,o){I||E?e.pos(c+(e.marginRight||0),u+(e.marginTop||0),To.RIGHT,E?To.TOP:To.BOTTOM):e.pos(c+(e.marginLeft||0),u+(e.marginTop||0)),b++,m=e.boundsToGlobal();var n,r,i=V.globalToLocal(m.x,m.y),a=V.globalToLocal(m.x+m.width,m.y+m.height);n=I||E?V.globalToLocal(m.x,m.y):V.globalToLocal(m.x+m.width,m.y+m.height),e.wrapHeight=a.y-i.y,e.wrapWidth=a.x-i.x,l&&(r=V.globalToLocal(m.x+e.wrapWidth/2,m.y+e.wrapHeight/2),e.centerX=r.x,e.centerY=r.y,r=null),i=z?z*b:I||E?H-n.x+(e.marginLeft||0)+v:n.x+(e.marginRight||0)+v,Math.round(i)-v>H&&(N(h,p,d,f,z,l,s,!1),(f=0)==V.cols&&(V.cols=t),c=0,u+=d+(y?0:To.Pick.choose(w)),d=0,y=To.Pick.choose(T),l=To.Pick.choose(j),s=To.Pick.choose(L),b=0,V.items2D.push(To.copy(h)),V.rows++,g.push(u),h=[],I||E?e.pos(c+(e.marginRight||0),u+(e.marginTop||0),To.RIGHT,E?To.TOP:To.BOTTOM):e.pos(c+(e.marginLeft||0),u+(e.marginTop||0)),l&&(m=e.boundsToGlobal(),r=V.globalToLocal(m.x+e.wrapWidth/2,m.y+e.wrapHeight/2),e.centerX=r.x,e.centerY=r.y,r=null),b++,z?i=0:(i=(e.marginLeft||0)+e.wrapWidth+(e.marginRight||0)+To.Pick.choose(v),n.x=I||E?H-((e.marginRight||0)+e.wrapWidth):(e.marginLeft||0)+e.wrapWidth)),h.push(e),f+=e.wrapWidth,c=i,d=y||Math.max(d,e.wrapHeight+(e.marginTop||0)+(e.marginBottom||0)),p=new To.Point(n.x,u+d)},(!x||!I)&&(x||I)),0<V.numChildren&&(0==V.cols&&(V.cols=V.numChildren),V.items2D.push(To.copy(h)),g.push(u),N(h,p,d,f,z,l,s,!0),V.rows+=1);var o=To.Pick.choose(C);zot(o),I&&(i=u+d-200,To.loop(this,function(e){e.mov(0,i)}),V.items2D.reverse(),To.loop(V.items2D,function(e){e.reverse()}));var n,r,i,e=To.Pick.choose(_),t=To.Pick.choose(Y);return zot(e)||(zot(t)&&(t=0),n=(o=u+d)*e/100,r=o/2+t/100*o,To.loop(g,function(e,t){if(r<=e)return To.loop(V.items2D,function(e,t){To.loop(e,function(e){e.mov(0,n)})},null,1,t),"break"})),zot(M)||("bottom"==C?(i=M-(u+d),To.loop(this,function(e){e.mov(0,i)})):"center"!=C&&"middle"!=C||(i=(M-(u+d))/2,To.loop(this,function(e){e.mov(0,i)}))),V.setBounds(null),(m=V.getBounds())&&V.setBounds(0,m.y,A,m.height),To.loop(V.items2D,function(e){To.loop(e,function(e){V.items.push(e)})}),this.stage&&this.stage.update(),V}},Object.defineProperty(V,"spacingH",{get:function(){return v},set:function(e){v=e,this.resize()}}),Object.defineProperty(V,"spacingV",{get:function(){return w},set:function(e){w=e,this.resize()}}),Object.defineProperty(V,"wrapperType",{get:function(){return a},set:function(e){D="spread"==e,X="stretch"==e,a=e,this.resize()}}),Object.defineProperty(V,"align",{get:function(){return P},set:function(e){"middle"==(P=e)&&(P="center"),this.resize()}}),Object.defineProperty(V,"valign",{get:function(){return C},set:function(e){"middle"==(C=e)&&(C="center"),this.resize()}}),Object.defineProperty(V,"alignInner",{get:function(){return B},set:function(e){"middle"==(B=e)&&(B="center"),this.resize()}}),Object.defineProperty(V,"valignInner",{get:function(){return S},set:function(e){"middle"==(S=e)&&(S="center"),this.resize()}}),Object.defineProperty(V,"colSize",{get:function(){return k},set:function(e){k=e,"column"==a&&this.resize()}}),Object.defineProperty(V,"rowSize",{get:function(){return T},set:function(e){T=e,this.resize()}}),Object.defineProperty(V,"flip",{get:function(){return E},set:function(e){E=e,this.resize()}}),Object.defineProperty(V,"reverse",{get:function(){return x},set:function(e){x=e,this.resize()}}),Object.defineProperty(V,"bottomFull",{get:function(){return I},set:function(e){I=e,this.resize()}}),Object.defineProperty(V,"percentVoidH",{get:function(){return j},set:function(e){j=e,this.resize()}}),Object.defineProperty(V,"offsetVoidH",{get:function(){return L},set:function(e){L=e,this.resize()}}),Object.defineProperty(V,"percentVoidV",{get:function(){return _},set:function(e){_=e,this.resize()}}),Object.defineProperty(V,"offsetVoidV",{get:function(){return Y},set:function(e){Y=e,this.resize()}}),zot(e)||V.add(e),!1!==o&&To.styleTransforms(this,i),this.clone=function(){return V.cloneProps(new To.Wrapper(e,A,v,w,a,P,C,B,S,E,x,I,k,T,M,t,O,j,L,_,Y,this.style,this.group))}},To.extend(To.Wrapper,To.Container,"clone","zimContainer",!1),To.Tile=function(n,l,s,e,t,r,c,u,o,i,d,h,g,p,f,a,m,z,y,b,v,w,C){if(k=zob(To.Tile,arguments,"obj, cols, rows, spacingH, spacingV, unique, width, height, squeezeH, squeezeV, colSize, rowSize, align, valign, count, mirrorH, mirrorV, snapToPixel, clone, events, group, style, inherit",this))return k;z_d("66.5"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Tile",this.group=v;var x,k=!1===w?{}:To.getStyle(this.type,this.group,C);zot(n)&&(n=null!=k.obj?k.obj:new To.Circle),zot(l)&&(l=null!=k.cols?k.cols:1121),zot(s)&&(s=null!=k.rows?k.rows:1121),1121==l&&1121==s?l=s=x=3:1121==l?l=1:1121==s&&(s=1),zot(r)&&(r=null!=k.unique&&k.unique),zot(c)&&(c=null!=k.width?k.width:null),zot(u)&&(u=null!=k.height?k.height:null),zot(d)&&(d=null!=k.colSize?k.colSize:null),zot(h)&&(h=null!=k.rowSize?k.rowSize:null),zot(c)||(d=null),zot(u)||(h=null),zot(e)&&(e=null!=k.spacingH?k.spacingH:x?3:null),zot(t)&&(t=null!=k.spacingV?k.spacingV:x?3:null),!zot(e)&&zot(d)||(e=0),!zot(t)&&zot(h)||(t=0),zot(o)&&(o=null!=k.squeezeH&&k.squeezeH),zot(i)&&(i=null!=k.squeezeV&&k.squeezeV),zot(g)&&(g=null!=k.align?k.align:"left"),zot(p)&&(p=null!=k.valign?k.valign:"top"),zot(f)&&(f=null!=k.count?k.count:r&&Array.isArray(n)?n.length:null),0===f&&(f=null,zon&&zog("ZIM Tile() - count parameter of 0 is ignored - see docs")),zot(a)&&(a=null!=k.mirrorH&&k.mirrorH),zot(m)&&(m=null!=k.mirrorV&&k.mirrorV),zot(z)&&(z=null==k.snapToPixel||k.snapToPixel),z&&(n&&n.stage?n.stage.snapToPixelEnabled=!0:"undefined"!=typeof elem&&zdf&&(zdf.stage.snapToPixelEnabled=!0)),zot(y)&&(y=null!=k.clone?k.clone:!r),zot(b)&&(b=null==k.events||k.events);var T=this;T.cols=l=Math.round(l),T.rows=s=Math.round(s),T.spacingH=e,T.spacingV=t,T.squeezeH=o,T.squeezeV=i;var A,P="function"==typeof g,B="function"==typeof p;T.align=P?"left":g,T.valign=B?"top":p,T.mirrorH=a,T.mirrorV=m,T.items=[];var S,E,I,M,O,j,L,_,Y,D,X,R,W,F,H,V,N,G,q=0;e:for(var U=0;U<s;U++)for(var Q=0;Q<l;Q++){if(q++,!zot(f)&&f<q)break e;"string"==typeof(A=r?n[q-1]:To.Pick.choose(n))&&(A=window.asset(A).centerReg({add:!1}).clone()),zot(A)&&(A=new To.Container(0,0,0,0)),y&&(0==U&&0==Q||(A=A.clone())),b&&A.on("change",function(e){var t=new createjs.Event("change");t.item=e.currentTarget,T.dispatchEvent(t)}),T.items.push(A),A.tileNum=q-1,A.tileCol=Q,A.tileRow=U}function Z(){T.removeAllChildren(),S=[],E=[],I=[],M=[],O=[],Y=_=L=j=0,D=[],X=[],R=[],F=[],W=[],T.items&&T.items.length||(T.items=[]),f=T.items.length;for(var e,t,o,n,r=0,i=0,a=0;a<f;a++)i=Math.floor(a/T.cols),t=a%T.cols,zot(S[i])&&(S[i]=[]),zot(T.items[a])&&(T.items[a]=new To.Container(0,0,0,0)),S[i][t]=T.items[a];T.rows=Math.max(1,S.length),T.cols=Math.max(1,zot(S[0])?0:S[0].length);e:for(i=0;i<T.rows;i++){D.push([]),X.push([]),F.push([]),h&&zot(u)&&(o=To.Pick.choose(h));for(a=0;a<T.cols;a++){if(r++,!zot(f)&&f<r)break e;(e=S[i][a]).snapToPixel=z,T.addChild(e),D[i].push(e.scaleX),X[i].push(e.scaleY),0==i&&d&&zot(c)&&(n=To.Pick.choose(d)),0==i&&W.push(To.Pick.choose(g)),d&&zot(c)||(n=Math.abs(e.width)),h&&zot(u)||(o=Math.abs(e.height)),F[i][a]=[n,o],zot(M[a])&&(M[a]=0),zot(O[i])&&(O[i]=0),n>M[a]&&(M[a]=n),o>O[i]&&(O[i]=o),zot(E[i])&&(E[i]=0),zot(I[a])&&(I[a]=0),E[i]+=n,I[a]+=o,E[i]>j&&(j=E[i]),I[a]>L&&(L=I[a]),zot(R[a])&&(R[a]=0),R[a]++}}if(!1===T.squeezeH)for(a=0;a<M.length;a++){var l=M[a];_+=l}if(!1===T.squeezeV)for(a=0;a<O.length;a++){l=O[a];Y+=l}}function K(e,t){var o,n;e<=0&&(e=null),t<=0&&(t=null),H=zot(e)||"full"!=T.squeezeH?zot(e)?0<_?_+(T.cols-1)*T.spacingH:j+(T.cols-1)*T.spacingH:Math.max(j+(T.cols-1)*T.spacingH,e):e,V=zot(t)||"full"!=T.squeezeV?zot(t)?0<Y?Y+(T.rows-1)*T.spacingV:L+(T.rows-1)*T.spacingV:Math.max(L+(T.rows-1)*T.spacingV,t):t,T.setBounds(0,0,H,V),N=[],G=[];var r,i,a,l=[];for(U=0;U<S.length;U++)for(o=S[U],n=0,zot(e),Q=0;Q<o.length;Q++){A=o[Q],0==U&&(N[Q]=0,zot(t)||("full"==T.squeezeV?G[Q]=1<R[Q]?(t-I[Q])/(R[Q]-1):0:T.squeezeV?G[Q]=1<R[Q]?Math.max(T.spacingV,(t-I[Q])/(R[Q]-1)):0:G[Q]=1<R[Q]?Math.max(T.spacingV,(V-I[Q])/(R[Q]-1)):0),T.squeezeV?"center"==T.valign||"middle"==T.valign?l[Q]=(V-(I[Q]+(R[Q]-1)*(zot(t)?T.spacingV:G[Q])))/2:"bottom"==T.valign?l[Q]=V-(I[Q]+(R[Q]-1)*(zot(t)?T.spacingV:G[Q])):l[Q]=0:l[Q]=0),A.getBounds(),0==Q&&(zot(e)||(i="full"==T.squeezeH?1<o.length?(e-E[U])/(o.length-1):0:T.squeezeH?1<o.length?Math.max(T.spacingH,(e-E[U])/(o.length-1)):0:1<o.length?Math.max(T.spacingH,(H-E[U])/(o.length-1)):0),r=T.squeezeH?"center"==T.align||"middle"==T.align?(H-(E[U]+(o.length-1)*(zot(e)?T.spacingH:i)))/2:"right"==T.align?H-(E[U]+(o.length-1)*(zot(e)?T.spacingH:i)):0:0,a=To.Pick.choose(p)),g=W[Q];var s=F[U][Q][0],c=F[U][Q][1];T.mirrorH&&Q%2==1&&(A.scaleX=-D[U][Q]),A.pos(n,null),!T.squeezeH&&P?!zot(e)||"center"!=g&&"middle"!=g?zot(e)&&"right"==g&&(A.x+=M[Q]-A.width):A.x+=(M[Q]-A.width)/2:T.squeezeH?!zot(e)||"center"!=T.align&&"middle"!=T.align?zot(e)&&"right"==T.align&&(A.x+=s-A.width):A.x+=(s-A.width)/2:!zot(e)||"center"!=T.align&&"middle"!=T.align?zot(e)&&"right"==T.align&&(A.x+=M[Q]-A.width):A.x+=(M[Q]-A.width)/2,T.mirrorV&&U%2==1&&(A.scaleY=-X[U][Q]),A.pos(null,N[Q]),!T.squeezeV&&B?!zot(t)||"center"!=a&&"middle"!=a?zot(t)&&"bottom"==a&&(A.y+=O[U]-A.height):A.y+=(O[U]-A.height)/2:T.squeezeV?!zot(t)||"center"!=T.valign&&"middle"!=T.valign?zot(t)&&"bottom"==T.valign&&(A.y+=c-A.height):A.y+=(c-A.height)/2:!zot(t)||"center"!=T.valign&&"middle"!=T.valign?zot(t)&&"bottom"==T.valign&&(A.y+=O[U]-A.height):A.y+=(O[U]-A.height)/2,!0!==T.squeezeH&&zot(e)?n+=M[Q]+(zot(e)?T.spacingH:i):n+=s+(zot(e)?T.spacingH:i),A.x+=r,A.y+=l[Q],!0!==T.squeezeV&&zot(t)?N[Q]+=O[U]+(zot(t)?T.spacingV:G[Q]):N[Q]+=c+(zot(t)?T.spacingV:G[Q])}}function J(e){for(var t,o=[],n=0;n<e.length;n++)n%T.cols==0&&(t=[],o.push(t)),t.push(e[n]);return o}function $(e){for(var t=[],o=0;o<T.cols;o++)t.push([]);for(o=0;o<e.length;o++)t[o%T.cols][Math.floor(o/T.cols)]=e[o];return t}Z(),K(c,u),this.itemUnderPoint=function(o,n,r){if(zot(r)&&(r=!0),!zot(o)&&!zot(n)){var e=T.globalToLocal(o,n);o=e.x,n=e.y;var i=0,t=To.loop(M,function(e,t){return i+=e+T.spacingH,!((!r||"vertical"==r)&&o>i-T.spacingH&&o<i)&&(o<i-T.spacingH/2?t:void 0)});if(!1!==t&&(!0===t&&(t=l-1),!(o<0||H<o||n<0||V<n))){var a=0,e=To.loop(O,function(e,t){var o=zot(u)?T.spacingV:G[Q];return!((!r||"horizontal"==r)&&a-o<n&&n<a)&&(n<(a+=e+o)-o/2?t:void 0)});if(!1!==e)return!0===e&&(e=s-1),T.items2D[e][t]}}},this.remake=function(e){return zot(e)||(T.items=e),Z(),K(c,u),T},this.resize=function(e,t){return zot(e)&&(e=c),zot(t)&&(t=u),K(c=e,u=t),T},Object.defineProperty(this,"items2D",{get:function(){return J(T.items)},set:function(e){zon&&zogy("Tile() - items2D is read only")}}),Object.defineProperty(this,"items2DCols",{get:function(){return $(T.items)},set:function(e){zon&&zogy("Tile() - items2DCols is read only")}}),Object.defineProperty(this,"current",{get:function(){var n=[];T.width,T.cols,T.spacingH,T.cols,T.height,T.rows,T.spacingV,T.rows;return To.loop(T.items,function(e){var t=e.getBounds(),o=e.x-e.regX+t.x+t.width/2,t=e.y-e.regY+t.y+t.height/2,t=T.hitTestGrid(T.width,T.height,T.cols,T.rows,o,t,null,null,T.spacingH,T.spacingV,!0,"open");null!=t&&(n[t[0]]=e)}),n},set:function(e){zon&&zogy("Tile() - current is read only")}}),Object.defineProperty(this,"current2D",{get:function(){return J(T.current)},set:function(e){zon&&zogy("Tile() - current2D is read only")}}),Object.defineProperty(this,"current2DCols",{get:function(){return $(T.current)},set:function(e){zon&&zogy("Tile() - current2DCols is read only")}}),!1!==w&&To.styleTransforms(this,k),this.clone=function(e){if(e)for(var t=[],o=0;o<T.items.length;o++)t.push(T.items[o].clone(!0));return T.cloneProps(new To.Tile(e?To.series(t):n.clone?n.clone():n,T.cols,T.rows,T.spacingH,T.spacingV,r,c,u,T.squeezeH,T.squeezeV,d,h,g,p,T.items.length,T.mirrorH,T.mirrorV,z,!e&&y,b,this.style,this.group))}},To.extend(To.Tile,To.Container,"clone","zimContainer",!1),To.Beads=function(i,n,e,a,r,l,s,c,u,d,h,g,t,o,p){if(m=zob(To.Beads,arguments,"path, obj, count, angle, startPercent, endPercent, percents, onTop, showControls, visible, interactive, clone, group, style, inherit",this))return m;z_d("66.7"),this.zimContainer_constructor(null,null,null,null,!1),this.type="Beads",this.group=t;var f=!1===o?{}:To.getStyle(this.type,this.group,p);zot(c)&&(c=null!=f.onTop&&f.onTop),zot(u)&&(u=null!=f.showControls&&f.showControls),zot(d)&&(d=null==f.visible||f.visible),zot(h)&&(h=null==f.interactive||f.interactive),zot(i)&&(i=null!=f.path?f.path:new To.Blob({color:null,borderWidth:3,borderColor:To.blue})),i.visible=d,i.interactive=h,i.toggle(u),i.onTop=c,zot(n)&&(n=null!=f.obj?f.obj:new To.Circle(10)),zot(e)&&(e=null!=f.count?f.count:10),zot(a)&&(a=null!=f.angle?f.angle:null),zot(r)&&(r=null!=f.startPercent?f.startPercent:0),zot(l)&&(l=null!=f.endPercent?f.endPercent:100),zot(s)&&(s=null!=f.percents?f.percents:null);var m=l<r?100+l:l;if(zot(s)){var z="Squiggle"==i.type?(m-r)/(e-1):(m-r)/(e-(r!=m%100?1:0));s=[];for(var y=r-z,b=0;b<e;b++)s.push(y+z),100<(y+=z)&&(y-=100)}zot(g)&&(g=null==f.clone||f.clone);var v,w=this;w.count=e,w.percents=s,w.items=[];for(b=0;b<e;b++)v=To.Pick.choose(n),g&&0!=b&&(v=v.clone()),v.beadNum=b,v.startPercent=s[b],w.items.push(v);w.path=i.addTo(w),w.beads=(new To.Container).addTo(w,c?0:null),w.beads.type="BeadsContainer",this.resize=function(){for(var e=i.segmentRatios,t=i.segmentPoints,o=0;o<w.count;o++){var n,r=i.getCurvePoint(Math.max(0,Math.min(.9999,s[o]/100)),e,t,!0);r&&((n=w.beads.globalToLocal(r.x,r.y))&&w.items[o].loc(n,null,w.beads).rot((zot(a)?180<r.angle?r.angle-360:r.angle:a)+w.items[o].rotation))}return this},w.resize(),h&&(i.on("pressmove",w.resize),i.on("update",w.resize)),!1!==o&&To.styleTransforms(this,f),this.dispose=function(e){return e||this.zimContainer_dispose(!0),w.items=[],!0},this.clone=function(e){if(e)for(var t=[],o=0;o<w.items.length;o++)t.push(w.items[o].clone(!0));return w.cloneProps(new To.Beads(i.clone(),e?To.series(t):n.clone?n.clone():n,w.count,a,r,l,s,c,u,d,h,g,this.style,this.group))}},To.extend(To.Beads,To.Container,["clone","dispose"],"zimContainer",!1),To.Layout=function(x,k,T,e,A,P,t,B,o,n,r,i){if(a=zob(To.Layout,arguments,"holder, regions, lastMargin, lastMarginMin, backgroundColor, vertical, showRegions, scalingObject, hideKey, style, group, inherit",this))return a;z_d("80"),this.cjsEventDispatcher_constructor(),this.type="Layout",this.group=r;var a=!1===n?{}:To.getStyle(this.type,this.group,i);if(zot(x)&&(x=null!=a.holder?a.holder:null),zot(B)&&(B=null!=a.scalingObject?a.scalingObject:null),!zot(x)&&x.getBounds)if((B=zot(B)?x:B).getBounds&&B.getBounds()){var S,E=B.getBounds();x.setBounds(0,0,E.width,E.height),zot(T)&&(T=null!=a.lastMargin?a.lastMargin:0),zot(e)&&(e=null!=a.lastMarginMin?a.lastMarginMin:0),zot(P)&&(P=null==a.vertical||a.vertical),zot(A)&&(A=null!=a.backgroundColor?a.backgroundColor:""),zot(o)&&(o=null!=a.hideKey?a.hideKey:"B"),zot(t)&&(t=null!=a.showRegions?a.showRegions:null),t&&(S=new To.Shape);var I,M=this.backing=new To.Shape,O=this;if(this.active=!0,zot(k)&&(k=null!=a.regions?To.copy(a.regions):null),!zot(k)){To.loop(k,function(e,t){e instanceof createjs.DisplayObject&&(k[t]={object:e})}),this.regions=k;var j=0,L="minWidth",_="width",Y="height",D="marginLeft",X="marginMinLeft",R="maxHeight";P&&(L="minHeight",_="height",Y="width",D="marginTop",X="marginMinTop",R="maxWidth");for(var W,F=[],H=0,l=0;l<k.length;l++){if(!(I=k[l]).object||!I.object.getBounds())return void zogy("Layout(): each region object must have an object with setBounds() set");I[L]||(I[L]=0),I[_]||(I[_]=0),I.backgroundColor||(I.backgroundColor=""),I.given=0,I.maxGiven=0,"auto"==I[D]?(F[l]=!0,H++,I[X]?I[D]=I[X]:delete I[D]):I[D]&&I[X]&&I[D]<I[X]&&(I[D]=I[X]),zot(I[D])&&(I[D]=1e-4),I[R]||(I[R]=100),P?(I.align||(I.align="middle"),I.valign||(0==l?I.valign="top":l==k.length-1?I.valign="bottom":I.valign="middle",1==k.length&&(I.valign="middle"))):(I.valign||(I.valign="top"),I.align||(0==l?I.align="left":l==k.length-1?I.align="right":I.align="middle",1==k.length&&(I.align="middle"))),I[_]&&(I[L]=0),j+=I[_]+I[D]}"auto"==T?(F[k.length]=!0,T=e||0):T&&e&&T<e&&(T=e),100<(j+=T)?zogy("Layout(): cannot fit regions into 100% bounds"):(W=100-j,V(),this.resize=function(){if(O.active){E=B.getBounds(),x.setBounds(0,0,E.width,E.height),M.graphics.clear(),""!=A&&(N(M,A),M.graphics.r(0,0,E.width,E.height));for(var e=0;e<k.length;e++)(I=k[e]).maxGiven=0,I.marginGiven=0;for(var t,o,n,r=!0,i=W;r;){t=!(r=!1);for(e=0;e<k.length;e++)0<(I=k[e]).given&&0==I.maxGiven&&(m=I.object.getBounds()[_],z=I.object.getBounds()[Y],o=I.given*E[_]/100,(n=I[R]*E[Y]/100)<z/m*o&&"Window"!=I.object.type?(I.maxGiven=m/z*n*100/E[_],I.given,I.maxGiven,i-=I.maxGiven):t=!1);if(t)break;for(var a=0,e=0;e<k.length;e++)0==(I=k[e])[_]&&0==I.maxGiven&&(a+=I.object.getBounds()[_]);for(e=0;e<k.length;e++)0==(I=k[e])[_]&&0==I.maxGiven&&(I.given=I.object.getBounds()[_]/a*i)}var l=!0;if(0<(I=k[0]).maxGiven?I.maxGiven<I[L]&&(I[_]=I[L],l=!1):0<I.given&&I.given<I[L]&&(I[_]=I[L],l=!1),0<(I=k[k.length-1]).maxGiven?I.maxGiven<I[L]&&(I[_]=I[L],l=!1):0<I.given&&I.given<I[L]&&(I[_]=I[L],l=!1),!l){for(e=j=0;e<k.length;e++)I=k[e],j+=I[_]+I[D];return 100<(j+=T)?void zog("zim display - Layout(): cannot fit regions into 100% bounds"):(W=100-j,V(),void O.resize())}for(var s=!0,c=0,u=0,e=0;e<k.length;e++)c+=(I=k[e])[D],0<I[_]?u+=I[_]:0<I.maxGiven?u+=I.maxGiven:0<I.given&&(u+=I.given),0==I[_]&&(s=!1);if(s||t){var d=100-u-(c+=T);if(c-=T+k[0][D],0!=d&&0!=c)for(e=0;e<k.length;e++)0!=e&&((I=k[e]).marginGiven=I[D]/c*(c+d))}if(0<H){for(var h=0,g=0,e=0;e<k.length;e++)0<(I=k[e]).marginGiven?g+=I.marginGiven:g+=I[D],I.marginGiven=0,h+=.05<I[D]?I[D]:0;var p=(g-h)/H;for(e=0;e<F.length;e++)F[e]&&k[e]&&((I=k[e]).marginGiven=(I[X]||0)+p)}var f,m,z,y,b,v,w,C=0;S&&S.graphics&&(w=S.graphics).c();for(e=0;e<k.length;e++)0<(I=k[e]).marginGiven?C+=I.marginGiven*E[_]/100:C+=I[D]*E[_]/100,m=(m=0<I[_]?I[_]:0<I.maxGiven?I.maxGiven:0<I.given?I.given:0)*E[_]/100,z=I[R]*E[Y]/100,f=(E[Y]-z)/2,y=P?("Wrapper"==I.object.type&&I.object.resize(z),"Window"==I.object.type&&I.object.resize(z,m),"Region"==I.object.type&&I.object.setBounds(z,m),To.fit(I.object,f,C,z,m)):("Wrapper"==I.object.type&&I.object.resize(m),"Window"==I.object.type&&I.object.resize(m,z),"Region"==I.object.type&&I.object.setBounds(m,z),To.fit(I.object,C,f,m,z)),"top"==I.valign?I.object.y=y.bY:"bottom"==I.valign&&(I.object.y=y.bY+y.bHeight-y.height),"left"==I.align?I.object.x=y.bX:"right"==I.align&&(I.object.x=y.bX+y.bWidth-y.width),S&&S.graphics&&(w.s("white").ss(2).r(y.bX,y.bY,y.bWidth,y.bHeight),w.s("#ff8203").sd([20,20]).r(y.bX,y.bY,y.bWidth,y.bHeight).sd()),(v=b=0)!=C&&C+m!=E[_]||(P?v=1:b=1),z==E[Y]&&(P?b=1:v=1),""!=I.backgroundColor&&(N(M,I.backgroundColor),M.graphics.r(y.bX,y.bY,y.bWidth+b,y.bHeight+v)),C+=m,I.object.ZIMoutlineShape&&I.object.outline()}},this.resize(),S&&x.addChild(S),x.addChildAt(M,0),window.addEventListener("keydown",s),this.disable=function(){O.active=!1,window.removeEventListener("keydown",s),S&&(S.alpha=0)},this.enable=function(){O.active=!0,window.addEventListener("keydown",s),O.resize(),S&&(S.alpha=1)},this.removeShape=function(){S&&(S.graphics.clear(),S.dispose(),S=null,S=!1),window.removeEventListener("keydown",s)},this.toggled=!0,this.toggle=function(e){return S.visible=!0===e||!1!==e&&!S.visible,O.toggled=S.visible,O},!(this.addShape=function(e,t){O.removeShape(),S=e,window.addEventListener("keydown",s),x.addChild(S),O.resize()})!==n&&To.styleTransforms(this,a),this.dispose=function(){return O.resize=null,O.backing&&O.backing.dispose(),O.backing=null,O.removeShape(),!0})}}else zog("zim controls - Layout(): holder must have bounds set or provide a scalingObject with bounds");else zog("zim controls - Layout(): please provide an object with bounds set that holds the objects being laid out");function V(){for(var e=0,t=0;t<k.length;t++)((I=k[t]).given=0)==I[_]&&(e+=I.object.getBounds()[_]);for(t=0;t<k.length;t++)0==(I=k[t])[_]&&(I.given=I.object.getBounds()[_]/e*W)}function N(e,t){"GradientColor"==t.type?e.graphics.lf(t.colors,t.ratios,t.x0,t.y0,t.x1,t.y1):"GradientColor"==t.type?e.graphics.rf(t.colors,t.ratios,t.x0,t.y0,t.r0,t.x1,t.y1,t.r1):"BitmapColor"==t.type?e.graphics.bf(t.image,t.repetition,t.matrix):e.graphics.f(I.backgroundColor)}function s(e){e=e||event,S&&String.fromCharCode(e.keyCode)==o.toUpperCase()&&(O.toggle(),S.stage&&S.stage.update())}},To.extend(To.Layout,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),To.Accessibility=function(u,e,o,t,n,h,g,r,i,a,l,s,c,d,p){var f;if(f=zob(To.Accessibility,arguments,"appName, tabOrder, tabIndex, cycle, decimals, frame, application, alwaysHighlight, AHTime, AHColor, AHBorderWidth, AHBorderPadding, AHAlpha, AHObject, AHObjectScale",this))return f;z_d("30.5"),this.cjsEventDispatcher_constructor(),this.type="Accessibility",zot(u)&&(u="application"),zot(t)&&(t=!1),zot(n)&&(n=2),zot(h)&&(h=zdf),zot(g)&&(g=!To.mobile()),zot(r)&&(r=!1);var m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L,_,Y,D,X,R,W,F,H,V=Ao(i);function N(e){var t=e.currentTarget.boundsToGlobal(),o=t.x+t.width/2,t=t.y+t.height/2;(e.stageX/To.scaX<o-5||e.stageX/To.scaX>o+5||e.stageY/To.scaY<t-5||e.stageY/To.scaY>t+5?U:q)()}function G(){M&&(M.innerHTML="")}function q(){var e,t;B=!0,J(),M&&M.setAttribute("aria-hidden",!1),To.ACTIONEVENT="click",zns||(ACTIONEVENT="click"),h.stage.removeChild(k),A&&(y.alwaysHighlight=!1),h.stage.update();for(var o=0;o<b.length;o++)(t=(e=b[o]).obj.zimTabTag).disabled=!1,e.title=e.title.replace(/\s\(use arrow keys\)/,""),t.setAttribute("aria-label",e.title),t.addEventListener("focus",Q)}function U(){B=!1;for(var e=0;e<b.length;e++)b[e].obj.zimTabTag.disabled=!1;J(),r&&function(){for(var e=0;e<w.length;e++){var t=w[e];t.zimObject&&("Loader"==t.zimObject.type||"TextArea"==t.zimObject.type||"Tag"==t.zimObject.type)||(w[e].style.left="-2000px")}}()}function Q(e){var t=e.currentTarget,e=t.zimObject;v=e.zimTabIndex,e.focus=!0;e=new createjs.Event("change");e.title=t.getAttribute("aria-label"),y.dispatchEvent(e)}function Z(e){B=!1,e.target.focusTab.focus()}function K(){(zot(B)||B?q:U)()}function J(){P=!0,E.removeEventListener("focus",K),I.removeEventListener("focus",K),O.removeEventListener("focus",Z),j.removeEventListener("focus",Z),O.parentNode&&(O.parentNode.removeChild(O),j.parentNode.removeChild(j)),L.removeEventListener("focus",Z),_.removeEventListener("focus",Z),L.parentNode&&(L.parentNode.removeChild(L),_.parentNode.removeChild(_));for(var e=0;e<S.length;e++)S[e][0].off("mousedown",S[e][1])}function $(e){var t=e.currentTarget;if("RadioButton"==t.type||"TabsButton"==t.type||"PadButton"==t.type)for(var o=0;o<t.zimTabParent.buttons.length;o++){var n=t.zimTabParent.buttons[o];n.zimTabTag.setAttribute("aria-label",n.zimTabTag.getAttribute("aria-label").split(" - currently")[0]+(t.zimTabParent.selectedIndex==n.tabIndex?" - currently selected.":" - currently not selected."))}y.tabIndex=e.currentTarget.zimTabIndex,y.activatedObject=t}function ee(e){return e.talk||("TextArea"==e.type||"RadioButtons"==e.type||"Tabs"==e.type||"Pad"==e.type?e.type:"Waiter"==e.type?"Waiter active - please wait":e.text?e.type+" - "+("a"==e.text||"A"==e.text?"eh":e.text):e.type+("Dial"==e.type||"Slider"==e.type||"ColorPicker"==e.type||"Stepper"==e.type?" (use arrow keys)":"")+("TextArea"==e.type?" (press ENTER to edit)":""))}function te(e){var t=e.obj;e.title=e.title.replace(/\.$/,""),"RadioButton"==t.type||"TabsButton"==t.type||"PadButton"==t.type?e.title=e.title+(t.tabIndex==t.zimTabParent.selectedIndex?" - currently selected":" - currently not selected"):"CheckBox"==t.type?e.title=e.title+(t.checked?" - currently checked":" - currently not checked"):"Stepper"==t.type?e.title=e.title+" - currently displaying "+t.currentValue:"Slider"==t.type||"Dial"==t.type?e.title=e.title+" - currently at "+To.decimals(t.currentValue,y.decimals):"ColorPicker"==t.type?e.title=e.title+" - currently at "+t.selectedColor:"TextArea"==t.type?e.title=e.title+(""!=t.tag.value?"":" - placeholder: "+t.tag.placeholder):"Indicator"==t.type&&(e.title=e.title+" - currently "+(0<=t.selectedIndex?"at "+(t.selectedIndex+1)+" of "+t.num:"not indicating")),e.title+="."}function oe(e,t,o,n,r){var i,a;if(n&&(a=n.obj),n&&("TextArea"==a.type||"Loader"==a.type))return(i=a.tag).setAttribute("aria-label",t),a&&i.setAttribute("aria-hidden",!a.stage),"before"==r?o.parentNode.insertBefore(i,o):o.parentNode.insertBefore(i,o.nextSibling),i.style.zIndex=-5,i.zimObject=a,n.obj.zimTabTag=i,w.push(i),i;if(!n||"Dial"!=a.type&&"Slider"!=a.type&&"Stepper"!=a.type&&"ColorPicker"!=a.type)i=document.createElement("div"),a&&(i.zimObject=a),i.innerHTML="tag",i.setAttribute("role",g?"application":"button"),"android"==A&&i.addEventListener("click",function(e){a.dispatchEvent("click")});else{var l,s,c=[];if("Dial"==a.type||"Slider"==a.type)for(var u=a.step<=0?(a.max-a.min)/20:a.step,d=a.min;d<a.max;d+=u)c.push(a.min+d);else"Stepper"==a.type?c=a.stepperArray:"ColorPicker"==a.type&&(c=a.colors);(i=document.createElement("select")).disabled=!0,i.zimObject=a,i.addEventListener("change",function(e){!B&&"android"==!A||(e.currentTarget.zimObject.zimTabParent.currentValueEvent=e.target.value,h.stage.update())}),i.size=1;for(d=0;d<c.length;d++)l=c[d],(s=document.createElement("option")).setAttribute("aria-label",l),s.innerHTML=l,i.add(s),l==a.zimTabParent.currentValue&&s.setAttribute("selected","selected");i.setAttribute("role","button")}return i.setAttribute("id",e),i.setAttribute("tabindex",0),i.setAttribute("aria-label",t),a&&i.setAttribute("aria-hidden",!a.stage),"before"==r?o.parentNode.insertBefore(i,o):o.parentNode.insertBefore(i,o.nextSibling),i.style.position="absolute",n?(o=(a=n.obj).boundsToGlobal(),h.retina?(i.style.left=h.x+o.x*h.scale/z+"px",i.style.top=h.y+o.y*h.scale/z+"px",i.style.width=o.width*h.scale/z+"px",i.style.height=o.height*h.scale/z+"px"):(i.style.left=h.x+o.x*h.scale+"px",i.style.top=h.y+o.y*h.scale+"px",i.style.width=o.width*h.scale+"px",i.style.height=o.height*h.scale+"px"),n.obj.zimTabTag=i):(i.style.left="-1000px",i.style.top=h.y+"px"),i.style.overflow="hidden",i.style.zIndex=-5,i.style.fontSize="20px",i.style.color="rgba(0,0,0,.01)",w.push(i),i}function ne(e){e.ctrlKey?re(e.shiftKey?-1:1):(e.shiftKey?y.tab(-1):y.tab(1),e.preventDefault())}function re(e){D=!1,zid(T+(1==e?"SuffixTab":"PrefixTab")).focus(),h.stage.removeChild(d),h.stage.update(),y.tabIndex=-1}zot(i)&&(i="s"==V?.7:700),zot(a)&&(a="brown"),zot(l)&&(l=3),zot(s)&&(s=5),zot(c)&&(c=.8),zot(p)&&(p=.8),zot(d)?(m=new To.Shape({style:!1})).mouseEnabled=!1:d.mouseEnabled&&(d.mouseEnabled=!1),zot(h=zdf)?zon&&zogy("Accessibility - needs a Frame"):(z=h.retina&&window.devicePixelRatio||1,(y=this).cycle=t,y.decimals=n,y.alwaysHighlight=r,y.AHTime=i,y.AHColor=a,y.AHBorderWidth=l,y.AHBorderPadding=s,y.AHAlpha=c,y.AHObjectScale=p,v=b=-1,w=[],C=[],x={RadioButtons:"option",Tabs:"tab",Pad:"key"},T=h.canvas.id,A=To.mobile(),P=!1,B=null,S=[],Object.defineProperty(this,"tabOrder",{get:function(){return b},set:function(e){E&&E.removeEventListener("focus",G),I&&I.removeEventListener("focus",G);for(var t,o,n=0;n<w.length;n++)w[n].parentElement&&(w[n].outerHTML="");for(w=[],n=0;n<C.length;n++)(t=b[n])&&C[n][0].off("mousedown",C[n][1]);C=[],b=[];var r=[];Y=h.shim?document.body:h.canvas,F=!1;for(var i=0,n=0;n<e.length;n++){if("HotSpots"==(t=e[n]).type&&(e.splice.apply(e,[n,1].concat(t.hotSpots)),t=t.hotSpots[0]),"HotSpot"==t.type&&(t=t.spot),t.constructor=={}.constructor){if(!(o=t.obj)||!o.getStage)continue;t.title||(t.title=ee(o))}else t={obj:o=t,title:ee(t)};if("RadioButtons"==o.type||"Tabs"==o.type||"Pad"==o.type){var a=[];i--;for(var l=0;l<o.buttons.length;l++){i++;var s=o.buttons[l],c={obj:s,title:t.title+" - "+x[o.type]+": "+("a"==s.text||"A"==s.text?"eh":s.text)};a.push(c),s.zimTabParent=o,s.zimTabParent.zimAccessibility=y,s.zimTabIndex=n+i,s.tabIndex=l,s.zimAccessibility=y,te(c),Y=oe(T+"Tab"+(n+i),c.title,Y,c),C.push([s,s.on("mousedown",$)]),P||S.push([s,s.on("mousedown",N)])}r=r.concat(a)}else o.zimTabIndex=n+i,o.zimTabParent=o,te(t),o.zimAccessibility=y,C.push([o,o.on("mousedown",$)]),P||S.push([o,o.on("mousedown",N)]),r.push(t),Y=oe(T+"Tab"+(n+i),t.title,Y,t)}(E=y.startAppTag=oe(T+"PrefixTab",u+" start",h.shim?document.body:h.canvas,null,"before")).addEventListener("focus",G),P||(E.addEventListener("focus",K),(O=oe(T+"noAriaTab","",E,null,"before")).setAttribute("aria-hidden",!0),O.focusTab=E,O.addEventListener("focus",Z),(L=oe(T+"noAriaTab","",E)).setAttribute("aria-hidden",!0),L.focusTab=E,L.addEventListener("focus",Z)),Y=oe(T+"BufferTab","",Y),A&&Y.setAttribute("aria-hidden",!0),Y=I=y.endAppTag=oe(T+"SuffixTab",u+" end",Y),I.addEventListener("focus",G),P||(I.addEventListener("focus",K),Y=j=oe(T+"noAriaTab","",I),j.setAttribute("aria-hidden",!0),j.focusTab=I,j.addEventListener("focus",Z),(_=oe(T+"noAriaTab","",I,null,"before")).setAttribute("aria-hidden",!0),_.focusTab=I,_.addEventListener("focus",Z)),b=r}}),Object.defineProperty(this,"tabIndex",{get:function(){return v},set:function(e){var t,o,n,r,i;function a(){if(v&&-1<v)b&&b[v]&&(b[v].obj.focus=!1);else for(var e=0;e<b.length;e++)b[e].obj.focus=!1}function l(){a(),D=!1,y.AHObject&&h.stage.removeChild(y.AHObject),y.alwaysHighlightShape&&h.stage.removeChild(y.alwaysHighlightShape),h.stage.update(),v=-1}H&&(e<0||e>=b.length?l():(e!=v&&a(),(t=b[e].obj).stage?(v=e,t.focus=!0,X=!(D=!0),y.changeTitle(t),t.zimTabTag.focus(),setTimeout(function(){t.zimTabTag.focus();var e=new createjs.Event("change");e.title=t.zimTabTag.getAttribute("aria-label"),y.dispatchEvent(e)},150),!y.alwaysHighlight||B&&A||(y.AHObject?(k=y.AHObject,r=To.boundsToGlobal(t),y.AHObject.alp(y.AHAlpha).addTo(h.stage,null,!1),y.AHObject.fit(r.x,r.y,r.width,r.height),y.AHObject.sca(y.AHObject.scaleX*y.AHObjectScale),0<y.AHTime&&(W=setTimeout(function(){h.stage.removeChild(y.AHObject),h.stage.update()},y.AHTime*("s"==V?1e3:1)))):(k=m,i=t.getBounds(),o=t.localToGlobal(i.x-5,i.y-5),n=t.localToGlobal(i.x+i.width+5,i.y-5),e=t.localToGlobal(i.x+i.width+5,i.y+i.height+5),r=t.localToGlobal(i.x-5,i.y+i.height+5),(i=m.graphics).clear(),i.s(y.AHColor).ss(y.AHBorderWidth).mt(o.x-y.AHBorderPadding,o.y-y.AHBorderPadding).lt(n.x+y.AHBorderPadding,n.y-y.AHBorderPadding).lt(e.x+y.AHBorderPadding,e.y+y.AHBorderPadding).lt(r.x-y.AHBorderPadding,r.y+y.AHBorderPadding).lt(o.x-y.AHBorderPadding,o.y-y.AHBorderPadding).cp(),m.alpha=y.AHAlpha,0<y.AHTime&&(W=setTimeout(function(){h.stage.removeChild(m),h.stage.update()},y.AHTime*("s"==V?1e3:1)))),h.stage.addChild(k),h.stage.update())):l()))}}),Object.defineProperty(this,"aria",{get:function(){return B},set:function(e){(B=e)&&q()}}),"android"==A&&(To.ACTIONEVENT="click",zns||(ACTIONEVENT="click")),zot(e)?setTimeout(function(){var t;-1==b&&(b=[],t=[],To.loop(h.stage,function(e){e.type&&t.push(e)}),y.tabOrder=t,zot(o)||(y.tabIndex=o))},50):(b=[],y.tabOrder=e,zot(o)||(y.tabIndex=o)),X=!(D=!1),R=h.on("keydown",function(e){var t,o;9==e.keyCode&&(!function(){for(var e=!1,t=0;t<w.length;t++)if(document.activeElement==w[t]){e=!0;break}return!(document.activeElement!=h.canvas&&!e)}()&&(D=!1,-1!=y.tabIndex&&(y.tabIndex=-1)),D?ne(e):(t=e,h.shiftKey||zid(T+"PrefixTab")!=document.activeElement&&h.canvas!=document.activeElement?!h.shiftKey||zid(T+"SuffixTab")!=document.activeElement&&zid(T+"BufferTab")!=document.activeElement||(0<b.length&&(b[0].obj.focus=!0),D=X=!0,ne(t)):(0<b.length&&(b[b.length-1].obj.focus=!0),D=X=!0,ne(t)))),D&&0<b.length&&0<=y.tabIndex&&13==e.keyCode&&(t=(o=b[y.tabIndex]).obj,o&&t.stage&&(e=new createjs.Event("mousedown"),o=new createjs.Event("click"),e.fromEnter=o.fromEnter=!0,"Pane"==t.type?(t.backdrop.dispatchEvent(e),t.backdrop.dispatchEvent(o)):(t.dispatchEvent(e),t.dispatchEvent(o))))}),this.tab=function(e){if(clearTimeout(W),k&&h.stage.removeChild(k),zot(e)&&(e=1),0!=b.length){for(var t=0;t<b.length;t++)if((i=b[t].obj).focus){i.focus=!1;for(var o=t+e,n=(o+1e4*b.length)%b.length,r=b[n],i=r.obj,a=0,l=!1;!i.stage||!(!i.zimTabParent&&(zot(i.enabled)||i.enabled)||i.zimTabParent&&(zot(i.zimTabParent.enabled)||i.zimTabParent.enabled));)if(a++,n=((o+=e)+100*b.length)%b.length,i=b[n].obj,a==b.length){l=!0;break}if(l||!y.cycle&&o!=n&&!X)return void re(e);X=!1,y.tabIndex=n;break}}else re(e)},F=!(this.changeTitle=function(e,t,o){var n,r;"number"!=typeof e&&(e=e.zimTabIndex),zot(e)||(o&&zot(t)?y.tabIndex=e:(r=(n=b[e]).obj,zot(t)&&(t=r.zimTabTag.getAttribute("aria-label").split(" - currently")[0]),n.title=t,te(n),r.zimTabTag.setAttribute("aria-label",n.title),o&&(y.tabIndex=e)))}),this.talk=function(e){F||((M=oe(T+"TalkTab","",I)).setAttribute("role","alert"),F=!0),M.removeAttribute("role"),M.setAttribute("aria-label",e),M.setAttribute("role","alert");var t=new createjs.Event("change");t.title=e,y.dispatchEvent(t)},this.resize=function(e){if(zot(e))for(var t=0;t<b.length;t++)o(b[t].obj);else"number"!=typeof e&&(e=e.zimTabIndex),e<0||(!(e=b[e].obj).stage&&k&&e==y.currentObject&&(h.stage.removeChild(k),h.stage.update()),o(e));function o(e){var t,o;"TextArea"!=e.type&&"Loader"!=e.type?(t=e.boundsToGlobal(),o=e.zimTabTag,h.retina?(o.style.left=h.x+t.x*h.scale/z+"px",o.style.top=h.y+t.y*h.scale/z+"px",o.style.width=t.width*h.scale/z+"px",o.style.height=t.height*h.scale/z+"px"):(o.style.left=h.x+t.x*h.scale/z/z+"px",o.style.top=h.y+t.y*h.scale/z/z+"px",o.style.width=t.width*h.scale/z/z+"px",o.style.height=t.height*h.scale/z/z+"px"),o.setAttribute("aria-hidden",!e.stage),o.hidden=!e.stage):e.resize()}},Object.defineProperty(this,"currentObject",{get:function(){return b[v]&&b[v].obj?b[v].obj:null},set:function(e){for(var t=0;t<b.length;t++)if(b[t].obj==e){y.tabIndex=t;break}}}),H=!0,Object.defineProperty(this,"enabled",{get:function(){return H},set:function(e){H=e}}),this.dispose=function(e,t,o){m&&m.graphics.clear(),y.tabOrder=[];for(var n=0;n<w.length;n++)w[n].parentElement&&(w[n].outerHTML="");E&&(E.removeEventListener("focus",G),E.removeEventListener("focus",K),E.parentNode&&(E.outerHTML="")),O&&(O.removeEventListener("focus",Z),O.parentNode&&(O.outerHTML="")),L&&(L.removeEventListener("focus",Z),L.parentNode&&(L.outerHTML="")),Y&&Y.parentNode&&(Y.outerHTML=""),I&&(I.removeEventListener("focus",G),I.removeEventListener("focus",K),I.parentNode&&(I.outerHTML="")),j&&(j.removeEventListener("focus",Z),j.parentNode&&(j.outerHTML="")),_&&(_.removeEventListener("focus",Z),_.parentNode&&(_.outerHTML="")),y.removeAllEventListeners(),h.off("keydown",R)})},To.extend(To.Accessibility,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),To.Manager=function(e){z_d("75");var r=this;this.type=e,this.items=[],this.add=function(e){return Array.isArray(e)?r.items=r.items.concat(e):r.items.push(e),r},this.remove=function(e){if(r){if(e){Array.isArray(e)||(e=[e]);for(var t=e.length-1;0<=t;t--){o=e[t];var n=r.items.indexOf(o);-1!=n&&r.items.splice(n,1)}}else r.items=[];return r}},this.resize=function(e){if(r){if(e){Array.isArray(e)||(e=[e]);for(t=e.length-1;0<=t;t--)o=e[t],o.resize||-1==r.items.indexOf(o)?o.resize():r.items.splice(r.items.indexOf(o),1)}else for(var t=r.items.length-1;0<=t;t--)r.items[t].resize?r.items[t].resize():r.items.splice(t,1);return r}},this.toggle=function(e,t){if(r){if(t){Array.isArray(t)||(t=[t]);for(n=t.length-1;0<=n;n--)o=t[n],o.resize||-1==r.items.indexOf(o)?o.toggle(e):r.items.splice(r.items.indexOf(o),1)}else for(var n=r.items.length-1;0<=n;n--)r.items[n].resize?r.items[n].toggle(e):r.items.splice(n,1);return r}},this.dispose=function(e){if(r){if(r.resize=null,e){Array.isArray(e)||(e=[e]);for(t=e.length-1;0<=t;t--)o=e[t],-1!=r.items.indexOf(o)&&r.items.splice(r.items.indexOf(o)),o.dispose&&o.dispose()}else{for(var t=r.items.length-1;0<=t;t--)r.items[t].resize?r.items[t].dispose():r.items.splice(t,1);r.items=null}return!0}}},To.ResizeManager=function(){z_d("75.5"),To.Manager.call(this,"ResizeManager")},To.ResizeManager.prototype=new To.Manager,To.ResizeManager.prototype.constructor=To.ResizeManager,To.TransformManager=function(e,n){z_d("75.7");var a=this;function t(e){!localStorage||e&&!e.pressup||a.savePersist(e)}this.type="TransformManager",this.persistID=n,this.items=[],this.add=function(e){for(var t,o,n=[],n=Array.isArray(e)?e:[e],r=!1,i=0;i<n.length;i++)(o=n[i]).transformControls&&(o.originalVisible=o.transformControls.visible),o.toggle&&o.toggle(!1),0==a.items.length&&0==i&&(r=!0),"Blob"==o.type||"Squiggle"==o.type?(a.persistID||r&&(r=!1,o.controlsVisible=!0,a.currentObject=o),o.on("change",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.controlType,a.dispatchEvent(t)}),o.on("controlsshow",function(e){var t=new createjs.Event("transformshow");a.currentObject=t.transformObject=e.target,a.dispatchEvent(t)}),o.on("controlshide",function(e){var t=new createjs.Event("transformhide");t.transformObject=e.target,a.currentObject=null,a.dispatchEvent(t)}),o.on("update",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.controlType,a.dispatchEvent(t)})):(t=o.transformControls,a.persistID||r&&"Layer"!=o.type&&(r=!1,o.originalVisible&&(t.show(),a.currentObject=o)),o.on("transformed",function(e){var t=new createjs.Event("transformed");t.transformObject=e.target,t.transformType=e.transformType,a.dispatchEvent(t)}),o.on("transformshow",function(e){var t=new createjs.Event("transformshow");a.currentObject=t.transformObject=e.target,a.dispatchEvent(t)}),o.on("transformhide",function(e){var t=new createjs.Event("transformhide");t.transformObject=e.target,a.currentObject=null,a.dispatchEvent(t)}));a.items=a.items.concat(e),a.persist&&!zot(a.persistID)&&a.persist(a.persistID)},this.remove=function(e){if(zot(e))a.items=[];else{Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){o=e[t],a.currentObject==o&&(a.currentObject=null),o.transformedEvent&&(o.off("transformed",o.transformedEvent),o.transformedEvent=null),"Blob"==o.type||"Squiggle"==o.type?o.controlsVisible=!1:o.transformControls.remove();var o=a.items.indexOf(o);-1!=o&&a.items.splice(o,1)}n&&a.savePersist()}},this.show=function(e){if(!zot(e)){if("Blob"==e.type||"Squiggle"==e.type)e.controlsVisible||(e.controlsVisible=!0);else{var t=e.transformControls;if(!t||t.visible)return;t.show()}a.currentObject=e}},this.hide=function(e){zot(e)||(a.currentObject==e&&(a.currentObject=null),"Blob"==e.type||"Squiggle"==e.type?e.controlsVisible&&(e.controlsVisible=!1):(e=e.transformControls)&&!e.visible&&e.hide())},this.hideAll=function(e){for(var t,o=0;o<a.items.length;o++)(t=a.items[o])&&(t.transformControls||t.update)?a.items[o]!=e&&("Blob"==t.type||"Squiggle"==t.type?t.controlsVisible&&(t.controlsVisible=!1):(t=a.items[o].transformControls).visible&&t.hide()):a.items.splice(o);a.currentObject=null},this.resize=function(){if(a){for(var e,t=0;t<a.items.length;t++)(e=a.items[t])&&(e.transformControls||e.update)?"Blob"==e.type||"Squiggle"==e.type?e.update():e.transformControls.resize():a.items.splice(t);n&&a.savePersist()}},zot(e)||a.add(e);var l="TransformManager persist(persistID) - sorry, must provide id";this.persist=function(e){var o;if(zot(e)&&zon)zog(l);else{a.persistID=e;var n=0;if(localStorage&&localStorage[e]){var r=a.persistData=JSON.parse(localStorage[e]);if(r.length==a.items.length)for(var i=0;i<a.items.length;i++)r[i].controls&&(a.currentObject=a.items[i]),!r[i]||"Blob"!=r[i].type&&"Squiggle"!=r[i].type?r[i]&&(zot(a.items[i].transformControls)?function(){o=a.items[i];var t=r[i];To.interval(50,function(e){o.transformControls&&(o.transformControls.setData(t),o.dispatchEvent("persistset"),++n==r.length&&(setTimeout(function(){o==a.currentObject&&a.currentObject.toggle(!0),a.dispatchEvent("persistcomplete")},100),e.clear()))},20,null,null,"ms")}():(a.items[i].transformControls.setData(r[i]),o=a.items[i],To.interval(50,function(e){o.dispatchEvent("persistset"),++n==r.length&&(setTimeout(function(){o==a.currentObject&&a.currentObject.toggle(!0),a.dispatchEvent("persistcomplete")},100),e.clear())},20,null,null,"ms"))):(a.items[i].points.length!=r[i].points.length&&(a.items[i].points=r[i].points),a.items[i].setData(r[i]),a.items[i]==a.currentObject&&a.currentObject.toggle(!0))}for(i=0;i<a.items.length;i++)(o=a.items[i]).transformedEvent||("Blob"==o.type||"Squiggle"==o.type?(o.transformedEvent=o.on("change",function(e){e.pressup=!0,t(e)}),o.transformedEvent=o.on("update",function(e){e.pressup=!0,t(e)}),o.transformedEvent=o.on("controlsshow",function(e){e.pressup=!0,t(e)}),o.transformedEvent=o.on("controlshide",function(e){e.pressup=!0,t(e)})):(o.transformedEvent=o.on("transformed",t),o.transformedEvent=o.on("transformshow",t),o.transformedEvent=o.on("transformhide",t)))}},this.savePersist=function(e){for(var t=[],o=0;o<a.items.length;o++){var n=a.items[o];"Blob"==n.type||"Squiggle"==n.type?n.recordData&&t.push(n.recordData()):n.transformControls&&n.transformControls.recordData&&t.push(n.transformControls.recordData())}a.persistData=t,localStorage[a.persistID]=JSON.stringify(t)},this.clearPersist=function(e){zot(e)&&zon?zog(l):(a.persistData=null,localStorage&&localStorage.removeItem(e))},this.stopPersist=function(){for(var e=0;e<a.items.length;e++){var t=a.items[e];t.transformedEvent&&("Blob"==t.type||"Squiggle"==t.type?t.off("change",t.transformedEvent):t.off("transformed",t.transformedEvent),t.transformedEvent=null)}a.persistData=null},zot(n)||a.persist(n),this.dispose=function(e,t,o){if(zot(e)&&(e=!0),a.removeAllEventListeners(),a.persistID&&e&&a.stopPersist(),t)for(var n=0;n<a.items.length;n++){var r=a.items[n];("Blob"==r.type||"Squiggle"==r.type?r:r.transformControls).dispose()}}},To.extend(To.TransformManager,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),To.GuideManager=function(){z_d("77"),To.Manager.call(this,"GuideManager")},To.GuideManager.prototype=new To.Manager,To.GuideManager.prototype.constructor=To.GuideManager,To.GridManager=function(){z_d("79"),To.Manager.call(this,"GridManager")},To.GridManager.prototype=new To.Manager,To.GridManager.prototype.constructor=To.GridManager,To.LayoutManager=function(){z_d("81"),To.Manager.call(this,"LayoutManager")},To.LayoutManager.prototype=new To.Manager,To.LayoutManager.prototype.constructor=To.LayoutManager,To.SelectionSet=function(e){z_d("81.5"),this.type="SelectionSet",zot(e)&&(e=[]),this.selections=e,this.clear=function(){this.selections=[]},this.isSelected=function(e){return 0<=this.selections.indexOf(e)},this.add=function(e,t,o,n){if(!zot(e)&&(zot(t)&&(zot(this.selectionManager)||(t=this.selectionManager.multiple)),zot(this.selectionManager)||(this.selectionManager.setCurrent(this),!t&&this.selectionManager.multipleSets&&this.selectionManager.clear()),t||this.clear(),!(0<=this.selections.indexOf(e)))){if(this.selections.push(e),!zot(o)){Array.isArray(o)||(o=[o]);for(var r=0;r<=o.length;r++)o[r].add(e,t)}if(!zot(n))for(Array.isArray(n)||(n=[n]),r=0;r<=n.length;r++)n[r].remove(e,t)}},this.remove=function(e,t,o,n){if(!zot(e)){zot(t)&&(zot(this.selectionManager)||(t=this.selectionManager.multiple)),zot(this.selectionManager)||this.selectionManager.setCurrent(this),t||this.clear();var r=this.selections.indexOf(e);if(zot(this.selectionManager)||(this.selectionManager.setCurrent(this),!t&&this.selectionManager.multipleSets&&this.selectionManager.clear()),t||this.clear(),t?0<=r&&this.selections.splice(r,1):this.clear(),!zot(o)){Array.isArray(o)||(o=[o]);for(var i=0;i<=o.length;i++)o[i].remove(e,t)}if(!zot(n))for(Array.isArray(n)||(n=[n]),i=0;i<=n.length;i++)n[i].add(e,t)}},this.toggle=function(e,t,o,n){this.isSelected(e)?this.remove(e,t,o,n):this.add(e,t,o,n)},this.dispose=function(e,t,o){return this.clear(),!(this.selections=null)}},To.SelectionManager=function(o,e,t){z_d("81.6"),this.cjsEventDispatcher_constructor(),this.type="SelectionManager",zot(o)&&(o=[]),zot(t)&&(t=!0),Array.isArray(o)||(o=[o]),this.sets=o,this.multipleKey=e,this.multipleSets=t,this.multiple=!1;for(var n=this,r=0;r<o.length;r++)o[r].selectionManager=this;this.clear=function(){this.currentSet=null;for(var e=0;e<o.length;e++)o[e].clear()},this.setCurrent=function(e){this.currentSet=e;for(var t=0;t<o.length;t++)o[t]!=e&&(this.multipleSets||o[t].clear())};t=new createjs.Event("keydown");this.eventRemove=t.remove,this.keydownEvent=function(e){e.remove=n.eventRemove,n.multipleKey&&(n.multiple=e[n.multipleKey+"Key"]),n.ctrlKey=e.ctrlKey,n.shiftKey=e.shiftKey,n.metaKey=e.metaKey,n.dispatchEvent(e),90==e.keyCode&&(n.ctrlKey||n.metaKey)&&n.dispatchEvent("undo")},window.addEventListener("keydown",this.keydownEvent),this.keyupEvent=function(e){n.multipleKey&&(n.multiple=e[n.multipleKey+"Key"]),n.ctrlKey=e.ctrlKey,n.shiftKey=e.shiftKey,n.metaKey=e.metaKey,e.remove=n.eventRemove,n.dispatchEvent(e)},window.addEventListener("keyup",this.keyupEvent),this.dispose=function(){this.clear(),window.removeEventListener("keydown",this.keydownEvent),window.removeEventListener("keyup",this.keyupEvent)}},To.extend(To.SelectionManager,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),To.Bind=function(e,t,m,o,z,n,y,r){var i;if(i=zob(To.Bind,arguments,"connection, bindType, master, masterFilter, couple, smartDecimals, report, setDefault",this))return i;z_d("81.8"),this.type="Bind";var b=this;function v(r,e,t){var i=[];if(zot(e)&&zot(t)){if("from"==r&&b.bindType!=LOCALSTORAGE)return To.loop(b.bindings,function(e){e.filter&&i.push(e.filter)}),[i,"full"];var o=b.ids}else zot(e)||Array.isArray(e)||(e=[e]),zot(t)||Array.isArray(t)||(t=[t]),e&&(o=[],To.loop(e,function(e){"string"==typeof e?o.indexOf(e)<0&&o.push(e):(e=b.objIDs.at(e))&&To.loop(e,function(e){o.indexOf(e)<0&&o.push(e)})}));var n,a,l={};return o?(a=t,To.loop(o,function(o){var n,e=b.bindings[o];e&&(e.filter&&i.push(e.filter),n=e.obj,To.loop(a||e.props,function(e){var t=b.toIDs[e];t&&0<=t.indexOf(o)&&("from"==r?(l[o]||(l[o]=[]),l[o].push(e)):(l[o]||(l[o]={}),"number"==typeof(t=n[e])&&b.smartDecimals&&(t=1<t?To.decimals(t,1):To.decimals(t,2)),l[o][e]=To.copy(t)))}))})):t&&(n=[],To.loop(t,function(o){To.loop(b.toIDs[o],function(e){var t=b.bindings[e];n.indexOf(e)<0&&(t.filter&&i.push(t.filter),n.push(e));t=t.obj;"from"==r?(l[e]||(l[e]=[]),l[e].push(o)):(l[e]||(l[e]={}),"number"==typeof(t=t[o])&&b.smartDecimals&&(t=1<t?To.decimals(t,1):To.decimals(t,2)),l[e][o]=To.copy(t))})})),[i,l]}zot(e)&&localStorage&&zot(c)&&(zot(t)||t==LOCALSTORAGE)?(e="zimBind",t=LOCALSTORAGE):e&&e.match(/\/|\./)?(zot(t)&&(t=GET),e.match(/\?/)?e+="&":e+="?"):e&&zot(t)&&(t=LOCALSTORAGE),zot(n)&&(n=!0),t!=LOCALSTORAGE||localStorage||(zon&&zogy("Bind() - no localStorage"),b.error="error - no localStorage"),this.connection=e,this.bindType=t,this.master=m,this.masterFilter=o,this.smartDecimals=n,zot(y)&&(y=!1),c&&!r||(c=this),Object.defineProperty(b,"default",{get:function(){return b==c},set:function(e){e||c!=b?e&&(c=b):c=null}}),this.bindType==POST&&(b.ajax=new To.Ajax),this.bindings={},this.ids=[],this.data={},this.objIDs=new To.Dictionary(!0),this.toIDs={},this.fromIDs={},this.add=function(o,e,t,n,r){if(zot(t)||zot(e)||zot(o))return b;if(b.bindings[o]){if(b.bindings[o].obj!=e)return zon&&zogy("Bind() - id can be used with only one object"),b}else{b.ids.indexOf(o)<=0&&b.ids.push(o),b.bindings[o]={obj:e,props:[]},zot(r)||"function"!=typeof r||(b.bindings[o].filter=r);var i=b.objIDs.at(e);i?i.indexOf(o)<0&&i.push(o):b.objIDs.add(e,[o])}Array.isArray(t)||t.constructor=={}.constructor||(t=[t]);var a=b.bindings[o].props;function l(e,t,o){zot(e[t])?e[t]=[o]:e[t].indexOf(o)<0&&e[t].push(o)}return Array.isArray(t)?To.loop(t,function(e){l(b.toIDs,e,o),l(b.fromIDs,e,o),a.indexOf(e)<0&&a.push(e)}):To.loop(t,function(e,t){t!=To.BOTH&&t!=To.TO||l(b.toIDs,e,o),t!=To.BOTH&&t!=To.FROM||l(b.fromIDs,e,o),a.indexOf(e)<0&&a.push(e)}),y&&C("Bind Report: ADD ["+o+"]",(t?" "+t:"")+(n?" "+n:"")),b.bindType==LOCALSTORAGE?(b.from(null,o,t,n),b.data&&!To.isEmpty(b.data)||b.to(o,t)):(w("bind",null,[r],b.data,n),b.applyData()),b},this.updatefilter=function(e,t){e=b.bindings[e];return e&&(zot(t)?e.filter&&delete e.filter:"function"==typeof t&&(e.filter=t)),b},this.remove=function(e,t,o,n,r,i){var a;zot(e)||Array.isArray(e)||(e=[e]),zot(e)||(s=[],a=[],To.loop(e,function(e){("string"==typeof e?s:a).push(e)})),zot(t)||Array.isArray(t)||(t=[t]),zot(r)&&(r=!0),0==(e=s.concat(a)).length&&(e=null);var l=v("from",e,t);if("stop"!=(e=w("remove",n,l[0],l=l[1],o))){var s,n=To.copy(l);return zot(t)||0==t.length?(0<s.length&&To.loop(s,function(e){d(e,!0)}),0<a.length&&To.loop(a,function(e){0<(s=b.objIDs.at(e)).length&&To.loop(s,function(e){d(e,!1)}),b.objIDs.remove(e)})):(s=[],To.loop(l,function(o,e){var n=b.bindings[o].props;To.loop(e,function(e){var t=n.indexOf(e);0<=t&&n.splice(t,1),u(e,o)}),0==n.length&&s.push(o)}),0<s.length&&b.remove(s)),r&&(r="type="+b.bindType+"&",b.bindType==LOCALSTORAGE?(b.to(),c("success")):b.bindType==GET?(e=JSON.stringify(n),z&&(e=To.couple(e)),To.async(b.connection+r+"remove="+e,c,"callbackRemove")):b.bindType==POST?b.ajax.post(b.connection+r,n,c,"remove"):b.bindType),b}function c(e){i&&"function"==typeof i&&(z&&(e=To.couple(e)),i(e)),y&&C("Bind Report: REMOVE"+(o?" ["+o+"]":""),e)}function u(e,t){var o,n=b.fromIDs[e];n&&(0<=(o=n.indexOf(t))&&n.splice(o,1),0==n.length&&delete b.fromIDs[e]),(n=b.toIDs[e])&&(0<=(o=n.indexOf(t))&&n.splice(o,1),0==n.length&&delete b.toIDs[e])}function d(t,e){var o=b.bindings[t].obj,n=b.bindings[t].props,r=b.objIDs.at(o),i=r.indexOf(t);0<=i&&r.splice(i,1),e&&0==r.length&&a.push(o),0<=(i=b.ids.indexOf(t))&&b.ids.splice(i,1),To.loop(n,function(e){u(e,t)}),delete b.bindings[t]}},this.stopProcess=!1,this.stop=function(){b.stopped=!0};var l=function(){var e=this;e.stop=function(){e.stopped=!0}};function w(t,e,o,n,r){var i=new l,a=null!=n&&!To.isEmpty(n)&&b.data;return s(i,r)?["stop",n]:(b.masterFilter&&"function"==typeof b.masterFilter&&(n=b.data=b.masterFilter(n,t,r,i)),"stop"==To.loop(o,function(e){if("function"==typeof e){if(s(i,r))return"stop";n=b.data=e(n,t,r,i)}})||s(i,r)?["stop",n]:(e&&"function"==typeof e&&(n=b.data=e(n,t,r,i)),s(i,r)?["stop",n]:(a&&!b.data&&zon&&zogy("Bind()"+(t?" ["+t+"]":"")+(r?" ["+r+"]":"")+" - warning, a filter may not have returned data"),["go",n])))}function s(e,t){return(b.stopped||e.stopped)&&(C("STOP"+(t?" ["+t+"]":""),e.stopped?"process stopped":"bind stopped"),e.stopped?e.stop=null:b.stopped=!1,1)}function C(e,t){(b==c?zogl:zogd)(e,t)}return this.to=function(e,t,o,n,r,i,a,l){if(g=zob(b.to,arguments,"targets, props, extra, filter, smartDecimals, call, lock, unique"))return g;var s=v("to",e,t),c=w("to",n,s[0],s=s[1],o);if(s=c[1],"stop"!=c[0]){if(b.bindType==LOCALSTORAGE)localStorage[b.connection]=JSON.stringify(s),f(s);else{var u,d,h,g,p="type="+b.bindType+"&";if(!s||To.isEmpty(s))return b;b.bindType==GET?(u=s,To.isJSON(u)||(u=JSON.stringify(u)),z&&(u=To.couple(u)),y&&C("Bind Report: TO [bindings]",u),u=To.urlEncode(u),d=zot(b.master)?"":"&master="+To.urlEncode(m),h=zot(a)?"":"&lock="+To.urlEncode(a),g=zot(l)?"":"&unique="+To.urlEncode(l),c=zot(o)?"":"&extra="+To.urlEncode(o),c=b.connection+p+"command=to&data="+u+d+h+g+c,y&&C("Bind Report: TO [url]",c),To.async(c,f,"callbackTo")):b.bindType==POST?(b.ajax.master=m,b.ajax.couple=z,b.ajax.lock=a,b.ajax.unique=l,y&&C("Bind Report: TO [bindings]",s),b.ajax.post(b.connection+p,s,"to",o,f)):b.bindType}return b}function f(e){z&&(e=To.decouple(e)),i&&"function"==typeof i&&i(e),y&&C("Bind Report: TO"+(o?" ["+o+"]":" -"),e)}},this.toLock=function(t,o,n,r,i,a){var e;if(e=zob(b.toLock,arguments,"targets, props, extra, filter, smartDecimals, call"))return e;if("localstorage"==b.bindType.toLowerCase())return b.to(t,o,n,r,i,a),b;var l=To.makeID();b.from(function(e){b.to(t,o,n,r,i,a,l)},t,o,n,r,l)},this.toUnique=function(e,t,o,n,r,i){var a;if(a=zob(b.toUnique,arguments,"targets, props, extra, filter, smartDecimals, call"))return a;b.to(e,t,o,n,r,i,null,!0)},this.toggleReport=function(e){return y=zot(e)?!y:e,b},y&&C("Bind Report: CREATE ["+t.toUpperCase()+"]",e+(m?" "+m:"")),this.report=function(){var e="Bind {DATA} Report:",t=To.copy(b.data);(b==c?zogl:zogd)(e,t);e="Bind {BINDINGS} Report:",t=To.copy(b.bindings);(b==c?zogl:zogd)(e,t)},this.from=function(o,e,t,n,r,i){if(d=zob(b.from,arguments,"call, targets, props, extra, filter, lock"))return d;var a=(l=v("from",e,t))[0],l=l[1],s=w("fromTo",r,a,l,n);if(l=s[1],"stop"!=s[0]){var c,u,d,h="type="+b.bindType+"&";return b.bindType==LOCALSTORAGE?(localStorage[b.connection]&&null!=localStorage[b.connection]||(localStorage[b.connection]="{}"),b.data=JSON.parse(localStorage[b.connection]),g(b.data)):b.bindType==GET?(c=l,To.isJSON(c)||(c=JSON.stringify(c)),z&&(c=To.couple(c)),y&&C("Bind Report: FROM [bindings]",c),c=To.urlEncode(c),u=zot(b.master)?"":"&master="+To.urlEncode(m),d=zot(i)?"":"&lock="+To.urlEncode(i),s=zot(n)?"":"&extra="+To.urlEncode(n),s=b.connection+h+"data="+c+"&command=from"+u+d+s,y&&C("Bind Report: FROM [url]",s),To.async(s,g,"callbackFrom")):b.bindType==POST?(b.ajax.master=m,b.ajax.couple=z,b.ajax.lock=i,y&&C("Bind Report: FROM [bindings]",l),b.ajax.post(b.connection+h,l,"from",n,g)):b.bindType,b}function g(e){var t;b.data=e,z&&(b.data=To.decouple(b.data)),zot(i)||(t=JSON.stringify(b.data)),"stop"!=w("from",r,a,b.data,n)[0]&&(e=!1,!zot(i)&&t==JSON.stringify(b.data)||(e=!0,b.applyData()),y&&C("Bind Report: FROM"+(n?" ["+n+"]":" -"),e?b.data:"data not applied in toLock()"),o&&"function"==typeof o&&o(b.data))}},this.applyData=function(){return To.loop(b.data,function(e,t){var o;b.bindings[e]&&(o=b.bindings[e].obj,To.loop(t,function(e,t){o[e]=t}))}),b},this.clear=function(){return b.bindType==LOCALSTORAGE&&(localStorage[b.connection]=null),b},this.removeAllBindings=function(e,t){function o(e){t&&"function"==typeof t&&t(e),y&&C("Bind Report: REMOVEALL",e)}var n;return zot(e)&&(e=!0),this.bindings={},this.ids=[],this.data={},this.objIDs=new To.Dictionary(!0),this.toIDs={},this.fromIDs={},e&&(n="type="+b.bindType+"&",b.bindType==LOCALSTORAGE?(b.clear(),o("success")):b.bindType==GET?(e=zot(b.master)?"":"&master="+encodeURI(m),To.async(b.connection+n+"command=removeAll"+e,o,"callbackRemoveAll")):b.bindType==POST?(b.ajax.master=m,b.ajax.post(b.connection+n,{},"removeAll",null,o,"removeAll")):b.bindType),b},b},To.Swipe=function(e,t,o,n,r){var i,a,l,s,c,u,d,h,g,p,f,m;if(i=zob(To.Swipe,arguments,"obj, distance, duration, isometric, overrideNoSwipe",this))return i;z_d("70"),this.cjsEventDispatcher_constructor(),this.type="Swipe",!zot(e)&&e.on?(zot(t)&&(t=30),a=Ao(o),zot(o)&&(o="s"==a?.08:80),this.distance=t,this.duration=o,this.active=!0,g=this,m=e.on("mousedown",function(o){function t(){var e,t=new createjs.Event("swipe");t.obj=g.obj,t.stageX=o.stageX/To.scaX,t.stageY=o.stageY/To.scaY,t.rawX=o.rawX/To.scaX,t.rawY=o.rawY/To.scaY,t.swipeX=t.swipeY=0,g.direction="none",n?(Math.abs(c-l)>g.distance||Math.abs(u-s)>g.distance)&&(270<=(e=(360+(e=180*Math.atan2(u-s,c-l)/Math.PI))%360)&&e<360?(t.swipeY=-1,g.direction="up"):0<=e&&e<90?(t.swipeX=1,g.direction="right"):90<=e&&e<180?(t.swipeY=1,g.direction="down"):180<=e&&e<270&&(t.swipeX=-1,g.direction="left")):Math.abs(c-l)>Math.abs(u-s)?(c-l>g.distance&&(t.swipeX=1,g.direction="right"),l-c>g.distance&&(t.swipeX=-1,g.direction="left")):(u-s>g.distance&&(t.swipeY=1,g.direction="down"),s-u>g.distance&&(t.swipeY=-1,g.direction="up")),g.dispatchEvent(t)}!g.active||!r&&o.target.zimNoSwipe||(g.obj=o.target,o.target.stage,c=l=o.stageX/To.scaX,u=s=o.stageY/To.scaY,d=!0,g.dispatchEvent("swipedown"),clearTimeout(h),h=setTimeout(function(){d&&(t(),d=!1)},g.duration*("s"==a?1e3:1)),p=e.on("pressmove",function(e){c=e.stageX/To.scaX,u=e.stageY/To.scaY}),f=e.on("pressup",function(e){d&&(t(),d=!1,clearTimeout(h))}))}),this.disable=function(){g.active=!1},this.enable=function(){g.active=!0},this.dispose=function(){m&&e.off("mousedown",m),p&&e.off("pressmove",p),f&&e.off("pressup",f)}):zog("zim controls - Swipe():\nPlease pass in object")},To.extend(To.Swipe,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),To.Swiper=function(e,t,o,n,r,i,a,l,s,c,u,d){var h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E;if(h=zob(To.Swiper,arguments,"swipeOn, target, property, sensitivity, swiperType, min, max, damp, integer, factor, loop, pauseTime",this))return h;function I(e){C=e.target.stage,T=(p.parent||p).localToGlobal(p.x,p.y),w=!0,"radial"==r?(startPosX=e.stageX/To.scaX,startPosY=e.stageY/To.scaY,x=Math.atan2(startPosY-T.y,startPosX-T.x)*DEG):f="horizontal"==r?e.stageX/To.scaX:e.stageY/To.scaY,m=g.target[g.property],g.dispatchEvent("swipedown")}function M(e){if("radial"==r){if(!w)return;var t=To.dist(startPosX,startPosY,e.stageX/To.scaX,e.stageY/To.scaY);k=Math.atan2(e.stageY/To.scaY-T.y,e.stageX/To.scaX-T.x)*DEG;var o=To.sign(x-k);if(180<Math.abs(k-x))return void(w=!1);t*=o;o=Math.max(10,To.dist(T.x,T.y,e.stageX/To.scaX,e.stageY/To.scaY));t*=(A-o)/A}else t=f-("horizontal"==r?e.stageX/To.scaX:e.stageY/To.scaY);0<Math.abs(t)&&(g.swiperMoving=!0),z=m-t*g.sensitivity*c,zot(i)||zot(a)||!u?(zot(i)||(z=Math.max(z,i)),zot(a)||(z=Math.min(z,a))):(z=((t=z)+1e4*(a-i)-i)%(a-i)+i,Math.abs(t-z)>.8*Math.abs(a-i)&&(g.immediate(z),f="horizontal"==r?e.stageX/To.scaX:e.stageY/To.scaY,m=g.target[g.property])),g.desiredValue=z,g.dispatchEvent("swipemove")}function O(){p.off("mousedown",y),p.off("pressmove",b),p.off("pressup",v)}function j(){p.canvas?(p.off("stagemousedown",y),p.off("stagemousemove",b),p.off("stagemouseup",v)):O(),To.Ticker.remove(g.target.swiperTicker)}z_d("69.5"),this.cjsEventDispatcher_constructor(),this.type="Swiper",!zot(e)&&e.getStage&&e.stage?zot(t)||(zot(n)&&(n=1),zot(r)&&(r="horizontal"),zot(l)&&(l=.1),zot(s)&&(s=!1),zot(c)&&(c=1),zot(u)&&(u=!1),h=Ao(d),zot(d)&&(d="s"==h?.2:200),p=e,z=(g=this).desiredValue=t[o],this.target=t,this.property=o,this.sensitivity=n,w=!1,p.canvas?(y=p.on("stagemousedown",function(e){w=!0,I(e),b=p.on("stagemousemove",M),v=p.on("stagemouseup",function(){w=!1,p.off("stagemousemove",b),p.off("stagemouseup",v),g.dispatchEvent("swipeup")})}),C=p):(C=p.stage,O(),y=p.on("mousedown",I),b=p.on("pressmove",M),v=p.on("pressup",function(){w=!1,g.dispatchEvent("swipeup")})),A=Math.sqrt(Math.pow(p.width,2)+Math.pow(p.height,2)),P=new To.Damp(g.target[g.property],l),g.target[g.property],S=B=z,g.target.swiperTicker=To.Ticker.add(function(){z==B?z!=S&&(g.pauseTimeout&&g.pauseTimeout.clear(),S=z,g.pauseTimeout=To.timeout(d,function(){w&&g.dispatchEvent("swipepause"),g.pauseTimeout=null})):(S=null,B=z,g.pauseTimeout&&g.pauseTimeout.clear()),g.swiperMoving&&(g.target[g.property]=s?Math.round(P.convert(z)):P.convert(z),!w&&Math.abs(g.target[g.property]-z)<(zot(a)||zot(i)?.5:Math.abs(a-i)/1e3)?(g.swiperMoving=!1,g.target[g.property]=z,g.immediate(g.target[g.property]),g.dispatchEvent("swipestop")):g.target[g.property])},C),this.immediate=function(e){P.immediate(e),g.target[g.property]=s?Math.round(e):e,g.desiredValue=z=e},E=!0,Object.defineProperty(g,"enabled",{get:function(){return E},set:function(e){E!=e&&(e?(p.canvas?y=p.on("stagemousedown",y):(y=p.on("mousedown",y),b=p.on("pressmove",b),v=p.on("pressup",v)),g.immediate(g.target[g.property]),g.target.swiperTicker=To.Ticker.add(g.target.swiperTicker,C)):j(),E=Boolean(e))}}),Object.defineProperty(g,"desiredValue",{get:function(){return z},set:function(e){z=e}}),Object.defineProperty(g,"damp",{get:function(){return l},set:function(e){l=e,P.damp=l}}),this.dispose=function(e,t,o){j(),P=null}):zog("zim.Swiper() - please provide container on stage")},To.extend(To.Swiper,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),To.MotionController=function(l,s,e,c,t,n,r,o,i,a,u,d,h,g,p,f,m,z,y,b,v,w,C){if(T=zob(To.MotionController,arguments,"target, type, speed, axis, boundary, map, diagonal, damp, flip, orient, constant, firstPerson, turnSpeed, moveThreshold, stickThreshold, container, localBounds, mouseMoveOutside, mousedownIncludes, minPercentSpeed, maxPercentSpeed, dampKeyup, rotate",this))return T;z_d("69.7"),this.cjsEventDispatcher_constructor(),this.type="MotionController";var x,k=this,T="zim MotionController(): Please pass in a reference to the stage or a container on the stage";if(zot(f)){if(!zdf)return void zog(T);x=f=zdf.stage}else if(zot(f.stage)){if(!zdf)return void zog(T);x=zdf.stage}else x=f.stage;var A=x.frame;zot(a)||(C=a),zot(l)&&(l=new To.Container(1,1,null,null,!1));var P,B="Accelerator"==l.type;zot(e)&&(e=7),zot(s)||"DPad"!=s.type||(P=s,s="manual",zot(c)&&(c=P.axis),"all"==c&&(c="both"),l.x,l.y,P.on("change",function(){k.convert(l.x+P.dirX*e,l.y+P.dirY*e)})),(zot(s)||"mousemove"!=s&&"pressmove"!=s&&"pressdrag"!=s&&"keydown"!=s&&"gamebutton"!=s&&"gamestick"!=s&&"swipe"!=s&&"follow"!=s&&"manual"!=s)&&(s="mousedown"),zot(c)&&(c=B?"horizontal":"both"),"keydown"==s&&zot(n)&&(n=[[65,37],[68,39],[87,38],[83,40]]),"gamebutton"==s&&zot(n)&&(n=d?[14,15,To.GamePad.RT,To.GamePad.LT]:[14,15,12,13]),"gamestick"==s&&zot(n)&&(n=d?[[0,2],[0,2],[1],[1]]:[0,0,1,1]),"gamestick"==s&&zot(n)&&(n=[0,0,1,1]),zot(r)&&(r=!0),"horizontal"!=c&&"vertical"!=c||(r=!1),zot(o)&&(o="keydown"==s||"gamebutton"==s?1:"pressmove"==s?.2:.1),zot(d)&&(d=!1),zot(h)&&(h=.4*e),zot(g)&&(g=4),zot(p)&&(p=.2),zot(z)&&(z=!1),x.mouseMoveOutside=z,zot(y)&&(y=[]),Array.isArray(y)||(y=[y]),"Pen"!=l.type||l.move?y.push(l):y.push(l,l.paper),(l.motionController=this).mousedownIncludes=y,zot(w)&&(w=.3),k.dampKeyup=w,this.dirX=0,this.dirY=0,this.speed=e,this.turnSpeed=h,this.axis=c,this.target=l,this.moveThreshold=g,this.stickThreshold=p,this.boundary=t,l.zimMCStartAngle=l.rotation;var S,E,I,M=k.speed,O=k.speed,j=0;k.rotation=l.zimMCStartAngle,B?(I=!(E=f.getBounds())||"vertical"==c&&!E.height||"vertical"!=c&&!E.width?1e3:"vertical"==c?E.height:E.width,zot(b)&&(b=0),zot(v)&&(v=100),zot(this.target.percentSpeed)&&(this.target.percentSpeed=(v-b)/2),k.x=I/2,k.y=I/2,S=new To.Proportion(0,I,b,v)):(k.x=this.target.x,k.y=this.target.y);var L,_,Y,D,X,R,W,F=k.scaleX=l.scaleX,H=k.scaleY=l.scaleY,V=!1,N=!1;if("keydown"==s||"gamebutton"==s){for(var G=0;G<4;G++)Array.isArray(n[G])||(n[G]=[n[G]]);var q,U,Q,Z,K=[0,0,0,0],J=[],$=["X","X","Y","Y"],ee=[-1,1,-1,1],te={dirX:0,dirY:0};function oe(e){var t,o="keydown"==s?e.keyCode:e.buttonCode;for(G=0;G<4;G++)if(-1<n[G].indexOf(o))return r||"both"!=k.axis||(te.dirX=te.dirY=0),te["dir"+$[G]]=ee[G],K[G]=1,0==(t=J.indexOf(G))?void 0:(0<t&&J.splice(t,1),void J.unshift(G))}function ne(e){var t,o="keydown"==s?e.keyCode:e.buttonCode;for(G=0;G<4;G++)if(-1<n[G].indexOf(o))return(K[G]=0)<=(t=J.indexOf(G))&&J.splice(t,1),void("both"!=k.axis||r?te["dir"+$[G]]=-K[2*Math.floor(G/2)]+K[2*Math.floor(G/2)+1]:0<J.length?(te["dir"+$[G]]=0,t=J[0],te["dir"+$[t]]=ee[t]):te.dirX=te.dirY=0)}"keydown"==s?q=A.on("keydown",oe):U=(le=k.gamepad=new To.GamePad).on("buttondown",oe),zot(u)&&("keydown"==s?Q=A.on("keyup",ne):Z=le.on("buttonup",ne));var re={rotation:0,speedX:k.speed,speedY:k.speed},ie=To.Ticker.add(function(){var e,t,o;d?ce(te):(t=k.speed,o=k.speed,"both"==k.axis&&0!=te.dirX&&0!=te.dirY&&(t=(e=he(te.dirX,te.dirY)).speedX,o=e.speedY),"horizontal"!=k.axis&&"both"!=k.axis||(k.x+=t*te.dirX),"vertical"!=k.axis&&"both"!=k.axis||(k.y+=o*te.dirY),ue())},x)}else if("mousedown"==s||"mousemove"==s)L=x.on("stage"+s,function(e){if(x=e.target.stage,"mousedown"==s){if(Array.isArray(k.mousedownIncludes)||(k.mousedownIncludes=[k.mousedownIncludes]),k.mousedownIncludes.indexOf(f)<0)for(var t=0;t<f.numChildren;t++){var o=f.getChildAt(t);if(-1==k.mousedownIncludes.indexOf(o)&&o.mouseEnabled&&o.hitTestPoint&&o.hitTestPoint(e.stageX/To.scaX,e.stageY/To.scaY))return}k.dispatchEvent("mousedown")}var n=f.globalToLocal(z?e.rawX/To.scaX:e.stageX/To.scaX,z?e.rawY/To.scaY:e.stageY/To.scaY);k.x=n.x,k.y=n.y,ue()});else if("pressmove"==s||"pressdrag"==s||"follow"==s){function ae(){var e=f.globalToLocal(k.moveX,k.moveY);k.x=e.x,k.y=e.y,ue(),"Pen"==l.type&&!N&&l.drawing&&(N=!0)}"Pen"==l.type&&(l.write=!1),L=x.on("stagemousedown",function(e){if("Pen"==l.type&&k.boundary){var t=e.stageX/To.scaX,o=e.stageY/To.scaY;if(t<k.boundary.x||t>k.boundary.x+k.boundary.width||o<k.boundary.y||o>k.boundary.y+k.boundary.height)return}if("pressdrag"!=s||l.hitTestPoint(e.stageX/To.scaX,e.stageY/To.scaY)){N=!1,Array.isArray(k.mousedownIncludes)||(k.mousedownIncludes=[k.mousedownIncludes]);var n,r=!1;k.mouseDownIncludes&&(n=x.getObjectUnderPoint(e.stageX,e.stageY,1));for(var i=0;i<k.mousedownIncludes.length;i++)n&&k.mousedownIncludes[i].hitTestPoint&&k.mousedownIncludes[i].hitTestPoint(e.stageX/To.scaX,e.stageY/To.scaY)&&k.mousedownIncludes[i].contains(n)&&(r=!0);if(!r)for(i=0;i<f.numChildren;i++){var a=f.getChildAt(i);if(-1==k.mousedownIncludes.indexOf(a)&&a.mouseEnabled&&a.hitTestPoint&&a.hitTestPoint(e.stageX/To.scaX,e.stageY/To.scaY))return}o=f.globalToLocal(z?e.rawX/To.scaX:e.stageX/To.scaX,z?e.rawY/To.scaY:e.stageY/To.scaY);"follow"!=s&&"pressdrag"!=s&&k.immediate("both"==c||"horizontal"==c?o.x:null,"both"==c||"vertical"==c?o.y:null),ue(),k.dispatchEvent("mousedown"),V=!0,k.moveX=z?e.rawX/To.scaX:e.stageX/To.scaX,k.moveY=z?e.rawY/To.scaY:e.stageY/To.scaY,_=x.on("stagemousemove",function(e){k.moveX=z?e.rawX/To.scaX:e.stageX/To.scaX,k.moveY=z?e.rawY/To.scaY:e.stageY/To.scaY,"follow"!=s&&ae()}),D&&To.Ticker.remove(D),"follow"==s&&(D=To.Ticker.add(ae)),"Pen"==l.type&&(l.write=!0,l.zimDragCheck=!0)}}),Y=x.on("stagemouseup",function(e){"Pen"==l.type&&(l.write=!1,l.zimDragCheck=!1,N&&l.stopCheck()),D&&To.Ticker.remove(D),x.off("stagemousemove",_),V=!1})}else if("gamestick"==s){for(var le=this.gamepad=new To.GamePad,G=0;G<4;G++)Array.isArray(n[G])||(n[G]=[n[G]]);var re={rotation:l.zimMCStartAngle,speedX:k.speed,speedY:k.speed},se=le.on("data",function(e){te={dirX:0,dirY:0};for(var t=0;t<n[0].length;t++){var o=e.axes[n[0][t]];if(Math.abs(o)>k.stickThreshold){te.dirX=o;break}}for(t=0;t<n[2].length;t++){o=e.axes[n[2][t]];if(Math.abs(o)>k.stickThreshold){te.dirY=o;break}}d?ce(te):(k.x+=k.speed*te.dirX,k.y+=k.speed*te.dirY,ue())})}else"swipe"==s&&(X=new To.Swiper(x,k,"x",.8),R=new To.Swiper(x,k,"y",.8,!1),W=X.on("swipemove",function(){ue()}));function ce(e){re.rotation+=e.dirX*k.turnSpeed,k.rotation=re.rotation,re.speedX=Math.sin(re.rotation*Math.PI/180)*k.speed*-e.dirY,re.speedY=-Math.cos(re.rotation*Math.PI/180)*k.speed*-e.dirY,k.x+=re.speedX,k.y+=re.speedY}function ue(){var e,t=he(k.x-(B?k.target.percentSpeed:k.target.x),k.y-(B?k.target.percentSpeed:k.target.y));M=t.speedX,O=t.speedY,C&&(zot(t.angle)||(k.rotation=t.angle+l.zimMCStartAngle),zot(k.rotation)?k.rotation=k.target.rotation:(k.rotation+=j,e=de(k.rotation),t=k.target.rotation=de(k.target.rotation),180<Math.abs(e-t)&&(e<t?t-=360:e-=360),k.dampR.immediate(t),k.target.rotation=t,k.rotation=e))}function de(e){return(e%360+360)%360}function he(e,t){var o,n=k.speed,r=k.speed,i=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return 0<i&&(n=Math.abs(e)/i*k.speed,r=Math.abs(t)/i*k.speed,o=90-180*Math.atan2(e,t)/Math.PI),{speedX:n,speedY:r,angle:o}}var ge=this.x,pe=this.y,fe=this.x=B?I/2:this.target.x,me=this.y=B?I/2:this.target.y;this.dampX=new To.Damp(fe,o),this.dampY=new To.Damp(me,o),this.dampR=new To.Damp(this.target.rotation,o);var ze,ye=0,be=0,ve=To.Ticker.add(function(){var e,t,o,n;"manual"==s&&ue(),k.boundary&&"Blob"!=k.boundary.type&&(k.x=To.constrain(k.x,k.boundary.x,k.boundary.x+k.boundary.width),k.y=To.constrain(k.y,k.boundary.y,k.boundary.y+k.boundary.height)),"horizontal"!=k.axis&&"both"!=k.axis||(k.dirX=To.sign(k.x-fe),Math.abs(k.x-fe)<M?fe=k.x:fe+=k.dirX*M,te&&0==te.dirX&&(t=k.boundary?k.boundary.width/2:x.width/2,e=k.x-(k.x-t)*(B?k.dampKeyup:0),fe=e,k.x=fe),B&&E&&E.width?k.target.percentSpeed=S.convert(k.dampX.convert(fe)):k.target.x=k.dampX.convert(fe)),"vertical"!=k.axis&&"both"!=k.axis||(k.dirY=To.sign(k.y-me),Math.abs(k.y-me)<O?me=k.y:me+=To.sign(k.y-me)*O,te&&0==te.dirY&&(t=k.boundary?k.boundary.height/2:x.height/2,o=k.y-(k.y-t)*(B?k.dampKeyup:0),me=o,k.y=me),B&&E&&E.height?k.target.percentSpeed=S.convert(k.dampY.convert(me)):k.target.y=k.dampY.convert(me)),k.boundary&&"Blob"==k.boundary.type&&(k.boundary.shape.hitTestPoint(k.target.x,k.target.y)?(ge=k.target.x,pe=k.target.y):(k.target.x=k.x=ge,k.target.y=k.y=pe,k.immediate(ge,pe))),"pressmove"==s&&V&&k.dispatchEvent("pressing"),k.movingX=Math.abs(fe-(B?k.target.percentSpeed:k.target.x))>k.moveThreshold,k.movingY=Math.abs(me-(B?k.target.percentSpeed:k.target.y))>k.moveThreshold,!k.moving||k.movingX||k.movingY?k.moving||!k.movingX&&!k.movingY||k.dispatchEvent("startmoving"):k.dispatchEvent("stopmoving"),k.moving=k.movingX||k.movingY,k.moving&&k.dispatchEvent("moving"),k.dirX==ye&&k.dirY==be||(o=new createjs.Event("change"),k.dirX!=ye?(n=["left",null,"right"],o.dir=n[k.dirX+1],ye=k.dirX,l.zimMCStartAngle||"horizontal"!=i&&"both"!=i||(k.scaleX=l.scaleX=k.dirX?Math.abs(l.scaleX)*k.dirX:l.scaleX,j=0!=F&&-1==Math.round(k.scaleX/F)?180:0)):(n=["up",null,"down"],o.dir=n[k.dirY+1],be=k.dirY,l.zimMCStartAngle||"vertical"!=i&&"both"!=i||(k.scaleY=l.scaleY=k.dirY?Math.abs(l.scaleY)*k.dirY:l.scaleY,j=0!=H&&-1==Math.round(k.scaleY/H)?180:0)),k.dispatchEvent(o)),C&&!zot(k.rotation)&&(k.target.rotation=k.dampR.convert(k.rotation))},x);this.immediate=function(e,t,o){return!zot(e)&&k.dampX&&(k.dampX.immediate(e),k.x=B?k.target.percentSpeed=fe=e:k.target.x=fe=e,X&&X.immediate(e)),!zot(t)&&k.dampY&&(k.dampY.immediate(t),k.y=B?k.target.percentSpeed=me=t:k.target.y=me=t,R&&R.immediate(t)),!zot(o)&&k.dampR&&(k.dampR.immediate(o),k.rotation=k.target.rotation=o),ge=k.x,pe=k.y,k},this.convert=function(e,t){zot(e)||(k.x=e),zot(t)||(k.y=t),ue()},Object.defineProperty(k,"pausingSpeed",{get:function(){return k.speed},set:function(e){k.speed=e}}),this.paused=!1,this.pause=function(e,t,o){return zot(e)&&(e=!0),zot(t)&&(t=0),zot(o)&&(o=!1),e?(ze=k.speed,0<t?(To.animate({target:k,obj:{pausingSpeed:0},ticker:!1,time:t,call:function(){k.speed=0,k.paused=!0,k.enabled=!1,k.immediate(k.target.x,k.target.y),k.dispatchEvent("pause")}}),o&&(V=!1,_&&x.off("stagemousemove",_),D&&To.Ticker.remove(D),"Pen"==l.type&&(l.write=!1,l.zimDragCheck=!1),Y&&x.off("stagemouseup",Y),N&&l.stopCheck(),"keydown"==s?Q&&A.off("keyup",Q):Z&&le.off("buttonup",Z))):(k.speed=0,k.paused=!0,k.enabled=!1,k.immediate(k.target.x,k.target.y),setTimeout(function(){k.dispatchEvent("pause")},10))):(k.enabled=!0,0<t?To.animate({target:k,obj:{pausingSpeed:ze},ticker:!1,time:t,call:function(){k.speed=ze,k.paused=!1,0}}):(k.speed=ze,k.paused=!1)),k};var we=!0;function Ce(){"keydown"==s?(A.off("keydown",q),A.off("keyup",Q),To.Ticker.remove(ie)):"gamebutton"==s?(le.off("buttondown",U),le.off("buttonup",Z),To.Ticker.remove(ie)):"gamestick"==s?le.off("data",se):"swipe"==s?(X.enabled=!1,R.enabled=!1,X.off("swipemove",W)):"mousedown"==s||"mousemove"==s?x.off("stage"+s,L):"pressmove"==s&&(x.off("stagemousedown",L),x.off("stagemousemove",_),x.off("stagemouseup",Y)),To.Ticker.remove(ve)}Object.defineProperty(k,"enabled",{get:function(){return we},set:function(e){we!=e&&(e?("keydown"==s?(q=A.on("keydown",q),Q=Q&&A.on("keyup",Q),ie=To.Ticker.add(ie,x)):"gamebutton"==s?(U=le.on("buttondown",U),Z=Z&&le.on("buttonup",Z),ie=To.Ticker.add(ie,x)):"gamestick"==s?se=le.on("data",se):"swipe"==s?(X.enabled=!0,R.enabled=!0,W=W&&X.on("swipemove",W)):"mousedown"==s||"mousemove"==s?L=x.on("stage"+s,L):"pressmove"==s&&(L=x.on("stagemousedown",L),_=_&&x.on("stagemousemove",_),Y=Y&&x.on("stagemouseup",Y)),ve=To.Ticker.add(ve,x),k.paused=!1):(Ce(),k.paused=!0),we=Boolean(e))}}),this.dispose=function(e,t,o){Ce(),le&&le.dispose(),X&&X.dispose(),R&&X.dispose()}},To.extend(To.MotionController,createjs.EventDispatcher,"enabled","cjsEventDispatcher"),To.GamePad=function(){if(z_d("69.8"),this.type="GamePad",this.cjsEventDispatcher_constructor(),!navigator.getGamepads)return this.error=!0,void(zon&&zog("zim.GamePad() - no browswer support"));var r;window.addEventListener("gamepadconnected",n),this.currentIndex=0;var i=this;function n(e){var t;i.connected=!0,t="gamepadconnected",e=e,(t=new createjs.Event(t)).index=e.gamepad.index,t.id=e.gamepad.id,t.buttons=e.gamepad.buttons,t.axes=e.gamepad.axes,i.dispatchEvent(t);var o=navigator.getGamepads()[i.currentIndex];i.lastData=[];for(var n=0;n<o.buttons.length;n++)i.lastData[n]=o.buttons[n].pressed;!function e(){if(r=requestAnimationFrame(e),i.data=navigator.getGamepads()[i.currentIndex],i.data){for(var t,o=i.buttons=[],n=0;n<i.data.buttons.length;n++)o[n]=i.data.buttons[n].pressed,o[n]!=i.lastData[n]&&(i.lastData[n]=o[n],(t=o[n]?new createjs.Event("buttondown"):new createjs.Event("buttonup")).buttonCode=n,t.button=s[n],i.dispatchEvent(t));(t=new createjs.Event("data")).axes=i.axes=i.data.axes,t.buttons=i.buttons,i.dispatchEvent(t)}}()}var a=setInterval(function(){navigator.getGamepads&&navigator.getGamepads()[0]&&(i.connected||n(),clearInterval(a))},500);function l(e){e.gamepad.index==i.currentIndex&&(cancelAnimationFrame(r),i.connected=!1,i.dispatchEvent("gamepaddisconnected"))}window.addEventListener("gamepaddisconnected",l),this.dispose=function(e,t,o){window.removeEventListener("gamepadconnected",n),window.removeEventListener("gamepaddisconnected",l),cancelAnimationFrame(r),clearInterval(a),i.connected=!1}};for(var s=["A","B","X","Y","LB","RB","LT","RT","BACK","START","LS","RS","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT"],I=0;I<s.length;I++)To.GamePad[s[I]]=I;var T,A,e=["LSX","LSY","RSX","RSY"];for(I=0;I<e.length;I++)To.GamePad[e[I]]=I;To.extend(To.GamePad,createjs.EventDispatcher,null,"cjsEventDispatcher"),To.Portal=function(t,o){var e,n,r,i,a;if(e=zob(To.Portal,arguments,"obj, lands",this))return e;function l(){o.setChildIndex(i,0),i=a,a=o.getChildAt(o.numChildren-2),o.setChildIndex(a,o.numChildren-1),i.setMask(null),a.setMask(t),t.stage.update()}z_d("69.96"),!zot(t)&&t.stage&&(this.type="Portal",n=this,(r=o&&o.numChildren&&0<o.numChildren)&&(i=o.getChildAt(o.numChildren-1),a=o.getChildAt(o.numChildren-2),o.setChildIndex(a,o.numChildren-1),a.setMask(t)),t.on(To.mobile()?"mousedown":"mouseover",function(){n._enabled&&(r&&l(),n.dispatchEvent("enter"))}),t.on(To.mobile()?"pressup":"mouseout",function(){n._enabled&&n.dispatchEvent("exit")}),Object.defineProperty(this,"portal",{get:function(){return t},set:function(e){!zot(e)&&e.stage||!zon?a.setMask(t):zog("zim.Portal() - please provide a Display Object to act as the portal")}}),Object.defineProperty(this,"currentLand",{get:function(){return i},set:function(e){if(o.contains(e))for(;e!=i;)l()}}),Object.defineProperty(this,"nextLand",{get:function(){return a},set:function(e){zon&&zog("zim.Portal() - nextLand is read only - remake Portal to change")}}),this._enabled=!0,Object.defineProperty(n,"enabled",{get:function(){return n._enabled},set:function(e){n._enabled=e}}),this.dispose=function(e,t,o){})},To.extend(To.Portal,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),window.zimContactListener=null,To.BlurEffect=function(t,o,n,r,e,i){if(a=zob(To.BlurEffect,arguments,"blurX, blurY, quality, style, group, inherit",this))return a;z_d("69.972"),this.group=e;var a=!1===r?{}:To.getStyle("BlurEffect",e,i);zot(t)&&(t=null!=a.blurX?a.blurX:10),zot(o)&&(o=null!=a.blurY?a.blurY:10),zot(n)&&(n=null!=a.quality?a.quality:1);var l=function(){return arguments}(t,o,n);t=zik(t),o=zik(o),n=zik(n),this.createjsBlurFilter_constructor(t,o,n),this.type="BlurEffect",this.clone=function(e){return new To.BlurEffect(e||!To.isPick(l[0])?t:l[0],e||!To.isPick(l[1])?o:l[1],e||!To.isPick(l[2])?n:l[2],r,this.group,i)}},To.extend(To.BlurEffect,createjs.BlurFilter,"clone","createjsBlurFilter",!1),To.GlowEffect=function(t,o,n,r,i,a,l,s,e,c,u,d){if(h=zob(To.GlowEffect,arguments,"color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit",this))return h;z_d("69.9725"),this.group=u;var h=!1===c?{}:To.getStyle("GlowEffect",u,d);zot(t)&&(t=null!=h.color?h.color:"white"),zot(o)&&(o=null!=h.alpha?h.alpha:1),zot(n)&&(n=null!=h.blurX?h.blurX:30),zot(r)&&(r=null!=h.blurY?h.blurY:30),zot(i)&&(i=null!=h.strength?h.strength:1),zot(a)&&(a=null!=h.quality?h.quality:1),zot(l)&&(l=null!=h.inner&&h.inner),zot(s)&&(s=null!=h.knockout&&h.knockout),zot(e)&&(e=null!=h.hideObject&&h.hideObject);var g=function(){return arguments}(t,o,n,r,i,a,l,s,e);n=zik(n),r=zik(r),a=zik(a),t=zik(t),this.alpha=zik(o),this.strength=zik(i),this.inner=zik(l),this.knockout=zik(s),this.hideObject=zik(e),this.createjsBlurFilter_constructor(n,r,a),this.type="GlowEffect",this.usesContext=!0,this.applyFilter=function(e,t,o,n,r,i,a,l){if((this.alpha<=0||this.strength<=0)&&!this.knockout)return!0;void 0===a&&(a=t),void 0===l&&(l=o);var s=(i=i||e).getImageData(a,l,n,r).data,c=document.createElement("canvas");c.width=n,c.height=r;for(var u=c.getContext("2d"),e=u.getImageData(0,0,n,r),d=e.data,h=this.inner,g=this._red,p=this._green,f=this._blue,m=0,z=d.length;m<z;m+=4){var y=m+3,b=s[y];h?255!==b&&(d[m]=g,d[m+1]=p,d[m+2]=f,d[y]=255-b):0!==b&&(d[m]=g,d[m+1]=p,d[m+2]=f,d[y]=b)}u.putImageData(e,0,0);var v=this.strength;if(0<v){this.createjsBlurFilter_applyFilter(u,0,0,n,r),255<v&&(v=255);for(var w=1;w<v;w++)u.drawImage(c,0,0)}n=this.alpha;return n<0?n=0:1<n&&(n=1),r=this.knockout?h?"source-in":"source-out":this.hideObject?(zog("hdfd"),h?"source-in":"copy"):h?"source-atop":"destination-over",i.save(),i.setTransform(1,0,0,1,0,0),i.globalAlpha=n,i.globalCompositeOperation=r,i.drawImage(c,a,l),i.restore(),!0},Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(e){e=To.convertColor(e,"hexNumber"),this._red=e>>16&255,this._green=e>>8&255,this._blue=255&e}}),this.color=t,this.clone=function(e){return new To.GlowFilter(e||!To.isPick(g[0])?t:g[0],e||!To.isPick(g[1])?o:g[1],e||!To.isPick(g[2])?n:g[2],e||!To.isPick(g[3])?r:g[3],e||!To.isPick(g[4])?a:g[4],e||!To.isPick(g[5])?i:g[5],e||!To.isPick(g[6])?l:g[6],e||!To.isPick(g[7])?s:g[7],e||!To.isPick(g[8])?s:g[8],c,this.group,d)}},To.extend(To.GlowEffect,createjs.BlurFilter,["clone","applyFilter"],"createjsBlurFilter",!1),To.ShadowEffect=function(t,o,n,r,i,a,l,s,c,u,d,h,e,g){if(p=zob(To.ShadowEffect,arguments,"distance, angle, color, alpha, blurX, blurY, strength, quality, inner, knockout, hideObject, style, group, inherit",this))return p;z_d("69.973"),this.group=e;var p=!1===h?{}:To.getStyle("ShadowEffect",e,g);zot(t)&&(t=null!=p.distance?p.distance:10),zot(o)&&(o=null!=p.angle?p.angle:45),zot(n)&&(n=null!=p.color?p.color:black),zot(r)&&(r=null!=p.alpha?p.alpha:.4),zot(i)&&(i=null!=p.blurX?p.blurX:15),zot(a)&&(a=null!=p.blurY?p.blurY:15),zot(l)&&(l=null!=p.strength?p.strength:1),zot(s)&&(s=null!=p.quality?p.quality:1),zot(c)&&(c=null!=p.inner&&p.inner),zot(u)&&(u=null!=p.knockout&&p.knockout),zot(d)&&(d=null!=p.hideObject&&p.hideObject);var f=function(){return arguments}(t,o,n,r,i,a,l,s,c,u,d);i=zik(i),a=zik(a),s=zik(s),n=zik(n),t=zik(t),o=zik(o);var m=this;function z(e,t){t*=To.RAD;m._offsetX=Math.cos(t)*e,m._offsetY=Math.sin(t)*e}this.alpha=zik(r),this.strength=zik(l),this.inner=zik(c),this.knockout=zik(u),this.hideObject=zik(d),this.createjsBlurFilter_constructor(i,a,s),this.type="ShadowEffect",this.usesContext=!0,Object.defineProperty(this,"angle",{get:function(){return o},set:function(e){o=e=(e%360+360)%360,z(t,e)}}),this.angle=o,Object.defineProperty(this,"distance",{get:function(){return t},set:function(e){z(t=e,o)}}),this.distance=t,Object.defineProperty(this,"color",{get:function(){return this._red<<16|this._green<<8|this._blue},set:function(e){e=To.convertColor(e,"hexNumber"),this._red=e>>16&255,this._green=e>>8&255,this._blue=255&e}}),this.color=n,this.applyFilter=function(e,t,o,n,r,i,a,l){if((this.alpha<=0||this.strength<=0)&&!this.knockout&&!this.hideObject)return!0;void 0===a&&(a=t),void 0===l&&(l=o);var s=(i=i||e).getImageData(a,l,n,r).data,c=document.createElement("canvas");c.width=n,c.height=r;for(var u=c.getContext("2d"),e=u.getImageData(0,0,n,r),d=e.data,h=this.inner,g=this._red,p=this._green,f=this._blue,m=0,z=d.length;m<z;m+=4){var y=m+3,b=s[y];h?255!==b&&(d[m]=g,d[m+1]=p,d[m+2]=f,d[y]=255-b):0!==b&&(d[m]=g,d[m+1]=p,d[m+2]=f,d[y]=b)}u.putImageData(e,0,0);var v=this.strength;if(0<v){this.createjsBlurFilter_applyFilter(u,0,0,n,r),255<v&&(v=255);for(var w=1;w<v;w++)u.drawImage(c,0,0)}n=this.alpha;return n<0?n=0:1<n&&(n=1),r=this.knockout?h?"source-in":"source-out":this.hideObject?h?"source-in":"copy":h?"source-atop":"destination-over",i.save(),i.setTransform(1,0,0,1,0,0),i.globalAlpha=n,i.globalCompositeOperation=r,i.drawImage(c,a+this._offsetX,l+this._offsetY),i.restore(),!0},this.getBounds=function(e){var t=this.createjsBlurFilter_getBounds(e),o=this._offsetX,e=this._offsetY;return 0!==o&&(o<0?(t.x+=o,t.width+=-o):t.width+=o),0!==e&&(e<0?(t.y+=e,t.height+=-e):t.height+=e),t},this.clone=function(e){return new To.ShadowFilter(e||!To.isPick(f[0])?t:f[0],e||!To.isPick(f[1])?o:f[1],e||!To.isPick(f[2])?n:f[2],e||!To.isPick(f[3])?r:f[3],e||!To.isPick(f[4])?i:f[4],e||!To.isPick(f[5])?a:f[5],e||!To.isPick(f[6])?s:f[6],e||!To.isPick(f[7])?l:f[7],e||!To.isPick(f[8])?c:f[8],e||!To.isPick(f[9])?u:f[9],e||!To.isPick(f[10])?d:f[10],h,this.group,g)}},To.extend(To.ShadowEffect,createjs.BlurFilter,["clone","getBounds","applyFilter"],"createjsBlurFilter",!1),To.ColorEffect=function(t,o,n,r,i,a,l,s,c,e,u){if(d=zob(To.ColorEffect,arguments,"redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier, redOffset, greenOffset, blueOffset, alphaOffset, style, group, inherit",this))return d;z_d("69.9735"),this.group=e;var d=!1===c?{}:To.getStyle("ColorEffect",e,u);zot(t)&&(red=null!=d.redMultiplier?d.redMultiplier:1),zot(o)&&(green=null!=d.greenMultiplier?d.greenMultiplier:1),zot(n)&&(blue=null!=d.blueMultiplier?d.blueMultiplier:1),zot(r)&&(alpha=null!=d.alphaMultiplier?d.alphaMultiplier:1),zot(i)&&(i=null!=d.redOffset?d.redOffset:0),zot(a)&&(a=null!=d.greenOffset?d.greenOffset:0),zot(l)&&(l=null!=d.blueOffset?d.blueOffset:0),zot(s)&&(s=null!=d.alphaOffset?d.alphaOffset:0);var h=function(){return arguments}(t,o,n,r,i,a,l,s);t=zik(t),o=zik(o),n=zik(n),r=zik(r),i=zik(i),a=zik(a),l=zik(l),s=zik(s),this.createjsColorFilter_constructor(t,o,n,r,i,a,l,s),this.type="ColorEffect",this.clone=function(e){return new To.ColorEffect(t,o,n,r,i,a,l,s(e||!To.isPick(h[0]))?t:h[0],e||!To.isPick(h[1])?o:h[1],e||!To.isPick(h[2])?n:h[2],e||!To.isPick(h[2])?r:h[3],e||!To.isPick(h[2])?i:h[4],e||!To.isPick(h[2])?a:h[5],e||!To.isPick(h[2])?l:h[6],e||!To.isPick(h[2])?s:h[7],c,this.group,u)}},To.extend(To.ColorEffect,createjs.ColorFilter,"clone","createjsColorFilter",!1),To.MultiEffect=function(r,i,a,l,t,e,o){if(n=zob(To.MultiEffect,arguments,"hue, saturation, brightness, contrast, style, group, inherit",this))return n;z_d("69.974"),this.group=e;var n=!1===t?{}:To.getStyle("MultiEffect",e,o);zot(r)&&(r=null!=n.hue?n.hue:0),zot(i)&&(i=null!=n.saturation?n.saturation:0),zot(a)&&(a=null!=n.brightness?n.brightness:0),zot(l)&&(l=null!=n.contrast?n.contrast:0);var s=function(){return arguments}(r,i,a,l);r=zik(r),this.createjsColorMatrixFilter_constructor((new createjs.ColorMatrix).adjustColor(a,l,i,r)),this.type="MultiEffect",this.adjustColor=function(e,t,o,n){zot(r)||(r=zik(e)),zot(i)||(i=zik(t)),zot(a)||(a=zik(o)),zot(l)||(l=zik(n)),this.matrix.reset().adjustColor(e,t,o,n)},Object.defineProperty(this,"brightness",{get:function(){return a},set:function(e){a=zik(e),this.matrix.reset().adjustColor(a,l,i,r)}}),Object.defineProperty(this,"contrast",{get:function(){return l},set:function(e){l=zik(e),this.matrix.reset().adjustColor(a,l,i,r)}}),Object.defineProperty(this,"saturation",{get:function(){return i},set:function(e){i=zik(e),this.matrix.reset().adjustColor(a,l,i,r)}}),Object.defineProperty(this,"hue",{get:function(){return r},set:function(e){r=zik(e),this.matrix=(new createjs.ColorMatrix).adjustColor(a,l,i,r),this.applyFilter()}}),this.clone=function(e){return new To.MultiEffect(e||!To.isPick(s[0])?r:s[0],e||!To.isPick(s[0])?i:s[0],e||!To.isPick(s[0])?a:s[0],e||!To.isPick(s[0])?l:s[0],t,this.group,o)}},To.extend(To.MultiEffect,createjs.ColorMatrixFilter,"clone","createjsColorMatrixFilter",!1),To.AlphaEffect=function(t,o,e,n){if(r=zob(To.AlphaEffect,arguments,"mask, style, group, inherit",this))return r;z_d("69.9745"),this.group=e;var r=!1===o?{}:To.getStyle("AlphaEffect",e,n);zot(t)&&(t=null!=r.mask?r.mask:null);var i=function(){return arguments}(t);"Bitmap"==(t=zik(t)).type?t=t.image:t.cache&&(t=t.cache().cacheCanvas),this.createjsAlphaMaskFilter_constructor(t),this.type="AlphaEffect",this.clone=function(e){return new To.AlphaEffect(e||!To.isPick(i[0])?t:i[0],o,this.group,n)}},To.extend(To.AlphaEffect,createjs.AlphaMaskFilter,"clone","createjsAlphaMaskFilter",!1),To.Parallax=function(e,t,a,n,o,r,l){var i;if(i=zob(To.Parallax,arguments,"layers, damp, auto, stage, startPaused, mouseMoveOutside, clamp",this))return i;if(z_d("68"),this.type="Parallax",zot(n))if(e&&e[0]&&e[0].obj&&e[0].obj.stage)n=e[0].obj.stage;else{if(!zdf)return;n=zdf.stage}a=!!zot(a),zot(o)&&(o=!1),zot(r)&&(r=!1);var s=n.getBounds().width,c=n.getBounds().height;n.mouseMoveOutside=r;var u=this;u.stageEvent=n.on("stagemousemove",function(e){u.mouseX=e.rawX/To.scaX,u.mouseY=e.rawY/To.scaY});var d=zot(t)?.1:t;this.addLayer=function(e){if(!(zot(e.obj)||zot(e.prop)||zot(e.propChange))){var t={obj:e.obj,prop:e.prop};t[t.prop]=e.propChange,zot(e.input)&&(e.input="mouseX"),t.input=e.input,t.split=zot(e.split)?!("mouseX"!=e.input||!a):e.split;var o=zot(e.inMin)?0:e.inMin,n=zot(e.inMax)?"mouseX"==e.input||"scrollX"==e.input?s:c:e.inMax,r=zot(e.factor)?1:e.factor,i=!zot(e.integer)&&e.integer;return t["p_"+t.prop]=new To.ProportionDamp(o,n,0,t[t.prop],d,r,i,l),"scale"==t.prop?t["s_"+t.prop]=t.obj.scaleX:"frame"==t.prop?t["s_"+t.prop]=t.obj.currentFrame:t["s_"+t.prop]=t.obj[t.prop],zot(e.immediate)||t["p_"+t.prop].immediate(e.immediate),g.push(t),u}},this.removeLayer=function(e){if(!zot(e)){var t=g[e];return t["p_"+t.prop].dispose(),g.splice(e,1),u}},this.immediate=function(e){for(var t,o=0;o<g.length;o++)(t=g[o])["p_"+t.prop].immediate(e[o]);return u},this.dispose=function(e,t,o){return n.off("stagemousemove",u.stageEvent),g=null,a&&To.Ticker.remove(h),!0},e=zot(e)?[]:e;for(var h,g=[],p=0;p<e.length;p++)this.addLayer(e[p]);a&&(h=To.Ticker.add(function(e){u.step()},n),o&&To.Ticker.remove(h)),this.step=function(e){for(var t,o,n=0;n<g.length;n++)t=g[n],zot(e)?"mouseX"==t.input?o=u.mouseX:"mouseY"==t.input?o=u.mouseY:"scrollX"==t.input?o=To.scrollX():"scrollY"==t.input&&(o=To.scrollY()):o=e,"scale"==t.prop?t.obj.scaleX=t.obj.scaleY=t["s_"+t.prop]+t["p_"+t.prop].convert(o):"frame"==t.prop?t.obj.gotoAndStop(t["s_"+t.prop]+t["p_"+t.prop].convert(o)):(t.obj[t.prop]=t["s_"+t.prop]+t["p_"+t.prop].convert(o),t.split&&(t.obj[t.prop]-=t[t.prop]/2));return u},u.paused=o,u.pause=function(e){return zot(e)&&(e=!0),u.paused!=e&&(u.paused=e,h&&(e?To.Ticker.remove(h):h=To.Ticker.add(h))),u},Object.defineProperty(u,"damp",{get:function(){return d},set:function(e){var t;d=e;for(var o=0;o<g.length;o++)(t=g[o])["p_"+t.prop].damp=d}})},To.Flipper=function(o,n,e,a,l,t,s,r,i,c,u,d){if(g=zob(To.Flipper,arguments,"front, back, interactive, time, vertical, flipped, easeRoot, frontPress, backPress, style, group, inherit",this))return g;z_d("68.5"),this.group=u;var h=!1===c?{}:To.getStyle("Flipper",this.group,d);zot(o)&&(o=null!=h.front?h.front:zimDefaultFrame.makeIcon().sca(2)),zot(n)&&(n=null!=h.back?h.back:new To.Page(o.width,o.height,To.dark)),this.front=o,this.back=n,t&&(p=o,o=n,n=p);var g=Math.max(o.width,n.width),p=Math.max(o.height,n.height);this.zimContainer_constructor(g,p),this.type="Flipper",zot(a)&&(a=null!=h.time?h.time:.2),zot(l)&&(l=null!=h.vertical&&h.vertical),zot(e)&&(e=null!=h.interactive&&h.interactive),zot(t)&&(t=null!=h.flipped&&h.flipped),zot(s)&&(s=null!=h.easeRoot?h.easeRoot:"quad"),zot(r)&&(r=null==h.frontPress||h.frontPress),zot(i)&&(i=null==h.backPress||h.backPress),this.flipped=t;var f,m=this;function z(e,t,o,n){if(zot(o)&&(o=1),zot(n)&&(n=a),m.flipped=!m.flipped,m.dispatchEvent("flip"),0==n)return m.removeAllChildren(),t.scale=t.oScale,t.skewX=t.skewY=0,t.centerReg(m),void m.dispatchEvent("flipped");var r,i;l?(r={skewX:-90*o,scaleY:e.oScale/2},i={skewX:0,scaleY:t.oScale},t.ske(90*o,0).sca(t.oScale,t.oScale/2)):(r={skewY:-90*o,scaleX:e.oScale/2},i={skewY:0,scaleX:t.oScale},t.ske(0,90*o).sca(t.oScale/2,t.oScale)),e.animate({props:r,time:a,ease:s+"In",call:function(){e.removeFrom(),t.centerReg(m).animate({props:i,time:a,ease:s+"Out",call:function(){m.dispatchEvent("flipped")}})}})}o.centerReg(this),(r&&!t||i&&t)&&((f=e&&o.backing?o.backing:o).on("mousedown",function(){z(o,n)}),f.cur()),(i&&!t||r&&t)&&((f=e&&n.backing?n.backing:n).on("mousedown",function(){z(n,o,-1)}),f.cur()),o.oScale=o.scale,n.oScale=n.scale,o.flipper=m,(o.other=n).flipper=m,n.other=o,e||(o.mouseChildren=n.mouseChildren=!1),!(this.flip=function(e,t){e!=m.flipped&&(m.flipped?z(n,o,-1,t):z(o,n,1,t))})!==c&&To.styleTransforms(this,h),this.clone=function(){return m.cloneProps(new To.Flipper(o.clone(),n.clone(),e,a,l,t,s,r,i,c,this.group,d))}},To.extend(To.Flipper,To.Container,"clone","zimContainer"),To.Book=function(z,y,b,n,v,w,C,x){var e;if(e=zob(To.Book,arguments,"width, height, pages, startPage, rollUp, radius, backgroundColor, arrows",this))return e;z_d("68.7"),zot(z)&&(z=zdf?zdf.stage.width:1024),zot(y)&&(y=zdf?zdf.stage.height:768),this.zimContainer_constructor(z,y),this.type="Book",zot(b)&&(b=[]),zot(n)&&(n=0),zot(v)&&(v=!0),zot(C)&&(C=To.darker),zot(x)&&(x=!0);var k,T=Ao(),A=this;0!=b.length&&(A.backing=new Rectangle(z-2,y-2,C),To.loop(b,function(e,t){"string"==typeof e&&(b[t]=To.asset(e)),b[t].zimBookIndex=t}),A.added(function(e){var a,l,s,c,u,d,t,r=(k=e).frame,i=new Shape;function h(e){A._currentPage=e,A.removeAllChildren(),A.backing.loc(1,1,A),A.setMask(A.backing),i.addTo(A),i.c().f(black).dr(0,0,0,0),A.moving=!1,b[e-1]?a=b[e-1].reg(0,0).rot(0).loc(0,0,A):0<e&&t.reg(0,0).rot(0).loc(0,0,A).setMask(null),b[e-2]?l=b[e-2].reg(z/2,y).loc(0,y,A).rot(-90):(l=new Rectangle(z/2,y,C).reg(z/2,y).loc(0,y,A).rot(-90),0),s=(b[e-3]?b[e-3].rot(0):new Rectangle(z/2,y,C)).loc(0,0,A).setMask(i),b[e]&&(c=b[e].rot(0).reg(0,0).pos(0,0,RIGHT,TOP,A),b[e+1]?u=b[e+1].reg(0,y).loc(z,y,A).rot(90):(u=new Rectangle(z/2,y,C).reg(0,y).loc(z,y,A).rot(90),t=u),d=(b[e+2]?b[e+2].rot(0):new Rectangle(z/2,y,C)).pos(0,0,RIGHT,TOP,A).setMask(i)),k.update()}A._currentPage=n,h(n),Object.defineProperty(A,"directPage",{get:function(){return A._currentPage},set:function(e){h(e=n%2==1?2*Math.ceil(e/2)-1:2*Math.ceil(e/2))}});var g=!1;function o(){A.stageEvent=k.on("stagemousedown",function(){var e,t,o,n;A.moving||((o=A.globalToLocal(r.mouseX,r.mouseY)).x<0||o.x>z||o.y<0||o.y>y||0<w&&dist(o,new Point(0,y))>w&&dist(o,new Point(z,y))>w||("right"==(n=o.x>z/2?"right":"left")&&A._currentPage>=b.length-1||"left"==n&&A._currentPage<=1||(A.moving=!0,"right"==n?(c.addTo(A),u.addTo(A),d.addTo(A),A.pageNext=d.zimBookIndex):(a.addTo(A),l.addTo(A),s.addTo(A),A.rolledUp&&m(0,0,"right"),A.pageNext=l.zimBookIndex),A.direction=n,A.dispatchEvent("rollpress"),A.moveEvent=k.on("stagemousemove",function(){p&&(p.clear(),p=null);A.globalToLocal(r.mouseX,r.mouseY);e="right"==n?z-r.mouseX:r.mouseX,t=y-r.mouseY+e,A.currentW=e=constrain(e,0,z/2),A.currentH=t=constrain(t,0,y),m(e,t,n)}),A.upEvent=k.on("stagemouseup",function(){k.off("stagemousemove",A.moveEvent),g||f(0,0,n)},null,!0))))})}{var p;A.currentW=0,A.currentH=0,A.moving=!1,o(),!(A.rollUp=function(e,t,o,n,r){var i;A.moving||"right"==o&&A._currentPage>=b.length-1||"left"==o&&A._currentPage<=1||("right"==o?(c.addTo(A),u.addTo(A),d.addTo(A)):(A.rolledUp&&m(0,0,"right"),a.addTo(A),l.addTo(A),s.addTo(A)),A.moving=!0,zot(n)&&(n="s"==T?.5:5e-4),zot(r)&&(r=null),A.animate({props:{currentW:e,currentH:t},time:n,ease:r,call:function(){Ticker.remove(i),A.moving=!1,m(e,t,o)}}),i=Ticker.add(function(){m(A.currentW,A.currentH,o)}))})!==v&&((A.rolledUp=!0)===v&&(v="s"==T?1:.001),p=timeout(v,function(){A.rollUp(60,130,"right",.5),A.dispatchEvent("rollup")}))}function f(e,t,o,n){A.moving=!0,A.rolledUp=!1,zot(n)&&(n="s"==T?.7:7e-4),A.animate({props:{currentW:0,currentH:0},time:n,call:function(){Ticker.remove(r),m(0,0,o),A.moving=!1,A.dispatchEvent("rolldown")}});var r=Ticker.add(function(){m(A.currentW,A.currentH,o)})}function m(e,t,o){var n;"right"==o?(i.c().mt(z,y).lt(z-e,y).lt(z,y-t).cp(),n=Math.atan2(e,t),u.loc(z-(e+e*Math.cos(2*n)),y-e*Math.sin(2*n)).rot(2*n*DEG),!g&&z/2<=e&&y<=t&&function(){g=!0,A.moving=!0,A.moveEvent&&k.off("stagemousemove",A.moveEvent),A.upEvent&&k.off("stagemouseup",A.upEvent),A.currentW=0,A.currentH=0,A.lastPage=To.constrain(A._currentPage),A.direction="right",A.pageNext=d.zimBookIndex,A.dispatchEvent("pageanimate"),A.animate({ease:"quadOut",props:{currentW:z/2},time:.3,timeUnit:"s",call:function(){Ticker.remove(e),u.reg(0,0),d.setMask(null),h(A._currentPage+2),A.moving=!1,g=!1,A.currentW=0,A.currentH=0,A.dispatchEvent("page")}});var e=Ticker.add(function(){i.c().mt(z,y).lt(z/2,y).lt(z-A.currentW,0).lt(z,0).cp()});u.reg(z/2,y).loc(z/2,y,A).animate({props:{rotation:0},time:.3,ease:"quadOut",timeUnit:"s"})}()):(i.c().mt(0,y).lt(e,y).lt(0,y-t).cp(),n=Math.atan2(e,t),l.loc(e+e*Math.cos(2*n),y-e*Math.sin(2*n)).rot(2*-n*DEG),!g&&z/2<=e&&y<=t&&function(){g=!0,A.moving=!0,A.moveEvent&&k.off("stagemousemove",A.moveEvent),A.upEvent&&k.off("stagemouseup",A.upEvent),A.currentW=0,A.currentH=0,A.lastPage=To.constrain(A._currentPage),A.direction="left",A.pageNext=l.zimBookIndex,A.dispatchEvent("pageanimate"),A.animate({ease:"quadOut",props:{currentW:z/2},time:.3,timeUnit:"s",call:function(){Ticker.remove(e),l.reg(0,0),s.setMask(null),h(A._currentPage-2),A.moving=!1,g=!1,A.currentW=0,A.currentH=0,A.dispatchEvent("page")}});var e=Ticker.add(function(){i.c().mt(0,y).lt(z/2,y).lt(A.currentW,0).lt(0,0).cp()});l.reg(0,y).loc(z/2,y,A).animate({props:{rotation:0},time:.3,timeUnit:"s",ease:"quadOut"})}()),k.update()}A.rollDown=function(e,t,o,n){A.moving||"right"==o&&A._currentPage>=b.length-1||"left"==o&&A._currentPage<=1||f(0,0,o,n)},x&&(!0===x&&(x=.2),A.keydown=r.on("keydown",function(e){39==e.keyCode?A.nextPage(x):37==e.keyCode&&A.prevPage(x)}));A.changeFrame=function(e){return A.stageEvent&&k.off("stagemousedown",A.stageEvent),A.moveEvent&&k.off("stagemousemove",A.moveEvent),A.upEvent&&k.off("stagemouseup",A.upEvent),k=(r=e).stage,o(),A}}),A.nextPage=function(e){if(zot(A.rollUp))return timeout(.01,function(){A.nextPage(e)}),A;A.moving||A.rollUp(z/2+.1,y+.1,"right",e,"quadIn")},A.prevPage=function(e){if(zot(A.rollUp))return timeout(.01,function(){A.prevPage(e)}),A;A.moving||A.rollUp(z/2+.1,y+.1,"left",e,"quadIn")},A.gotoPage=function(o,n){if(zot(A.rollUp))return timeout(.01,function(){A.gotoPage(o,n)}),A;o=constrain(o,0,A.pages.length-1),zot(n)&&(n="s"==T?.3:300);var r=n+("s"==T?.35:350);A.pageInterval=interval(r,function(e){var t=!1;A._currentPage<o?A.nextPage(n):A._currentPage>o?A.prevPage(n):t=!0,A.dispatchEvent("pageturn"),e.count==e.total-1&&(t?A.dispatchEvent("pagedone"):timeout(r,function(){A.dispatchEvent("pagedone")}))},Math.floor(Math.abs(o-A._currentPage)/2+1),!0)},Object.defineProperty(A,"page",{get:function(){return A._currentPage},set:function(e){A.gotoPage(e,"s"==T?.1:100)}}),Object.defineProperty(A,"pages",{get:function(){return b},set:function(e){zon&&zogy("Book() - pages is read only")}}),this.dispose=function(e,t,o){return A.stageEvent&&k.off("stagemousedown",A.stageEvent),A.moveEvent&&k.off("stagemousemove",A.moveEvent),A.upEvent&&k.off("stagemouseup",A.upEvent),A.keydown&&frame.off("keydown",A.keydown),A.removeFrom(),o||this.zimContainer_dispose(!0),!0})},To.extend(To.Book,To.Container,["clone","dispose"],"zimContainer"),To.Scroller=function(e,t,o,n,r,i,a,l,s,c){if(p=zob(To.Scroller,arguments,"backing, speed, direction, horizontal, gapFix, stage, container, style, group, inherit",this))return p;z_d("69"),this.cjsEventDispatcher_constructor(),this.type="Scroller",this.group=s;var u,d,h,g,p,f,m,z,y,b,v,w=!1===l?{}:To.getStyle(this.type,this.group,c);zot(e)&&(e=null!=w.backing?w.backing:null),zot(e)||!zot(u=this.backing1=e)&&u.getBounds&&(d=this.backing2=e.clone(),zot(n)&&(n=null==w.horizontal||w.horizontal),zot(r)&&(r=null!=w.gapFix?w.gapFix:0),zot(a)&&(a=null!=w.container?w.container:null),zot(i)&&(i=null!=w.stage?w.stage:null),h=this,zot(t)&&(t=null!=w.speed?w.speed:1),this.speed=t,g=this.baseSpeed=this.speed,zot(o)&&(o=null!=w.direction?w.direction:1),this.direction=o,p=n?u.scaleX:u.scaleY,u.getBounds()?i||u.stage?u.parent?(u.parent.addChildAt(d,u.parent.getChildIndex(u)),i=i||u.stage,zot(a)&&(a=i),a.getBounds()?(f=u.getBounds().width*p-r,m=u.getBounds().height*p-r,n?d.x=f:d.y=m,b=!1,v=To.Ticker.add(function(e){z||(z=a.getBounds().width,y=a.getBounds().height);if(0==h.speed||0==h.direction)return;n?(u.x-=h.speed*h.direction,u.x<d.x?d.x=u.x+f:d.x=u.x-f,0<h.direction*h.speed?d.x<0&&u.x<d.x?u.x=d.x+f:u.x<0&&d.x<u.x&&(d.x=u.x+f):d.x>z&&d.x>u.x?d.x=u.x-f:u.x>z&&u.x>d.x&&(u.x=d.x-f)):(u.y-=h.speed*h.direction,u.y<d.y?d.y=u.y+m:d.y=u.y-m,0<h.direction*h.speed?d.y<0&&u.y<d.y?u.y=d.y+m:u.y<0&&d.y<u.y&&(d.y=u.y+m):d.y>y&&d.y>u.y?d.y=u.y-m:u.y>y&&u.y>d.y&&(u.y=d.y-m))},i),this.paused=!1,this.pause=function(e,t){return zot(e)&&(e=!0),zot(t)&&(t=0),e?(g=h.speed,0<t?(b=!0,To.animate({target:h,obj:{pausingSpeed:0},ticker:!1,time:t,call:function(){h.speed=0,h.paused=!0,b=!1,h.dispatchEvent("pause")}})):(b=!1,h.speed=0,h.paused=!0,setTimeout(function(){h.dispatchEvent("pause")},10))):(b=!1,0<t?To.animate({target:h,obj:{pausingSpeed:g},ticker:!1,time:t,call:function(){h.speed=g,h.paused=!1,b=!1}}):(h.speed=g,h.paused=!1)),h},Object.defineProperty(h,"percentSpeed",{get:function(){return 0==h.baseSpeed?NaN:h.speed/h.baseSpeed*100},set:function(e){b||h.paused||(h.speed=h.baseSpeed*e/100)}}),Object.defineProperty(h,"pausingSpeed",{get:function(){return 0==h.baseSpeed?NaN:h.speed/h.baseSpeed*100},set:function(e){h.speed=h.baseSpeed*e/100}}),!1!==l&&To.styleTransforms(this,w),this.dispose=function(e,t,o){return To.Ticker.remove(v),!0}):zog("zim display - Scroller(): please setBounds() on container or stage if no container")):zog("zim display - Scroller(): please add object to container or stage before adding to Scroller"):zog("zim display - Scroller(): please pass in stage parameter or add backing objects to stage to start"):zog("zim display - Scroller(): please setBounds() on backing objects"))},To.extend(To.Scroller,createjs.EventDispatcher,null,"cjsEventDispatcher"),To.Dynamo=function(n,e,t,o,r,i,a,l,s,c,u,d){if(x=zob(To.Dynamo,arguments,"sprite, speed, label, startFrame, endFrame, update, reversible, flip, flipVertical, style, group, inherit",this))return x;z_d("69.2"),this.cjsEventDispatcher_constructor(),this.type="Dynamo",this.group=u;var h,g,p,f,m,z,y,b,v,w,C,x=!1===c?{}:To.getStyle(this.type,this.group,d);zot(n)&&(n=null!=x.sprite?x.sprite:null),zot(n)||0!=(h=this.frames=n.parseFrames(t,o,r,!0)).length&&(this.totalFrames=h.length,g=0,zot(e)&&(e=null!=x.speed?x.speed:30),zot(a)&&(a=null==x.reversible||x.reversible),p=this.baseSpeed=this.speed=e,zot(i)&&(i=null!=x.update&&x.update),zot(l)&&(l=null!=x.flip?x.flip:null),zot(l)&&0==a&&(l=!0),f=this,y=Date.now(),C=!1,f.scaleX=n.scaleX,f.scaleY=n.scaleY,function e(){var t,o;m=requestAnimationFrame(e),z=h[g].s,0!=f.speed&&0!=z&&(v=1e3/Math.abs(f.speed)*z,b=Date.now(),v<b-y&&(y=b,o=!1,(t=f.frame+(0<f.speed||!a?1:-1))>=h.length&&(o=!0,t=0),t<0&&(o=!0,t=h.length-1),f.frame=t,l&&(f.speed<0?n.scaleX=-f.scaleX:n.scaleX=f.scaleX),s&&(f.speed<0?n.scaleY=-f.scaleY:n.scaleY=f.scaleY),o&&f.dispatchEvent("loop"),f.dispatchEvent("change"),i&&n.stage&&n.stage.update(),zot(w)||w!=f.frame||(C=!1,f.speed=0,f.paused=!0,f.dispatchEvent("pause"))))}(),this.paused=!1,this.pause=function(e,t,o){if(zot(e)&&(e=!0),e!=f.paused)return zot(t)&&(t=0),e?(p=f.speed,zot(o)?0<t?(C=!0,To.animate({target:f,obj:{pausingSpeed:0},ticker:!1,time:t,call:function(){C=!1,f.speed=0,f.paused=!0,f.dispatchEvent("pause")}})):(C=!1,f.speed=0,f.paused=!0,setTimeout(function(){f.dispatchEvent("pause")},10)):(C=!0,w=o)):(w=null,0<t?(C=!0,To.animate({target:f,obj:{pausingSpeed:p},ticker:!1,time:t,call:function(){C=!1,f.speed=p,f.paused=!1}})):(C=!1,f.speed=p,f.paused=!1)),f},Object.defineProperty(f,"frame",{get:function(){return g},set:function(e){g=Math.round(e)%h.length;e=h[g];zot(e)||(n.frame=e.f)}}),Object.defineProperty(f,"percentSpeed",{get:function(){return 0==f.baseSpeed?NaN:C||f.paused?p/f.baseSpeed*100:f.speed/f.baseSpeed*100},set:function(e){C||f.paused?p=f.baseSpeed*e/100:f.speed=f.baseSpeed*e/100}}),Object.defineProperty(f,"pausingSpeed",{get:function(){return 0==f.baseSpeed?NaN:f.speed/f.baseSpeed*100},set:function(e){f.speed=f.baseSpeed*e/100}}),!1!==c&&To.styleTransforms(this,x),this.dispose=function(e,t,o){cancelAnimationFrame(m)})},To.extend(To.Dynamo,createjs.EventDispatcher,null,"cjsEventDispatcher"),To.Accelerator=function(e){z_d("69.3"),this.cjsEventDispatcher_constructor();var l=this;this.type="Accelerator",this.paused=!1,this.items=[],this.paused=!1,this._percentSpeed=100,this.add=function(e){for(var t=Array.isArray(e)?e:[e],o=0;o<t.length;o++)l.items.indexOf(t[o])<0&&l.items.push(t[o]);return l},e&&this.add(e),this.remove=function(e){for(var t,o=Array.isArray(e)?e:[e],n=0;n<o.length;n++)0<=(t=l.items.indexOf(o[n]))&&l.items.splice(t,1);return l},this.pause=function(t,e,o){if(zot(t)&&(t=!0),t!=l.paused){var n=[];if(t){zot(o)||(e=null);for(var r=!1,i=0;i<l.items.length;i++)(zot(e)||!zot(o)||l.items[i].totalFrames)&&(!l.items[i].totalFrames||zot(e)&&zot(o))||(l.items[i].pause(!0,e,o),r=!0,n[i]=1,l.items[i].on("pause",function(){l.paused||(a(),l.paused=!0,l.dispatchEvent("pause"))},null,!0));r||(a(),l.paused=!0,setTimeout(function(){l.dispatchEvent("pause")},10))}else l.paused=!1,a()}function a(){for(var e=0;e<l.items.length;e++)1!=n[e]&&l.items[e].pause(t)}},Object.defineProperty(l,"percentSpeed",{get:function(){return l._percentSpeed},set:function(e){l._percentSpeed=e;for(var t=0;t<l.items.length;t++)l.items[t].percentSpeed=e}}),this.dispose=function(e,t,o){for(var n=0;n<l.items.length;n++)l.items[n].dispose();return!(l.items=null)}},To.extend(To.Accelerator,createjs.EventDispatcher,null,"cjsEventDispatcher"),To.Emitter=function(c,u,d,t,e,o,n,r,i,a,l,s,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O){if(L=zob(To.Emitter,arguments,"obj, width, height, interval, num, life, fade, shrink, decayTime, decayStart, trace, traceFadeTime, traceShiftX, traceShiftY, angle, force, gravity, wind, layers, animation, random, horizontal, vertical, sink, sinkForce, cache, events, startPaused, pool, poolMin, particles, style, group, inherit",this))return L;z_d("69.9"),this.type="Emitter",this.group=M;var j=!1===I?{}:To.getStyle(this.type,this.group,O);zot(c)&&(c=null!=j.obj?j.obj:[new To.Circle(20,"#e472c4"),new To.Circle(20,"#acd241"),new To.Circle(20,"#50c4b7")]),zot(u)&&(u=null!=j.width?j.width:300),zot(d)&&(d=null!=j.height?j.height:300);var L=Ao(t);zot(t)&&(t=null!=j.interval?j.interval:"s"==L?.02:20),"number"==typeof t&&(t=Math.max("s"==L?.01:10,t)),zot(e)&&(e=null!=j.num?j.num:1),zot(l)&&(l=null!=j.trace&&l.size),zot(s)&&(s=null!=j.traceFadeTime?j.traceFadeTime:i),zot(h)&&(h=null!=j.traceShiftX?j.traceShiftX:0),zot(g)&&(g=null!=j.traceShiftY?j.traceShiftY:0),Po(o,L),zot(o)&&(o=null!=j.life?j.life:"s"==L?1:1e3),zot(n)&&(n=null==j.fade||j.fade),zot(r)&&(r=null!=j.shrink?j.shrink:!l),Po(i,L),zot(i)&&(i=null!=j.decayTime?j.decayTime:"s"==L?1:1e3),zot(p)&&(p=null!=j.angle?j.angle:{min:0,max:360}),zot(f)&&(f=null!=j.force?j.force:5),zot(m)&&(m=null!=j.gravity?j.gravity:9.8),zot(z)&&(z=null!=j.wind?j.wind:0),zot(y)&&(y=null!=j.layers?j.layers:"top"),zot(u)&&(u=null!=j.width?j.width:100),zot(d)&&(d=null!=j.height?j.height:100),zot(w)&&(w=null!=j.horizontal&&j.horizontal),zot(C)&&(C=null!=j.vertical&&j.vertical),zot(x)&&(x=null!=j.sink?j.sink:null),!zot(x)&&zot(k)&&(k=null!=j.sinkForce?j.sinkForce:10),zot(A)&&(A=null!=j.events&&j.events),zot(P)&&(P=null!=j.startPaused&&j.startPaused),zot(B)&&(B=null==j.pool||j.pool),zot(S)&&(S=null!=j.poolMin?j.poolMin:0),zot(E)&&(E=null!=j.particles?j.particles:new To.Container),zot(b)&&(b=null!=j.animation?j.animation:null),E.type="Particles",this.zimContainer_constructor(u,d,null,null,!1),this.type="Emitter";var _=this;this.regX=u/2,this.regY=d/2,_.obj=c,_.particles=E,_.interval=t,_.num=e,_.life=o,_.fade=n,_.shrink=r,_.decayTime=i,_.decayStart=a,_.trace=l,_.traceFadeTime=s,_.traceShiftX=h,_.traceShiftY=g,_.angle=p,_.emitterForce=f,_.gravity=m,_.wind=z,_.layers=y,_.animation=b,_.random=v,_.horizontal=w,_.vertical=C,_.sink=x,_.sinkForce=k,_.events=A,_.startEmitterPaused=_.emitterPaused=P,_.pool=B,_.poolMin=S,_.particlesEmitted=0;var Y,D,X=[],R=0,W=0;function F(e){if(_.events&&H("fizzed",e),(e.trace?e.getChildAt(0):e).endSpurt&&(H("spurtfizzed",e),_.spurting=!1),_.pool&&"end"!=e.pooled)return e.pooled||(e.pooled=!0,X&&X.push(e)),void(e.visible=!1);_.removeChild(e),_.trace&&e.uncache(),e=null}function H(e,t){zot(t)||((e=new createjs.Event(e)).particle=t.trace?t.getChildAt(0):t,_.dispatchEvent(e))}function V(e){_.pauseEmitter(),_.spurtCount=_.spurtNum=null,zot(e)||(H("spurted",e),e.endSpurt=!0)}To.added(_,function(e){_.emitterPaused=null,_.on("added",function(){_.particles.addTo(_.parent)}),D=e,zot(T)&&(T=!D.isWebGL&&To.mobile());T&&(D.snapToPixelEnabled=!0);{var l;D&&(e=_.parent.getChildIndex(_),_.parent.addChildAt(E,e),w||C||_.centerReg(null,null,!1),_.zimInterval=To.interval(_.interval,function(){var l,s;function e(e,t){return e-t}_.startEmitterPaused?_.pauseEmitter():(c=Array.isArray(_.obj)?_.obj:[_.obj]).length<=0||(l=Array.isArray(_.interval)?(_.interval.sort(e),_.interval[0]):_.interval.constructor=={}.constructor?_.interval.min:_.interval,s=Array.isArray(_.num)?(_.num.sort(e),_.num[_.num.length-1]):_.num.constructor=={}.constructor?_.num.max:_.num,To.loop(To.Pick.choose(_.num),function(){var o,n;0<_.decayTime&&(e={},_.shrink&&(e.scale=0),_.fade&&(e.alpha=0)),_.pool&&0<X.length&&W>=Math.max(_.poolMin,(_.life/l+5)*s)?((o=X[R++%X.length]).visible=!0,(n=o.trace?o.getChildAt(0):o).emitShape&&(t=n.template,n.graphics.c().s(t.s?To.Pick.choose(t.s):null).ss(t.ss?To.Pick.choose(t.ss):null).sd(t.sd?To.Pick.choose(t.sd):null,t.offset?To.Pick.choose(t.offset):null)),o.trace&&o.updateCache(),"top"==_.layers?n.emitShape?o.addTo(E,null,!1):o.centerReg(E):n.emitShape?o.addTo(E,"bottom"==_.layers?0:To.rand(E.numChildren),!1):o.centerReg(E,"bottom"==_.layers?0:To.rand(E.numChildren)),o.alpha=1,o.scaleX=1,o.scaleY=1,n.alpha=n.originalAlpha,n.scaleX=n.originalScaleX,n.scaleY=n.originalScaleY,n.endSpurt=!1):(W++,_.trace&&((o=new To.Container(u,d,null,null,!1)).trace=!0),"shape"==(r=To.Pick.choose(To.shuffle(c)[0])).type?(t=r,(n=new To.Shape(1,1,null,null,null,!1)).emitShape=!0,n.template=t,n.graphics.s(t.s?To.Pick.choose(t.s):null).ss(t.ss?To.Pick.choose(t.ss):null).sd(t.sd?To.Pick.choose(t.sd):null,t.offset?To.Pick.choose(t.offset):null),_.trace?n.addTo(o,null,!1):"top"==_.layers?n.addTo(E,null,!1):n.addTo(E,"bottom"==_.layers?0:To.rand(E.numChildren),null,!1)):((n=r.clone()).centerReg||zimify(n),_.trace?n.centerReg(o).pos({x:-1e3,y:-1e3,reg:!0}):"top"==_.layers?n.centerReg(E):n.centerReg(E,"bottom"==_.layers?0:To.rand(E.numChildren))),_.trace&&("top"==_.layers?o.addTo(E,null,!1):o.addTo(E,"bottom"==_.layers?0:To.rand(E.numChildren),!1),o.cache(h,g,u,d)),_.trace||(o=n),(o.particle=n).originalAlpha=n.alpha,n.originalScaleX=n.scaleX,n.originalScaleY=n.scaleY),_.currentParticle=n,_.particlesEmitted++,o.particleNormal=!0,o.particleDecaying=!1,o.particleFizzing=!1;var e=To.Pick.choose(_.angle),t=To.Pick.choose(_.emitterForce),r=t*Math.cos(e*Math.PI/180),e=t*Math.sin(e*Math.PI/180);n.info={position:{x:_.x,y:_.y},velocity:{x:r,y:e}},_.horizontal&&(n.info.position={x:_.x-_.regX+To.rand(0,u),y:_.y-_.regY+(_.vertical?d/2:0)}),_.vertical&&(n.info.position={x:_.x-_.regX+(_.horizontal?u/2:0),y:_.y-_.regY+To.rand(0,d)}),n.emitShape?n.graphics.mt(n.info.position.x,n.info.position.y):(n.x=n.info.position.x,n.y=n.info.position.y),_.random&&To.loop(_.random,function(e,t){t=To.Pick.choose(t);"scale"==e?n.sca(t):("x"==e?n.info.position.x=_.horizontal||_.vertical?t:t+u/2:"y"==e&&(n.info.position.y=_.horizontal||_.vertical?t:t+d/2),"x"!=e&&"y"!=e||!n.emitShape||n.graphics.mt(n.info.position.x,n.info.position.y),n[e]=t,n.emitShape&&(n.x=0,n.y=0))}),T&&!n.emitShape&&n.cache(n.getBounds().x-10,n.getBounds().y-10,n.getBounds().width+20,n.getBounds().height+20);var i,a,e=!n.emitShape&&_.shrink;0<_.decayTime&&(_.fade||e||_.trace&&0<_.traceFadeTime)?(_.trace&&0<_.traceFadeTime&&o.animate({obj:{alpha:0},time:_.traceFadeTime,wait:_.life-_.traceFadeTime,waitedCall:function(e){e.particleNormal=!1,e.particleFizzing=!0},call:F,override:!1,id:"decay"}),(_.fade||e)&&(a={},_.fade&&(a.alpha=0),e&&(a.scaleX=0,a.scaleY=0),n.animate({obj:a,time:_.decayTime,wait:zot(_.decayStart)?_.life-_.decayTime:_.decayStart,waitedCall:function(e){e.parent!=_&&(e=e.parent),e.particleNormal=!1,e.particleDecaying=!0},call:function(e){var t;_.events&&H("decayed",e),e.endSpurt&&H("spurtdecayed",e),_.trace&&0<_.traceFadeTime||(zot(_.decayStart)||_.decayStart+_.decayTime>_.life?e.parent&&F(e.parent.trace?e.parent:e):(t=o,To.timeout(_.life-(_.decayStart+_.decayTime),function(){F(t)})))},override:!1,id:"decay"}))):0<_.life&&((i=o).timeOut=To.timeout(_.life,function(){F(i)})),_.events&&H("emitted",o),a=n,zot(_.spurtCount)&&zot(_.spurtNum)||(_.spurtCount++,_.spurtCount>=_.spurtNum&&V(a)),_.animation&&(zot((a=To.Pick.choose(_.animation)).override)&&(a.override=!1),n.animate(To.copy(a)))}))},null,!0,!0),l=0,Y=_.emitterTicker=To.Ticker.add(function(){To.loop(E,function(e){var t;e.trace&&(e=(t=e).getChildAt(0));var o,n,r=e.info,i=0,a=0;zot(_.sink)||(o=_.particles.localToGlobal(r.position.x,r.position.y),n=_.sink.parent&&_.sink.parent.localToGlobal?_.sink.parent.localToGlobal(_.sink.x,_.sink.y):new createjs.Point(To.Pick.choose(_.sink.x),To.Pick.choose(_.sink.y)),n=To.angle(o.x,o.y,n.x,n.y),i=_.sinkForce*Math.cos(n*Math.PI/180),a=_.sinkForce*Math.sin(n*Math.PI/180));i=_.wind+i,a=_.gravity+a;r.velocity.x+=i*l,r.velocity.y+=a*l,r.position.x+=r.velocity.x*l*100,r.position.y+=r.velocity.y*l*100,e.emitShape?e.graphics.lt(r.position.x,r.position.y):(e.x=r.position.x,e.y=r.position.y),_.trace&&t&&t.updateCache(e.emitShape?null:"source-over")})},D),l=1/To.Ticker.framerate)}}),_.particles.noMouse(),Object.defineProperty(_,"interval",{get:function(){return t},set:function(e){t=e,_.zimInterval&&(_.zimInterval.time=t)}}),this.removeFrom=function(e){_.parent&&_.parent.removeChild(_),_.particles.removeFrom()},this.spurting=!1,this.spurt=function(e,t,o){var n;return(n=zob(_.spurt,arguments,"num, time, restart"))?n:(zot(t)||(To.timeout(To.Pick.choose(t),function(){V(_.currentParticle)},!0),_.spurting=!0),zot(e)||(_.spurtNum=To.Pick.choose(e),_.spurtCount=0,_.spurting=!0),_.pauseEmitter(!1,o,null,!0),_)},this.clearPool=function(){To.loop(_,function(e){e.pooled="end",e.visible||_.removeChild(e)},!0),R=W=0,X=[]},_.startEmitterPaused||(this.emitterPaused=!1),this.pauseEmitter=function(e,t,o,n){if(_.startEmitterPaused=null,zot(e)&&(e=!0),zot(t)&&(t=!1),zot(o)&&(o=!1),e){if(_.emitterPaused)return _;o&&(Y&&To.Ticker.remove(Y),To.loop(_,function(e){e.pauseAnimate(),e.trace&&e.getChildAt(0).pauseAnimate(),e.timeOut&&e.timeOut.pause()})),_.zimInterval.pause(),_.emitterPaused=!0}else{if(!_.emitterPaused)return _;t&&(To.loop(_,function(e){e.stopAnimate(),e.timeOut&&e.timeOut.clear(),e.trace&&e.getChildAt(0).pauseAnimate()}),_.removeAllChildren()),D&&Y&&!To.Ticker.has(D,Y)&&(To.Ticker.add(Y,D),To.loop(_,function(e){e.pauseAnimate(!1),e.timeOut&&e.timeOut.pause(!1),e.trace&&e.getChildAt(0).pauseAnimate(!1)})),_.zimInterval&&_.zimInterval.pause(!1,n),_.emitterPaused=!1}return _},!(this.resize=function(e,t){zot(e)||(u=e),zot(t)||(d=t),_.setBounds(0,0,u,d),w||C||_.centerReg(),_.clearPool()})!==I&&To.styleTransforms(this,j),this.clone=function(e){e=Array.isArray(_.obj)||_.obj.constructor=={}.constructor?To.copy(_.obj):_.obj.clone?_.obj.clone(e):_.obj;return _.cloneProps(new To.Emitter(e,u,d,_.interval,_.num,_.life,_.fade,_.shrink,_.decayTime,_.decayStart,_.trace,_.traceFadeTime,_.traceShiftX,_.traceShiftY,_.angle,_.emitterForce,_.gravity,_.wind,_.layers,_.animation,To.copy(_.random),_.horizontal,_.vertical,_.sink,_.sinkForce,T,_.events,P,_.pool,_.poolMin,I,_.group,O))},this.dispose=function(e,t,o){return _.zimInterval&&_.zimInterval.clear(),Y&&To.Ticker.remove(Y),To.loop(X,function(e){e&&e.dispose()}),E&&E.dispose&&E.dispose(),_.currentParticle&&_.currentParticle.dispose&&_.currentParticle.dispose(),c&&Array.isArray(c)?To.loop(c,function(e){e.dispose&&e.dispose()}):c&&c.dispose&&c.dispose(),!(E=_.currentParticle=_.particles=c=_.obj=X=_.poolList=null)}},To.extend(To.Emitter,To.Container,"clone","zimContainer",!1),To.Generator=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b){if(C=zob(To.Generator,arguments,"color, strokeColor, strokeWidth, draw, stamp, setup, maxCount, boundary, drawCount, drawPause, drawSpacebarPause, startX, startY, cache, recordLinePoints, frame, seed, style, group, inherit",this))return C;z_d("69.92"),this.group=y;var v=!1===z?{}:To.getStyle("Generator",this.group,b);zot(f)&&(f=null!=v.frame?v.frame:zdf);var w=f.stage;zot(e)&&(e=null!=v.color?v.color:null),zot(t)&&(t=null!=v.strokeColor?v.strokeColor:To.white),zot(o)&&(o=null!=v.strokeWidth?v.strokeWidth:1),zot(a)&&(a=null!=v.maxCount?v.maxCount:1e3),zot(l)&&(l=null!=v.boundary?v.boundary:new To.Boundary(0,0,w.width,w.height)),zot(s)&&(s=null!=v.drawCount?v.drawCount:1),zot(c)&&(c=null==v.drawPause||v.drawPause),zot(u)&&(u=null==v.drawSpacebarPause||v.drawSpacebarPause),zot(d)&&(d=null!=v.startX?v.startX:w.width/2),zot(h)&&(h=null!=v.startY?v.startY:w.height/2),zot(g)&&(g=null!=v.cache&&v.cache);var C=this.drawing=new To.Container(l.x,l.y,l.width,l.height).addTo(w),x=this.shape=new To.Shape(l.width,l.height).addTo(C);this.drawCount=s,zot(c)&&(c=!0),g&&x.cache(l.x,l.y,l.width,l.height),this.zimContainer_constructor(l.x,l.y,l.width,l.height),this.type="Generator";var k=this;k.draw=null,this.color=e,this.strokeColor=t,this.strokeWidth=o;var T=d,A=h;this.fill=function(e){return k.color=e,k.currentColor=zik(k.color),x.f(k.currentColor),this},this.stroke=function(e,t){return zot(e)||(k.strokeColor=e,k.currentStrokeColor=zik(k.strokeColor),x.s(k.currentStrokeColor)),zot(t)||(k.strokeWidth=t,k.currentStrokeWidth=zik(k.strokeWidth),x.ss(k.currentStrokeWidth)),this},this.noStroke=function(){return k.strokeColor=k.currentStrokeColor=null,k.strokeWidth=k.currentStrokeWidth=null,x.s(),x.ss(1),this},x.matrix=x.getMatrix(),this.translate=function(e,t){zot(e)&&(e=0),zot(t)&&(t=0),e=zik(e),t=zik(t);var o=x.matrix.transformPoint(e,t);return T=o.x,A=o.y,x.mt(T,A),x.matrix.translate(e,t),this},this.rotate=function(e){return zot(e)&&(e=0),e=zik(e),x.matrix.rotate(e),this},this.scale=function(e,t){return zot(e)&&(e=1),zot(t)&&(t=e),e=zik(e),t=zik(t),x.matrix.scale(e,t),this},this.skew=function(e,t){return zot(e)&&(e=0),zot(t)&&(t=0),e=zik(e),t=zik(t),x.matrix.skew(e,t),this},p&&(k.linePoints=[]),this.line=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=0),zot(n)&&(n=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),("zero"==p||"nonzero"==p&&e&&t)&&k.linePoints.push([e,t]),k.translate(e,t);t=x.matrix.transformPoint(o,n);return T=t.x,A=t.y,x.lt(T,A),p&&k.linePoints.push([T,A]),x.matrix.translate(o,n),this},this.arc=function(e,t,o,n,r,i){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),e=zik(e),t=zik(t),o=zik(o),o=Math.abs(o),zot(n)&&(n=0),zot(r)&&(r=180),n=zik(n),r=zik(r),zot(i)&&(i=!1),i=zik(i),k.translate(e,t);var a=x.matrix.transformPoint(0,0);x.decomp||(x.decomp={}),x.matrix.decompose(x.decomp);e=(Math.abs(x.decomp.scaleX)+Math.abs(x.decomp.scaleY))/2,t=x.decomp.rotation||0,e*=o;return x.mt(a.x+e*Math.cos((n+t)*Math.PI/180),a.y+e*Math.sin((n+t)*Math.PI/180)),x.a(a.x,a.y,e,(n+t)*Math.PI/180,(r+t)*Math.PI/180,i),this},this.curve=function(e,t,o,n,r,i){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),zot(n)&&(n=50),zot(r)&&(r=100),zot(i)&&(i=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),r=zik(r),i=zik(i),k.translate(e,t);t=x.matrix.transformPoint(o,n),o=x.matrix.transformPoint(r,i),n=o.x,o=o.y;return x.qt(t.x,t.y,n,o),x.matrix.translate(r,i),this},this.bezier=function(e,t,o,n,r,i,a,l){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),zot(n)&&(n=50),zot(r)&&(r=-50),zot(i)&&(i=-50),zot(a)&&(a=100),zot(l)&&(l=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),r=zik(r),i=zik(i),a=zik(a),l=zik(l),k.translate(e,t);o=x.matrix.transformPoint(o,n),n=x.matrix.transformPoint(r,i),r=x.matrix.transformPoint(a,l),i=r.x,r=r.y;return x.bt(o.x,o.y,n.x,n.y,i,r),x.matrix.translate(a,l),this},this.rectangle=function(e,t,o,n,r,i,a,l){if(zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=100),zot(n)&&(n=o),e=zik(e),t=zik(t),o=zik(o),n=zik(n),!(r||i||a||l)){k.translate(e,t);var s=x.matrix.transformPoint(0,0),c=x.matrix.transformPoint(o,0),u=x.matrix.transformPoint(o,n),d=x.matrix.transformPoint(0,n);return x.mt(s.x,s.y).lt(c.x,c.y).lt(u.x,u.y).lt(d.x,d.y).lt(s.x,s.y).lt(c.x,c.y),x.mt(s.x,s.y),this}zot(r)&&(r=0),zot(i)&&(i=r),zot(a)&&(a=r),zot(l)&&(l=r),r=zik(r),i=zik(i),a=zik(a),l=zik(l);var h=(o<n?o:n)/2,g=0,p=0,f=0,m=0;r<0&&(r*=g=-1),(h=Math.abs(h))<r&&(r=h),i<0&&(i*=p=-1),h<i&&(i=h),a<0&&(a*=f=-1),h<a&&(a=h),l<0&&(l*=m=-1),h<l&&(l=h),k.translate(e,t),x.decomp||(x.decomp={}),x.matrix.decompose(x.decomp);var z=(Math.abs(x.decomp.scaleX)+Math.abs(x.decomp.scaleY))/2,u=o<0?-1:1,d=n<0?-1:1,c=x.matrix.transformPoint(o-i*u,0),s=x.matrix.transformPoint(o+i*p*u,-i*p*d),h=x.matrix.transformPoint(o,i*d),e=x.matrix.transformPoint(o,n-a*d),t=x.matrix.transformPoint(o+a*f*u,n+a*f*d),p=x.matrix.transformPoint(o-a*u,n),f=x.matrix.transformPoint(l*u,n),o=x.matrix.transformPoint(-l*m*u,n+l*m*d),m=x.matrix.transformPoint(0,n-l*d),n=x.matrix.transformPoint(0,r*d),d=x.matrix.transformPoint(-r*g*u,-r*g*d),u=x.matrix.transformPoint(r*u,0);return x.mt(c.x,c.y).at(s.x,s.y,h.x,h.y,i*z).lt(e.x,e.y).at(t.x,t.y,p.x,p.y,a*z).lt(f.x,f.y).at(o.x,o.y,m.x,m.y,l*z).lt(n.x,n.y).at(d.x,d.y,u.x,u.y,r*z).cp(),this},this.circle=function(e,t,o,n,r){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=50),zot(n)&&(n=100),zot(r)&&(r=!0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),o=Math.abs(o),k.translate(e,t);var i=x.matrix.transformPoint(0,0);x.decomp||(x.decomp={}),x.matrix.decompose(x.decomp);e=(Math.abs(x.decomp.scaleX)+Math.abs(x.decomp.scaleY))/2,t=x.decomp.rotation||0,e*=o;return k.circleHeight=2*e,"number"==typeof n&&0<=n&&n<100?(n=360*n/100/2,x.mt(i.x+e*Math.cos((-n-90+t)*Math.PI/180),i.y+e*Math.sin((-n-90+t)*Math.PI/180)),x.a(i.x,i.y,e,(-n-90+t)*Math.PI/180,(n-90+t)*Math.PI/180,!1),r&&x.cp(),k.circleHeight=e-Math.cos(n*Math.PI/180)*e):(x.mt(i.x+e,i.y),x.a(i.x,i.y,e,0,2*Math.PI)),this},this.elipse=function(e,t,o,n){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=100),zot(n)&&(n=50),e=zik(e),t=zik(t),o=zik(o),n=zik(n),k.translate(e,t);var r=x.matrix.transformPoint(-o/2,-n/2);x.decomp||(x.decomp={}),x.matrix.decompose(x.decomp);e=x.decomp.scaleX,t=x.decomp.scaleY;return x.de(r.x,r.y,o*e,n*t),this},this.poly=function(e,t,o,n,r,i){zot(e)&&(e=0),zot(t)&&(t=0),zot(o)&&(o=100),zot(n)&&(n=5),zot(r)&&(r=0),zot(i)&&(i=0),e=zik(e),t=zik(t),o=zik(o),n=zik(n),r=zik(r),i=zik(i),o=Math.abs(o),k.translate(e,t);i=x.matrix.transformPoint(0,0);x.decomp||(x.decomp={}),x.matrix.decompose(x.decomp);e=(Math.abs(x.decomp.scaleX)+Math.abs(x.decomp.scaleY))/2,t=x.decomp.rotation||0,e*=o;return x.dp(i.x,i.y,e,n,r,t),this},this.closePath=this.close=this.cp=function(){return x.cp(),this},this._noise=new To.Noise(m),this.noise=function(){return 1==arguments.length?(this._noise.simplex1D.apply(null,arguments)+1)/2:2==arguments.length?(this._noise.simplex2D.apply(null,arguments)+1)/2:3==arguments.length?(this._noise.simplex3D.apply(null,arguments)+1)/2:4==arguments.length?(this._noise.simplex4D.apply(null,arguments)+1)/2:void 0};x.matrix.clone();this.stack=[],this.colorStrokeStack=[],this.push=function(){return k.stack.push(x.matrix.clone()),k.colorStrokeStack.push([k.color,k.strokeColor,k.strokeWidth,k.currentColor,k.currentStrokeColor,k.currentStrokeWidth]),this},this.pop=function(){x.matrix=k.stack.pop()||x.matrix;var e=k.colorStrokeStack.pop()||[k.color,k.strokeColor,k.strokeWidth,k.currentColor,k.currentStrokeColor,k.currentStrokeWidth];return k.color=e[0],k.strokeColor=e[1],k.strokeWidth=e[2],k.currentColor=e[3],k.currentStrokeColor=e[4],k.currentStrokeWidth=e[5],x.f(k.currentColor).s(k.currentStrokeColor).ss(k.currentStrokeWidth),x.mt(x.matrix.x,x.matrix.y),this},this.blit=function(){return x.updateCache("source-over"),x.c(),this},this.step=function(){return k.draw&&S(),this},zot(k.color)||this.fill(k.color),!zot(k.strokeColor)&&k.strokeWidth?this.stroke(k.strokeColor,k.strokeWidth):k.noStroke(),this.translate(T,A),"function"==typeof i&&(this.setup=i,To.timeout(.01,function(){i(0,k.count,k),g&&x.updateCache(),w.update()}));var P=0;function B(e){this.stampNum++;e=To.loop(k.maxCount,function(e,t){if(k.paused)return k.pausedCount=e,!1;if(k.changeCount)return k.changeCount=!1;t=r(P=e+1,t,k,k.stampNum);return k.currentColor=zik(k.color),x.f(k.currentColor),k.currentStrokeColor=zik(k.strokeColor),x.s(k.currentStrokeColor),k.currentStrokeWidth=zik(k.strokeWidth),x.ss(k.currentStrokeWidth),t||void 0},null,null,e);g&&x.updateCache(),e&&k.dispatchEvent("complete"),w.update()}function S(){k.iterator++,k.iterator%Math.ceil(k.drawCount)==0&&(k.count++,k.draw(k.count,k.maxCount,k),g&&k.blit(),k.currentColor=zik(k.color),x.f(k.currentColor),k.currentStrokeColor=zik(k.strokeColor),x.s(k.currentStrokeColor),k.currentStrokeWidth=zik(k.strokeWidth),x.ss(k.currentStrokeWidth),k.dispatchEvent("drawing"),w.update()),k.maxCount&&k.count>=k.maxCount&&(k.dispatchEvent("complete"),To.Ticker.remove(k.ticker))}this.maxCount=a,this.resetup=function(e){return zot(e)&&(e=!0),P=0,e&&k.shape.c(),zot(k.color)||this.fill(k.color),!zot(k.strokeColor)&&k.strokeWidth?this.stroke(k.strokeColor,k.strokeWidth):k.noStroke(),this.reset(),this.setup&&(i(0,k.count,k),g&&x.updateCache(),w.update()),this},this.stampNum=0,"function"==typeof r&&(this.stamp=r,To.timeout(.015,function(){B(0)})),this.restamp=function(e,t){return zot(e)&&(e=!0),zot(t)&&(t=!0),P=0,e&&k.shape.c(),t&&k.resetup(e),B(0),this},this.reset=function(){return this.fill(e),!zot(t)&&o?this.stroke(t,o):this.noStroke(),x.matrix.identity(),this.translate(d,h),this},this.clear=function(){return this.shape.c(),this},k.iterator=0,"function"==typeof n&&(this.draw=n,i?setTimeout(function(){k.ticker=To.Ticker.add(S)},100):this.ticker=To.Ticker.add(S),k.generatorPaused=!1,c&&(k.pauseEvent=w.on("stagemousedown",function(){k.count>=k.maxCount||k.pauseTimeout||(To.Ticker.has(k.ticker)?(To.Ticker.remove(k.ticker),k.generatorPaused=!0,k.dispatchEvent("generatorpaused")):(k.ticker=To.Ticker.add(k.ticker),k.generatorPaused=!1,k.dispatchEvent("generatorunpaused")))})),u&&(k.pauseSpacebarEvent=f.on("keydown",function(e){k.count>=k.maxCount||k.pauseTimeout||20==e.keyCode&&(To.Ticker.has(k.ticker)?(To.Ticker.remove(k.ticker),k.generatorPaused=!0,k.dispatchEvent("generatorpaused")):(k.ticker=To.Ticker.add(k.ticker),k.generatorPaused=!1,k.dispatchEvent("generatorunpaused")))}))),this.redraw=function(e,t){return zot(e)&&(e=!0),k.reset(),zot(t)&&(t=!0),k.ticker&&To.Ticker.remove(k.ticker),k.iterator=0,k.count=0,e&&k.shape.c(),t?(k.resetup(e),setTimeout(function(){k.ticker&&(k.ticker=To.Ticker.add(k.ticker))},100)):k.ticker&&(k.ticker=To.Ticker.add(k.ticker)),this},this.paused=!1,this.pause=function(e,t){if(zot(e)&&(e=!0),!(k.count>=k.maxCount)){if(e==this.paused)return this;this.paused=e,this.pauseTimeout&&this.pauseTimeout.clear(),this.paused?k.ticker&&To.Ticker.remove(k.ticker):k.ticker?k.ticker=To.Ticker.add(k.ticker):B(k.pausedCount,k.maxCount),setTimeout(function(){w.update()},20),t&&(this.pauseTimeout=To.timeout(t,function(){k.pause(!k.paused),k.pauseTimeout=null})),k.dispatchEvent(k.paused?"paused":"unpaused")}},this.outOfBounds=function(e,t){zot(e)&&(e=0),zot(t)&&(t=e);var o=k.shape.stage;if(o)return k.currentX>o.width-e||k.currentX<0+e||k.currentY>o.height-t||k.currentY<0+t},this.stop=function(){k.pause(),k.pauseEvent&&w.off("stagemousedown",k.pauseEvent),k.pauseSpaceEvent&&f.off("keydown",k.pauseSpaceEvent)},Object.defineProperty(this,"count",{get:function(){return P},set:function(e){P=e,k.stamp&&(k.changeCount=!0,setTimeout(function(){B(P,k.maxCount)}))}}),Object.defineProperty(this,"currentX",{get:function(){return T},set:function(e){zon&&zogy("Generator() - currentX is read only")}}),Object.defineProperty(this,"currentY",{get:function(){return A},set:function(e){zon&&zogy("Generator() - currentY is read only")}}),this.clone=function(){return k.cloneProps(new To.Generator(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,k.group,b))},!(k.dispose=function(e,t,o){return k.pause(),k.ticker&&To.Ticker.remove(k.ticker),k.pauseEvent&&w.off("stagemousedown",k.pauseEvent),k.pauseSpacebarEvent&&f.off("keydown",k.pauseSpacebarEvent),k._noise&&(k._noise=null),k.shape&&k.shape.dispose(),k.drawing&&k.drawing.dispose(),k.shape=k.drawing=null,o||k.zimContainer_dispose(),!0})!==z&&To.styleTransforms(this,v)},To.extend(To.Generator,To.Container,["clone","dispose"],"zimContainer",!1),To.Pen=function(p,f,m,t,z,y,b,v,w,n,r,e,i,a,o,l,s,c,u,d,h,g,C,x,k,T){if(A=zob(To.Pen,arguments,"size, color, penType, damp, spread, borderColor, borderWidth, end, paper, nib, cache, ctrlKey, cropScale, undo, undoKeys, move, onTop, deleteable, doubleClickDelete, immediateStop, lineAlpha, lineBlendMode, frame, style, group, inherit",this))return A;z_d("69.93"),this.zimContainer_constructor(),this.type="Pen",this.group=k;var A=!1===x?{}:To.getStyle(this.type,this.group,T);zot(m)&&(m=null!=A.penType?A.penType:"line");var P={size:2,color:"#333",spread:{min:5,max:20},borderColor:"#111",borderWidth:0},B={line:{size:2},kitetail:{size:{min:5,max:20},color:To.series(To.pink,To.blue,To.green),borderColor:"rgba(0,0,0,.5)",borderWidth:1},grass:{color:"#acd241",size:3,spread:{min:10,max:30}},hair:{color:["#e472c4","#50c4b7"],size:3,spread:{min:20,max:50}},city:{size:{min:30,max:70},spread:{min:50,max:200},color:["#333","#111","#555"]},barbwire:{},splatter:{size:{min:5,max:20},color:"rgba(0,0,0,.5)"}};zot(B[m])&&(m="line"),zot(p)&&(p=(null!=A.size?A:zot(B[m].size)?P:B[m]).size),zot(f)&&(f=(null!=A.color?A:zot(B[m].color)?P:B[m]).color),zot(t)&&(t=null!=A.damp?A.damp:.1),!1===t&&(t=1),zot(z)&&(z=(null!=A.spread?A:zot(B[m].spread)?P:B[m]).spread),zot(y)&&(y=(null!=A.borderColor?A:zot(B[m].borderColor)?P:B[m]).borderColor),zot(b)&&(b=(null!=A.borderWidth?A:zot(B[m].borderWidth)?P:B[m]).borderWidth),zot(v)&&(v=null!=A.end?A.end:"butt"),zot(i)&&(i=null!=A.cropScale?A.cropScale:1),zot(r)&&(r=null==A.cache||A.cache),zot(a)&&(a=null!=A.undo?A.undo:0),zot(o)&&(o=null==A.undoKeys||A.undoKeys),zot(l)&&(l=null==A.move||A.move),zot(c)&&(c=null==A.deleteable||A.deleteable),zot(u)&&(u=null==A.doubleClickDelete||A.doubleClickDelete),zot(s)&&(s=null==A.onTop||A.onTop),zot(d)&&(d=null!=A.immediateStop?A.immediateStop:"both"),zot(h)&&(h=null!=A.lineAlpha?A.lineAlpha:1),zot(g)&&(g=null!=A.lineBlendMode?A.lineBlendMode:"normal"),zot(w)&&(w=null!=A.paper?A.paper:new To.Container),zot(n)&&(n=null!=A.nib?A.nib.clone():null),zot(C)&&(C=null!=A.frame?A.frame:zdf);var S=this;this.dampX=new To.Damp(null,t),this.dampY=new To.Damp(null,t);var E=!0;this.drawing=!1,this.immediateStop=d,this.undoLevels=a,this.undoKeys=o,this.move=l,this.draggable=!0,this.lineAlpha=h,this.lineBlendMode=g;var I,M,O,j,L,_=S.shape=new To.Shape,Y=C.stage.width,D=C.stage.height;S.paperNum=0,S.sizeScale=1,S.spreadScale=1,S.sizeFactor=1,S.spreadFactor=1,S.stop=function(){},this.added(function(e){function t(e){S.drawing&&(S.nib.x=e.stageX/To.scaX,S.nib.y=e.stageY/To.scaY)}L=e,S.paper=w,Y=S.stage.width,D=S.stage.height,zot(n)||(S.zimDown?S.nib=n.addTo(S):(S.nib=n.addTo(S.parent,S.parent.getChildIndex(S)),S.nib.x=S.x,S.nib.y=S.y,S.nib.mouseEnabled=!1,S.stageDown=L.on("stagemousedown",function(e){L=e.target.stage,S.nibEvent=L.on("stagemousemove",t)}),S.stageUp=L.on("stagemouseup",function(e){L.off("stagemousemove",S.nibEvent)}))),S.zimDragCheck=!1,S.stop=function(){S.stopCheck(!0)},S.infinite=!1,S.stopCheck=function(e){if(e)S.drawing=!1,S.infinite=!1;else{if(S.infinite)return;if(S.zimDragCheck)return;if(!S.immediateStop&&S.drawing)return}S.immediate(S.x,S.y),setTimeout(function(){var e,t;S.drawing||(r?(_.cache(-(Y*i-Y)/2,-(D*i-D)/2,Y*i,D*i),e=w.bitmap=new To.Bitmap(_.cacheCanvas).reg((Y*i-Y)/2,(D*i-D)/2).addTo(w),_.graphics.clear(),_.uncache(),_.top()):e=_,0<S.undoLevels&&(t={paper:w,line:e},a.push(t),a.length>S.undoLevels&&a.shift(),S.dispatchEvent("recordUndo")),r||(_=(new To.Shape).clone().addTo(w)),S.lastSegment=e,(S.lastSelected=e).alpha=S.lineAlpha,e.blendMode=S.lineBlendMode,e.paper=w,S.dispatchEvent("stop"),S.dispatchEvent("change"))},S.immediateStop||e?0:50)};var g=0;S.dampX.immediate(S.x),S.dampY.immediate(S.y),S.lastX=S.lastMidX=S.x,S.lastY=S.lastMidY=S.y,S.ticker=To.Ticker.add(function(){if(S.parent){var e=S.dampX.convert(E?S.x:S.finishX),t=S.dampY.convert(E?S.y:S.finishY),o=S.parent.localToLocal(e,t,_),n=To.Pick.choose(p)*S.sizeScale*S.sizeFactor,r=To.Pick.choose(z)*S.spreadScale*S.spreadFactor;if(Math.abs(S.lastX-e)+Math.abs(S.lastY-t)<1)return S.drawing&&(S.drawing=!1,S.zimDown?(S.x=S.lastX=S.lastMidX=E?S.x:S.finishX,S.y=S.lastY=S.lastMidY=E?S.y:S.finishY,S.dampX.immediate(S.x),S.dampY.immediate(S.y)):(S.x=S.finishX=S.lastX=S.lastMidX=e,S.y=S.finishY=S.lastY=S.lastMidY=t),S.stopCheck()),S.lastX=S.lastMidX=e,void(S.lastY=S.lastMidY=t);S.drawing||(X=[],w.getChildIndex(_)!=w.numChildren-1&&_.top()),S.drawing=!0,S.dispatchEvent("drawing");var i,a,l,s=S.parent.localToLocal(S.lastX,S.lastY,_),c=S.parent.localToLocal(S.lastMidX,S.lastMidY,_);if("splatter"==m)for(var u=0;u<=3;u++){var d=To.rand(360)*Math.PI/180,h=r,d={x:e+h*Math.cos(d),y:t+h*Math.sin(d)},d=S.parent.localToLocal(d.x,d.y,_);_.graphics.mt(d.x,d.y).f(To.Pick.choose(f)).dc(d.x,d.y,n/2)}else"grass"==m||"hair"==m||"city"==m?("grass"!=m&&"hair"!=m||(i=S.lastX+(e-S.lastX)/2,a=S.lastY+(t-S.lastY)/2,l=S.parent.localToLocal(i,a,_),_.graphics.s(To.Pick.choose(f)).ss(n,v).mt(l.x,l.y).lt(l.x+To.rand(-r/4,r/4),"hair"==m?l.y+r:l.y-r)),("grass"==m||"hair"==m||"city"==m&&g%3==0)&&_.graphics.s(To.Pick.choose(f)).ss(n,v).mt(o.x,o.y).lt(o.x+("city"==m?0:To.rand(-r/4,r/4)),"hair"==m?l.y+r:o.y-r),g++):("kitetail"==m&&_.graphics.s(To.Pick.choose(f)).ss(n,v),a="barbwire"==m?(_.graphics.s(To.Pick.choose(f)).ss(n,v),i=S.lastX+(e-S.lastX)/2+To.rand(-r,r),S.lastY+(t-S.lastY)/2+To.rand(-r,r)):(i=S.lastX+(e-S.lastX)/2,S.lastY+(t-S.lastY)/2),l=S.parent.localToLocal(i,a,_),"line"!=m&&_.graphics.qt(s.x,s.y,l.x,l.y));0<b&&"line"!=m&&(i=S.lastX+(e-S.lastX)/2,a=S.lastY+(t-S.lastY)/2,l=S.parent.localToLocal(i,a,_),_.graphics.s(To.Pick.choose(y)).ss(To.Pick.choose(b)).mt(c.x,c.y).qt(s.x,s.y,l.x,l.y),"splatter"==m&&_.graphics.es()),"splatter"==m?_.graphics.f(To.Pick.choose(f)):"kitetail"==m||_.graphics.s(To.Pick.choose(f)).ss(n,v),"grass"!=m&&"hair"!=m&&"city"!=m&&"splatter"!=m&&_.graphics.mt(c.x,c.y).qt(s.x,s.y,l.x,l.y),S.lastX=e,S.lastY=t,l&&(S.lastMidX=l.x,S.lastMidY=l.y)}}),S.upEvent=L.on("stagemouseup",function(){0})}),S.mouseChildren=!1;var a=[],X=[];this.saveState=function(e,t,o){var n="Container"==e.type?"paper":"line",r={paper:S.paper};r[n]=e,r[n+"Transform"]={x:e.x,y:e.y,r:e.rotation,a:e.alpha,rX:e.regX,rY:e.regY,sX:e.scaleX,sY:e.scaleY,skX:e.skewX,skY:e.skewY,v:e.visible},zot(t)||zot(o)||t==o||(r.startLayer=t,r.endLayer=o),a.push(r),S.dispatchEvent("recordUndo"),a.length>S.undoLevels&&a.shift()};var R,W,F={x:0,y:0,r:0,a:1,rX:0,rY:0,sX:1,sY:1,skX:0,skY:0,v:!0};function H(e,t){for(var o,n=a.length-1;0<=n;n--)if(a[n][e]==t&&a[n][e+"Transform"]){o=a[n][e+"Transform"];break}o=o||To.copy(F),t.x=o.x,t.y=o.y,t.alpha=o.a,t.rotation=o.r,t.regX=o.rX,t.regY=o.rY,t.scaleX=o.sX,t.scaleY=o.sY,t.skewX=o.skX,t.skewY=o.skY,t.visible=o.v,"line"==e&&r&&(t.regX=(Y*i-Y)/2,t.regY=(D*i-D)/2)}this.undo=function(){var e=a.pop();if(e){if(X.push(e),e.clear){for(var t=0;t<e.clear.length;t++)e.paper.addChild(e.clear[t]);e.paper.addChild(_)}else e.line&&e.lineTransform?(zot(e.startLayer)||(_.top(),e.paper.setChildIndex(e.line,O)),H("line",e.line)):e.line?e.line.removeFrom():e.paperTransform&&H("paper",e.paper);S.lastPaper=S.paper,e.paper!=S.paper&&(S.paper=e.paper,S.dispatchEvent("paperChange")),S.dispatchEvent("change"),!OPTIMIZE&&S.stage&&S.stage.update()}},this.redo=function(){var e,t,o=X.pop();o&&(a.push(o),o.clear?(o.paper.removeAllChildren(),o.paper.addChild(_)):o.line&&o.lineTransform?(zot(o.endLayer)||(_.top(),o.paper.setChildIndex(o.line,j)),e=o.lineTransform,t=o.line):o.line?o.line.addTo(o.paper):o.paperTransform&&(e=o.paperTransform,t=o.paper),t&&(t.x=e.x,t.y=e.y,t.alpha=e.a,t.rotation=e.r,t.regX=e.rX,t.regY=e.rY,t.scaleX=e.sX,t.scaleY=e.sY,t.skewX=e.skX,t.skewY=e.skY,t.visible=e.v),S.lastPaper=S.paper,o.paper!=S.paper&&(S.paper=o.paper,S.dispatchEvent("paperChange")),S.dispatchEvent("change"),!OPTIMIZE&&S.stage&&S.stage.update())},S.ctrlKey=!1,S.shiftKey=!1,S.ctrlKeyCheck=!1,S.zimkeydownEvent=function(e){S.ctrlKey=e.ctrlKey,S.shiftKey=e.shiftKey,17==e.keyCode&&l&&!S.ctrlKeyCheck&&(S.ctrlKeyCheck=!0,w.noDrag(),w.drag({onTop:s,all:!0})),S.undoLevels<=0||S.undoKeys&&(e.ctrlKey&&(e.shiftKey&&90==e.keyCode||89==e.keyCode)?S.redo():e.ctrlKey&&90==e.keyCode&&S.undo(),C&&C.ctrlKey&&S.write&&(S.lastWrite=S.write,S.write=!1))},window.addEventListener("keydown",S.zimkeydownEvent),S.zimkeyupEvent=function(e){17==e.keyCode&&l&&S.ctrlKeyCheck&&(S.ctrlKeyCheck=!1,w.noDrag(),w.drag({onTop:s})),e.ctrlKey||(S.ctrlKey=!1),e.shiftKey||(S.shiftKey=!1),C&&!C.ctrlKey&&0==S.write&&(S.write=S.lastWrite)},window.addEventListener("keyup",S.zimkeyupEvent),Object.defineProperty(this,"paper",{get:function(){return w},set:function(e){"Container"==e.type&&(w=e,_.addTo(w,0,!1),w.shape=_,S.dampX.immediate(S.x),S.dampY.immediate(S.y),S.lastX=S.lastMidX=S.finishX=S.x,S.lastY=S.lastMidY=S.finishY=S.y,"barbwire"==m&&_.graphics.s(To.Pick.choose(f)).ss(To.Pick.choose(p)*S.sizeScale*S.sizeFactor,v),_.graphics.mt(S.x,S.y),w.parent||w.addTo(S.parent,S.parent.getChildIndex(S)),zot(w.paperNum)&&(w.paperNum=++S.paperNum,c&&w.on("mousedown",function(e){S.lastSelected=e.target,S.nibEvent&&S.stage.off("stagemousemove",S.nibEvent);var t=e.target.paper;t&&(t!=S.paper&&(S.paper=t,S.dispatchEvent("paperChange")),S.shiftKey&&(S.ctrlKey?S.clear():(e.target.visible=!1,0<S.undoLevels&&S.saveState(e.target),S.dispatchEvent("change"))))}),u&&w.on("dblclick",function(e){e.target.visible=!1,0<S.undoLevels&&S.saveState(e.target)}),l&&(w.on("mousedown",function(e){L=e.target.stage,S.shiftKey&&c||(I=e.stageX/To.scaX,M=e.stageY/To.scaY,_.top(),O=w.getChildIndex(e.target))}),w.drag({onTop:s}),w.on("pressup",function(e){c&&S.shiftKey||0!=e.target.visible&&(S.undoLevels<=0||(Math.abs(e.stageX/To.scaX-I)<1&&Math.abs(e.stageY/To.scaY-M)<1?s&&(_.top(),j=w.getChildIndex(e.target),O!=j&&S.saveState(e.target,O,j)):(S.ctrlKey?(S.saveState(w),S.dispatchEvent("paperChange")):(_.top(),j=w.getChildIndex(e.target),S.saveState(e.target,O,j)),S.dispatchEvent("change"),_.top())))}))))}}),Object.defineProperty(this,"write",{get:function(){return E},set:function(e){E&&!1===e&&(S.finishX=S.x,S.finishY=S.y),!E&&e&&(_.graphics.es(),_.graphics.ef(),S.dampX.immediate(S.x),S.dampY.immediate(S.y),S.lastX=S.lastMidX=S.x,S.lastY=S.lastMidY=S.y),E=e}}),Object.defineProperty(this,"size",{get:function(){return p},set:function(e){_.graphics.es(),_.graphics.ef(),p=e,"splatter"!=m&&_.graphics.ss(To.Pick.choose(p)*S.sizeScale*S.sizeFactor,v)}}),Object.defineProperty(this,"color",{get:function(){return f},set:function(e){f=e,_.graphics.es(),_.graphics.ef(),"splatter"!=m&&_.graphics.s(To.Pick.choose(f))}}),Object.defineProperty(this,"penType",{get:function(){return m},set:function(e){m=e,_.graphics.ef().es(),"splatter"!=m?_.graphics.s(To.Pick.choose(f)):_.graphics.s(To.Pick.choose(f)).ss(To.Pick.choose(p)*S.sizeScale*S.sizeFactor,v)}}),Object.defineProperty(this,"damp",{get:function(){return t},set:function(e){t=e,S.dampX.damp=t,S.dampY.damp=t}}),Object.defineProperty(this,"spread",{get:function(){return z},set:function(e){z=e}}),this.setColorRange=function(e,t){return W=zot(t)?(R=S.color,e):(R=zot(e)?S.color:e,t),S};var V=0;Object.defineProperty(S,"colorRange",{get:function(){return V},set:function(e){V=e,zot(R)||zot(W)||(S.color=To.colorRange(R,W,e))}}),Object.defineProperty(this,"borderColor",{get:function(){return y},set:function(e){y=e}}),Object.defineProperty(this,"borderWidth",{get:function(){return b},set:function(e){b=e}}),S.setPen=function(e){S.dampX.immediate(S.x),S.dampY.immediate(S.y),S.lastX=S.lastMidX=S.finishX=S.x,S.lastY=S.lastMidY=S.finishY=S.y,zot(e)&&(e=m),zot(B[e])&&(e="line"),S.penType=m=e;var t,o=To.merge(P,B[e]);for(t in o)S[t]!=o[t]&&(S[t]=o[t]);return S},S.immediate=function(e,t){return zot(e)||(S.x=e,S.dampX.immediate(S.x),S.lastX=S.lastMidX=S.finishX=S.x),zot(t)||(S.y=t,S.dampY.immediate(S.y),S.lastY=S.lastMidY=S.finishY=S.y),S},S.clear=function(){for(var e=[],t=0;t<w.numChildren-1;t++)e.push(w.getChildAt(t));return a.push({paper:w,clear:e}),a.length>S.undoLevels&&a.shift(),S.dispatchEvent("recordUndo"),w.removeAllChildren(),_.graphics.clear(),w.addChild(_),S.dispatchEvent("change"),S.stage&&S.stage.update(),S},this.deleteSegment=function(e){e.visible=!1,0<S.undoLevels&&S.saveState(e)},!(S.dispose=function(e,t,o){return zot(e)&&(e=!0),window.removeEventListener("keydown",S.zimkeydownEvent),window.removeEventListener("keyup",S.zimkeyupEvent),L&&S.nibEvent&&L.off("stagemousemove",S.nibEvent),L&&S.stageDown&&L.off("stagemousedown",S.stageDown),L&&S.stageUp&&L.off("stagemouseup",S.stageUp),L&&S.upEvent&&L.off("stagemouseup",S.upEvent),To.Ticker.remove(S.ticker),S.removeAllEventListeners(),n&&n.removeFrom(),e&&(S.shape&&S.shape.dispose(),S.paper&&S.paper.dispose(),r&&(S.bitmap&&S.bitmap.dispose(),S.bitmap=null),S.zimContainer_dispose(o),w=_=S.shape=null),!0})!==x&&To.styleTransforms(this,A)},To.extend(To.Pen,To.Container,"dispose","zimContainer",!1),To.SoundWave=function(e,i,a,t,o,n,l,r,s,c){var u;if(u=zob(To.SoundWave,arguments,"num, input, include, smoothing, min, max, operation, baseline, magnify, reduce",this))return u;z_d("69.95"),this.type="SoundWave",zot(e)&&(e=120),zot(i)&&(i="mic"),zot(a)&&(a=.1171875),zot(t)&&(t=.85),zot(o)&&(o="mic"==i?-80:(i.oscillator,-100)),zot(n)&&(n="mic"==i?-40:(i.oscillator,-10)),zot(l)&&(l=function(e,t){return e*(+t/Math.pow(To.SoundWave.bufferLength,.95)+.5)}),zot(r)&&(r="mic"==i?0:(i.oscillator,30)),zot(s)&&(s="mic"==i?1:i.oscillator?5:10),zot(c)&&(c=0),To.SoundWave.bufferLength=1024;var d,h=e,g=this;g.baseline=r,g.magnify=s,g.reduce=c,g.input=i,d="Tone"==i.type||"SynthSound"==i.type?i.audioContext:new(window.AudioContext||window.webkitAudioContext);var p,f,m=g.analyser=d.createAnalyser();function z(e){var r;f&&f.disconnect(m),(f=e).connect(m),"mic"!=i&&m.connect(d.destination),m.fftSize=2*To.SoundWave.bufferLength,(p=Math.floor(a*To.SoundWave.bufferLength/h))<1?zog("ZIM SoundWave: include param is too small or num param is too big"):(e=m.frequencyBinCount,r=new Uint8Array(e),g.calculate=function(){m.getByteFrequencyData(r);var e=r.map(l);if(1==p)return e;for(var t=[],o=0,n=0;n<=a*To.SoundWave.bufferLength;n++)o+=e[n],0!=n&&n%p==0&&(t.push(Math.max(0,(o/p-g.baseline)*g.magnify-g.reduce)),o=0);return"mic"!=i&&(t[0]*=.75,t[1]*=.85,t[2]*=.9,t[t.length-2]*=.8,t[t.length-1]*=.75),t[t.length-1]*=1.3,t[t.length-2]*=1.2,t[t.length-3]*=1.1,t},setTimeout(function(){g.dispatchEvent("ready")},50))}m.minDecibels=o,m.maxDecibels=n,m.smoothingTimeConstant=t,Object.defineProperty(this,"smoothing",{get:function(){return m.smoothingTimeConstant},set:function(e){m.smoothingTimeConstant=e}}),Object.defineProperty(this,"num",{get:function(){return h},set:function(e){h=e,(p=Math.floor(a*To.SoundWave.bufferLength/h))<1&&zog("ZIM SoundWave: num is too big")}}),this.setInput=function(e){"mic"==(g.input=e)?(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(e){z(g.source=d.createMediaStreamSource(e))},function(e){zog("ZIM SoundWave: Error occured: "+e)}):zog("ZIM SoundWave: Sorry, mic not supported")):"Tone"==e.type?z(e.compressor):"SynthSound"==e.type?z(e.gain):e.type&&"sound"==e.type?zog("ZIM SoundWave: pass in the result of a zim.asset('somesound').play() for the input"):z((e=e.playbackResource||e,d.createMediaElementSource(e)))},this.setInput(i),this.dispose=function(e){return e&&d&&d.close(),m&&m.disconnect(),!0}},To.extend(To.SoundWave,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),To.Synth=function(e,X){z_d("69.955"),this.type="Synth",zot(e)&&(e=.3),zot(X)&&(X=220),this.volume=e,this.frequency=X;var K,J=this;this.play=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L,_,Y,D,X,R,W,F,H,V,N,G,q){var U=Array.prototype.slice.call(arguments);if(K||!window.AudioContext&&!window.webkitAudioContext||((K=new(window.AudioContext||window.webkitAudioContext)).z=K.createBufferSource,K.createBufferSource=function(e){return null==e&&(e=K.z()),e.start=e.start||function(e){K.noteOn(e)},e}),K){for(e=null!=e?zik(e):.3,t=null!=t?zik(t):.05,o=null!=o?zik(o):220,n=null!=n?zik(n):0,r=null!=r?zik(r):0,i=null!=i?zik(i):.1,a=null!=a?zik(a):0,l=null!=l?zik(l):1,s=null!=s?zik(s):0,c=null!=c?zik(c):0,u=null!=u?zik(u):0,d=null!=d?zik(d):0,h=null!=h?zik(h):0,g=null!=g?zik(g):0,p=null!=p?zik(p):0,f=null!=f?zik(f):0,m=null!=m?zik(m):0,b=null!=b?zik(b):0,z=null!=z?zik(z):1,y=null!=y?zik(y):0,A=null!=A?zik(A):44100,null==P&&(P=99+n*A),null==B&&(B=r*A),null==S&&(S=i*A),null==E&&(E=y*A),null==I&&(I=m*A),null==M&&(M=2*Math.PI),null==O&&(O=function(e){return 0<e?1:-1}),null==j&&(j=P+E+B+S+I),null==L&&(L=s*=500*M/Math.pow(A,2)),null==_&&(_=o*=(1+2*t*Math.random()-t)*M/A),null==Y&&(Y=O(p)*M/4),null==D&&(D=0),null==X&&(X=0),null==R&&(R=0),null==W&&(W=0),null==F&&(F=0),null==H&&(H=0),null==V&&(V=1),null==N&&(N=[]),null==G&&(G=K.createBufferSource()),null==q&&(q=K.createBuffer(1,j,A)),G.connect(K.destination);R<Math.floor(j);N[R++]=H)++F>100*f&&(F=0,H=D*o*Math.sin(X*p*M/A-Y),H=a?1<a?2<a?3<a?Math.sin(Math.pow(H%M,3)):Math.max(Math.min(Math.tan(H),1),-1):1-(2*H/M%2+2)%2:1-4*Math.abs(Math.round(H/M)-H/M):Math.sin(H),H=(h?1-b+b*Math.sin(M*R/h):1)*O(H)*Math.pow(Math.abs(H),l)*e*J.volume*(R<P?R/P:R<P+E?1-(R-P)/E*(1-z):R<P+E+B?z:R<j-I?(j-R-I)/S*z:0),H=I?H/2+(R<I?0:(R<j-I?1:(R-j)/I)*N[R-I|0]/2):H),D+=1-g+1e9*(Math.sin(R)+1)%2*g,X+=1-g+1e9*(Math.pow(Math.sin(R),2)+1)%2*g,o+=s+=500*c*M/Math.pow(A,3),V&&++V>d*A&&(o+=u*M/A,_+=u*M/A,V=0),h&&++W>h*A&&(o=_,s=L,W=1,V=V||1);q.getChannelData(0).set(N),G.buffer=q;var Q,Z=new createjs.EventDispatcher;return Z.type="SynthSound",Z.audioContext=K,Z.gain=K.createGain(),G.connect(Z.gain),Z.gain.connect(K.destination),G.start(),Z.duration=N.length/A,Z.playing=!0,Z.stop=function(){clearTimeout(Z.completeID),clearInterval(Z.repeatID),Z.gain.gain.setTargetAtTime(0,K.currentTime,.1),Z.playing=!1,setTimeout(function(){K.close()},100)},Z.repeat=Z.loop=function(e,t){return!(Q=0)===e&&(e=null),zot(t)&&(t=0),clearTimeout(Z.completeID),Z.repeatID=To.interval(function(){return Z.duration+zik(t)},function(){Q++,e&&e<=Q?(Z.dispatchEvent("complete"),Z.repeatID.clear(),Z.playing=!1):(Z.dispatchEvent("loop"),J.play.apply(J,U))}),Z},Z.play=function(){return J.play.apply(J,U),Z.playing=!0,Z},Z.completeID=setTimeout(function(){Z.dispatchEvent("complete")},1e3*(N.length/A+.1)),Z}},this.Tone=function(o,t,n,e,r,i,a,l,s,c,u,d,h,g,p,f,m,z,y){if(w=zob(J.Tone,arguments,"volume, note, shape, duration, attack, release, wahAmount, wahRate, wahShape, wahThroat, wahNote, vibratoAmount, vibratoRate, vibratoShape, tremeloAmount, tremeloRate, tremeloShape, startTime, pauseOnBlur",this))return w;this.type="Tone";var b,v=this;zot(o)&&(o=J.volume),zot(t)&&(t=J.frequency),zot(n)&&(n=To.SINE),zot(r)&&(r=.02),zot(i)&&(i=.05),zot(z)&&(z=0),window.AudioContext||window.webkitAudioContext?b=this.audioContext=new(window.AudioContext||window.webkitAudioContext):zon&&zogy("Synth tone() needs AudioContext"),o=zik(o),t=zik(t),n=zik(n),e=zik(e),r=zik(r),i=zik(i),a=zik(a),l=zik(l),s=zik(s),c=zik(c),u=zik(u),d=zik(d),h=zik(h),g=zik(g),p=zik(p),f=zik(f),m=zik(m),z=zik(z);var w=Ao(e);(J.duration=e)&&(e*="s"==w?1:.001),z&&(Ao(z),z*="s"==w?1:.001),J.attack=r,J.release=i,J.rampDuration=.02,J.hush=.1;var C=this.note=this.oscillator=b.createOscillator();C.frequency.value=To.Synth.note(t),To.Synth.setShape(C,n);var x=this.filter=b.createBiquadFilter();x.type="bandpass",x.frequency.value=C.frequency.value,x.Q.value=0;var k=this.gain=C.gain=b.createGain();k.type="gain",k.gain.setValueAtTime(0,b.currentTime);var T,A,w=this.compressor=b.createDynamicsCompressor();w.threshold.setValueAtTime(-50,b.currentTime),w.knee.setValueAtTime(40,b.currentTime),w.ratio.setValueAtTime(12,b.currentTime),w.attack.setValueAtTime(0,b.currentTime),w.release.setValueAtTime(.25,b.currentTime),C.connect(x),x.connect(k),k.connect(w),w.connect(b.destination),zot(T=z)&&(T=b.currentTime),zot(A)&&(A=J.attack),C.start(T),T=zdf&&(new Date).getTime()-zdf.startTime<200?.1:J.attack,k.gain.setValueAtTime(0,b.currentTime+.1),k.gain.linearRampToValueAtTime(o*J.hush,b.currentTime+.1+T),this.stop=function(e){zot(e)&&(e=J.release),k&&j(k.gain,0,!0,e),M&&j(M.gain,0,!0,e),E&&j(E.gain,0,!0,e),setTimeout(function(){v.dispatchEvent("complete")},1e3*(.6+e+J.rampDuration)),setTimeout(function(){b&&!b.iamClosed&&(b.iamClosed=!0,b.close())},1e3*(e+1)),setTimeout(function(){P&&v.removeWah()},1e3*(e+1))},e&&this.stop(z+e-.1);var P,B,S,E,I,M,O=this.notes=[C];function j(e,t,o,n){zot(t)&&(t=0),zot(n)&&(n=J.rampDuration),o?(e.cancelScheduledValues(b.currentTime),e.linearRampToValueAtTime(e.value=e.value,b.currentTime+.02),e.linearRampToValueAtTime(t,b.currentTime+.05+n)):(e.cancelScheduledValues(b.currentTime),e.setTargetAtTime(t,b.currentTime,n))}function L(){zot(a)&&(a=1e3),zot(l)&&(l=1),zot(s)&&(s="sine"),zot(c)&&(c=5),u=zot(u)?v.oscillator.frequency.value:To.Synth.note(u),zot(B)&&(B=200),v.filter.Q.value=c,(P=v.wah=J.oscillator(l,a/2,s,u+a/2+B)).ticker=To.Ticker.add(function(){v.filter.frequency.value=v.wah.amplitude})}function _(){zot(h)&&(h=5),zot(g)&&(g="sine"),zot(d)&&(d=10),S=v.vibrato=b.createOscillator(),(E=v.vibratoGain=b.createGain()).gain.value=0,S.frequency.value=h,To.Synth.setShape(S,g),S.connect(E),E.connect(C.frequency),S.start(0),E.gain.setValueAtTime(0,b.currentTime+.1),E.gain.linearRampToValueAtTime(d,b.currentTime+.1+J.attack)}function Y(){zot(f)&&(f=5),zot(m)&&(m="sine"),I=v.tremelo=b.createOscillator(),(M=v.tremeloGain=b.createGain()).gain.value=0,I.frequency.value=f,To.Synth.setShape(I,m),I.connect(M),M.connect(k.gain),I.start(0);var e=zdf&&(new Date).getTime()-zdf.startTime<200?.1:J.attack;M.gain.setValueAtTime(0,b.currentTime+.1),M.gain.linearRampToValueAtTime(o*J.hush,b.currentTime+.1+e)}this.addNote=function(e,t,o,n,r,i){zot(n)&&(n=!0),zot(r)&&(r=!1),zot(e)&&(e=.1),zot(i)&&(i=0);var a={type:"Note"};a._volume=e,a._note=To.Synth.note(t),O.push(a);t=a.oscillator=b.createOscillator();t.frequency.value=a._note,t.type=To.Synth.setShape(t,o);o=a.gain=b.createGain();return j(o.gain,a._volume,!0),o.connect(n?x:k),t.connect(o),E&&r&&E.connect(t.frequency),t.start(b.currentTime+i),Object.defineProperty(a,"volume",{get:function(){return a._volume},set:function(e){zot(e)||(a._volume=zik(e),j(a.gain.gain,a._volume,!0))}}),Object.defineProperty(a,"note",{get:function(){return a._note},set:function(e){zot(e)||(a._note=zik(e),j(a.oscillator.frequency,To.Synth.note(a._note)))}}),a},this.removeNote=function(e){var t=O.indexOf(e);return 0<=t&&O.splice(t,1),e.oscillator.disconnect(),e=null,this},this.ramp=function(e,t){j(k.gain,e*J.hush,!0,t)},this.animate=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),To.animate.apply(null,arguments),this},this.wiggle=function(){return arguments[0].props?arguments[0].target=this:Array.prototype.unshift.call(arguments,this),To.wiggle.apply(null,arguments),this},To.addWires(this),!a&&!l&&zot(s)&&zot(c)||L(),v.removeWah=function(){To.Ticker.remove(P.ticker),P.dispose(),P=v.wah=null,v.filter.Q.value=0},!d&&!h&&zot(g)||_(),v.removeVibrato=function(){j(E.gain,0,!0),setTimeout(function(){E.disconnect(),S.disconnect(),S.stop(),S=null},1e3*(J.rampDuration+1))},!p&&!f&&zot(m)||Y(),v.removeTremelo=function(){j(M.gain,0,!0),setTimeout(function(){M.disconnect(),I.disconnect(),I.stop(),I=null},1e3*(J.rampDuration+1))},Object.defineProperty(this,"volume",{get:function(){return o},set:function(e){var t;zot(e)||(I?(t=k.gain.value?M.gain.value/k.gain.value:o?p/o:0,o=zik(e),o=To.constrain(o,.001),j(M.gain,o*t*J.hush,!0)):o=zik(e),j(k.gain,o*J.hush,!1,J.rampDuration))}}),this.paused=!1;var D=o;this.pause=function(e){zot(e)&&(e=!0),e?(D=v.volume,v.volume=0):v.volume=D},y&&(zot(To.blurCheck)&&To.setBlurDetect(),To.pauseOnBlur.push(this)),Object.defineProperty(this,"frequency",{get:function(){return X},set:function(e){zot(e)||(X=zik(e),j(C.frequency,e))}}),Object.defineProperty(this,"note",{get:function(){return t},set:function(e){zot(e)||(t=zik(e),C.frequency.value=To.Synth.note(t))}}),Object.defineProperty(this,"shape",{get:function(){return n},set:function(e){n=zik(e),To.Synth.setShape(C,n)}}),Object.defineProperty(this,"currentTime",{get:function(){return b.currentTime},set:function(e){zon&&zogy("Synth tone() - currentTime is read only")}}),this.wahAmountMin=0,this.wahAmountMax=5e3,Object.defineProperty(this,"wahAmount",{get:function(){return a},set:function(e){zot(e)||(a=zik(e),a=To.constrain(a,J.wahAmountMin,J.wahAmountMax),zot(P)?L():P.gain=a/2)}}),this.wahRateMin=0,this.wahRateMax=30,Object.defineProperty(this,"wahRate",{get:function(){return l},set:function(e){zot(e)||(l=zik(e),l=To.constrain(l,J.wahRateMin,J.wahRateMax),zot(P)?L():P.frequency=l)}}),this.wahThroatMin=0,this.wahThroatMax=100;k.gain.value;Object.defineProperty(this,"wahThroat",{get:function(){return c},set:function(e){c=zik(e),c=To.constrain(c,J.wahThroatMin,J.wahThroatMax),zot(P)?L():x.Q.value=c}}),Object.defineProperty(this,"wahNote",{get:function(){return u},set:function(e){zot(e)||(u=zik(e),zot(P)?L():P.offset=u+a/2+B)}}),Object.defineProperty(this,"wahAdjust",{get:function(){return B},set:function(e){zot(e)||(B=zik(e),zot(P)?L():P.offset=u+a/2+B)}}),Object.defineProperty(this,"wahShape",{get:function(){return s},set:function(e){s=zik(e),zot(P)?L():P.shape=s}}),Object.defineProperty(this,"tremeloAmount",{get:function(){return p},set:function(e){zot(e)||(p=zik(e),zot(I)?Y():M.gain.setValueAtTime(p,b.currentTime))}}),Object.defineProperty(this,"tremeloRate",{get:function(){return f},set:function(e){zot(e)||(f=zik(e),zot(P)?Y():I.frequency.value=f)}}),Object.defineProperty(this,"tremeloShape",{get:function(){return m},set:function(e){m=zik(e),zot(I)?Y():To.Synth.setShape(I,m)}}),Object.defineProperty(this,"vibratoAmount",{get:function(){return d},set:function(e){zot(e)||(d=zik(e),zot(S)?_():E.gain.setValueAtTime(d,b.currentTime))}}),Object.defineProperty(this,"vibratoRate",{get:function(){return h},set:function(e){zot(e)||(h=zik(e),zot(S)?_():S.frequency.value=h)}}),Object.defineProperty(this,"vibratoShape",{get:function(){return g},set:function(e){g=zik(e),zot(S)?_():To.Synth.setShape(S,g)}})},To.extend(this.Tone,createjs.EventDispatcher),this.tone=function(e,t,o,n,r,i,a,l,s,c,u,d,h,g,p,f,m,z){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(J.Tone,arguments))},this.Oscillator=function(e,t,o,n){var r;if(r=zob(J.Oscillator,arguments,"frequency, gain, shape, offset",this))return r;this.type="Oscillator",zot(e)&&(e=1),zot(t)&&(t=10),zot(o)&&(o="sine"),zot(n)&&(n=0),this.frequency=zik(e),this.gain=zik(t),this.shape=zik(o),"saw"==this.shape&&(this.shape="sawtooth"),this.offset=zik(n),this.paused=!1;var i=this,a=0,l=To.Ticker.framerate;this.ticker=To.Ticker.add(function(){var e;i.paused||(e=0,"sine"==i.shape?e=Math.sin(i.frequency*(2*Math.PI*(a/l))):"square"==i.shape?e=(e=Math.sin(i.frequency*(2*Math.PI*(a/l))))<=0?0:1:"triangle"==i.shape?e=2/Math.PI*Math.asin(Math.sin(i.frequency*Math.PI*2*a/l)):"sawtooth"==i.shape||"saw"==i.shape?e=-2/Math.PI*Math.atan(1/Math.tan(i.frequency*Math.PI*a/l)):"zap"==i.shape&&(e=2/Math.PI*Math.atan(1/Math.tan(i.frequency*Math.PI*a/l))),i.amplitude=e*i.gain+i.offset,a++)}),this.pause=function(e){i.paused=e},this.dispose=function(){To.Ticker.remove(this.ticker)}},this.oscillator=function(e,t,o,n){return Array.prototype.unshift.call(arguments,null),new(Function.prototype.bind.apply(J.Oscillator,arguments))}},To.Synth.notes=["C",,"D",,"E","F",,"G",,"A",,"B"],To.Synth.major=["C","D","E","F","G","A","B","C4"],To.Synth.minor=["C","D","Eb","F","G","Ab","B","C4"],To.Synth.shapes=["sine","triangle","sawtooth","tan","noise","square"],To.Synth.setShape=function(e,t){if(!zot(e)){if(zot(t)&&(t="sine"),"saw"==t&&(t="sawtooth"),"number"==typeof t)t=(t=To.Synth.shapes[t])||"sine";else if(t.real&&t.imag)var o=e.context.createPeriodicWave(new Float32Array(t.real),new Float32Array(t.imag));else if(t.constructor==PeriodicWave)o=t;else if("string"==typeof t)if(To.Synth.shapes.indexOf(t)<0&&(t="sine"),"noise"==t){for(var n=new Float32Array(4096),r=new Float32Array(4096),i=1;i<4096;i+=2)r[i]=To.shuffle([0,.5,1])[0];o=e.context.createPeriodicWave(n,r)}else"tan"==t&&(t="sawtooth");else t="sine";o?(e.setPeriodicWave(o),t="custom"):e.type=t}},To.Synth.getNote=function(e,t){return zot(t)&&(t=0),e*Math.pow(2,t/12)},To.Synth.note=function(e){if("string"!=typeof e)return"number"!=typeof e&&(e=220),e;var t=e.substr(0,1).toUpperCase(),o=!0===(o=To.loop(e,function(e){if(!isNaN(e))return Number(e)}))||isNaN(o)?3:o,n=To.Synth.notes.indexOf(t);n<0&&(n=9);t=e.match(/b/g),e=e.match(/#/g),t=t?t.length:0,t=12*(o-3)+n+(e=e?e.length:0)-t;return To.Synth.getNote(To.Synth.getNote(220,-9),t)},To.Synth.wave=function(e,t){if(window.AudioContext||window.webkitAudioContext){var o=new(window.AudioContext||window.webkitAudioContext);if(e.real)t=e.imag,e=e.real;else if(zot(t)&&zon)return void zogy("Synth.wave() - pass in asset('wave.json') or real and imag properties");return e.constructor!==Float32Array&&(e=new Float32Array(e)),t.constructor!==Float32Array&&(t=new Float32Array(t)),o.createPeriodicWave(e,t)}},To.Synth.drawWave=function(e,t,o,n,r,i,a,l,s){if(h=zob(To.Synth.drawWave,arguments,"shape, color, thickness, backgroundColor, borderColor, borderWidth, corner, padding, paddingVertical"))return h;e=zik(e),zot(o)&&(o=2),zot(t)&&(t=To.darker),zot(l)&&(l=8),zot(s)&&(s=l);var c=l,u=s,d=new To.Container(45,45);d.mouseChildren=!1,zot(n)||(d.backing=new To.Rectangle(45,45,n,r,i,a).addTo(d)),d.shape=new To.Shape(45,45).addTo(d).s(t).ss(o);var h=45-2*c;return"square"==e?d.shape.mt(c,22.5).lt(c,u+3).lt(22.5,u+3).lt(22.5,45-u-3).lt(45-c,45-u-3).lt(45-c,22.5):"triangle"==e?d.shape.mt(c,22.5).lt(c+h/4,u+3).lt(c+3*h/4,45-u-3).lt(45-c,22.5):"sawtooth"==e||"saw"==e?d.shape.mt(c,22.5).lt(22.5,u+2).lt(22.5,45-u-2).lt(45-c,22.5):"zap"==e?d.shape.mt(c,22.5).lt(22.5,45-u-2).lt(22.5,u+2).lt(45-c,22.5):d.shape.mt(c,22.5).bt(22.5,-15,22.5,60,45-c,22.5),d.type=e,d},To.VR=function(o,n,r,i,a,e,l,t,s,c,u,d){var h,g,p,f,m,z,y,b,v,w,C,x,k,T,A,P,B,S,E,I,M,O,j,L,_,Y;if(A=zob(To.VR,arguments,"content, angle, distance, parallax, parallaxAngle, damp, parallaxDamp, startAngle, negativeParallax, boundaryMarkers, swiper, holder",this))return A;function D(){z.addTo(f,null,!1).setMask(f.getChildAt(0)).pos({y:(d.height-z.height)/2,reg:!0}),y.addTo(m,null,!1).setMask(m.getChildAt(0)).pos({y:(d.height-z.height)/2,reg:!0})}function X(e,o,n,r){((e.vrMatch=o).vrMatch=e).cacheCanvas&&o.cache(),e.dep&&!zot(e.depth)&&(v.push(e),w.push(o),zot(n)||n.push(e),zot(r)||r.push(o),o.dep(e.depth)),To.loop(e,function(e,t){X(e,o.getChildAt(t),n,r)})}function R(e,t){To.loop(e,function(e){e.vrChannel=t,e.vrStartX=e.x,0!=n&&0!=r&&(e.vrAngle=n,e.vrDistance=r),0!=i&&0!=r&&(e.vrParallax=i/100,(e.vrParallaxDistance=0)!=n&&(e.vrParallaxDamp=new To.Damp(0,l))),e.dep(e.depth)})}function W(e){h.currentAngle=e;var t,e=-h.currentAngle*r/n;h.contentLeft.x=e,h.contentRight.x=e,Math.round(h.currentAngle)<=-n/2&&!x?((t=new createjs.Event("boundaryout")).boundary="left",x=!0,h.dispatchEvent(t)):Math.round(h.currentAngle)>=n/2&&!k?((t=new createjs.Event("boundaryout")).boundary="right",k=!0,h.dispatchEvent(t)):Math.round(h.currentAngle)>-n/2&&Math.round(h.currentAngle)<n/2&&(t=new createjs.Event("boundaryin"),x?(t.boundary="left",h.dispatchEvent(t),x=!1):k&&(t.boundary="right",h.dispatchEvent(t),k=!1))}function F(e){var t=e.parent.localToLocal(e.vrStartX,0,d),t=e.vrParallaxDamp.convert("left"==e.vrChannel?h.contentLeft.x+t.x-g/4:h.contentRight.x+t.x-g/2-g/4);e.depth<=0&&!s&&(t=0),e.vrParallaxDistance=Math.max(-r/n*a/2,Math.min(r/n*a/2,t)),e.dep(e.depth)}function H(e,t){e.vrParallaxDistance=e.depth<=0&&!s?0:t,e.dep(e.depth)}function V(t){0!=n&&0!=r?(To.loop(v,F),To.loop(w,F)):(To.loop(v,function(e){H(e,t)}),To.loop(w,function(e){H(e,t)}))}function N(){var e=Y.convert(j.currentValue);z.regX=z.startRegX+e,y.regX=y.startRegX-e}z_d("69.98"),this.type="VR",zdf?(E=zdf,!zot(d)&&d.getBounds&&d.getBounds().width||(d=E.stage),zot(n)&&(n=0),zot(r)&&(r=100),zot(e)&&(e=.5),zot(i)&&(i=0),zot(a)&&(a=60),zot(l)&&(l=.1),zot(t)&&(t=0),zot(s)&&(s=!1),zot(c)&&(c=!0),zot(u)&&(u=!0),this.angle=n,this.currentAngle=t,To.mobile()&&(u=!1),h=this,g=d.width,p=d.height,h.zimContainer_constructor(),f=h.left=new To.Container(g/2,p,null,null,!1),I=new To.Rectangle(g/2,p,"rgba(0,0,0,.01)",null,null,null,null,null,!1),f.addChild(I),m=h.right=f.clone(),h.addChild(f,m),m.x=g/2,z=h.contentLeft=h.content=o,y=h.contentRight=o.clone(),0!=t?b=setTimeout(D,100):D(),v=[],w=[],X(z,y),R(v,"left"),R(w,"right"),0!=n&&0!=r&&((C=new To.Damp(180+t,e)).immediate(180+t),k=x=!1,E.on("deviceorientation",function(e){W(C.convert((180<e.rotation.z?-180:180)+e.rotation.z+t)-180)}),To.Ticker.always()),0!=i&&0!=r&&((T=new To.ProportionDamp(180-a/2,180+a/2,-a/2,a/2,l)).immediate(180),E.on("deviceorientation",function(e){var t=0;0==n&&0!=i&&0!=r&&(t=T.convert((180<e.rotation.z?-180:180)+e.rotation.z)),V(t)}),To.Ticker.always()),!u||0==r||0==n&&0==i||h.added(function(){var e={swipeAngle:0};h.swiper=new To.Swiper({swipeOn:h,target:e,property:"swipeAngle",sensitivity:.2,damp:.05,factor:-1,min:-330,max:330});To.Ticker.add(function(){0!=n&&0!=r&&W(e.swipeAngle),0!=i&&0!=r&&V(T.convert(e.swipeAngle+180))})}),A=localStorage&&localStorage.zimEyeAdjust?Number(localStorage.zimEyeAdjust):0,P=A,B=!1,z.startRegX=z.regX,y.startRegX=y.regX,I=(S=this.adjuster=new To.Container(800,300,null,null,!1)).backing=new To.Rectangle(S.width,S.height,To.lighter,null,null,null,null,null,!1).center(S).alp(1).sha("rgba(0,0,0,.2)",0,0,30),S.strip=new To.Rectangle(S.width,S.height/3,To.white,null,null,null,null,null,!1).center(S).alp(1),S.label=new To.Label({text:"slide to adjust center of left and right",size:28,color:To.dark,align:"center",valign:"center"}).center(S).pos({y:50,reg:!0}),E=S.close=new To.Rectangle(50,50,To.light,null,null,null,null,null,!1).addTo(S).mov(S.width-70,26),(I=new To.Shape(-40,-40,80,80,null,!1)).graphics.f(To.dark).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg"),I.center(E).sca(.3),E.cursor="pointer",E.on((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){h.hideAdjuster(),j.currentValue=(j.max-j.min)/2+P,h.dispatchEvent("closed")}),(M=new To.Circle(30,To.dark,null,null,null,null,null,null,!1).center(S).pos({x:S.width/4,reg:!0})).shape.alpha=.2,new To.Circle(12,To.dark,null,null,null,null,null,!1).center(M),(O=new To.Circle(30,To.dark,null,null,null,null,null,!1).center(S).pos({x:S.width/4*3,reg:!0})).shape.alpha=.2,new To.Circle(12,To.dark,null,null,null,null,null,null,!1).center(O),(j=S.slider=new To.Slider({min:0,max:30,step:1,useTicks:!0,style:!1}).centerReg(S).pos({y:S.height-40,reg:!0})).currentValue=(j.max-j.min)/2+A,L=new To.Proportion(j.min,j.max,M.x-S.width/4,M.x+S.width/4,-1),_=new To.Proportion(j.min,j.max,O.x-S.width/4,O.x+S.width/4),j.on("change",function(){M.x=L.convert(j.currentValue),O.x=_.convert(j.currentValue)}),new To.Label("closer",24,null,To.silver).centerReg(S).pos({x:j.x-220,y:j.y,reg:!0}),new To.Label("farther",24,null,To.silver).centerReg(S).pos({x:j.x+220,y:j.y,reg:!0}),(h.ok=new To.Button({label:"OK",width:90,height:60,corner:0,backgroundColor:To.blue,rollBackgroundColor:To.green,shadowColor:-1,style:!1}).centerReg(S).sca(.8).pos({x:S.width-58,y:j.y,reg:!0})).on((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){localStorage&&(localStorage.zimEyeAdjust=j.currentValue-(j.max-j.min)/2),N(),h.hideAdjuster(),h.dispatchEvent("saved"),h.dispatchEvent("closed")}),(h.zero=new To.Button({label:">|<",width:90,height:60,corner:0,backgroundColor:To.yellow,rollBackgroundColor:To.green,shadowColor:-1,style:!1}).centerReg(S).sca(.8).pos({x:58,y:j.y,reg:!0})).on((zns?"mousedown"==To.ACTIONEVENT:"mousedown"==ACTIONEVENT)?"mousedown":"click",function(){j.currentValue=(j.max-j.min)/2,M.x=L.convert(j.currentValue),O.x=_.convert(j.currentValue)}),Y=new To.Proportion(0,30,-d.width/4,d.width/4),N(),this.showAdjuster=function(){if(B)return h;B=!0,M.x=L.convert(j.currentValue),O.x=_.convert(j.currentValue),P=j.currentValue-(j.max-j.min)/2,S.scaleTo(d,100,100).center(this),d.stage.update()},this.hideAdjuster=function(){if(!B)return h;B=!1,S.removeFrom(this),d.stage.update()},this.position=function(e,t,o){function n(e){e.vrStartX=t,e.vrParallaxDamp&&e.vrParallaxDamp.immediate(t),e.mov(t,o)}return n(e),n(e.vrMatch),e},this.register=function(e){if(!e.parent||!e.parent.vrMatch)return zon&&zog("ZIM VR() - please only register objects already inside content container"),e;var t=e.clone().addTo(e.parent.vrMatch),o=[],n=[];return X(e,t,o,n),R(o,"left"),R(n,"right"),e},0!=n&&0!=r&&c&&(h.boundaryRight=new To.Container({style:!1}),new To.Circle(24,To.light,null,null,null,null,null,null,!1).addTo(h.boundaryRight).dep(-2),new To.Triangle(16,16,16,To.yellow,To.grey,null,null,null,-3,null,null,!1).rot(-90).center(h.boundaryRight).dep(-6),h.boundaryRight.center(o).mov(r/2+24),h.boundaryLeft=new To.Container({style:!1}),new To.Circle(24,To.light,null,null,null,null,null,null,!1).addTo(h.boundaryLeft).dep(-2),new To.Triangle(16,16,16,To.yellow,To.grey,null,null,null,-3,null,null,!1).rot(90).center(h.boundaryLeft).dep(-6),h.boundaryLeft.center(o).mov(-r/2-24),h.register(h.boundaryRight),h.register(h.boundaryLeft)),this.remove=function(e){return To.loop(arguments,function(e,t){o.contains(t)&&(!function t(e){var o=v.indexOf(e);0<=v.indexOf(e)&&(v.splice(o,1),w.splice(o,1)),To.loop(e,function(e){t(e)})}(t),t.parent.removeChild(t),t.vrMatch.parent.removeChild(t.vrMatch))}),h},this.resize=function(){g=d.width,p=d.height,f.getChildAt(0).widthOnly=m.getChildAt(0).widthOnly=g/2,f.getChildAt(0).heightOnly=m.getChildAt(0).heightOnly=p,m.x=g/2,f.setBounds(0,0,g/2,p),m.setBounds(0,0,g/2,p),0!=t?(clearTimeout(b),b=setTimeout(D,100)):D(),S.scaleTo(d,100,100).center(this,null,!1)}):zon&&zogy("VR() - please use ZIM Frame")},To.extend(To.VR,To.Container,"clone","zimContainer",!1),To.scaX=1,To.scaY=1,To.Frame=function(h,g,o,r,n,i,a,l,e,t,p,f,m,z,s,c,u,y,d,b,v,w,C,x,k,T,A,P,B){if(K=zob(To.Frame,arguments,"scaling, width, height, color, outerColor, assets, path, progress, rollover, touch, scrollTop, align, valign, canvasID, rollPerSecond, delay, canvasCheck, gpu, gpuObj, nextFrame, nextStage, allowDefault, loadFailObj, sensors, retina, mouseMoveOutside, captureMouse, shim, maxConnections",this))return K;z_d("83"),zon&&zogg("ZIM FRAME"),this.cjsEventDispatcher_constructor(),this.type="Frame",this.startTime=(new Date).getTime();var S,E,Q,I,M,O,j,L,Z,_,Y,D,X,R,W,F,H,V,N,G,q,U,K,J,$,ee,te,oe,ne,re=this;function ie(e){re.leftMouseDown=void 0===e.buttons?1===e.which:1===e.buttons,I&&!re.leftMouseDown&&re.dispatchEvent("mouseupplus"),I=re.leftMouseDown}function ae(){re.scale=P.stage.scaleX;var e=O.getBoundingClientRect();re.x=e.x+To.scrollX(),re.y=e.y+To.scrollY(),To.scaX=createjs.stageTransformable?1:P.stage.scaleX,To.scaY=createjs.stageTransformable?1:P.stage.scaleY}function le(){if(P){var e=Z.getBounds();return _=e.width,Y=e.height,void re.dispatchEvent("resize")}J=Date.now()+c*("s"==E?1e3:1),U?q||(q=!0,G=To.Ticker.update,To.tickerFrame||(To.Ticker.update=!1,To.tickerFrame=re),ge(),fe(),clearInterval(re.frameTime),re.frameTime=setInterval(function(){return Date.now()>J?(clearInterval(re.frameTime),q=!1,void(re==To.tickerFrame&&(To.Ticker.update=G))):(ge(),void fe())},50)):(ge(),fe(),clearInterval(re.frameTime),re.frameTime=setInterval(function(){Date.now()>J?clearInterval(re.frameTime):(ge(),fe())},c*("s"==E?1e3:1)<50?c*("s"==E?1e3:1)+5:50))}function se(){if(!N){if(N=!0,-1==M.indexOf(h)){if(zot(zid(W=h)))return void zogy("Frame - scaling: HTML tag with id="+h+" must exist");F=re.tag=zid(W),re.scaling=h=zot(g)||zot(o)?"tag":"inline",0==z.indexOf("myCanvas")&&(z=W+"Canvas"),"canvas"==F.tagName.toLowerCase()&&($=!0,z=W)}else re.scaling=h;var e;re.canvasID=z,zot(g)&&(g=500),zot(o)&&(o=500),_=g,Y=o,zot(n)||(re.outerColor=n),ue(),he(),S?(p&&setTimeout(function(){window.scrollTo(0,0)},50),setTimeout(t,100),c*("s"==E?1e3:1)!=100&&setTimeout(t,c*("s"==E?1e3:1))):(H=!0,ce()),zot(i)?(V=!0,ce()):zot(e=i.constructor!={}.constructor||i.audioSprite||i.id||i.data||i.src?re.loadAssets({assets:i,path:a,progress:l,queueOnly:!0}):re.loadAssets(To.merge(i,{progress:l,queueOnly:!0})))||!e.on?(zon&&zogy("Frame() - load failed"),V=!0,ce()):e.on("complete",function(){V=!0,ce()})}function t(){ge(),H=!0,ce(),fe(),Z&&Z.update()}}function ce(){H&&V&&!R&&(1<=Z.width&&1<=Z.height?(!zot(l)&&l.show&&l.hide(),re.dispatchEvent("ready"),R=!0,fe()):setTimeout(function(){ge(),ce()},50))}function ue(){var e;$?e=re.canvas=re.tag:(e=re.canvas=document.createElement("canvas")).setAttribute("id",z),e.setAttribute("tabindex",0);var t=To.windowWidth(),o=To.windowHeight(),n=window.devicePixelRatio||1;"full"==h||"tag"==h?k?(re.scale=n,e.setAttribute("width",t*re.scale),e.setAttribute("height",o*re.scale),"full"==h&&(e.style.width=t+"px",e.style.height=o+"px")):(e.setAttribute("width",t),e.setAttribute("height",o)):(e.setAttribute("width",_),e.setAttribute("height",Y));o=zid(z+"Alternative");o&&e.appendChild(o),$||("tag"==h||"inline"==h?F:document.body).appendChild(e),zot(r)||(e.style.backgroundColor=r),"full"==h||"fit"==h||"fill"==h?(e.style.position="absolute",w||(document.body.style.overflow="hidden")):"static"==getComputedStyle(e.parentElement).position&&(e.parentElement.style.position="relative")}function de(){A&&(re.mouseX=0,re.mouseY=0,re.mousedownEvent=Z.on("stagemousedown",function(e){re.mouseX=e.stageX/To.scaX,re.mouseY=e.stageY/To.scaY}),re.mousemoveEvent=Z.on("stagemousemove",function(e){re.mouseX=e.stageX/To.scaX,re.mouseY=e.stageY/To.scaY})),window.removeEventListener("mousedown",ie,!0),window.removeEventListener("mousemove",ie,!0),window.removeEventListener("mouseup",ie),window.addEventListener("mousedown",ie,!0),window.addEventListener("mousemove",ie,!0),window.addEventListener("mouseup",ie)}function he(){ge(),-1==M.indexOf(h)||w||(re.zil=zil()),re.mousedownEvent&&Z&&Z.off("stagemousedown",re.mousedownEvent),re.mousemoveEvent&&Z&&Z.off("stagemousemove",re.mousemoveEvent),(Z=y?new To.StageGL(z,d):new To.Stage(z)).frame=re,Z.mouseMoveOutside=T,!zot(r)&&y&&Z.setClearColor(To.convertColor(r)),Z.setBounds(0,0,_,Y),Z.width=_,Z.height=Y,k&&ge(),e&&Z.enableMouseOver(s),t&&createjs.Touch.enable(Z,!1,w),w&&(Z.preventSelection=!1),b&&(Z.nextStage=b.stage),v&&(Z.nextStage=v),de()}function ge(){if(re){var e=zid(z),t=To.windowWidth(),o=To.windowHeight();if((D=re.orientation=o<t?"horizontal":"vertical")!=X&&(X=D,re.dispatchEvent("orientation")),S&&p&&setTimeout(function(){window.scrollTo(0,0)},100),e){if("fit"==h)re.scale=_/Y<=t/o?o/Y:t/_;else if("fill"==h)re.scale=_/Y<=t/o?t/_:o/Y;else{if("full"==h)return e.style.left=e.style.top="0px",e.width=_=t,e.height=Y=o,Z&&(Z.setBounds(0,0,_,Y),k?(d=window.devicePixelRatio||1,e.width=t*d,e.height=o*d,e.style.width=t+"px",e.style.height=o+"px",re.scale=d,Z.scaleX=Z.scaleY=re.scale):Z.scaleX=Z.scaleY=1,Z.tickOnUpdate=!1,Z.update(),Z.tickOnUpdate=!0,Z.width=_,Z.height=Y,y&&Z.updateViewport(_/Z.scaleX,Y/Z.scaleY),To.scaX=createjs.stageTransformable?1:Z.scaleX,To.scaY=createjs.stageTransformable?1:Z.scaleY),w||(To.scrollX(0),To.scrollY(0)),void pe();if("tag"==h){_=""==F.style.width?F.getAttribute("width")||F.offsetWidth:F.style.width,Y=""==F.style.height?F.getAttribute("height")||F.offsetHeight:F.style.height,k?(e.width=_*re.scale,e.height=Y*re.scale,e.style.width=_+"px",e.style.height=Y+"px",Z&&(Z.scaleX=Z.scaleY=re.scale)):(Z&&(Z.scaleX=Z.scaleY=1),e.width=_,e.height=Y),Z&&(Z.tickOnUpdate=!1,Z.update(),Z.tickOnUpdate=!0,Z.setBounds(0,0,_,Y),Z.width=_,Z.height=Y,y&&Z.updateViewport(_/Z.scaleX,Y/Z.scaleY),To.scaX=createjs.stageTransformable?1:Z.scaleX,To.scaY=createjs.stageTransformable?1:Z.scaleY),F.style.overflow="hidden",e.style.left=e.style.top="0px";var n=e.getBoundingClientRect();return re.x=n.x+To.scrollX(),re.y=n.y+To.scrollY(),void pe()}if("inline"==h){if(k){if(document.styleSheets[0])try{for(var r=document.styleSheets[0].rules||document.styleSheets[0].cssRules,i=0;i<r.length;i++){var a,l,s=r[i];s.selectorText!="#"+z||(s=s.style.getPropertyValue("width"))&&(a=zum(e.style.width),l=zum(e.style.height),e.style.width=s)}}catch(e){}var c=window.getComputedStyle(e),u=zum(c.getPropertyValue("width"));a&&(e.style.height=l*u/a+"px",c=window.getComputedStyle(e));var c=zum(c.getPropertyValue("height")),d=window.devicePixelRatio||1;re.scale=u/g*d,e.width=_*re.scale,e.height=Y*re.scale,e.style.width=u+"px",e.style.height=c+"px",Z&&(Z.scaleX=Z.scaleY=re.scale)}else Z&&(Z.scaleX=Z.scaleY=1);Z&&(Z.tickOnUpdate=!1,Z.update(),Z.tickOnUpdate=!0,Z.setBounds(0,0,_,Y),Z.width=_,Z.height=Y,y&&Z.updateViewport(_/Z.scaleX,Y/Z.scaleY),To.scaX=createjs.stageTransformable?1:Z.scaleX,To.scaY=createjs.stageTransformable?1:Z.scaleY),e.style.left=e.style.top="0px";var n=e.getBoundingClientRect();return re.x=n.x+To.scrollX(),re.y=n.y+To.scrollY(),void pe()}}c=Y*re.scale,n=_*re.scale;k?(d=window.devicePixelRatio||1,re.scale*=d,e.width=_*re.scale,e.height=Y*re.scale,e.style.width=_*re.scale/d+"px",e.style.height=Y*re.scale/d+"px",Z&&(Z.scaleX=Z.scaleY=re.scale)):(Z&&(Z.scaleX=Z.scaleY=1),e.style.width=n+"px",e.style.height=c+"px"),Z&&(Z.tickOnUpdate=!1,Z.update(),Z.tickOnUpdate=!0),re.x="left"==f?0:"right"==f?t-n:(t-n)/2,re.y="top"==m?0:"bottom"==m?o-c:(o-c)/2,e.style.left=re.x+"px",e.style.top=re.y+"px",w||(To.scrollX(0),To.scrollY(0)),pe(),Z&&(To.scaX=createjs.stageTransformable?1:Z.scaleX,To.scaY=createjs.stageTransformable?1:Z.scaleY)}}}function pe(){var e;"fill"==h?(e=(zum(re.canvas.style.width)-To.windowWidth())/2,"left"==f?(re.visibleLeft=0,re.visibleRight=To.windowWidth()/(To.windowWidth()+2*e)*_):"right"==f?(re.visibleLeft=2*e/(To.windowWidth()+2*e)*_,re.visibleRight=_):(re.visibleLeft=e/(To.windowWidth()+2*e)*_,re.visibleRight=(To.windowWidth()+e)/(To.windowWidth()+2*e)*_),e=(zum(re.canvas.style.height)-To.windowHeight())/2,"top"==m?(re.visibleTop=0,re.visibleBottom=To.windowHeight()/(To.windowHeight()+2*e)*Y):"bottom"==m?(re.visibleTop=2*e/(To.windowHeight()+2*e)*Y,re.visibleBottom=Y):(re.visibleTop=e/(To.windowHeight()+2*e)*Y,re.visibleBottom=(To.windowHeight()+e)/(To.windowHeight()+2*e)*Y)):(re.visibleLeft=re.visibleTop=0,re.visibleRight=_,re.visibleBottom=Y)}function fe(){var e;R&&re&&(re.dispatchEvent("resize"),e=(new Date).getTime(),setTimeout(function(){80<(new Date).getTime()-e&&(ge(),setTimeout(function(){re.dispatchEvent("resize"),To.OPTIMIZE||!zns&&OPTIMIZE||!Z||"full"!=h&&"tag"!=h||Z.update()},100))},100),To.OPTIMIZE||!zns&&OPTIMIZE||!Z||"full"!=h&&"tag"!=h||Z.update())}function me(e){e.remove=re.eventRemove,re.altKey=e.altKey,re.ctrlKey=e.ctrlKey,re.metaKey=e.metaKey,re.shiftKey=e.shiftKey,re.dispatchEvent(e)}function ze(e){re.altKey=e.altKey,re.ctrlKey=e.ctrlKey,re.metaKey=e.metaKey,re.shiftKey=e.shiftKey,e.remove=re.eventRemove,re.dispatchEvent(e)}function ye(e){re.dispatchEvent(e)}function be(e){e.remove=re.eventRemove,re.dispatchEvent(e)}function ve(e){e.remove=re.eventRemove;var t=360-e.alpha;135<Math.abs(t-oe)&&Math.abs(t-oe)<225&&(ne=0==ne?180:0),oe=t,e.rotation={x:e.beta,y:e.gamma,z:(t+ne)%360},re.dispatchEvent(e)}void 0!==zdf&&null!=zdf&&zdf.type||(zimDefaultFrame=zdf=this),zot(u)&&(u=!0),!window.HTMLCanvasElement&&u?setTimeout(function(){re.dispatchEvent("failed")},100):(S=To.mobile(),zot(h)&&(h="full"),"outside"==h&&(h="fill"),zot(e)&&(e=!S),zot(t)&&(t=!0),zot(p)&&(p=!1),zot(f)&&(f="center"),zot(m)&&(m="center"),zot(z)&&(z=zdf!=this?"myCanvas"+To.makeID(5):"myCanvas"),E=Ao(c),zot(s)&&(s=20),zot(c)&&(c=S?"s"==E?1:1e3:"s"==E?.03:30),zot(y)&&(y=!1),zot(w)&&(w=!1),zot(C)&&(C="circles"),this.loadFailObj=C,zot(x)&&(x=!1),zot(k)&&(k=!0),this.retina=k,zot(T)&&(T=!1),zot(A)&&(A=!0),zot(P)&&(P=!1),zot(B)&&(B=10),Q=B,y&&(k=!1),this.retina=k,I=!1,this.leftMouseDown=!1,M=["fit","fill","full"],P?(this.shim=!0,O=(P.stage.frame=this).canvas=P.canvas,this.scale=P.stage.scaleX,setTimeout(function(){ae(),L=function(){ae(),j&&clearTimeout(j),j=setTimeout(ae,50)},window.addEventListener("resize",L)},20),_=(Z=P.stage).getBounds()?Z.getBounds().width:O.width/Z.scaleX,Y=Z.getBounds()?Z.getBounds().height:O.height/Z.scaleY,Z.getBounds()||Z.setBounds(0,0,_,Y),r=O.style.backgroundColor,de(),ae()):(this.scale=1,this.x=0,this.y=0),N=V=H=R=!1,P||("interactive"===document.readyState||"complete"===document.readyState?setTimeout(function(){se()},200):document.addEventListener("DOMContentLoaded",se)),q=!1,U="full"==h&&"undefined"!=typeof InstallTrigger,this.swapRotation=!1,S&&!window.parent&&(K=isNaN(window.innerWidth)?window.clientWidth:window.innerWidth,te=isNaN(window.innerHeight)?window.clientHeight:window.innerHeight,this.swapRotation=(0==window.orientation||180==window.orientation)&&te<K||90==Math.abs(window.orientation)&&K<te),window.addEventListener("resize",le),re.loadAssetsCount=0,zot(To.assets)&&(To.assets={},To.assetIDs={}),$=!1,this.update=function(){ge(),re.dispatchEvent("update")},this.loadAssets=function(e,l,t,o,n,r,i,a,s,c,u){if(zot(e))return g();if(zot(e.src)){var d;if(d=zob(re.loadAssets,arguments,"assets, path, progress, xhr, time, loadTimeout, outputAudioSprite, crossOrigin, fileType, queueOnly, maxConnections"))return d}var h=Ao(n||null);if(!zot(t)&&"ProgressBar"==t.type&&zot(o)&&(o=!0),Array.isArray(e)||(e=[e]),0==e.length)return g();function g(){var e=new To.Queue;return e.isLoading=!1,e.loadAssetsCount=0,setTimeout(function(){e.dispatchEvent("complete"),re.dispatchEvent("complete")},10),e}zot(n)&&(n=0),zot(r)&&(r="s"==h?8:8e3),zot(i)&&(i=!1),zot(a)&&(a="anonymous"),zot(c)&&(c=!1),zot(u)&&(u=Q);var p,f,m,z,y,b,v,w,C=!1,x=[],k=/\.([^.]+)$/i,T=[],A=[],P=[],B=0,S=!0;for(W=0;W<e.length;W++){if((f=e[W]).assets){var E=[];e.splice(W,1),Array.isArray(f.assets)||(f.assets=[f.assets]);for(var I=0;I<f.assets.length;I++)To.assetIDs[f.assets[I]]?E.push({id:f.path+f.assets[I],src:f.path+f.assets[I],path:null,loadTimeout:f.loadTimeout,maxNum:f.maxNum,noCORSonImage:f.noCORSonImage}):E.push({id:f.assets[I],src:f.assets[I],path:f.path,loadTimeout:f.loadTimeout,maxNum:f.maxNum,noCORSonImage:f.noCORSonImage});for(var M=E.length-1;0<=M;M--)e.splice(W,0,E[M]);f=E[0]}if(f.constructor=={}.constructor)if(f.audioSprite){_(f=(m=To.copy(f)).src);var O,j=[];for(I=0;I<m.audioSprite.length;I++)O=m.audioSprite[I],j.push({id:O[0],startTime:Math.round(1e3*O[1]),duration:Math.round(1e3*(O[2]-O[1]))});delete m.audioSprite,m.data={audioSprite:j},x.push(m)}else f.data&&f.data.audioSprite?(_(f=(m=To.copy(f)).src),x.push(m)):f.id?(f.path&&(f.path.match(/http/i)?f.src=f.path+f.src:f.path.match(/^\//)?(y=(b=(y=window.location.href).match(/(.*?)([^\/])\/[^\/]/))[1]+b[2],f.src=y+f.src):(z=window.location.pathname,b=((y=window.location.href).split(z)[0]+z).match(/(.*)\//),f.src=b[1]+"/"+f.path+f.src),delete f.path),f.noCORSonImage?(v=new Image,P.push(v),v.src=f.src,v.id=f.id,v.onload=function(e){var t=e.currentTarget,e=To.assets[t.id]=new To.Bitmap(t).expand(0),t=new createjs.Event("assetload");t.asset=e,Y.dispatchEvent(t),c||((t=new createjs.Event("assetload")).asset=e,re.dispatchEvent(t)),Y.loadAssetsCount--,0==Y.loadAssetsCount&&U()}):(To.assetIDs[f.id]=f.src,L=f.maxNum,w=f.type,v=zot(f.loadTimeout)?r:f.loadTimeout,_(f=f.src),L={src:f,loadTimeout:v*("s"==h?1e3:1),data:L,type:w},zot(s)||(L.type=s),x.push(L))):(f.src.match(/fonts\.googleapis\.com/)?A:T).push(f);else{_(f);var L={src:f,loadTimeout:r*("s"==h?1e3:1)};zot(s)||(L.type=s),x.push(L)}C&&S&&((w=document.createElement("audio")).setAttribute("src",(zot(l)||f.match(/^http:\/\/|https:\/\//i)?"":l)+f),document.body.appendChild(w),S=!1)}function _(e){B++,e.split&&(e=e.split("?"),(p=e[0].match(k))&&0<=createjs.Sound.SUPPORTED_EXTENSIONS.indexOf(p[1])&&(C=!0))}re.loadAssetsCount++,re.isLoading=!0;var Y=new To.Queue;if(Y.isLoading=!0,Y.loadAssetsCount=0,!zot(t)&&t.show&&(t.zimActiveLoader=Y,t.show()),0<T.length){for(var D,X,R=[],W=0;W<T.length;W++)D={src:"url("+(!(X=T[W]).src.match(/^http/i)&&l||"")+X.src+")"+(X.type?" format('"+X.type+"')":""),family:X.font},X.weight&&(D.weight=X.weight),X.style&&(D.style=X.style),R.push(D);(F=new createjs.FontLoader({src:R},!0)).on("complete",H),F.on("error",H),F.load(),Y.loadAssetsCount++}if(0<A.length)for(var F,W=0;W<A.length;W++)D={src:(X=A[W]).src,type:"fontcss"},Y.loadAssetsCount++,(F=new createjs.FontLoader(D,!0)).on("complete",H),F.on("error",H),F.load();function H(){Y.loadAssetsCount--,0==Y.loadAssetsCount&&U()}if(0<P.length)for(W=0;W<P.length;W++)Y.loadAssetsCount++;function V(e,t){Y.loadAssetsCount--;var o=t.item,e=To.assets[o.id]=e;e.svg=t.svg;t=new createjs.Event("assetload");t.item=o,t.asset=e,Y.dispatchEvent(t),c||((t=new createjs.Event("assetload")).item=o,t.asset=e,re.dispatchEvent(t)),0==Y.loadAssetsCount&&U()}var N=Date.now(),G=new createjs.Event("complete");if(0<B){Y.loadAssetsCount++;var q=Y.preload=re.preload=new createjs.LoadQueue(o,l,a);1!=u&&q.setMaxConnections(u),C&&q.installPlugin(createjs.Sound),q.on("progress",function(e){Y.dispatchEvent(e),c||re.dispatchEvent(e)}),q.on("error",function(e){Y.dispatchEvent(e),c||re.dispatchEvent(e)}),q.on("fileload",function(e){var t,o=e.item,n=e.item.type,r=o.id.match(k);if(n&&"sound"==n){var i=[];if(o.data&&o.data.audioSprite)for(var a=0;a<o.data.audioSprite.length;a++)i.push(o.data.audioSprite[a].id);else i.push(o.id);for(a=0;a<i.length;a++)!function(){var s=i[a];t=To.assets[s]={type:"sound",path:l,id:s,play:function(e,t,o,n,r,i,a){if(l=zob(To.assets[s].play,arguments,"volume, loop, loopCount, pan, offset, delay, interrupt"))return l;var l={volume:e,loop:t,loopCount:o,pan:n,offset:r,delay:i,interrupt:a};"s"==Ao(l.offset,null,30)&&(l.offset&&(l.offset*=1e3),l.delay&&(l.delay*=1e3)),!0===l.loop&&(l.loop=-1),l.loopCount&&(l.loop=l.loopCount,delete l.loopCount);l=createjs.Sound.play(s,l);return l.getStage=function(){return Z},l}}}()}else if("image"==n)e.result.width&&(t=To.assets[o.id]=new To.Bitmap(e.result,e.result.width,e.result.height,null,null,o.id),o.avoidCORS&&t.expand(0));else{if("svg"==n)return Y.loadAssetsCount++,void To.svgToBitmap(e.result,V,null,null,{svg:e.result,item:o,type:n,ext:r});t=To.assets[o.id]=e.result}e=new createjs.Event("assetload");e.item=o,e.asset=t,Y.dispatchEvent(e),c||((e=new createjs.Event("assetload")).item=o,e.asset=t,re.dispatchEvent(e))}),re.preloadEvent=q.on("complete",function(e){G=e,Y.loadAssetsCount--,0==Y.loadAssetsCount&&U()});try{q.loadManifest(x)}catch(e){}}function U(){var e=Date.now();n=Math.max(0,n-(e-N)),setTimeout(function(){re.loadAssetsCount--,re.loadAssetsCount<=0&&(re.isLoading=!1),Y.isLoading=!1,Y.dispatchEvent(G),c||re.dispatchEvent(G)},n*("s"==h?1e3:1))}return Y},this.ac=function(e,t,o){o?(o.commands||(o.commands=[]),o.commands.push([e,t,o])):(t[0].commands||(t[0].commands=[]),t[0].commands.push([e,t]))},window.asset=To.asset=this.asset=function(o,e,t,n){if(!zot(o)){o=zik(o);var r=To.assetIDs[o];if(r&&(o=r),To.assets[o])return To.assets[o];if(n)return(n="circles"==re.loadFailObj?re.makeCircles(14):re.loadFailObj)&&(n.type="EmptyAsset",n.id=o,n.play=function(){if(zon)return zogy("Frame - asset("+o+") not found"),{}}),n;var i=new To.Container(e,t);i.type=e&&t?"ACWD":"AC";e=re.loadAssets(o),t=o.split(".");return 0<=createjs.Sound.SUPPORTED_EXTENSIONS.indexOf(t[t.length-1])&&(i.type="Sound",i.play=function(){return i.playParams=arguments,i.proxy=new createjs.EventDispatcher,Object.defineProperty(i.proxy,"volume",{get:function(){if(i.sound)return i.sound.volume},set:function(e){i.volume=e,i.sound&&(i.sound.volume=e)}}),Object.defineProperty(i.proxy,"pan",{get:function(){if(i.sound)return i.sound.pan},set:function(e){i.pan=e,i.sound&&(i.sound.pan=e)}}),i.proxy}),e.on("complete",function(){o.id?o=o.id:o.src&&(o=o.src);var e=re.asset(o,null,null,!0);if(To.assets[o]=i,e.play)i.play=e.play,i.playParams&&(i.sound=i.play.apply(null,i.playParams),null!=i.volume&&(i.sound.volume=i.volume),null!=i.pan&&(i.sound.pan=i.pan),i.sound.on("complete",function(){i.proxy.dispatchEvent("complete")}));else if("Bitmap"==e.type){if(e.addTo(i),i.mouseChildren=!1,i.type="Image",i.bitmap=e,i.image=e.image,i.id=e.id,i.commands)for(var t=0;t<i.commands.length;t++)(i.commands[t][2]?i:To)[i.commands[t][0]].apply(i,i.commands[t][1]);i.commands=null,i.stage&&i.stage.update()}else"EmptyAsset"==e.type&&(e.addTo(i),i.mouseChildren=!1,i.type="EmptyAsset",i.stage&&i.stage.update());i.dispatchEvent("assetLoad"),i.dispatchEvent("complete")}),i}},To.asset.getIDs=function(){var e=[];for(name in To.assetIDs)e.push(name);return e},To.image=function(e,t,o,n){return e.match(/^htt/i)&&(e="https://cors.zimjs.com/"+e),To.asset(e,t,o,n)},To.zimObjectIDs={},To.object=this.object=function(e){return To.zimObjectIDs[e]},To.object.getNames=function(){var e=[];for(name in To.zimObjectIDs)e.push(name);return e},window.zns||(window.asset=this.asset,window.image=To.image,window.object=this.object),this.setDefault=function(){return zimDefaultFrame=zdf=re},Object.defineProperty(re,"isDefault",{get:function(){return zdf==re},set:function(e){zogy("Frame(): isDefault is read only - see setDefault()")}}),Object.defineProperty(re,"stage",{get:function(){return Z},set:function(e){zogy("Frame(): stage is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(re,"width",{get:function(){return _},set:function(e){zogy("Frame(): width is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(re,"height",{get:function(){return Y},set:function(e){zogy("Frame(): height is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(this,"color",{get:function(){return r},set:function(e){zot(r=e)?zid(z).style.backgroundColor="default":!zot(zid(z).style.backgroundColor=r)&&y&&Z.setClearColor(To.convertColor(r))}}),Object.defineProperty(this,"outerColor",{get:function(){return ee},set:function(e){ee=e,zet("body").css({backgroundColor:ee})}}),Object.defineProperty(re,"allowDefault",{get:function(){return w},set:function(e){e?(Z.preventSelection=!1,document.body.style.overflow="visible",re.zil&&(window.removeEventListener("keydown",re.zil[0]),window.removeEventListener("wheel",re.zil[1]),window.removeEventListener("DOMMouseScroll",re.zil[2]),re.zil=null)):(Z.preventSelection=!0,Z.enableDOMEvents(!0),"full"!=h&&"fit"!=h&&"fill"!=h||(document.body.style.overflow="hidden"),zot(re.zil)&&(re.zil=zil())),w=e,Z.__touch&&(Z.__touch.preventDefault=!w)}}),te=new createjs.Event("keydown"),this.eventRemove=te.remove,window.addEventListener("keydown",me),window.addEventListener("keyup",ze),window.addEventListener("wheel",ye),x&&window.DeviceMotionEvent&&window.addEventListener("devicemotion",be),x&&window.DeviceOrientationEvent&&(ne=oe=0,window.addEventListener("deviceorientation",ve)),this.isFullscreen=!!document.fullscreenElement,this.htmlobc=zet("html").css("backgroundColor"),this.fullscreen=function(e){if(zot(e)&&(e=!0),e){if(document.fullscreenElement)return;var t=re.canvas.parent||document.body;t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}else{if(!document.fullscreenElement)return;document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}this.isFullscreen=e},document.addEventListener("fullscreenchange",function(){re.isFullscreen=!!document.fullscreenElement,document.fullscreenElement?(zet("html").css("backgroundColor",re.color),re.dispatchEvent("fullscreenenter")):(zet("html").css("backgroundColor",re.htmlobc||"transparent"),re.dispatchEvent("fullscreenexit"))}),this.remakeCanvas=function(e,t){if("full"!=h){zot(e)&&(e=_),zot(t)&&(t=Y),zid(z)&&zid(z).parentNode.removeChild(zid(z)),_=e,Y=t;for(var o=[],n=0;n<re.stage.numChildren;n++)o.push(re.stage.getChildAt(n));ue(),he();for(n=0;n<o.length;n++)re.stage.addChild(o[n])}},this.follow=function(n,e,t,r,i,a,l,s,c,u,d,h,g,p){var o;return(o=zob(re.follow,arguments,"obj, boundary, damp, dampY, leftOffset, rightOffset, upOffset, downOffset, offsetDamp, offsetDampY, horizontal, vertical, borderLock, lag"))?o:(re.followObj=null,re.followTicker&&To.Ticker.remove(re.followTicker),zot(n)?void 0:(n.dirX=n.dirY=0,(re.followObj=n).followDampX=null,n.followDampY=null,zot(e)&&(e=new To.Boundary(0,0,re.stage.width,re.stage.height)),re.followBoundary=e,zot(t)&&(t=.05),zot(r)&&(r=t),zot(i)&&(i=0),zot(a)&&(a=0),zot(l)&&(l=0),zot(s)&&(s=0),zot(c)&&(c=.02),zot(u)&&(u=c),zot(d)&&(d=!0),zot(h)&&(h=!0),zot(g)&&(g=!1),zot(p)&&(p=!1),n.parent?f():n.on("added",f),n));function f(){var o=n.parent;re.frameBorderLock=g,d&&(re.followDampX=new To.Damp(o.x,t),re.offsetDampX=new To.Damp(e.x+i+(e.width-i-a)/2,c)),h&&(re.followDampY=new To.Damp(o.y,r),re.offsetDampY=new To.Damp(e.y+l+(e.height-l-s)/2,u)),re.followTicker=To.Ticker.add(function(){var e,t=re.followBoundary;d&&(e=t.x+i+(t.width-i-a)/2,re.followOffsetX=[p?t.x+t.width-i:e,e,p?t.x+i:e],re.followObj&&(o.x=re.followDampX.convert(re.offsetDampX.convert(re.followOffsetX[n.motionController?n.motionController.dirX+1:1])-n.x))),h&&(e=t.y+l+(t.height-l-s)/2,re.followOffsetY=[p?t.y+t.height-s:e,e,p?t.y+l:e],re.followObj&&(o.y=re.followDampY.convert(re.offsetDampY.convert(re.followOffsetY[n.motionController?n.motionController.dirY+1:1])-n.y))),re.frameBorderLock&&(o.x>re.followBoundary.x&&(o.x=re.followBoundary.x),o.y>re.followBoundary.y&&(o.y=re.followBoundary.y),o.x<re.followBoundary.x+re.followBoundary.width-o.width&&(o.x=re.followBoundary.x+re.followBoundary.width-o.width),o.y<re.followBoundary.y+re.followBoundary.height-o.height&&(o.y=re.followBoundary.y+re.followBoundary.height-o.height))})}},this.dispose=function(e,t,o){return re.zil&&re.zil.length&&(window.removeEventListener("keydown",re.zil[0]),window.removeEventListener("wheel",re.zil[1]),window.removeEventListener("DOMMouseScroll",re.zil[2])),L&&window.removeEventListener("resize",L),window.removeEventListener("resize",le),window.removeEventListener("keydown",me),window.removeEventListener("keyup",ze),window.removeEventListener("wheel",ye),window.removeEventListener("devicemotion",be),window.removeEventListener("deviceorientation",ve),window.removeEventListener("mousedown",ie,!0),window.removeEventListener("mousemove",ie,!0),window.removeEventListener("mouseup",ie),w||(document.body.style.overflow="auto"),function e(t){if(t.dispose)t.dispose();else{if(t.removeAllEventListeners(),t.numChildren)for(var o=t.numChildren-1;0<=o;o--)e(t.getChildAt(o));t.parent&&t.parent.removeChild(t)}}(Z),zid(z)&&zid(z).parentNode.removeChild(zid(z)),re==To.tickerFrame&&(To.tickerFrame=null),re===zdf&&(zdf=null),!(re=Z=null)},this.orange="#f58e25",this.green="#acd241",this.pink="#e472c4",this.blue="#50c4b7",this.brown="#d1a170",this.yellow="#ebcb35",this.purple="#993399",this.red="#fb4758",this.black="#000000",this.darker="#111111",this.dark="#333333",this.grey="#555555",this.gray="#555555",this.tin="#777777",this.silver="#999999",this.fog="#aaaaaa",this.mist="#bbbbbb",this.light="#cccccc",this.moon="#dddddd",this.lighter="#eeeeee",this.white="#ffffff",this.clear="rgba(0,0,0,0)",this.faint="rgba(0,0,0,.01)",this.makeCircles=function(e,t){zot(e)&&(e=100);var o=[re.orange,re.green,re.pink,re.blue,re.brown,re.dark];if(t){(r=new To.Container({style:!1})).radius=e;for(var n=0;n<o.length;n++)r.addChild(new To.Circle(r.radius/o.length*(o.length-n),o[n],null,null,null,null,null,null,!1))}else{var r,i=(r=new To.Shape({style:!1})).graphics;r.radius=e;for(n=0;n<o.length;n++)i.f(o[n]).dc(0,0,r.radius/o.length*(o.length-n));r.setBounds(-r.radius,-r.radius,2*r.radius,2*r.radius)}return r},this.madeWith=function(e,t,o,n,r,i,a){zot(e)&&(e=To.dark),zot(t)&&(t="Made with ZIM");var l=new To.Container,s=l.icon=re.makeIcon(o,n,r,i,a).sca(.5).alp(.92).hov(1).addTo(l).tap(function(){s.alp(.92),s.stage.update(),zgo("https://zimjs.com","_blank")});l.label=new To.Label(t,16,null,e).sca(.7).pos(0,-19,To.CENTER,To.BOTTOM,l);return l},this.makeIcon=function(e,t,o,n,r){var i=new To.Container(-20,-13,102,120).reg(-20,-13);zot(e)&&(e=re.light),zot(t)&&(t=re.dark),!0===o&&(o=[re.silver,re.silver,re.silver,re.silver,re.silver]),new To.Rectangle(i.width,i.height,t,n,r).loc(-20,-13,i);e=[[o?o[0]:"#E474C3","AieA0IAAgCIAmhlIEXAAIg5Bng",41.7,19.5],[o?o[1]:"#50C5B7","AiSAzIAnhlID+AAIg5Blg",35.3,33.2],[o?o[2]:"#F48E25","AiFA0IAmhnIDlAAIg5Bng",28.9,46.7],[o?o[3]:"#EBCD36","Ah4AzIAmhlIDLAAIg5Blg",22.4,60.5],[o?o[4]:"#ABD140","AhrA0IAAgFIAlhiICxAAIg5Bng",16.1,74.3],[e,"AlGHRIAnhnIH+AAIgbBngAlGlpIAnhnIJmAAIg5Bng",32.7,46.5]];return To.loop(e,function(e){var t=(new To.Shape).addTo(i);t.graphics.f(e[0]).p(e[1]),t.setTransform(e[2],e[3])}),i.mouseChildren=!1,i},this.makeCat=function(e){zot(e)&&(e=246);var o=new To.Container(157.5,246);To.loop([[16.95,241.15,0,"black",[1.5,2,1],"AgKAhIAVhB"],[58.65,244.378,0,"#A7A7A7",[3,2,1],"AmYAAIMxAB"],[105.64,107.14,"#EF7988",0,0,"AAEArQgNAAgjghQgiggAFgIQAFgJBEgCQBEgDAGAGQAHAIgfAkQgfAlgPAAIAAAAg"],[104.84,111.34,0,"black",[1,1,1],"AABA2IAPAYQAJAPAJAGQAKAHAMAAQAbAAAXgWQAQgPAVghQAVghAAgcQAAgnglgYQgbgSgxgCIgrACAAJADIgIAzAhphVQgXAVgMAWQgKAQgIAiQgIAkAFAMQALAfAqAOQAmANAcgIQANgEANgQQALgNAGgT"],[105.05,111.4,"#757B74",0,0,"AheBrQgvgRgQgeQgPgdAQgkQAZg8AEgFQAXgfA8gGQBVgKA+ATQBRAZgYBEQgVA/gnAZQgUAOgZAKQgJAJgVgbQgUgegCAAQgDAAgWAgQgWAUgZAAQgMAAgNgEg"],[86.18,93,"black",0,0,"Aj7g0QiYg0i9AyQA0g3BcgRQBagQBfAaQBkAbBEBBQBNBHASBpQhgiYibg0gAFxiDQAzgdA6AMQA9AMA2A4QgHgBAAACQAAAAgBABQAAAAAAAAQgBAAgBAAQAAAAgBgBQh8gshOAzQhIAvhBCYQALjABzhCg"],[78.5,63.23,"#705F6C","black",[1,1,1],"AHAg5IgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDZQg2g4g9gMQg6gMgzAdQhzBCgLDBQBBiZBIgvQBNgzB9AsQAEACAAgCQAAgCAHABgAqdBuIAAnsIDmHEQgegMgsgBQhXgChFA3gAoEDzQA0g3BdgRQBagQBeAaQBkAbBFBBQBMBIASBpQhfiYibg1QiYg0i+Ayg"],[86.28,98.01,"black","black",[1,1,1],"AJSh/QgEADgHgDQgFgBgBAFQgNBXhNA9QhTBEhagZQgGgCgPAFQgUAHgEAAQCNAeBchOQBGg7AWhigApRhnQAFABAIAAQAGABAAAAQBFBsCVA7QCpBDCrgzQACAAAHAJQAEAFAFAJQjAAzitg/Qing9g/iHg"],[96.95,97.3,"#0C0436",0,0,"AlZBJQgVgVAAgeQAAgcAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAcQAAAegVAVQgVAVgdAAQgeAAgVgVgAD1AcQgVgVAAgdQAAgdAVgVQAVgVAeAAQAdAAAVAVQAVAVAAAdQAAAdgVAVQgVAVgdAAQgeAAgVgVg"],[96.88,97.2,"#EA9424",0,0,"AlpBYQgbgbAAgnQAAglAbgbQAbgbAnAAQAmAAAbAbQAbAbAAAlQAAAngbAbQgbAbgmAAQgnAAgbgbgADnArQgbgbAAgmQAAgmAbgbQAbgbAmAAQAnAAAbAbQAbAbAAAmQAAAmgbAbQgbAbgnAAQgmAAgbgbg"],[96.88,97.2,"#AFCE3A",0,0,"AlzBiQgggfAAgtQAAgrAggfQAfggAtAAQAsAAAgAgQAfAfAAArQAAAtgfAfQggAggsAAQgtAAgfgggADcA1QgfgfAAgsQAAgsAfgfQAgggAsAAQAtAAAfAgQAgAfAAAsQAAAsggAfQgfAggtAAQgsAAggggg"],[78.5,64.1,0,"black",[1,1,1],"AHAhCIgNmIIBfGpQgOgQgSgMQgjgXgPASgAKeDQQg2g4g9gMQg6gMgzAdQhzBCgLDBQCqAvBlhgQBJhFAGhagAoADiQAlgiBTgOQBYgOBaARQDrAsA0DTQjAAziog/Qihg+hAiIgAqdBlIAAnsIDmHEQgegMgsgBQhXgChFA3g"],[86.375,93.9,"#EACE35",0,0,"AltB+Qiig9g/iIQAkghBTgOQBZgPBaARQDrAtA0DRQhWAXhSAAQhkAAhcgjgADxB2QALjABzhBQAzgeA6AMQA9ANA2A4QgGBYhJBGQhEBAhiAAQgxAAg4gQg"],[73.45,154.83,"black","black",[2,1,1],"AkjjDIByAMQB/ANBEAFQB/AICXgSIgKFzQj4hflLiNQgDgBAFiag"],[79.42,123.62,"#A7A7A7","black",[2,1,1],"AEBpxIgBgBQAYiNAeiQQA8kgAfgMQAggNBLEqQAlCVAfCXIAXARQAbAXAZAcQBQBZAZBnQAZBngUB+QgKA/gPArQgeASgrAWQhYAuhFAXQg8AUh0AWIhoASIAAQzItygCQAvhKA1hoQBqjRAjiXQAri/AOjLIAFimQgegHhTgeQhEgZhgg/IhTg7QgekPgQkUQggonBEgWQBFgWCbEtQAkBGA3B9QAbA9AYA3QASAqAQAmIgjhQIABAAIJmgYIBUACIBQAK"]],function(e){var t=(new To.Shape).f(e[2]).s(e[3]).ss(e[4]?e[4][0]:null,e[4]?e[4][1]:null,e[4]?e[4][2]:null).p(e[5]);t.setTransform(e[0],e[1]),t.addTo(o)},!0);var t=new To.Container;return o.sca(e/246).addTo(t).mov(0,-.4),S&&t.cache(),t.mouseChildren=!1,t})},To.extend(To.Frame,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),To.Queue=function(){this.cjsEventDispatcher_constructor(),this.isLoading=!0},To.extend(To.Queue,createjs.EventDispatcher,null,"cjsEventDispatcher"),To.colorsHex=["#f58e25","#acd241","#e472c4","#50c4b7","#d1a170","#ebcb35","#993399","#fb4758","#000000","#111111","#333333","#555555","#555555","#777777","#999999","#aaaaaa","#bbbbbb","#cccccc","#dddddd","#eeeeee","#ffffff","rgba(0,0,0,.01)","rgba(0,0,0,0)"],To.colors=["orange","green","pink","blue","brown","yellow","purple","red","black","darker","dark","grey","gray","tin","silver","fog","mist","light","moon","lighter","white","faint","clear"];for(I=0;I<To.colors.length;I++)To[To.colors[I]]=To.colorsHex[I];String.prototype.darken=function(e){return To.darken(this,e)},String.prototype.lighten=function(e){return To.lighten(this,e)},String.prototype.toColor=function(e,t){return To.toColor(this,e,t)},String.prototype.toAlpha=function(e){return To.toAlpha(this,e)},To.FIT="fit",To.FILL="fill",To.FULL="full",To.LEFT="left",To.RIGHT="right",To.CENTER="center",To.MIDDLE="middle",To.TOP="top",To.BOTTOM="bottom",To.HORIZONTAL="horizontal",To.VERTICAL="vertical",To.BOTH="both",To.UP="up",To.DOWN="down",To.AUTO="auto",To.GET="get",To.POST="post",To.LOCALSTORAGE="localStorage",To.SOCKET="socket",To.TO="to",To.FROM="from",To.SINE="sine",To.SQUARE="square",To.TRIANGLE="triangle",To.SAW="saw",To.SAWTOOTH="saw";To.ZAP="zap";return To.distillery=[],To.distill=function(){!window.zns&&To&&(To.DISTILL||window.DISTILL)&&To.distillery.push("83.3","83.35"),0<To.distillery.length?(To.distillery=To.distillery.filter(function(e,t,o){return o.indexOf(e)===t}),zog("zim.distill() - go to https://zimjs.com/distill and enter the following:"),zog(To.distillery.join(" "))):zogy("must set zim.DISTILL = true;")},To.parseAudioSprite=function(e,t){if(z_d("83.25"),!(zot(e)||zot(e.resources)||zot(e.spritemap))){var o,n=e.resources[0],r=e.spritemap,i=[],n={src:n,data:{}};for(I in r)o=r[I],i.push({id:I,startTime:Math.round(1e3*o.start),duration:Math.round(1e3*(o.end-o.start))});return n.data.audioSprite=i,t&&zog(JSON.stringify(n)),n}},To.previewAudioSprite=function(e,t,o){if(z_d("83.26"),!zot(e)){if(zot(t)&&(t=3),zot(o)){if(zot(zdf))return;(o=zdf).stage}var n=o.width,e=(o.height,e),r=[],i=[];if(e.constructor=={}.constructor){e.resources&&(e=To.parseAudioSprite(e)),e.audioSprite?To.loop(e.audioSprite,function(e){r.push(e[0].substr(0,t)),i.push(e[0])}):e.data&&e.data.audioSprite&&To.loop(e.data.audioSprite,function(e){r.push(e.id.substr(0,t)),i.push(e.id)});var a=new To.Tabs({tabs:r,width:n,currentEnabled:!0}).addTo();return a.on("change",function(){o.asset(i[a.selectedIndex]).play()}),a}}},To.svgToBitmap=function(e,t,o,n,r){var i,a,l,s,c,u;z_d("83.27"),zot(e.draggable)||(a=new DOMParser,e=(e=e.innerHTML?a.parseFromString(e.innerHTML,"text/xml"):e).getElementsByTagName("svg")?e.getElementsByTagName("svg")[0]:null),XMLSerializer||!zon?((i="string"==typeof e?e:(new XMLSerializer).serializeToString(e))&&(1<(l=i.split(">")[0]).length&&1==l.split(/width/i).length&&(e=a=100,1<(l=l.split(/viewBox/i)).length&&(!(l=l[1].split('"')[1])||1<(l=l.split(" ")).length&&(a=l[l.length-2],e=l[l.length-1])),i=i.replace(/svg /i,'svg  width="'+a+'" height="'+e+'" ')),i.match(/xmlns/i)||(i=i.replace(/svg /i,"svg  xmlns='http://www.w3.org/2000/svg' "))),s=self.URL||self.webkitURL||self,(c=new Image).onload=function(){var e=new To.Bitmap(c,o,n);t(e,r),s.revokeObjectURL(u)},u=s.createObjectURL(new document.Blob([i],{type:"image/svg+xml"})),c.src=u):zog("ZIM svgToBitmap() - sorry, not supported in Browser")},To}(zim||{})).fastFrame=function(e,t){if(z_d("83.355"),createjs=e,zot(zdf))return t.frame=new zim.Frame({shim:{stage:t,canvas:t.canvas}}),zimDefaultFrame=zdf=t.frame,zim.scaX=createjs.stageTransformable?1:t.scaleX,zim.scaY=createjs.stageTransformable?1:t.scaleY,t.frame},zim.addWires=function(e){return z_d("83.365"),e.wire=function(){return Array.prototype.unshift.call(arguments,e),zim.wire.apply(null,arguments),e},e.noWire=function(){return Array.prototype.unshift.call(arguments,e),zim.noWire.apply(null,arguments),e},e.wired=function(){return Array.prototype.unshift.call(arguments,e),zim.wired.apply(null,arguments),e},e.noWired=function(){return Array.prototype.unshift.call(arguments,e),zim.noWired.apply(null,arguments),e},e};var ZIMONON=!(zim.setBlurDetect=function(){z_d("83.36"),zim.blurCheck=!0,zim.pauseAnimateOnBlur=!0,zim.pauseOnBlur=[],zim.blurDetect=function(){var t,o,e={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(t in e)if(t in document){o=e[t];break}return function(e){return e&&document.addEventListener(o,e),!document[t]}}(),zim.blurDetect(function(){if(zim.blurDetect())setTimeout(function(){if(zim.pauseOnBlur)for(var e=0;e<zim.pauseOnBlur.length;e++)(t=zim.pauseOnBlur[e]).pauseOnBlurPaused||t.pause(!1);if(zim.pauseAnimateOnBlur&&zim.animatedObjects)for(e=0;e<zim.animatedObjects.objects.length;e++){var t=zim.animatedObjects.objects[e],o=zim.copy(t.tweenStates);if(t.tweenStates)if(zot(o.all)||o.all)for(id in t.pauseAnimate(!1),o)"all"!=id&&(o[id]||t.pauseAnimate(!0,id));else for(id in t.pauseAnimate(!0),o)"all"!=id&&o[id]&&t.pauseAnimate(!1,id);else t.pauseAnimate(!1);"Sprite"==t.type&&(t.paused=!0)}},300);else{if(zim.pauseOnBlur)for(var e=0;e<zim.pauseOnBlur.length;e++){var t=zim.pauseOnBlur[e];t.pauseOnBlurPaused=t.paused,t.pause(!0)}zim.pauseAnimateOnBlur&&zim.animatedObjects&&zim.pauseAnimate(!0,"pauseOnBlur")}})}),zim=function(m){return m.ZIMON={stringify:function(i,a){if(z_d("83.39"),!zot(i)){if(ZIMONON)return function o(n,e,t){if(zot(n))return;{var r;Array.isArray(n)?m.loop(n,function(e,t){o(e,n,t)}):n.constructor=={}.constructor?m.loop(n,function(e,t){o(t,n,e)}):n.type?(r={zimon:n.type},n.arguments&&(r.args=Array.prototype.slice.call(n.arguments),o(r.args)),"series"==n.type&&(r.args=Array.prototype.slice.call(n.array),o(r.args)),a&&a[n.type]&&a[n.type].props&&(r.props=[],m.loop(a[n.type].props,function(e){r.props.push(n[e])})),e?e[t]=r:i=r):"string"!=typeof n&&"number"!=typeof n&&"boolean"!=typeof n&&null!==n&&zon&&zogy("ZIMON - potentially bad JSON value"+n)}}(i=m.copy(i)),JSON.stringify({obj:i,key:a,zimon:1,info:"https://zimjs.com/zimon/"});zon&&zogy("ZIMON - set ZIMONON=true before using ZIMON.stringify()")}},parse:function(e,c){if(z_d("83.39"),!zot(e)){var e=JSON.parse(e),u=e.obj,c=e.key;return function o(n,e,t){if(zot(n))return;{function r(t){try{return Function("return("+t+")")()}catch(e){return zon&&zogy("ZIMON - bad function scope or name: "+t),null}}var i,a,l,s;Array.isArray(n)?m.loop(n,function(e,t){o(e,n,t)}):zot(n.zimon)&&n.constructor=={}.constructor?m.loop(n,function(e,t){o(t,n,e)}):n.zimon&&(i=n.zimon,l="",c&&(c[i]&&c[i].scope?l=c[i].scope+".":c.scope&&(l=c.scope+".")),a=r(l+i),zot(l=n.args)&&(l=[]),o(l),s="series"==n.type?m.series(l):a?new(a.bind.apply(a,[null].concat(Array.prototype.slice.call(l)))):null,e?e[t]=s:u=s,c&&c[i]&&c[i].props&&s&&m.loop(c[i].props,function(e,t){zot(n.props[t])||(s[e]=n.props[t])}))}}(u),u}}},m.Wonder=function(o,n,r,i,e){var t,a,l,s,c,u,d,h,g;if(t=zob(m.Wonder,arguments,"wid, client, app, notes, server",this))return t;function p(){0<l.length&&(m.async(e+"?wonder="+JSON.stringify(l)),l=[],c++)}function f(e,t){if(!zot(e))return!a[t+"sOff"][e];zog("zim.Wonder "+t+" - please provide a keyword")}z_d("82"),zot(o)?zog("zim.Wonder() - please provide Wonder ID (see https://zimjs.com/wonder/)"):(zot(e)&&(e="https://wonder.zimjs.org/wonder"),a=this,zot(m.wonderSession)&&(m.wonderSession="W"+m.rand(1e5,999999)),l=[],s=setInterval(p,1e3),c=0,d=setInterval(function(){28<c&&(l.push({id:o,c:n,a:r,n:i,k:u,t:"e",v:"frequency max - terminated",s:m.wonderSession}),zog("zim.Wonder() - frequency max - terminated"),a.dispose()),c=0},3e4),this.countsOff={},this.timesOff={},this.ordersOff={},this.count=function(e){f(e,"count")&&(u=e,l.push({id:o,c:n,a:r,n:i,k:e,t:"c",v:1,s:m.wonderSession}))},h={},this.timeStart=function(e){f(e,"time")&&(a.timeEnd(e),h[u=e]=(new Date).getTime())},g={},this.timePause=function(e){f(e,"time")&&(g[e]||(g[e]=(new Date).getTime()))},this.timeUnpause=function(e){var t;f(e,"time")&&g[e]&&(t=(new Date).getTime()-g[e],h[e]&&(h[e]+=t),delete g[e])},this.timeEnd=function(e){var t;f(e,"time")&&h[e]&&(t=g[e]||(new Date).getTime(),t=Math.round((t-h[e])/1e3),delete g[e],delete h[e],l.push({id:o,c:n,a:r,n:i,k:e,t:"t",v:t,s:m.wonderSession}))},this.order=function(e,t){f(e,"order")&&(u=e,zot(t)?zog("zim.Wonder order() - please provide an item"):l.push({id:o,c:n,a:r,n:i,k:e,t:"o",v:t,s:m.wonderSession}))},this.countOff=function(e){a.countsOff[e]=1},this.countOn=function(e){delete a.countOff[e]},this.timeOff=function(e){a.timesOff[e]=1},this.timeOn=function(e){delete a.timesOff[e]},this.orderOff=function(e){a.ordersOff[e]=1},this.orderOn=function(e){delete a.ordersOff[e]},this.dispose=function(e,t,o){return p(),clearInterval(s),clearInterval(d),!0})},m.VERSION="cat/04/zim",m.getLatestVersions=function(t){z_d("82.2");m.async("https://zimjs.com/live/getLatestVersions.php",function(e){t(JSON.parse(e))},"returnLatestVersions")},m.PWA=function(t,e,o,n,r,i,a){var l,s;if(l=zob(m.PWA,arguments,"call, label, backgroundColor, color, backdropColor, pane, noScale",this))return l;z_d("82.4"),this.cjsEventDispatcher_constructor(),this.type="PWA";var c=this;function u(){this.pane=s=i.show(),s.on("close",function(){t&&t.constructor===Function&&t(),c.scaleEvent&&e.off("resize",c.scaleEvent),c.dispatchEvent("ready")});var e=e||zimDefaultFrame;e&&!a&&(s.scaleTo(e.stage,105).center(),"full"!=e.scaling&&"tag"!=e.scaling||(c.scaleEvent=e.on("resize",function(){s.scaleTo(e.stage,105).center()})),e.stage.update())}zot(e)&&(e=new m.Label({text:"Please add to home screen as an app",align:LEFT,lineHeight:44,color:n})),zot(o)&&(o=m.yellow),zot(i)&&((i=new m.Pane({width:1200,height:230,label:e,backgroundColor:o,backdropColor:r})).label.align=LEFT,i.label.center(),i.label.mov(40),(new m.Shape).s(dark).ss(3,1,0,3).p("AAAj0IAAFJAA8hoIBuAAIAAFdIlTAAIAAldIBuAA").sca(1.6).center(i).mov(-i.label.width/2-20,-10),(new m.Shape).s(dark).ss(3,1,0,3).p("AhGAlIBGhGIBHBG").sca(1.6).center(i).mov(-i.label.width/2-20,-48)),m.mobile()&&!(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://"))?u():(t&&t.constructor===Function&&t(),setTimeout(function(){c.dispatchEvent("ready")},20)),this.show=function(){return u(),this}},m.extend(m.PWA,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),m}(zim||{});window.zns||zimplify();